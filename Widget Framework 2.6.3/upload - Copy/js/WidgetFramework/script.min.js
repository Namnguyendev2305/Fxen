!function(e,t,o,r){XenForo.WidgetFramework_Tabs=function(e){var t=e.find(".widget-panes > ul > li:first-child").height();e.find(".widget-tab > .loading-indicator").css("min-height",t+"px")},XenForo.WidgetFramework_WidgetRenderer_Threads_ListCompactMore=function(t){var o=t.children("a"),r=o.data("url");if(r){var i=t.data("selector");if(i){var a=t.parents(i);if(1===a.length){t.show();var n=function(){t.hide()};o.click(function(t){t.preventDefault();var o=r;r="",XenForo.ajax(o,{},function(t){if(XenForo.hasResponseError(t)||!XenForo.hasTemplateHtml(t))return n(),!1;new XenForo.ExtLoader(t,function(t){var o=e(t.templateHtml);if(o.is(i)){var s=a.children("ol");o.children("ol").children("li").each(function(){e(this).xfInsert("appendTo",s)});var d=o.find(".WidgetFramework_WidgetRenderer_Threads_ListCompactMore > a").data("url");d?r=d:n()}else n()})})})}}}},XenForo.WidgetFramework_WidgetRenderer_Threads_LoadMore=function(e){this.__construct(e)},XenForo.WidgetFramework_WidgetRenderer_Threads_LoadMore.prototype={__construct:function(o){this.$container=o,this.loadMoreUrl=o.data("loadMoreUrl"),this.loadMoreUrl&&(this.contentSeletor=o.data("contentSelector"),this.contentSeletor&&(this.times=parseInt(o.data("times")),this.pageNavSelector=o.data("pageNavSelector"),this.pageNavSelector||(this.pageNavSelector=".PageNav"),this.$detachedPageNav=null,this.$window=e(t),this.xhr=null,this.onScrollRef=e.context(this,"onScroll"),this.$window.on("scroll",this.onScrollRef),this.onResize(),this.onResizeRef=e.context(this,"onResize"),this.$window.on("resize",this.onResizeRef),this.onScroll()))},onResize:function(){this._calculateThreshold()},onScroll:function(){var e=this.$window.scrollTop();e>0&&e>this.threshold&&this.triggerAjaxLoad()},triggerAjaxLoad:function(){if(null===this.xhr){if(!this.loadMoreUrl||0===this.times)return this._deactivate();this.$detachedPageNav=this.$container.find(this.pageNavSelector).detach(),this.xhr=XenForo.ajax(this.loadMoreUrl,{},e.context(this,"onAjaxLoadSuccess"))}},onAjaxLoadSuccess:function(t){var o=this,r=function(){o.xhr=null},i=function(){o._deactivate(),r()},a=function(){o._calculateThreshold(),r()},n=e.context(o,"_calculateThreshold");if(this.loadMoreUrl="",this.times>0&&this.times--,XenForo.hasResponseError(t)||!XenForo.hasTemplateHtml(t))return this.$detachedPageNav&&this.$detachedPageNav.length>0&&(e(this.$detachedPageNav.get(0)).xfInsert("appendTo",this.$container,"show"),this.$detachedPageNav=null),i();new XenForo.ExtLoader(t,function(t){var r=e("<div />").html(t.templateHtml).find(o.contentSeletor);return 0===r.length?i():(o.loadMoreUrl=r.data("loadMoreUrl"),r.children().each(function(){var t=e(this);t.find("img").one("load",n),t.appendTo(o.$container).xfActivate()}),a())})},_calculateThreshold:function(){if(!this.loadMoreUrl||0===this.times)return this._deactivate();var e=this.$container.offset().top,t=this.$container.height(),o=this.$window.height();this.threshold=e+t-2*o},_deactivate:function(){this.loadMoreUrl="",this.times=0,this.$window.off("scroll",this.onScrollRef),this.$window.off("resize",this.onResizeRef)}},XenForo.register(".WidgetFramework_WidgetRenderer_ProfilePosts form.statusPoster","XenForo.ProfilePoster"),XenForo.register(".WidgetFramework_WidgetRenderer_RecentStatus form.statusPoster","XenForo.ProfilePoster"),XenForo.register(".widget-tabs","XenForo.WidgetFramework_Tabs"),XenForo.register(".WidgetFramework_WidgetRenderer_Threads_ListCompactMore","XenForo.WidgetFramework_WidgetRenderer_Threads_ListCompactMore"),XenForo.register(".WidgetFramework_WidgetRenderer_Threads[data-load-more-url]","XenForo.WidgetFramework_WidgetRenderer_Threads_LoadMore")}(jQuery,this,document);
//# sourceMappingURL=script.min.js.map