<?xml version="1.0" encoding="utf-8"?>
<templates>
  <template type="admin" title="activity_summary_options_xa_ams_latest_articles" version_id="2020034" version_string="2.2.0 Beta 4"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('maximum_entries') }}" />

<xf:selectrow name="options[category_ids][]" value="{{ $options.category_ids ?: 0 }}" multiple="multiple" size="7"
	label="{{ phrase('xa_ams_category_limit') }}">

	<xf:option value="0">{{ phrase('all_categories') }}</xf:option>
	<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}">
			{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }}{$treeEntry.record.title}
		</xf:option>
	</xf:foreach>
</xf:selectrow>

<xf:radiorow name="options[condition]" label="{{ phrase('xa_ams_include_articles') }}" value="{$options.condition}">
	<xf:option value="last_update">{{ phrase('updated_since_last_email') }}</xf:option>
	<xf:option value="publish_date">{{ phrase('created_since_last_email') }}</xf:option>
</xf:radiorow>

<xf:checkboxrow label="{{ phrase('xa_ams_only_include_articles_with') }}..." rowtype="noColon">
	<xf:option name="options[has_cover_image]" selected="{$options.has_cover_image}">
		<xf:label>{{ phrase('xa_ams_a_cover_image_or_content_image') }}</xf:label>
	</xf:option>
	<xf:option label="{{ phrase('xa_ams_at_least_x_comments') }}" selected="$options.min_comments !== null">
		<xf:numberbox name="options[min_comments]" value="{{ $options.min_comments ?: 0 }}" />
	</xf:option>

	<xf:option label="{{ phrase('reaction_score_at_least_x') }}" selected="$options.min_reaction_score !== null">
		<xf:numberbox name="options[min_reaction_score]" value="{{ $options.min_reaction_score ?: 0 }}" />
	</xf:option>
</xf:checkboxrow>

<xf:formrow rowtype="input"
	label="{{ phrase('sort') }}">

	<div class="inputPair">
		<xf:select name="options[order]" value="{$options.order}">
			<xf:options source="{$sortOrders}" />
		</xf:select>
		<xf:select name="options[direction]" value="{$options.direction}">
			<xf:option value="ASC">{{ phrase('ascending') }}</xf:option>
			<xf:option value="DESC">{{ phrase('descending') }}</xf:option>
		</xf:select>
	</div>
</xf:formrow>

<hr class="formRowSep" />

<xf:checkboxrow label="{{ phrase('xa_ams_email_display_options') }}..." rowtype="noColon">
	<xf:option name="options[display_header]" selected="{$options.display_header}">
		<xf:label>{{ phrase('xa_ams_display_header') }}</xf:label>
	</xf:option>
	<xf:option name="options[display_attribution]" selected="{$options.display_attribution}"> 
		<xf:label>{{ phrase('xa_ams_display_attribution') }}</xf:label>
	</xf:option>
	<xf:option name="options[display_description]" selected="{$options.display_description}"> 
		<xf:label>{{ phrase('xa_ams_display_description') }}</xf:label>
	</xf:option>
	<xf:option name="options[display_footer]" selected="{$options.display_footer}"> 
		<xf:label>{{ phrase('xa_ams_display_footer') }}</xf:label>
	</xf:option>
	<xf:option name="options[display_footer_opposite]" selected="{$options.display_footer_opposite}"> 
		<xf:label>{{ phrase('xa_ams_display_footer_opposite') }}</xf:label>
	</xf:option>
</xf:checkboxrow>

<xf:radiorow name="options[snippet_type]" label="{{ phrase('xa_ams_email_snippet_type') }}" value="{$options.snippet_type}">
	<xf:option value="rich_text">{{ phrase('xa_ams_rich_text_snippet') }}</xf:option>
	<xf:option value="plain_text">{{ phrase('xa_ams_plain_text_snippet') }}</xf:option>
</xf:radiorow>]]></template>
  <template type="admin" title="activity_summary_options_xa_ams_latest_comments" version_id="2020031" version_string="2.2.0 Beta 1"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('maximum_entries') }}" />

<xf:selectrow name="options[category_ids][]" value="{{ $options.category_ids ?: 0 }}" multiple="multiple" size="7"
	label="{{ phrase('xa_ams_category_limit') }}">

	<xf:option value="0">{{ phrase('all_categories') }}</xf:option>
	<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}">
			{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }}{$treeEntry.record.title}
		</xf:option>
	</xf:foreach>
</xf:selectrow>

<xf:checkboxrow label="{{ phrase('xa_ams_only_include_comments_with') }}..." rowtype="noColon">
	<xf:option label="{{ phrase('reaction_score_at_least_x') }}" selected="$options.min_reaction_score !== null">
		<xf:numberbox name="options[min_reaction_score]" value="{{ $options.min_reaction_score ?: 0 }}" />
	</xf:option>
</xf:checkboxrow>

<xf:formrow rowtype="input"
	label="{{ phrase('sort') }}">

	<div class="inputPair">
		<xf:select name="options[order]" value="{$options.order}">
			<xf:options source="{$sortOrders}" />
		</xf:select>
		<xf:select name="options[direction]" value="{$options.direction}">
			<xf:option value="ASC">{{ phrase('ascending') }}</xf:option>
			<xf:option value="DESC">{{ phrase('descending') }}</xf:option>
		</xf:select>
	</div>
</xf:formrow>]]></template>
  <template type="admin" title="activity_summary_options_xa_ams_latest_reviews" version_id="2020031" version_string="2.2.0 Beta 1"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('maximum_entries') }}" />

<xf:selectrow name="options[category_ids][]" value="{{ $options.category_ids ?: 0 }}" multiple="multiple" size="7"
	label="{{ phrase('xa_ams_category_limit') }}">

	<xf:option value="0">{{ phrase('all_categories') }}</xf:option>
	<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}">
			{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }}{$treeEntry.record.title}
		</xf:option>
	</xf:foreach>
</xf:selectrow>

<xf:checkboxrow label="{{ phrase('xa_ams_only_include_reviews_with') }}..." rowtype="noColon">
	<xf:option label="{{ phrase('reaction_score_at_least_x') }}" selected="$options.min_reaction_score !== null">
		<xf:numberbox name="options[min_reaction_score]" value="{{ $options.min_reaction_score ?: 0 }}" />
	</xf:option>
</xf:checkboxrow>

<xf:formrow rowtype="input"
	label="{{ phrase('sort') }}">

	<div class="inputPair">
		<xf:select name="options[order]" value="{$options.order}">
			<xf:options source="{$sortOrders}" />
		</xf:select>
		<xf:select name="options[direction]" value="{$options.direction}">
			<xf:option value="ASC">{{ phrase('ascending') }}</xf:option>
			<xf:option value="DESC">{{ phrase('descending') }}</xf:option>
		</xf:select>
	</div>
</xf:formrow>]]></template>
  <template type="admin" title="option_template_xaAmsArticleDeleteThreadAction" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:formrow
	label="{$option.title}"
	hint="{$hintHtml}"
	html="{$listedHtml}">

	<xf:radio name="{$inputName}[action]" value="{$option.option_value.action}">
		<xf:option value="">{{ phrase('xa_ams_no_change') }}</xf:option>
		<xf:option value="delete">{{ phrase('delete_thread') }}</xf:option>
		<xf:option value="close">{{ phrase('close_thread') }}</xf:option>
	</xf:radio>
	<div class="formRow-explain">{$explainHtml}</div>

	<div class="u-inputSpacer">
		<xf:checkbox>
			<xf:option name="{$inputName}[update_title]" selected="{$option.option_value.update_title}"
				label="{{ phrase('xa_ams_update_thread_title_on_article_deletion:') }}">

				<xf:textbox name="{$inputName}[title_template]" value="{$option.option_value.title_template}" />
			</xf:option>

			<xf:option name="{$inputName}[add_post]" selected="{$option.option_value.add_post}"
				label="{{ phrase('xa_ams_automatically_post_in_article_thread_on_article_deletion') }}"
				hint="{{ phrase('xa_ams_if_selected_post_made_automatically_explaining_article_unavailable') }}" />
		</xf:checkbox>
	</div>
</xf:formrow>]]></template>
  <template type="admin" title="option_template_xaAmsDefaultMapMarkerIconUrl" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:assetuploadrow name="{$inputName}" value="{$option.option_value}" asset="xa_ams_map_markers" 
	label="{$option.title}" 
	hint="{$hintHtml}"				   
	explain="{$explainHtml}"
	html="{$listedHtml}" />]]></template>
  <template type="admin" title="style_property_template_xaAmsArticleViewLayoutElements" version_id="2022170" version_string="2.2.21"><![CDATA[<xf:checkboxrow rowclass="{$rowClass}"
	label="{$titleHtml}"
	hint="{$hintHtml}"
	explain="{$property.description}">

	<xf:option name="{$formBaseKey}[category]" selected="{$property.property_value.category}">
		{{ phrase('category') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[share_this_article]" selected="{$property.property_value.share_this_article}">
		{{ phrase('xa_ams_share_this_article') }}
	</xf:option>	
	<xf:option name="{$formBaseKey}[article_read_time]" selected="{$property.property_value.article_read_time}">
		{{ phrase('xa_ams_article_read_time') }}
	</xf:option>	
	<xf:option name="{$formBaseKey}[author_rating]" selected="{$property.property_value.author_rating}">
		{{ phrase('xa_ams_author_rating') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[rating_avg]" selected="{$property.property_value.rating_avg}">
		{{ phrase('xa_ams_avg_rating') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[view_count]" selected="{$property.property_value.view_count}">
		{{ phrase('views') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[reaction_score]" selected="{$property.property_value.reaction_score}">
		{{ phrase('reaction_score') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[comment_count]" selected="{$property.property_value.comment_count}">
		{{ phrase('xa_ams_comments') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[review_count]" selected="{$property.property_value.review_count}">
		{{ phrase('xa_ams_reviews') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[cover_image]" selected="{$property.property_value.cover_image}">
		{{ phrase('xa_ams_cover_image') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[preview_snippet]" selected="{$property.property_value.preview_snippet}">
		{{ phrase('xa_ams_article_preview_snippet') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[custom_fields]" selected="{$property.property_value.custom_fields}">
		{{ phrase('custom_fields') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[tags]" selected="{$property.property_value.tags}">
		{{ phrase('tags') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[view_article_button]" selected="{$property.property_value.view_article_button}">
		{{ phrase('xa_ams_view_article_button') }}
	</xf:option>
</xf:checkboxrow>]]></template>
  <template type="admin" title="style_property_template_xaAmsCarouselElements" version_id="2022170" version_string="2.2.21"><![CDATA[<xf:checkboxrow rowclass="{$rowClass}"
	label="{$titleHtml}"
	hint="{$hintHtml}"
	explain="{$property.description}">

	<xf:option name="{$formBaseKey}[category]" selected="{$property.property_value.category}">
		{{ phrase('category') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[share_this_article]" selected="{$property.property_value.share_this_article}">
		{{ phrase('xa_ams_share_this_article') }}
	</xf:option>	
	<xf:option name="{$formBaseKey}[preview_snippet]" selected="{$property.property_value.preview_snippet}">
		{{ phrase('xa_ams_article_preview_snippet') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[custom_fields]" selected="{$property.property_value.custom_fields}">
		{{ phrase('custom_fields') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[article_read_time]" selected="{$property.property_value.article_read_time}">
		{{ phrase('xa_ams_article_read_time') }}
	</xf:option>	
	<xf:option name="{$formBaseKey}[author_rating]" selected="{$property.property_value.author_rating}">
		{{ phrase('xa_ams_author_rating') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[rating_avg]" selected="{$property.property_value.rating_avg}">
		{{ phrase('xa_ams_avg_rating') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[view_count]" selected="{$property.property_value.view_count}">
		{{ phrase('views') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[reaction_score]" selected="{$property.property_value.reaction_score}">
		{{ phrase('reaction_score') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[comment_count]" selected="{$property.property_value.comment_count}">
		{{ phrase('xa_ams_comments') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[review_count]" selected="{$property.property_value.review_count}">
		{{ phrase('xa_ams_reviews') }}
	</xf:option>
</xf:checkboxrow>]]></template>
  <template type="admin" title="style_property_template_xaAmsCarouselSimpleElements" version_id="2021970" version_string="2.2.19"><![CDATA[<xf:checkboxrow rowclass="{$rowClass}"
	label="{$titleHtml}"
	hint="{$hintHtml}"
	explain="{$property.description}">

	<xf:option name="{$formBaseKey}[cover_image]" selected="{$property.property_value.cover_image}">
		{{ phrase('xa_ams_cover_image') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[category]" selected="{$property.property_value.category}">
		{{ phrase('category') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[title]" selected="{$property.property_value.title}">
		{{ phrase('title') }}
	</xf:option>	
	<xf:option name="{$formBaseKey}[author_rating]" selected="{$property.property_value.author_rating}">
		{{ phrase('xa_ams_author_rating') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[rating_avg]" selected="{$property.property_value.rating_avg}">
		{{ phrase('xa_ams_avg_rating') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[preview_snippet]" selected="{$property.property_value.preview_snippet}">
		{{ phrase('xa_ams_article_preview_snippet') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[author]" selected="{$property.property_value.author}">
		{{ phrase('author') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[publish_date]" selected="{$property.property_value.publish_date}">
		{{ phrase('xa_ams_publish_date') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[article_read_time]" selected="{$property.property_value.article_read_time}">
		{{ phrase('xa_ams_article_read_time') }}
	</xf:option>	
	<xf:option name="{$formBaseKey}[view_count]" selected="{$property.property_value.view_count}">
		{{ phrase('views') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[reaction_score]" selected="{$property.property_value.reaction_score}">
		{{ phrase('reaction_score') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[comment_count]" selected="{$property.property_value.comment_count}">
		{{ phrase('xa_ams_comments') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[review_count]" selected="{$property.property_value.review_count}">
		{{ phrase('xa_ams_reviews') }}
	</xf:option>
</xf:checkboxrow>]]></template>
  <template type="admin" title="style_property_template_xaAmsGridBlockElements" version_id="2022170" version_string="2.2.21"><![CDATA[<xf:checkboxrow rowclass="{$rowClass}"
	label="{$titleHtml}"
	hint="{$hintHtml}"
	explain="{$property.description}">
		
	<xf:option name="{$formBaseKey}[author_rating]" selected="{$property.property_value.author_rating}">
		{{ phrase('xa_ams_author_rating') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[rating_avg]" selected="{$property.property_value.rating_avg}">
		{{ phrase('xa_ams_avg_rating') }}
	</xf:option>	
	<xf:option name="{$formBaseKey}[username]" selected="{$property.property_value.username}">
		{{ phrase('xa_ams_username') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[publish_date]" selected="{$property.property_value.publish_date}">
		{{ phrase('xa_ams_publish_date') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[article_read_time]" selected="{$property.property_value.article_read_time}">
		{{ phrase('xa_ams_article_read_time') }}
	</xf:option>	
	<xf:option name="{$formBaseKey}[category_title]" selected="{$property.property_value.category_title}">
		{{ phrase('category') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[share_this_article]" selected="{$property.property_value.share_this_article}">
		{{ phrase('xa_ams_share_this_article') }}
	</xf:option>	
</xf:checkboxrow>]]></template>
  <template type="admin" title="style_property_template_xaAmsGridViewLayoutElements" version_id="2022870" version_string="2.2.28"><![CDATA[<xf:checkboxrow rowclass="{$rowClass}"
	label="{$titleHtml}"
	hint="{$hintHtml}"
	explain="{$property.description}">

	<xf:option name="{$formBaseKey}[category]" selected="{$property.property_value.category}">
		{{ phrase('category') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[share_this_article]" selected="{$property.property_value.share_this_article}">
		{{ phrase('xa_ams_share_this_article') }}
	</xf:option>	
	<xf:option name="{$formBaseKey}[article_read_time]" selected="{$property.property_value.article_read_time}">
		{{ phrase('xa_ams_article_read_time') }}
	</xf:option>	
	<xf:option name="{$formBaseKey}[author_rating]" selected="{$property.property_value.author_rating}">
		{{ phrase('xa_ams_author_rating') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[rating_avg]" selected="{$property.property_value.rating_avg}">
		{{ phrase('xa_ams_avg_rating') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[view_count]" selected="{$property.property_value.view_count}">
		{{ phrase('views') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[reaction_score]" selected="{$property.property_value.reaction_score}">
		{{ phrase('reaction_score') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[comment_count]" selected="{$property.property_value.comment_count}">
		{{ phrase('xa_ams_comments') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[review_count]" selected="{$property.property_value.review_count}">
		{{ phrase('xa_ams_reviews') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[preview_snippet]" selected="{$property.property_value.preview_snippet}">
		{{ phrase('xa_ams_article_preview_snippet') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[custom_fields]" selected="{$property.property_value.custom_fields}">
		{{ phrase('custom_fields') }}
	</xf:option>
</xf:checkboxrow>]]></template>
  <template type="admin" title="style_property_template_xaAmsListViewLayoutElements" version_id="2022870" version_string="2.2.28"><![CDATA[<xf:checkboxrow rowclass="{$rowClass}"
	label="{$titleHtml}"
	hint="{$hintHtml}"
	explain="{$property.description}">

	<xf:option name="{$formBaseKey}[cover_image]" selected="{$property.property_value.cover_image}">
		{{ phrase('xa_ams_cover_image_avatar') }}
	</xf:option>		
	<xf:option name="{$formBaseKey}[category]" selected="{$property.property_value.category}">
		{{ phrase('category') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[share_this_article]" selected="{$property.property_value.share_this_article}">
		{{ phrase('xa_ams_share_this_article') }}
	</xf:option>	
	<xf:option name="{$formBaseKey}[article_read_time]" selected="{$property.property_value.article_read_time}">
		{{ phrase('xa_ams_article_read_time') }}
	</xf:option>	
	<xf:option name="{$formBaseKey}[author_rating]" selected="{$property.property_value.author_rating}">
		{{ phrase('xa_ams_author_rating') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[rating_avg]" selected="{$property.property_value.rating_avg}">
		{{ phrase('xa_ams_avg_rating') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[view_count]" selected="{$property.property_value.view_count}">
		{{ phrase('views') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[reaction_score]" selected="{$property.property_value.reaction_score}">
		{{ phrase('reaction_score') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[comment_count]" selected="{$property.property_value.comment_count}">
		{{ phrase('xa_ams_comments') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[review_count]" selected="{$property.property_value.review_count}">
		{{ phrase('xa_ams_reviews') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[preview_snippet]" selected="{$property.property_value.preview_snippet}">
		{{ phrase('xa_ams_article_preview_snippet') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[custom_fields]" selected="{$property.property_value.custom_fields}">
		{{ phrase('custom_fields') }}
	</xf:option>
</xf:checkboxrow>]]></template>
  <template type="admin" title="style_property_template_xaAmsShareThisArticleBlockElements" version_id="2022370" version_string="2.2.23"><![CDATA[<xf:checkboxrow rowclass="{$rowClass}"
	label="{$titleHtml}"
	hint="{$hintHtml}"
	explain="{$property.description}">

	<xf:option name="{$formBaseKey}[share_article_block]" selected="{$property.property_value.share_article_block}">
		{{ phrase('xa_ams_enable_share_this_article_block') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[url_bb_code]" selected="{$property.property_value.url_bb_code}">
		{{ phrase('xa_ams_url_bb_code') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[ams_bb_code]" selected="{$property.property_value.ams_bb_code}">
		{{ phrase('xa_ams_ams_bb_code') }}
	</xf:option>	
</xf:checkboxrow>]]></template>
  <template type="admin" title="style_property_template_xaAmsTileViewLayoutElements" version_id="2022170" version_string="2.2.21"><![CDATA[<xf:checkboxrow rowclass="{$rowClass}"
	label="{$titleHtml}"
	hint="{$hintHtml}"
	explain="{$property.description}">

	<xf:option name="{$formBaseKey}[author_rating]" selected="{$property.property_value.author_rating}">
		{{ phrase('xa_ams_author_rating') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[rating_avg]" selected="{$property.property_value.rating_avg}">
		{{ phrase('xa_ams_avg_rating') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[username]" selected="{$property.property_value.username}">
		{{ phrase('xa_ams_username') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[publish_date]" selected="{$property.property_value.publish_date}">
		{{ phrase('xa_ams_publish_date') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[article_read_time]" selected="{$property.property_value.article_read_time}">
		{{ phrase('xa_ams_article_read_time') }}
	</xf:option>	
	<xf:option name="{$formBaseKey}[category_title]" selected="{$property.property_value.category_title}">
		{{ phrase('category') }}
	</xf:option>
	<xf:option name="{$formBaseKey}[share_this_article]" selected="{$property.property_value.share_this_article}">
		{{ phrase('xa_ams_share_this_article') }}
	</xf:option>	
</xf:checkboxrow>]]></template>
  <template type="admin" title="widget_def_options_xa_ams_article_page_poll" version_id="2011370" version_string="2.1.13"><![CDATA[<hr class="formRowSep" />

<xf:include template="widget_def_options_poll_base">
	<xf:set var="$contentLink">{{ link_type('public', 'ams/page', $content) }}</xf:set>
	<xf:set var="$contentTitle">{$content.title}</xf:set>
</xf:include>]]></template>
  <template type="admin" title="widget_def_options_xa_ams_article_poll" version_id="2000170" version_string="2.0.1"><![CDATA[<hr class="formRowSep" />

<xf:include template="widget_def_options_poll_base">
	<xf:set var="$contentLink">{{ link_type('public', 'ams', $content) }}</xf:set>
	<xf:set var="$contentTitle">{$content.title}</xf:set>
</xf:include>]]></template>
  <template type="admin" title="widget_def_options_xa_ams_articles_map" version_id="2022570" version_string="2.2.25"><![CDATA[<hr class="formRowSep" />

<xf:selectrow name="options[order]" value="{$options.order}" 
	label="{{ phrase('sort_order') }}"
	explain="{{ phrase('xa_ams_sort_order_explain') }}">

	<xf:option value="publish_date">{{ phrase('xa_ams_publish_date') }}</xf:option>
	<xf:option value="last_update">{{ phrase('xa_ams_last_update') }}</xf:option>
	<xf:option value="rating_weighted">{{ phrase('rating') }}</xf:option>
	<xf:option value="reaction_score">{{ phrase('reaction_score') }}</xf:option>
	<xf:option value="review_count">{{ phrase('xa_ams_reviews') }}</xf:option>
	<xf:option value="view_count">{{ phrase('views') }}</xf:option>
</xf:selectrow>

<xf:checkboxrow>
	<xf:option name="options[featured_articles_only]" value="1" selected="{$options.featured_articles_only}"
		label="{{ phrase('xa_ams_featured_articles_only') }}"
		hint="{{ phrase('xa_ams_if_enabled_only_featured_articles_will_be_fetched') }}" />
</xf:checkboxrow>

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('xa_ams_marker_limit') }}" />

<xf:numberboxrow name="options[container_height]" value="{$options.container_height}" min="200" 
	label="{{ phrase('xa_ams_container_height') }}" />

<xf:textboxrow name="options[block_title_link]" value="{$options.block_title_link}"
	label="{{ phrase('xa_ams_block_title_link') }}"
	explain="{{ phrase('xa_ams_block_title_link_link_explain') }}" />

<xf:selectrow name="options[article_prefix_ids][]" size="7" multiple="true" value="{{ $options.article_prefix_ids ?: 0 }}"
	label="{{ phrase('prefixes') }}">

	<xf:option value="0">{{ phrase('(any)') }}</xf:option>
	<xf:foreach loop="$prefixGroups" key="$groupId" value="$prefixGroup" if="{{ count($prefixesGrouped.{$groupId}) > 0 }}">
		<xf:optgroup label="{{ prefix_group('ams_article', $groupId) }}">
			<xf:foreach loop="{$prefixesGrouped.{$groupId}}" key="$prefixId" value="$prefix">
				<xf:option value="{$prefixId}">{{ prefix_title('ams_article', $prefixId) }}</xf:option>
			</xf:foreach>
		</xf:optgroup>
	</xf:foreach>
</xf:selectrow>

<xf:selectrow name="options[article_category_ids][]" value="{{ $options.article_category_ids ?: 0 }}" multiple="multiple" size="7"
	label="{{ phrase('xa_ams_category_limit') }}">

	<xf:option value="0">{{ phrase('all_categories') }}</xf:option>
	<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}">
			{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }}{$treeEntry.record.title}
		</xf:option>
	</xf:foreach>
</xf:selectrow>]]></template>
  <template type="admin" title="widget_def_options_xa_ams_featured_articles" version_id="2022470" version_string="2.2.24"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('maximum_entries') }}" />

<xf:radiorow name="options[style]" value="{{ $options.style ?: 'simple' }}"
	label="{{ phrase('display_style') }}"
	explain="{{ phrase('xa_ams_widget_article_display_style_explain') }}">

	<xf:option value="simple"
		label="{{ phrase('simple') }}"
		hint="{{ phrase('widget_display_simple_explain') }}" />
	<xf:option value="simple_carousel"
		label="{{ phrase('simple') }} - {{ phrase('xa_ams_carousel') }}"
		hint="{{ phrase('xa_ams_simple_carousel_explain') }}" />		
	<xf:option value="carousel"
		label="{{ phrase('full') }} - {{ phrase('xa_ams_carousel') }}"
		hint="{{ phrase('xa_ams_carousel_explain') }}" />
	<xf:option value="featured_grid"
		label="{{ phrase('full') }} - {{ phrase('xa_ams_grid_block') }}"
		hint="{{ phrase('xa_ams_articles_grid_block_explain') }}" />	
	<xf:option value="list_view"
		label="{{ phrase('full') }} - {{ phrase('xa_ams_list_view_layout') }}"
		hint="{{ phrase('xa_ams_full_size_view_displaying_as_standard_article_list_using_list_view_layout_type') }}" />
	<xf:option value="grid_view"
		label="{{ phrase('full') }} - {{ phrase('xa_ams_grid_view_layout') }}"
		hint="{{ phrase('xa_ams_full_size_view_displaying_as_standard_article_list_using_grid_view_layout_type') }}" />
	<xf:option value="tile_view"
		label="{{ phrase('full') }} - {{ phrase('xa_ams_tile_view_layout') }}"
		hint="{{ phrase('xa_ams_full_size_view_displaying_as_standard_article_list_using_tile_view_layout_type') }}" />		
	<xf:option value="article_view"
		label="{{ phrase('full') }} - {{ phrase('xa_ams_article_view_layout') }}"
		hint="{{ phrase('xa_ams_full_size_view_displaying_as_standard_article_list_using_article_view_layout_type') }}" />
</xf:radiorow>

<xf:checkboxrow>
	<xf:option name="options[require_cover_or_content_image]" value="1" selected="{$options.require_cover_or_content_image}"
		label="{{ phrase('xa_ams_require_cover_or_content_image') }}"
		hint="{{ phrase('xa_ams_require_cover_or_content_image_explain') }}" />
</xf:checkboxrow>

<xf:tokeninputrow name="options[tags]" value="{$options.tags}"
	href="{{ link_type('public', 'misc/tag-auto-complete') }}"
	label="{{ phrase('tags') }}" 
	explain="{{ phrase('xa_ams_widget_tags_explain') }}" />

<xf:selectrow name="options[article_prefix_ids][]" size="7" multiple="true" value="{{ $options.article_prefix_ids ?: 0 }}"
	label="{{ phrase('prefixes') }}">

	<xf:option value="0">{{ phrase('(any)') }}</xf:option>
	<xf:foreach loop="$prefixGroups" key="$groupId" value="$prefixGroup" if="{{ count($prefixesGrouped.{$groupId}) > 0 }}">
		<xf:optgroup label="{{ prefix_group('ams_article', $groupId) }}">
			<xf:foreach loop="{$prefixesGrouped.{$groupId}}" key="$prefixId" value="$prefix">
				<xf:option value="{$prefixId}">{{ prefix_title('ams_article', $prefixId) }}</xf:option>
			</xf:foreach>
		</xf:optgroup>
	</xf:foreach>
</xf:selectrow>

<xf:selectrow name="options[article_category_ids][]" value="{{ $options.article_category_ids ?: 0 }}" multiple="multiple" size="7"
	label="{{ phrase('xa_ams_category_limit') }}">

	<xf:option value="0">{{ phrase('xa_ams_all_categories_or_contextual_category') }}</xf:option>
	<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}">
			{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }}{$treeEntry.record.title}
		</xf:option>
	</xf:foreach>
	<xf:explain>{{ phrase('xa_ams_all_categories_or_contextual_explain') }}</xf:explain>	
</xf:selectrow>]]></template>
  <template type="admin" title="widget_def_options_xa_ams_featured_series" version_id="2022470" version_string="2.2.24"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('xa_ams_maximum_series') }}" 
	explain="{{ phrase('xa_ams_maximum_series_explain') }}" />

<xf:numberboxrow name="options[article_count]" value="{$options.article_count}" min="0"
	label="{{ phrase('xa_ams_minimum_series_article_count') }}"
	explain="{{ phrase('xa_ams_minimum_series_article_count_explain') }}" />

<xf:radiorow name="options[style]" value="{{ $options.style ?: 'simple' }}"
	label="{{ phrase('display_style') }}">

	<xf:option value="simple"
		label="{{ phrase('simple') }}"
		hint="{{ phrase('widget_display_simple_explain') }}" />
	<xf:option value="carousel"
		label="{{ phrase('full') }} - {{ phrase('xa_ams_carousel') }}"
		hint="{{ phrase('xa_ams_featured_series_carousel_explain') }}" />
	<xf:option value="list_view"
		label="{{ phrase('full') }} - {{ phrase('xa_ams_list_view_layout') }}"
		hint="{{ phrase('xa_ams_full_size_view_displaying_as_standard_series_list') }}" />
</xf:radiorow>

<xf:checkboxrow>
	<xf:option name="options[require_series_icon]" value="1" selected="{$options.require_series_icon}"
		label="{{ phrase('xa_ams_require_series_icon') }}"
		hint="{{ phrase('xa_ams_require_series_icon_explain') }}" />
</xf:checkboxrow>

<xf:tokeninputrow name="options[tags]" value="{$options.tags}"
	href="{{ link_type('public', 'misc/tag-auto-complete') }}"
	label="{{ phrase('tags') }}" 
	explain="{{ phrase('xa_ams_widget_tags_explain') }}" />]]></template>
  <template type="admin" title="widget_def_options_xa_ams_latest_articles" version_id="2022570" version_string="2.2.25"><![CDATA[<hr class="formRowSep" />

<xf:selectrow name="options[order]" value="{$options.order}" 
	label="{{ phrase('sort_order') }}"
	explain="{{ phrase('xa_ams_sort_order_explain') }}">

	<xf:option value="publish_date">{{ phrase('xa_ams_publish_date') }}</xf:option>
	<xf:option value="last_update">{{ phrase('xa_ams_last_update') }}</xf:option>
	<xf:option value="rating_weighted">{{ phrase('rating') }}</xf:option>
	<xf:option value="reaction_score">{{ phrase('reaction_score') }}</xf:option>
	<xf:option value="view_count">{{ phrase('views') }}</xf:option>
	<xf:option value="random">{{ phrase('xa_ams_random') }}</xf:option>
</xf:selectrow>

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('maximum_entries') }}" />

<xf:checkboxrow>
	<xf:option name="options[exclude_featured]" value="1" selected="{$options.exclude_featured}"
		label="{{ phrase('xa_ams_exclude_featured_articles') }}"
		hint="{{ phrase('xa_ams_exclude_featured_articles_explain') }}" />
</xf:checkboxrow>

<xf:numberboxrow name="options[cutOffDays]" value="{$options.cutOffDays}" min="0"
	label="{{ phrase('xa_ams_cut_off_days') }}"
	explain="{{ phrase('xa_ams_latest_articles_cut_off_days_limit_explain') }}" />

<xf:radiorow name="options[style]" value="{{ $options.style ?: 'simple' }}"
	label="{{ phrase('display_style') }}"
	explain="{{ phrase('xa_ams_widget_article_display_style_explain') }}">

	<xf:option value="simple"
		label="{{ phrase('simple') }}"
		hint="{{ phrase('widget_display_simple_explain') }}" />
	<xf:option value="simple_carousel"
		label="{{ phrase('simple') }} - {{ phrase('xa_ams_carousel') }}"
		hint="{{ phrase('xa_ams_simple_carousel_explain') }}" />	
	<xf:option value="carousel"
		label="{{ phrase('full') }} - {{ phrase('xa_ams_carousel') }}"
		hint="{{ phrase('xa_ams_carousel_explain') }}" />
	<xf:option value="grid"
		label="{{ phrase('full') }} - {{ phrase('xa_ams_grid_block') }}"
		hint="{{ phrase('xa_ams_articles_grid_block_explain') }}" />
	<xf:option value="list_view"
		label="{{ phrase('full') }} - {{ phrase('xa_ams_list_view_layout') }}"
		hint="{{ phrase('xa_ams_full_size_view_displaying_as_standard_article_list_using_list_view_layout_type') }}" />
	<xf:option value="grid_view"
		label="{{ phrase('full') }} - {{ phrase('xa_ams_grid_view_layout') }}"
		hint="{{ phrase('xa_ams_full_size_view_displaying_as_standard_article_list_using_grid_view_layout_type') }}" />	
	<xf:option value="tile_view"
		label="{{ phrase('full') }} - {{ phrase('xa_ams_tile_view_layout') }}"
		hint="{{ phrase('xa_ams_full_size_view_displaying_as_standard_article_list_using_tile_view_layout_type') }}" />		
	<xf:option value="article_view"
		label="{{ phrase('full') }} - {{ phrase('xa_ams_article_view_layout') }}"
		hint="{{ phrase('xa_ams_full_size_view_displaying_as_standard_article_list_using_article_view_layout_type') }}" />
</xf:radiorow>

<xf:checkboxrow>
	<xf:option name="options[require_cover_or_content_image]" value="1" selected="{$options.require_cover_or_content_image}"
		label="{{ phrase('xa_ams_require_cover_or_content_image') }}"
		hint="{{ phrase('xa_ams_require_cover_or_content_image_explain') }}" />
</xf:checkboxrow>

<xf:textboxrow name="options[block_title_link]" value="{$options.block_title_link}"
	label="{{ phrase('xa_ams_block_title_link') }}"
	explain="{{ phrase('xa_ams_block_title_link_link_explain') }}" />

<hr class="formRowSep" />

<xf:tokeninputrow name="options[tags]" value="{$options.tags}"
	href="{{ link_type('public', 'misc/tag-auto-complete') }}"
	label="{{ phrase('tags') }}" 
	explain="{{ phrase('xa_ams_widget_tags_explain') }}" />

<xf:selectrow name="options[article_prefix_ids][]" size="7" multiple="true" value="{{ $options.article_prefix_ids ?: 0 }}"
	label="{{ phrase('prefixes') }}">

	<xf:option value="0">{{ phrase('(any)') }}</xf:option>
	<xf:foreach loop="$prefixGroups" key="$groupId" value="$prefixGroup" if="{{ count($prefixesGrouped.{$groupId}) > 0 }}">
		<xf:optgroup label="{{ prefix_group('ams_article', $groupId) }}">
			<xf:foreach loop="{$prefixesGrouped.{$groupId}}" key="$prefixId" value="$prefix">
				<xf:option value="{$prefixId}">{{ prefix_title('ams_article', $prefixId) }}</xf:option>
			</xf:foreach>
		</xf:optgroup>
	</xf:foreach>
</xf:selectrow>

<xf:selectrow name="options[article_category_ids][]" value="{{ $options.article_category_ids ?: 0 }}" multiple="multiple" size="7"
	label="{{ phrase('xa_ams_category_limit') }}">

	<xf:option value="0">{{ phrase('xa_ams_all_categories_or_contextual_category') }}</xf:option>
	<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}">
			{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }}{$treeEntry.record.title}
		</xf:option>
	</xf:foreach>
	<xf:explain>{{ phrase('xa_ams_all_categories_or_contextual_explain') }}</xf:explain>	
</xf:selectrow>]]></template>
  <template type="admin" title="widget_def_options_xa_ams_latest_comments" version_id="2010070" version_string="2.1.0"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('xa_ams_latest_comments_limit') }}"
	explain="{{ phrase('xa_ams_latest_comments_limit_explain') }}" />

<xf:selectrow name="options[article_category_ids][]" value="{{ $options.article_category_ids ?: 0 }}" multiple="multiple" size="7"
	label="{{ phrase('xa_ams_category_limit') }}">

	<xf:option value="0">{{ phrase('xa_ams_all_categories_or_contextual_category') }}</xf:option>
	<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}">
			{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }}{$treeEntry.record.title}
		</xf:option>
	</xf:foreach>
	<xf:explain>{{ phrase('xa_ams_all_categories_or_contextual_explain') }}</xf:explain>
</xf:selectrow>]]></template>
  <template type="admin" title="widget_def_options_xa_ams_latest_reviews" version_id="2010370" version_string="2.1.3"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('xa_ams_latest_reviews_limit') }}"
	explain="{{ phrase('xa_ams_latest_reviews_limit_explain') }}" />

<xf:numberboxrow name="options[cutOffDays]" value="{$options.cutOffDays}" min="0"
	label="{{ phrase('xa_ams_cut_off_days') }}"
	explain="{{ phrase('xa_ams_latest_reviews_cut_off_days_limit_explain') }}" />

<xf:selectrow name="options[article_category_ids][]" value="{{ $options.article_category_ids ?: 0 }}" multiple="multiple" size="7"
	label="{{ phrase('xa_ams_category_limit') }}">

	<xf:option value="0">{{ phrase('xa_ams_all_categories_or_contextual_category') }}</xf:option>
	<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}">
			{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }}{$treeEntry.record.title}
		</xf:option>
	</xf:foreach>
	<xf:explain>{{ phrase('xa_ams_all_categories_or_contextual_explain') }}</xf:explain>
</xf:selectrow>]]></template>
  <template type="admin" title="widget_def_options_xa_ams_latest_series" version_id="2022470" version_string="2.2.24"><![CDATA[<hr class="formRowSep" />

<xf:selectrow name="options[order]" value="{$options.order}" 
	label="{{ phrase('sort_order') }}"
	explain="{{ phrase('xa_ams_sort_order_explain') }}">

	<xf:option value="create_date ">{{ phrase('xa_ams_create_date') }}</xf:option>
	<xf:option value="last_part_date">{{ phrase('xa_ams_last_article_date') }}</xf:option>
	<xf:option value="article_count ">{{ phrase('xa_ams_article_count') }}</xf:option>
	<xf:comment><xf:option value="reaction_score">{{ phrase('reaction_score') }}</xf:option></xf:comment>
	<xf:comment><xf:option value="view_count">{{ phrase('views') }}</xf:option></xf:comment>
	<xf:option value="random">{{ phrase('xa_ams_random') }}</xf:option>
</xf:selectrow>

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('xa_ams_maximum_series') }}" 
	explain="{{ phrase('xa_ams_maximum_series_explain') }}" />

<xf:numberboxrow name="options[article_count]" value="{$options.article_count}" min="0"
	label="{{ phrase('xa_ams_minimum_series_article_count') }}"
	explain="{{ phrase('xa_ams_minimum_series_article_count_explain') }}" />

<xf:checkboxrow>
	<xf:option name="options[exclude_featured]" value="1" selected="{$options.exclude_featured}"
		label="{{ phrase('xa_ams_exclude_featured_series') }}"
		hint="{{ phrase('xa_ams_exclude_featured_series_explain') }}" />
</xf:checkboxrow>

<xf:numberboxrow name="options[cutOffDays]" value="{$options.cutOffDays}" min="0"
	label="{{ phrase('xa_ams_cut_off_days') }}"
	explain="{{ phrase('xa_ams_latest_series_cut_off_days_limit_explain') }}" />

<xf:radiorow name="options[style]" value="{{ $options.style ?: 'simple' }}"
	label="{{ phrase('display_style') }}">

	<xf:option value="simple"
		label="{{ phrase('simple') }}"
		hint="{{ phrase('widget_display_simple_explain') }}" />
	<xf:option value="carousel"
		label="{{ phrase('full') }} - {{ phrase('xa_ams_carousel') }}"
		hint="{{ phrase('xa_ams_featured_series_carousel_explain') }}" />
	<xf:option value="list_view"
		label="{{ phrase('full') }} - {{ phrase('xa_ams_list_view_layout') }}"
		hint="{{ phrase('xa_ams_full_size_view_displaying_as_standard_series_list') }}" />
</xf:radiorow>

<xf:checkboxrow>
	<xf:option name="options[require_series_icon]" value="1" selected="{$options.require_series_icon}"
		label="{{ phrase('xa_ams_require_series_icon') }}"
		hint="{{ phrase('xa_ams_require_series_icon_explain') }}" />
</xf:checkboxrow>

<xf:textboxrow name="options[block_title_link]" value="{$options.block_title_link}"
	label="{{ phrase('xa_ams_block_title_link') }}"
	explain="{{ phrase('xa_ams_series_block_title_link_explain') }}" />

<hr class="formRowSep" />

<xf:tokeninputrow name="options[tags]" value="{$options.tags}"
	href="{{ link_type('public', 'misc/tag-auto-complete') }}"
	label="{{ phrase('tags') }}" 
	explain="{{ phrase('xa_ams_widget_series_tags_explain') }}" />]]></template>
  <template type="admin" title="widget_def_options_xa_ams_series_poll" version_id="2011370" version_string="2.1.13"><![CDATA[<hr class="formRowSep" />

<xf:include template="widget_def_options_poll_base">
	<xf:set var="$contentLink">{{ link_type('public', 'ams/series', $content) }}</xf:set>
	<xf:set var="$contentTitle">{$content.title}</xf:set>
</xf:include>]]></template>
  <template type="admin" title="xa_ams_article" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('admin_navigation.xa_ams') }}</xf:title>

<xf:macro template="section_nav_macros" name="section_nav" arg-section="xa_ams" />]]></template>
  <template type="admin" title="xa_ams_article_batch_update" version_id="2000052" version_string="2.0.0 Release Candidate 2"><![CDATA[<xf:title>{{ phrase('xa_ams_batch_update_articles') }}</xf:title>

<xf:if is="$success">
	<div class="blockMessage blockMessage--success blockMessage--iconic">{{ phrase('batch_update_was_completed_successfully') }}</div>
</xf:if>

<xf:form action="{{ link('xa-ams/batch-update/confirm') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:include template="xa_ams_helper_article_search_criteria" />
		</div>
		<xf:submitrow icon="search" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xa_ams_article_batch_update_confirm" version_id="2010370" version_string="2.1.3"><![CDATA[<xf:title>{{ phrase('xa_ams_batch_update_articles') }}</xf:title>

<xf:form action="{{ link('xa-ams/batch-update/action') }}" class="block">
	<div class="block-container">
		<h2 class="block-header">{{ phrase('xa_ams_update_articles') }}</h2>
		<div class="block-body">
			<xf:formrow label="{{ phrase('xa_ams_matched_articles') }}">
				{$total|number}
				<xf:if is="!$articleIds">
					<span role="presentation" aria-hidden="true">&middot;</span>
					<a href="{{ link('xa-ams/list', null, {'criteria': $criteria, 'all': true}) }}">{{ phrase('view_or_filter_matches') }}</a>
				</xf:if>
			</xf:formrow>

			<hr class="formRowSep" />

			<xf:selectrow name="actions[category_id]"
				label="{{ phrase('xa_ams_move_to_category') }}">

				<xf:option value="0"></xf:option>
				<xf:foreach loop="$categories" value="$category">
					<xf:option value="{$category.value}" label="{$category.label}" disabled="{$category.disabled}" />
				</xf:foreach>
				<xf:explain><xf:if is="$hasPrefixes">
					{{ phrase('xa_ams_move_to_category_prefixes_explain') }}
				</xf:if></xf:explain>
			</xf:selectrow>

			<xf:if is="$prefixes.prefixesGrouped">
				<xf:checkboxrow
					explain="{{ phrase('xa_ams_prefix_will_only_be_applied_if_valid_for_category') }}">
					<xf:option name="actions[apply_article_prefix]"
						label="{{ phrase('set_prefix') }}">

						<xf:dependent>
							<xf:macro template="public:prefix_macros" name="select"
								arg-prefixes="{$prefixes.prefixesGrouped}"
								arg-name="actions[prefix_id]"
								arg-type="ams_article" />
						</xf:dependent>
					</xf:option>
				</xf:checkboxrow>
			</xf:if>

			<hr class="formRowSep" />

			<xf:checkboxrow>
				<xf:option name="actions[approve]" value="approve">{{ phrase('xa_ams_approve_articles') }}</xf:option>
				<xf:option name="actions[unapprove]" value="unapprove">{{ phrase('xa_ams_unapprove_articles') }}</xf:option>
				<xf:option name="actions[soft_delete]" value="soft_delete">{{ phrase('xa_ams_soft_delete_articles') }}</xf:option>
			</xf:checkboxrow>

			<xf:checkboxrow>
				<xf:option name="actions[lock]" value="lock">{{ phrase('xa_ams_lock_comments') }}</xf:option>
				<xf:option name="actions[unlock]" value="unlock">{{ phrase('xa_ams_unlock_comments') }}</xf:option>
			</xf:checkboxrow>
			
			<xf:checkboxrow>
				<xf:option name="actions[lockRatings]" value="lockRatings">{{ phrase('xa_ams_lock_ratings') }}</xf:option>
				<xf:option name="actions[unlockRatings]" value="unlockRatings">{{ phrase('xa_ams_unlock_ratings') }}</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow submit="{{ phrase('xa_ams_update_articles') }}" icon="save" />
	</div>

	<xf:if is="$articleIds">
		<xf:hiddenval name="article_ids">{$articleIds|json}</xf:hiddenval>
	<xf:else />
		<xf:hiddenval name="criteria">{$criteria|json}</xf:hiddenval>
	</xf:if>
</xf:form>

<xf:form action="{{ link('xa-ams/batch-update/action') }}" class="block">
	<div class="block-container">
		<h2 class="block-header">{{ phrase('xa_ams_delete_articles') }}</h2>
		<div class="block-body">
			<xf:checkboxrow>
				<xf:option name="actions[delete]">
					{{ phrase('xa_ams_confirm_deletion_of_x_articles', {'total': $total|number}) }}
				</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow name="confirm_delete" icon="delete" />
	</div>

	<xf:if is="$articleIds">
		<xf:hiddenval name="article_ids">{$articleIds|json}</xf:hiddenval>
	<xf:else />
		<xf:hiddenval name="criteria">{$criteria|json}</xf:hiddenval>
	</xf:if>
</xf:form>]]></template>
  <template type="admin" title="xa_ams_article_field_delete" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:include template="base_custom_field_delete" />]]></template>
  <template type="admin" title="xa_ams_article_field_edit" version_id="2022070" version_string="2.2.20"><![CDATA[<xf:include template="base_custom_field_edit">
	<xf:set var="$extraOptions">
		<xf:macro template="base_custom_field_macros" name="common_options"
			arg-field="{$field}"
			arg-supportsGroupEditable="{{ true }}"/>
	</xf:set>	
	<xf:set var="$displayOptions">
		<xf:checkboxrow>
			<xf:option name="display_on_list" selected="$field.display_on_list" hint="{{ phrase('xa_ams_display_field_on_list_explain') }}">{{ phrase('xa_ams_display_field_on_list') }}</xf:option>
			<xf:comment><xf:option name="hide_title" selected="$field.hide_title" hint="{{ phrase('xa_ams_hide_field_title_explain') }}" >{{ phrase('xa_ams_hide_field_title') }}</xf:option></xf:comment>
		</xf:checkboxrow>
		
		<xf:selectrow name="category_ids[]" value="{$categoryIds}" multiple="multiple" size="7"
			label="{{ phrase('xa_ams_applicable_categories') }}">

			<xf:option value="" selected="!{$categoryIds}">{{ phrase('(none)') }}</xf:option>
			<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
				<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
			</xf:foreach>
		</xf:selectrow>
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="xa_ams_article_field_list" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_article_fields') }}</xf:title>

<xf:include template="base_custom_field_list" />]]></template>
  <template type="admin" title="xa_ams_article_prefix_delete" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:include template="base_prefix_delete" />]]></template>
  <template type="admin" title="xa_ams_article_prefix_edit" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:include template="base_prefix_edit">
	<xf:set var="$extraOptions">
		<xf:macro template="xa_ams_article_prefix_edit_macros" name="category_ids"
			arg-categoryIds="{$prefix.category_ids}"
			arg-categoryTree="{$categoryTree}" />
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="xa_ams_article_prefix_edit_macros" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:macro name="category_ids" arg-categoryIds="!" arg-categoryTree="!" arg-withRow="1">
	<xf:set var="$inner">
		<ul class="inputList">
			<li><xf:select name="category_ids[]" size="7" multiple="multiple" value="{$categoryIds}" id="js-applicableCategories">
				<xf:option value="" selected="!{$categoryIds}">{{ phrase('(none)') }}</xf:option>
				<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
					<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
				</xf:foreach>
			</xf:select></li>
			<xf:checkbox>
				<xf:option id="js-selectAllCategories">{{ phrase('select_all') }}</xf:option>
			</xf:checkbox>
		</ul>
	</xf:set>

	<xf:if is="$withRow">
		<xf:formrow rowtype="input"
			label="{{ phrase('xa_ams_applicable_categories') }}">

			{$inner|raw}
		</xf:formrow>
	<xf:else />
		{$inner|raw}
	</xf:if>

	<xf:js>
		$(function()
		{
			$('#js-selectAllCategories').click(function(e)
			{
				$('#js-applicableCategories').find('option:enabled:not([value=""])').prop('selected', this.checked);
			});
		});
	</xf:js>
</xf:macro>]]></template>
  <template type="admin" title="xa_ams_article_prefix_group_delete" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:include template="base_prefix_group_delete" />]]></template>
  <template type="admin" title="xa_ams_article_prefix_group_edit" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:include template="base_prefix_group_edit" />]]></template>
  <template type="admin" title="xa_ams_article_prefix_list" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_article_prefixes') }}</xf:title>

<xf:include template="base_prefix_list" />]]></template>
  <template type="admin" title="xa_ams_article_prefix_quickset_chooser" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:include template="base_prefix_quickset_chooser">
	<xf:set var="$prefixType" value="ams_article" />
</xf:include>]]></template>
  <template type="admin" title="xa_ams_article_prefix_quickset_editor" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:include template="base_prefix_quickset_editor">
	<xf:set var="$extraOptions">
		<xf:checkboxrow name="apply_article_category_ids"
			label="{{ phrase('xa_ams_applicable_categories') }}">

			<xf:option label="{{ phrase('xa_ams_apply_category_options') }}">
				<xf:dependent>
					<xf:macro template="xa_ams_article_prefix_edit_macros" name="category_ids"
						arg-categoryIds="{$prefix.category_ids}"
						arg-categoryTree="{$categoryTree}"
						arg-withRow="{{ false }}" />
				</xf:dependent>
			</xf:option>
		</xf:checkboxrow>
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="xa_ams_article_prompt_delete" version_id="2022170" version_string="2.2.21"><![CDATA[<xf:include template="base_prompt_delete" />]]></template>
  <template type="admin" title="xa_ams_article_prompt_edit" version_id="2022170" version_string="2.2.21"><![CDATA[<xf:include template="base_prompt_edit">
	<xf:set var="$extraOptions">
		<xf:macro template="xa_ams_article_prefix_edit_macros" name="category_ids"
			arg-categoryIds="{$prompt.category_ids}"
			arg-categoryTree="{$categoryTree}" />	
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="xa_ams_article_prompt_group_delete" version_id="2022170" version_string="2.2.21"><![CDATA[<xf:include template="base_prompt_group_delete" />]]></template>
  <template type="admin" title="xa_ams_article_prompt_group_edit" version_id="2022170" version_string="2.2.21"><![CDATA[<xf:include template="base_prompt_group_edit" />]]></template>
  <template type="admin" title="xa_ams_article_prompt_list" version_id="2022170" version_string="2.2.21"><![CDATA[<xf:title>{{ phrase('xa_ams_article_prompts') }}</xf:title>

<xf:include template="base_prompt_list" />

<div class="block">
	<div class="block-container">
		<h2 class="block-header">{{ phrase('xa_ams_default_article_prompt') }}</h2>
		<div class="block-body">
			<xf:datalist>
				<xf:datarow>
					<xf:cell href="{{ link('phrases/edit-by-name', {}, {'title': 'ams_article_prompt.default'}) }}" class="dataList-cell">{{ phrase('ams_article_prompt.default') }}</xf:cell>
				</xf:datarow>
			</xf:datalist>
		</div>
	</div>
</div>]]></template>
  <template type="admin" title="xa_ams_article_prompt_quickset_chooser" version_id="2022170" version_string="2.2.21"><![CDATA[<xf:include template="base_prompt_quickset_chooser">
	<xf:set var="$prefixType" value="ams_article" />
</xf:include>]]></template>
  <template type="admin" title="xa_ams_article_prompt_quickset_editor" version_id="2022170" version_string="2.2.21"><![CDATA[<xf:include template="base_prompt_quickset_editor">
	<xf:set var="$extraOptions">
		<xf:checkboxrow name="apply_category_ids"
			label="{{ phrase('xa_ams_applicable_categories') }}">

			<xf:option label="{{ phrase('xa_ams_apply_category_options') }}">
				<xf:dependent>
					<xf:macro template="xa_ams_article_prefix_edit_macros" name="category_ids"
						arg-categoryIds="{$prefix.category_ids}"
						arg-categoryTree="{$categoryTree}"
						arg-withRow="{{ false }}" />
				</xf:dependent>
			</xf:option>
		</xf:checkboxrow>
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="xa_ams_article_reply_ban_delete" version_id="2000052" version_string="2.0.0 Release Candidate 2"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('xa-ams/reply-bans/delete', $ban) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('please_confirm_that_you_want_to_delete_following:') }}
				<strong>{$ban.ArticleItem.title} - {$ban.User.username}</strong>
			</xf:inforow>
		</div>
		<xf:submitrow rowtype="simple" icon="delete" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xa_ams_article_reply_ban_list" version_id="2000052" version_string="2.0.0 Release Candidate 2"><![CDATA[<xf:title>{{ phrase('xa_ams_article_reply_bans') }}</xf:title>

<xf:if is="$bans is not empty">
	<xf:form action="{{ link('xa-ams/reply-bans') }}" class="block">
		<div class="block-outer">
			<span class="filterBlock">
				<xf:textbox name="username" value="{$user.username}" class="input filterBlock-input" ac="single"
					 placeholder="{{ phrase('user_name...') }}" />

				<xf:button type="submit" class="button--small">{{ phrase('filter') }}</xf:button>
			</span>
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist data-xf-init="responsive-data-list">
					<xf:datarow rowtype="header">
						<xf:cell>{{ phrase('user') }}</xf:cell>
						<xf:cell>{{ phrase('xa_ams_article') }}</xf:cell>
						<xf:cell>{{ phrase('reason') }}</xf:cell>
						<xf:cell>{{ phrase('end_date') }}</xf:cell>
						<xf:cell></xf:cell>
					</xf:datarow>
					<xf:foreach loop="$bans" value="$ban">
						<xf:datarow rowclass="dataList-row--noHover">
							<xf:cell>
								<xf:username user="$ban.User" href="{{ link('users/edit', $ban.User) }}" />
							</xf:cell>
							<xf:cell>
								<a href="{{ link_type('public', 'ams', $ban.ArticleItem) }}">{$ban.ArticleItem.title}</a>
							</xf:cell>
							<xf:cell>
								<xf:if is="$ban.reason">
									{$ban.reason}
								<xf:else />
									{{ phrase('n_a') }}
								</xf:if>
							</xf:cell>
							<xf:cell>
								<xf:if is="$ban.expiry_date">
									<xf:date time="{$ban.expiry_date}" />
								<xf:else />
									{{ phrase('permanent') }}
								</xf:if>
							</xf:cell>
							<xf:delete href="{{ link('xa-ams/reply-bans/delete', $ban) }}" overlay="true" />
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals($bans, $total) }}</span>
			</div>
		</div>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="xa-ams/reply-bans" params="{$linkParams}"
			wrapperclass="block-outer block-outer--after" />
	</xf:form>
<xf:else />
	<div class="blockMessage">{{ phrase('no_results_found') }}</div>
</xf:if>]]></template>
  <template type="admin" title="xa_ams_articlereplace_index" version_id="2022370" version_string="2.2.23"><![CDATA[<xf:title>{{ phrase('xa_ams_article_content_find_replace') }}</xf:title>

<xf:if is="$articles">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist class="dataList--contained" data-xf-init="responsive-data-list">
					<xf:datarow rowtype="header">
						<xf:cell class="dataList-cell--min">{{ phrase('xa_ams_article_id') }}</xf:cell>
						<xf:cell>{{ phrase('xa_ams_matched_text') }}</xf:cell>
						<xf:cell>{{ phrase('xa_ams_replacement_text') }}</xf:cell>
					</xf:datarow>
					<xf:foreach loop="$articles" value="$article">
						<xf:foreach loop="$article.found" key="$key" value="$found" i="$i">
							<xf:datarow rowclass="dataList-row--noHover">
								<xf:if is="$i == 1">
									<xf:main class="dataList-cell--min dataList-cell--alt"
										rowspan="{{ count($article.found) }}" style="{{ (count($article.found) > 1) ? 'border-bottom: none;' : '' }}"
										href="{{ link_type('public', 'ams', $article) }}"
										target="_blank" label="{$article.article_id|number}" />
								</xf:if>
								<xf:cell class="dataList-cell--separated">
									{$found}
								</xf:cell>
								<xf:cell class="dataList-cell--separated">
									{$article.replaced.{$key}}
								</xf:cell>
							</xf:datarow>
						</xf:foreach>
					</xf:foreach>
				</xf:datalist>
				<div class="block-footer">
					<span class="block-footer-counter">{{ display_totals(count($articles)) }}</span>
				</div>
			</div>
		</div>
	</div>
</xf:if>

<xf:if is="$articlePages">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist class="dataList--contained" data-xf-init="responsive-data-list">
					<xf:datarow rowtype="header">
						<xf:cell class="dataList-cell--min">{{ phrase('xa_ams_article_page_id') }}</xf:cell>
						<xf:cell>{{ phrase('xa_ams_matched_text') }}</xf:cell>
						<xf:cell>{{ phrase('xa_ams_replacement_text') }}</xf:cell>
					</xf:datarow>
					<xf:foreach loop="$articlePages" value="$articlePage">
						<xf:foreach loop="$articlePage.found" key="$key" value="$found" i="$i">
							<xf:datarow rowclass="dataList-row--noHover">
								<xf:if is="$i == 1">
									<xf:main class="dataList-cell--min dataList-cell--alt"
										rowspan="{{ count($articlePage.found) }}" style="{{ (count($articlePage.found) > 1) ? 'border-bottom: none;' : '' }}"
										href="{{ link_type('public', 'ams/page', $articlePage) }}"
										target="_blank" label="{$articlePage.page_id|number}" />
								</xf:if>
								<xf:cell class="dataList-cell--separated">
									{$found}
								</xf:cell>
								<xf:cell class="dataList-cell--separated">
									{$articlePage.replaced.{$key}}
								</xf:cell>
							</xf:datarow>
						</xf:foreach>
					</xf:foreach>
				</xf:datalist>
				<div class="block-footer">
					<span class="block-footer-counter">{{ display_totals(count($articlePages)) }}</span>
				</div>
			</div>
		</div>
	</div>
</xf:if>

<xf:if is="$articleComments">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist class="dataList--contained" data-xf-init="responsive-data-list">
					<xf:datarow rowtype="header">
						<xf:cell class="dataList-cell--min">{{ phrase('xa_ams_article_comment_id') }}</xf:cell>
						<xf:cell>{{ phrase('xa_ams_matched_text') }}</xf:cell>
						<xf:cell>{{ phrase('xa_ams_replacement_text') }}</xf:cell>
					</xf:datarow>
					<xf:foreach loop="$articleComments" value="$articleComment">
						<xf:foreach loop="$articleComment.found" key="$key" value="$found" i="$i">
							<xf:datarow rowclass="dataList-row--noHover">
								<xf:if is="$i == 1">
									<xf:main class="dataList-cell--min dataList-cell--alt"
										rowspan="{{ count($articleComment.found) }}" style="{{ (count($articleComment.found) > 1) ? 'border-bottom: none;' : '' }}"
										href="{{ link_type('public', 'ams/comments', $articleComment) }}"
										target="_blank" label="{$articleComment.comment_id|number}" />
								</xf:if>
								<xf:cell class="dataList-cell--separated">
									{$found}
								</xf:cell>
								<xf:cell class="dataList-cell--separated">
									{$articleComment.replaced.{$key}}
								</xf:cell>
							</xf:datarow>
						</xf:foreach>
					</xf:foreach>
				</xf:datalist>
				<div class="block-footer">
					<span class="block-footer-counter">{{ display_totals(count($articleComments)) }}</span>
				</div>
			</div>
		</div>
	</div>
</xf:if>

<xf:if is="$articleReviews">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist class="dataList--contained" data-xf-init="responsive-data-list">
					<xf:datarow rowtype="header">
						<xf:cell class="dataList-cell--min">{{ phrase('xa_ams_article_review_id') }}</xf:cell>
						<xf:cell>{{ phrase('xa_ams_matched_text') }}</xf:cell>
						<xf:cell>{{ phrase('xa_ams_replacement_text') }}</xf:cell>
					</xf:datarow>
					<xf:foreach loop="$articleReviews" value="$articleReview">
						<xf:foreach loop="$articleReview.found" key="$key" value="$found" i="$i">
							<xf:datarow rowclass="dataList-row--noHover">
								<xf:if is="$i == 1">
									<xf:main class="dataList-cell--min dataList-cell--alt"
										rowspan="{{ count($articleReview.found) }}" style="{{ (count($articleReview.found) > 1) ? 'border-bottom: none;' : '' }}"
										href="{{ link_type('public', 'ams/review', $articleReview) }}"
										target="_blank" label="{$articleReview.rating_id|number}" />
								</xf:if>
								<xf:cell class="dataList-cell--separated">
									{$found}
								</xf:cell>
								<xf:cell class="dataList-cell--separated">
									{$articleReview.replaced.{$key}}
								</xf:cell>
							</xf:datarow>
						</xf:foreach>
					</xf:foreach>
				</xf:datalist>
				<div class="block-footer">
					<span class="block-footer-counter">{{ display_totals(count($articleReviews)) }}</span>
				</div>
			</div>
		</div>
	</div>
</xf:if>

<xf:form action="{{ link('xa-ams-article-replace/replace') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="quick_find" label="{{ phrase('xa_ams_quick_find') }}" value="{$input.quick_find}"
				explain="{{ phrase('xa_ams_quick_find_explain') }}" />

			<hr class="formRowSep" />

			<xf:textboxrow name="regex" label="{{ phrase('regular_expression') }}" value="{$input.regex}"
				explain="{{ phrase('xa_ams_regular_expression_explain') }}" />

			<xf:textboxrow name="replace" label="{{ phrase('xa_ams_replacement_string') }}" value="{$input.replace}"
				explain="{{ phrase('xa_ams_replacement_string_explain') }}" />

			<hr class="formRowSep" />

			<xf:checkboxrow>
				<xf:option name="commit" label="{{ phrase('xa_ams_save_changes') }}"
					explain="{{ phrase('xa_ams_save_changes_explain') }}" />
			</xf:checkboxrow>
		</div>
		<xf:submitrow submit="{{ phrase('proceed') }}" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xa_ams_batch_update_article_list" version_id="2000052" version_string="2.0.0 Release Candidate 2"><![CDATA[<xf:title>{{ phrase('xa_ams_articles') }}</xf:title>

<xf:if is="$articles is not empty">
	<xf:form action="{{ link('xa-ams/batch-update/confirm') }}" class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist class="dataList--contained" data-xf-init="responsive-data-list">
					<xf:datarow rowtype="header">
						<xf:if is="$showingAll">
							<xf:cell class="dataList-cell--min">
								<xf:checkbox standalone="true"><xf:option check-all=".dataList >" data-xf-init="tooltip" title="{{ phrase('select_all') }}" /></xf:checkbox>
							</xf:cell>
						</xf:if>
						<xf:cell colspan="1">{{ phrase('title') }}</xf:cell>
						<xf:cell class="dataList-cell--min">{{ phrase('category') }}</xf:cell>
						<xf:cell class="dataList-cell--min">{{ phrase('author') }}</xf:cell>
						<xf:cell class="dataList-cell--min">{{ phrase('xa_ams_page_count') }}</xf:cell>
						<xf:cell class="dataList-cell--min">{{ phrase('xa_ams_comment_count') }}</xf:cell>
						<xf:cell class="dataList-cell--min">{{ phrase('xa_ams_rating_count') }}</xf:cell>
						<xf:cell class="dataList-cell--min">{{ phrase('xa_ams_review_count') }}</xf:cell>
						<xf:cell class="dataList-cell--min">{{ phrase('xa_ams_publish_date') }}</xf:cell>
					</xf:datarow>
					<xf:foreach loop="$articles" value="$article">
						<xf:datarow>
							<xf:if is="$showingAll">
								<xf:toggle name="article_ids[]" value="{$article.article_id}" selected="true" />
							</xf:if>
							<xf:main href="{{ link_type('public', 'ams', $article) }}" label="{$article.title}" />
							<xf:cell class="dataList-cell--min">
								{$article.Category.title}
							</xf:cell>
							<xf:cell class="dataList-cell--min">
								{$article.username}
							</xf:cell>
							<xf:cell class="dataList-cell--min">
								{$article.page_count|number}
							</xf:cell>
							<xf:cell class="dataList-cell--min">
								{$article.comment_count|number}
							</xf:cell>
							<xf:cell class="dataList-cell--min">
								{$article.rating_count|number}
							</xf:cell>
							<xf:cell class="dataList-cell--min">
								{$article.review_count|number}
							</xf:cell>
							<xf:cell class="dataList-cell--min">
								<xf:date time="{$article.publish_date}" />
							</xf:cell>
						</xf:datarow>
					</xf:foreach>
					<xf:if is="$filter AND $total > $perPage">
						<xf:datarow rowclass="dataList-row--note dataList-row--noHover js-filterForceShow">
							<xf:cell colspan="3">{{ phrase('more_records_matching_filter_more_specific') }}</xf:cell>
						</xf:datarow>
					</xf:if>
				</xf:datalist>
			</div>
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter">{{ display_totals($articles, $total) }}</span>
				<span class="block-footer-select"><xf:checkbox standalone="true"><xf:option check-all=".dataList" label="{{ phrase('select_all') }}" /></xf:checkbox></span>
				<xf:if is="$showAll">
					<span class="block-footer-controls">
						<a href="{{ link('xa-ams/list', null, {'criteria': $criteria, 'all': true}) }}">{{ phrase('show_all_matches') }}</a>
					</span>
				<xf:elseif is="$showingAll" />
					<span class="block-footer-controls"><xf:button type="submit">{{ phrase('batch_update') }}</xf:button></span>
				</xf:if>
			</div>
		</div>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="xa-ams/list"
			params="{{ {'criteria': $criteria, 'order': $order, 'direction': $direction} }}"
			wrapperclass="js-filterHide block-outer block-outer--after" />
	</xf:form>
<xf:else />
	<div class="blockMessage">{{ phrase('no_records_matched') }}</div>
</xf:if>]]></template>
  <template type="admin" title="xa_ams_category_delete" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:macro template="category_tree_macros" name="category_delete_form"
	arg-linkPrefix="xa-ams/categories"
	arg-category="{$category}" />]]></template>
  <template type="admin" title="xa_ams_category_edit" version_id="2022670" version_string="2.2.26"><![CDATA[<xf:if is="$category.isInsert()">
	<xf:title>{{ phrase('add_category') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('edit_category:') }} {$category.title}</xf:title>
</xf:if>

<xf:pageaction if="$category.isUpdate()">
	<xf:button href="{{ link('xa-ams/categories/delete', $category) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:form action="{{ link('xa-ams/categories/save', $category) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="title" value="{$category.title}"
				label="{{ phrase('title') }}" />

			<xf:textboxrow name="og_title" value="{$category.og_title}"
				maxlength="{{ max_length($category, 'og_title') }}"
				label="{{ phrase('xa_ams_og_title') }}"
				hint="{{ phrase('optional') }}"
				explain="{{ phrase('xa_ams_og_title_explain') }}" />

			<xf:textboxrow name="meta_title" value="{$category.meta_title}"
				maxlength="{{ max_length($category, 'meta_title') }}"
				label="{{ phrase('xa_ams_meta_title') }}"
				hint="{{ phrase('optional') }}"
				explain="{{ phrase('xa_ams_meta_title_explain') }}" />

			<xf:textarearow name="description" value="{$category.description}" autosize="true"
				label="{{ phrase('description') }}"
				explain="{{ phrase('you_may_use_html') }}" />

			<xf:textarearow name="meta_description" value="{$category.meta_description_}"
				maxlength="{{ max_length($category, 'meta_description') }}"
				label="{{ phrase('xa_ams_meta_description') }}"
				hint="{{ phrase('optional') }}"
				explain="{{ phrase('xa_ams_provide_brief_summary_of_your_category_for_search_engines') }}" />

			<xf:textboxrow name="content_term" value="{$category.content_term}"
				label="{{ phrase('xa_ams_category_content_term') }}" 
				explain="{{ phrase('xa_ams_category_content_term_explain') }}" />
			
			<xf:macro template="category_tree_macros" name="parent_category_select_row"
				arg-category="{$category}"
				arg-categoryTree="{$categoryTree}"
				arg-idKey="category_id" />

			<xf:macro template="display_order_macros" name="row"
				arg-value="{$category.display_order}" />

			<xf:checkboxrow>
				<xf:option name="display_articles_on_index" selected="$category.display_articles_on_index"
					label="{{ phrase('xa_ams_display_articles_on_index') }}"
					hint="{{ phrase('xa_ams_display_articles_on_index_explain') }}" />
			</xf:checkboxrow>

			<hr class="formRowSep" />

			<xf:radiorow name="allow_index" value="{$category.allow_index}"
				label="{{ phrase('allow_search_engine_indexing') }}"
				explain="{{ phrase('xa_ams_you_can_choose_whether_or_not_to_allow_external_search_engines_to_index') }}">

				<xf:option value="allow">{{ phrase('xa_ams_index_all_articles') }}</xf:option>
				<xf:option value="deny">{{ phrase('xa_ams_do_not_index_any_articles') }}</xf:option>
				<xf:option value="criteria"
					data-xf-init="disabler" data-container=".js-indexCriteria" data-hide="true">

					{{ phrase('xa_ams_index_articles_based_on_criteria') }}
				</xf:option>
			</xf:radiorow>

			<div class="js-indexCriteria">
				<xf:checkboxrow label="{{ phrase('search_engine_index_criteria') }}">
					<xf:option name="index_criteria[max_days_publish][enabled]" selected="{$category.index_criteria.max_days_publish}"
						label="{{ phrase('xa_ams_article_was_published_no_more_than_x_days_ago:') }}">

						<xf:numberbox name="index_criteria[max_days_publish][value]" value="{{ $category.index_criteria.max_days_publish ?: 1 }}"
							min="1" />
					</xf:option>

					<xf:option name="index_criteria[max_days_last_update][enabled]" selected="{$category.index_criteria.max_days_last_update}"
						label="{{ phrase('xa_ams_article_was_updated_no_more_than_x_days_ago:') }}">

						<xf:numberbox name="index_criteria[max_days_last_update][value]" value="{{ $category.index_criteria.max_days_last_update ?: 1 }}"
							min="1" />
					</xf:option>

					<xf:option name="index_criteria[min_views][enabled]" selected="{{ $category.index_criteria.min_views !== null }}"
						label="{{ phrase('xa_ams_article_has_at_least_x_views:') }}">

						<xf:numberbox name="index_criteria[min_views][value]" value="{{ $category.index_criteria.min_views ?: 0 }}" />
					</xf:option>

					<xf:option name="index_criteria[min_comments][enabled]" selected="{{ $category.index_criteria.min_comments !== null }}"
						label="{{ phrase('xa_ams_article_has_at_least_x_comments:') }}">

						<xf:numberbox name="index_criteria[min_comments][value]" value="{{ $category.index_criteria.min_comments ?: 0 }}" />
					</xf:option>

					<xf:option name="index_criteria[min_rating_avg][enabled]" selected="{{ $category.index_criteria.min_rating_avg !== null }}"
						label="{{ phrase('xa_ams_article_has_at_least_x_rating_avg:') }}">

						<xf:numberbox name="index_criteria[min_rating_avg][value]" value="{{ $category.index_criteria.min_rating_avg ?: 0 }}" />
					</xf:option>

					<xf:option name="index_criteria[min_reaction_score][enabled]" selected="{{ $category.index_criteria.min_reaction_score !== null }}"
						label="{{ phrase('xa_ams_article_has_at_least_x_reaction_score:') }}">

						<xf:numberbox name="index_criteria[min_reaction_score][value]" value="{{ $category.index_criteria.min_reaction_score ?: 0 }}" />
					</xf:option>
				</xf:checkboxrow>
			</div>

			<hr class="formRowSep" />

			<xf:checkboxrow>
				<xf:option name="expand_category_nav" selected="$category.expand_category_nav"
					label="{{ phrase('xa_ams_expand_category_nav') }}"
					hint="{{ phrase('xa_ams_expand_category_nav_explain') }}" />
			</xf:checkboxrow>

			<hr class="formRowSep" />
			
			<xf:numberboxrow name="min_tags" value="{$category.min_tags}" min="0" max="100"
				label="{{ phrase('minimum_required_tags') }}"
				explain="{{ phrase('xa_ams_minimum_required_tags_explain') }}" />

			<xf:tokeninputrow name="default_tags" value="{$category.default_tags}" 
				href="{{ link_type('public','misc/tag-auto-complete') }}"
				min-length="{$xf.options.tagLength.min}"
				max-length="{$xf.options.tagLength.max}"
				max-tokens="{$xf.options.maxContentTags}"
				label="{{ phrase('xa_ams_default_tags') }}">

				<xf:explain>
					{{ phrase('xa_ams_default_tags_explain') }}
					<br><br>
					{{ phrase('multiple_tags_may_be_separated_by_commas') }}
				</xf:explain>
			</xf:tokeninputrow>

			<hr class="formRowSep" />

			<xf:checkboxrow label="{{ phrase('options') }}">
				<xf:option name="allow_articles" selected="$category.allow_articles"
					label="{{ phrase('xa_ams_allow_articles_to_be_created') }}"
					hint="{{ phrase('xa_ams_allow_articles_to_be_created_explain') }}" />
			</xf:checkboxrow>			

			<xf:checkboxrow>
				<xf:option name="require_article_image" selected="$category.require_article_image"
					label="{{ phrase('xa_ams_require_article_image') }}"									   
					hint="{{ phrase('xa_ams_require_article_image_explain') }}" />
			</xf:checkboxrow>			
			
			<xf:checkboxrow>
				<xf:option name="allow_contributors" selected="$category.allow_contributors"
					label="{{ phrase('xa_ams_allow_contributors_co_authors') }}"
					hint="{{ phrase('xa_ams_allow_contributors_co_authors_explain') }}">
					<xf:dependent>
						<div class="inputGroup" style="margin-top: 5px;">
							<span class="inputGroup-text">
								{{ phrase('xa_ams_max_allowed:') }}
							</span>
							<xf:numberbox name="max_allowed_contributors" value="{$category.max_allowed_contributors}" min="1" max="100" />
						</div>
						<div class="inputGroup" style="margin-top: 5px; margin-bottom: 10px;">
							<span class="inputGroup-text  inputChoices-explain">
								{{ phrase('xa_ams_max_allowed_contributors_explain') }}
							</span>
						</div>

						<xf:checkbox>
							<xf:option name="allow_self_join_contributors" selected="$category.allow_self_join_contributors"
								label="{{ phrase('xa_ams_allow_self_join_contributors_team') }}"									   
								hint="{{ phrase('xa_ams_allow_self_join_contributors_team_explain') }}" />
						</xf:checkbox>
					</xf:dependent>
				</xf:option>
			</xf:checkboxrow>

			<xf:checkboxrow>
				<xf:option name="allow_original_source" selected="$category.allow_original_source"
					label="{{ phrase('xa_ams_allow_original_source') }}"
					hint="{{ phrase('xa_ams_allow_original_source_explain') }}">

					<xf:dependent>
						<xf:checkbox>
							<xf:option value="1" label="{{ phrase('xa_ams_require_original_source') }}"
								name="require_original_source" selected="$category.require_original_source">
								<xf:hint>{{ phrase('xa_ams_require_original_source_explain') }}</xf:hint>
							</xf:option>
						</xf:checkbox>
					</xf:dependent>

				</xf:option>
			</xf:checkboxrow>

			<xf:checkboxrow>
				<xf:option name="allow_poll" selected="$category.allow_poll"
					label="{{ phrase('xa_ams_allow_poll') }}"
					hint="{{ phrase('xa_ams_allow_poll_explain') }}" />
			</xf:checkboxrow>

			<xf:checkboxrow>
				<xf:option name="allow_location" selected="$category.allow_location"
					label="{{ phrase('xa_ams_allow_location') }}"
					hint="{{ phrase('xa_ams_allow_location_explain') }}">
					<xf:dependent>
						<xf:checkbox>
							<xf:option value="1" label="{{ phrase('xa_ams_require_location') }}"
								name="require_location" selected="$category.require_location">
								<xf:hint>{{ phrase('xa_ams_require_location_explain') }}</xf:hint>
							</xf:option>
						</xf:checkbox>
						
						<xf:checkbox>
							<xf:option name="display_location_on_list" selected="$category.display_location_on_list"
								label="{{ phrase('xa_ams_display_location_on_list') }}"
								hint="{{ phrase('xa_ams_display_location_on_list_explain') }}">
								<xf:dependent>
									<xf:radio name="location_on_list_display_type" value="{$category.location_on_list_display_type}">
										<xf:option value="city_state">{{ phrase('xa_ams_display_type_city_state') }}</xf:option>
										<xf:option value="city_state_short">{{ phrase('xa_ams_display_type_city_state_short') }}</xf:option>
										<xf:option value="city_state_country">{{ phrase('xa_ams_display_type_city_state_country') }}</xf:option>
										<xf:option value="city_state_country_short">{{ phrase('xa_ams_display_type_city_state_country_short') }}</xf:option>
										<xf:option value="city_state_short_country_short">{{ phrase('xa_ams_display_type_city_state_short_country_short') }}</xf:option>
										<xf:option value="formatted_address">{{ phrase('xa_ams_display_type_formatted_address') }}</xf:option>
									</xf:radio>
								</xf:dependent>
							</xf:option>
						</xf:checkbox>				
					</xf:dependent>
				</xf:option>
			</xf:checkboxrow>

			<xf:checkboxrow>
				<xf:option name="allow_comments" selected="$category.allow_comments"
					label="{{ phrase('xa_ams_allow_comments') }}"
					hint="{{ phrase('xa_ams_allow_comments_explain') }}" />
			</xf:checkboxrow>

			<hr class="formRowSep" />

			<xf:checkboxrow label="{{ phrase('xa_ams_rating_options') }}">
				<xf:option name="allow_ratings" selected="$category.allow_ratings"
					label="{{ phrase('xa_ams_allow_ratings') }}"
					hint="{{ phrase('xa_ams_allow_ratings_explain') }}">

					<xf:dependent>
						<xf:checkbox>
							<xf:option value="1" label="{{ phrase('xa_ams_require_review') }}"
								name="require_review" selected="$category.require_review">
								<xf:hint>{{ phrase('xa_ams_require_review_explain') }}</xf:hint>
							</xf:option>
						</xf:checkbox>

						<xf:checkbox>
							<xf:option value="1" label="{{ phrase('xa_ams_allow_pros_cons') }}"
								name="allow_pros_cons" selected="$category.allow_pros_cons">
								<xf:hint>{{ phrase('xa_ams_allow_pros_cons_explain') }}</xf:hint>
							</xf:option>
						</xf:checkbox>

						<xf:checkbox>
							<xf:option value="1" label="{{ phrase('xa_ams_allow_anon_reviews') }}"
								name="allow_anon_reviews" selected="$category.allow_anon_reviews">
								<xf:hint>{{ phrase('xa_ams_allow_anon_reviews_explain') }}</xf:hint>
							</xf:option>
						</xf:checkbox>

						<xf:checkbox>
							<xf:option value="1" label="{{ phrase('xa_ams_allow_review_voting') }}"
								name="allow_review_voting" selected="$category.review_voting">
								<xf:hint>{{ phrase('xa_ams_allow_review_voting_explain') }}</xf:hint>

								<xf:dependent>
									<xf:radio name="review_voting" label="{{ phrase('xa_ams_allow_review_voting') }}" value="{$category.review_voting}">
										<xf:option value="yes">{{ phrase('xa_ams_upvoting_and_downvoting') }}</xf:option>
										<xf:option value="upvote">{{ phrase('xa_ams_upvoting_only') }}</xf:option>
									</xf:radio>
								</xf:dependent>
							</xf:option>
						</xf:checkbox>
					</xf:dependent>

				</xf:option>
			</xf:checkboxrow>

			<xf:checkboxrow>
				<xf:option name="allow_author_rating" selected="$category.allow_author_rating"
					label="{{ phrase('xa_ams_allow_author_rating') }}"
					hint="{{ phrase('xa_ams_allow_author_rating_explain') }}" />
			</xf:checkboxrow>

			<hr class="formRowSep" />

			<xf:selectrow name="thread_node_id" value="{$category.thread_node_id}" id="js-rmThreadNodeList"
				label="{{ phrase('xa_ams_automatically_create_thread_in_forum') }}"
				explain="{{ phrase('xa_ams_if_selected_article_in_category_created_thread_posted_forum') }}">

				<xf:option value="0">{{ phrase('(none)') }}</xf:option>
				<xf:foreach loop="$forumOptions" value="$forum">
					<xf:option value="{$forum.value}" disabled="{$forum.disabled}" label="{$forum.label}" />
				</xf:foreach>
			</xf:selectrow>
			
			<xf:checkboxrow>
				<xf:option name="thread_set_article_tags" selected="$category.thread_set_article_tags"
					label="{{ phrase('xa_ams_set_article_tags_for_automatically_created_thread') }}"
					hint="{{ phrase('xa_ams_set_article_tags_for_automatically_created_thread_explain') }}" />
			</xf:checkboxrow>			

			<xf:formrow label="{{ phrase('xa_ams_automatically_created_thread_prefix') }}" rowtype="input">
				<xf:js src="xf/prefix_menu.js" min="1" />
				<xf:macro template="public:prefix_macros" name="select"
					arg-type="thread"
					arg-prefixes="{$threadPrefixes}"
					arg-selected="{$category.thread_prefix_id}"
					arg-name="thread_prefix_id"
					arg-href="{{ link('forums/prefixes') }}"
					arg-listenTo="#js-rmThreadNodeList" />
			</xf:formrow>
		</div>

		<h3 class="block-formSectionHeader">
			<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up:next">
				<span class="block-formSectionHeader-aligner">{{ phrase('xa_ams_category_extra_options') }}</span>
			</span>
		</h3>
		<div class="block-body block-body--collapsible">
			<xf:assetuploadrow name="content_image_url" value="{$category.content_image_url}" asset="xa_ams_cat_images" 
				label="{{ phrase('xa_ams_category_content_image_url') }}" />

			<xf:textboxrow name="content_title" value="{$category.content_title}"
				label="{{ phrase('xa_ams_category_content_title') }}" 
				explain="{{ phrase('xa_ams_category_content_title_explain') }}" />

			<xf:textarearow name="content_message" value="{$category.content_message}" autosize="true"
				label="{{ phrase('xa_ams_category_content') }}"
				explain="{{ phrase('xa_ams_category_content_explain') }}" />

			<xf:if is="$xf.options.xaAmsListDefaultOrder == 'last_update'">
				<xf:set var="$defaultSortOrder" value="{{ phrase('xa_ams_last_update') }}" />
			<xf:elseif is="$xf.options.xaAmsListDefaultOrder == 'rating_weighted'" />
				<xf:set var="$defaultSortOrder" value="{{ phrase('rating') }}" />
			<xf:elseif is="$xf.options.xaAmsListDefaultOrder == 'reaction_score'" />
				<xf:set var="$defaultSortOrder" value="{{ phrase('reaction_score') }}" />
			<xf:elseif is="$xf.options.xaAmsListDefaultOrder == 'view_count'" />
				<xf:set var="$defaultSortOrder" value="{{ phrase('views') }}" />
			<xf:elseif is="$xf.options.xaAmsListDefaultOrder == 'title'" />
				<xf:set var="$defaultSortOrder" value="{{ phrase('title') }}" />
			<xf:else />
				<xf:set var="$defaultSortOrder" value="{{ phrase('xa_ams_publish_date') }}" />
			</xf:if>

			<xf:checkboxrow label="{{ phrase('xa_ams_article_list_default_sort_order') }}">
				<xf:option name="set_article_list_order" selected="$category.article_list_order"
					label="{{ phrase('xa_ams_override_option_article_list_default_sort_order') }} ({{ phrase('global_value') }} - {$defaultSortOrder})" 
					hint="{{ phrase('xa_ams_override_option_article_list_default_sort_order_explain') }}">

					<xf:dependent>
						<xf:select name="article_list_order" value="{$category.article_list_order}" 
							label="{{ phrase('sort_order') }}"
							explain="{{ phrase('xa_ams_sort_order_explain') }}">

							<xf:option value="publish_date">{{ phrase('xa_ams_publish_date') }}</xf:option>
							<xf:option value="last_update">{{ phrase('xa_ams_last_update') }}</xf:option>
							<xf:option value="rating_weighted">{{ phrase('rating') }}</xf:option>
							<xf:option value="reaction_score">{{ phrase('reaction_score') }}</xf:option>
							<xf:option value="view_count">{{ phrase('views') }}</xf:option>
							<xf:option value="title">{{ phrase('title') }}</xf:option>
						</xf:select>
					</xf:dependent>
				</xf:option>
			</xf:checkboxrow>

			<xf:if is="$xf.options.xaAmsArticleListLayoutType == 'grid_view'">
				<xf:set var="$defaultLayoutType" value="{{ phrase('xa_ams_grid_view_layout') }}" />
			<xf:elseif is="$xf.options.xaAmsArticleListLayoutType == 'tile_view'" />
				<xf:set var="$defaultLayoutType" value="{{ phrase('xa_ams_tile_view_layout') }}" />
			<xf:elseif is="$xf.options.xaAmsArticleListLayoutType == 'article_view'" />
				<xf:set var="$defaultLayoutType" value="{{ phrase('xa_ams_article_view_layout') }}" />
			<xf:else />
				<xf:set var="$defaultLayoutType" value="{{ phrase('xa_ams_list_view_layout') }}" />
			</xf:if>

			<xf:checkboxrow label="{{ phrase('xa_ams_article_list_layout_type') }}">
				<xf:option name="set_layout_type" selected="$category.layout_type"
					label="{{ phrase('xa_ams_override_option_article_list_layout_type') }} ({{ phrase('global_value') }} - {$defaultLayoutType})"
					hint="{{ phrase('xa_ams_override_option_article_list_layout_type_explain') }}">

					<xf:dependent>
						<xf:radio name="layout_type" value="{$category.layout_type}">
							<xf:option value="list_view">{{ phrase('xa_ams_list_view_layout') }}</xf:option>
							<xf:option value="grid_view">{{ phrase('xa_ams_grid_view_layout') }}</xf:option>
							<xf:option value="tile_view">{{ phrase('xa_ams_tile_view_layout') }}</xf:option>
							<xf:option value="article_view">{{ phrase('xa_ams_article_view_layout') }}</xf:option>
						</xf:radio>
					</xf:dependent>
				</xf:option>
			</xf:checkboxrow>

			<hr class="formRowSep" />

			<xf:checkboxrow label="{{ phrase('xa_ams_category_map_options') }}">
				<xf:option name="map_options[enable_map]" selected="$category.map_options.enable_map"
					label="{{ phrase('xa_ams_enable_category_map') }}"
					hint="{{ phrase('xa_ams_enable_category_map_explain') }}">

					<xf:dependent>
						<xf:radio name="map_options[map_display_location]" value="{$category.map_options.map_display_location}">
							<xf:option value="above_listing">{{ phrase('xa_ams_location_above_listing') }}</xf:option>
							<xf:option value="below_listing">{{ phrase('xa_ams_location_below_listing') }}</xf:option>
						</xf:radio>

						<div class="inputGroup" style="margin-top: 10px;">
							<span class="inputGroup-text">
								{{ phrase('xa_ams_container_height:') }}
							</span>
							<xf:numberbox name="map_options[container_height]" value="{$category.map_options.container_height}" min="200" max="800" step="10" size="5" />
						</div>
					</xf:dependent>
				</xf:option>
			</xf:checkboxrow>

			<xf:checkboxrow label="{{ phrase('xa_ams_full_page_category_map_options') }}">
				<xf:option name="map_options[enable_full_page_map]" selected="$category.map_options.enable_full_page_map"
					label="{{ phrase('xa_ams_enable_full_page_category_map') }}"
					hint="{{ phrase('xa_ams_enable_full_page_category_map_explain') }}">

					<xf:dependent>
						<div class="inputGroup" style="margin-top: 10px;">
							<span class="inputGroup-text">
								{{ phrase('sort_by:') }}
							</span>
							<xf:select name="map_options[marker_fetch_order]" value="{$category.map_options.marker_fetch_order}">
								<xf:option value="publish_date">{{ phrase('xa_ams_publish_date') }}</xf:option>
								<xf:option value="last_update">{{ phrase('xa_ams_last_update') }}</xf:option>
								<xf:option value="rating_weighted">{{ phrase('rating') }}</xf:option>
								<xf:option value="reaction_score">{{ phrase('reaction_score') }}</xf:option>
								<xf:option value="view_count">{{ phrase('views') }}</xf:option>
							</xf:select>
						</div>

						<div class="inputGroup" style="margin-top: 15px;">
							<span class="inputGroup-text">
								{{ phrase('xa_ams_marker_limit:') }}
							</span>
							<xf:numberbox name="map_options[marker_limit]" value="{$category.map_options.marker_limit}" min="1" size="5" />
						</div>
					</xf:dependent>
				</xf:option>
			</xf:checkboxrow>

			<hr class="formRowSep" />
			<xf:assetuploadrow name="map_options[custom_map_marker_url]" value="{$category.map_options.custom_map_marker_url}" asset="xa_ams_map_markers" 
				label="{{ phrase('xa_ams_custom_map_marker_icon_url') }}" 
				explain="{{ phrase('xa_ams_custom_map_marker_icon_url_explain') }}" />

			<xf:assetuploadrow name="map_options[custom_featured_map_marker_url]" value="{$category.map_options.custom_featured_map_marker_url}" asset="xa_ams_map_markers"
				label="{{ phrase('xa_ams_custom_featured_map_marker_icon_url') }}" 
				explain="{{ phrase('xa_ams_custom_featured_map_marker_icon_url_explain') }}" />

			<hr class="formRowSep" />

			<xf:checkboxrow>
				<xf:option name="style_override" selected="$category.style_id"
					label="{{ phrase('override_user_style_choice') }}"
					hint="{{ phrase('xa_ams_if_specified_all_visitors_view_using_selected_style') }}">

					<xf:select name="style_id" value="{$category.style_id}">
						<xf:foreach loop="$styleTree.getFlattened(0)" value="$treeEntry">
							<xf:option value="{$treeEntry.record.style_id}">{{ repeat('--', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>
						</xf:foreach>
					</xf:select>
				</xf:option>
			</xf:checkboxrow>
		</div>

		<h3 class="block-formSectionHeader">
			<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up:next">
				<span class="block-formSectionHeader-aligner">{{ phrase('xa_ams_article_field_options') }}</span>
			</span>
		</h3>
		<div class="block-body block-body--collapsible">
			<xf:if is="$availableFields is not empty">
				<hr class="formRowSep" />

				<xf:checkboxrow name="available_fields" value="{$category.field_cache}" listclass="field listColumns"
					label="{{ phrase('available_fields') }}">

					<xf:options source="$availableFields" />
					<xf:hint>
						<xf:checkbox standalone="true">
							<xf:option check-all=".field.listColumns">{{ phrase('select_all') }}</xf:option>
						</xf:checkbox>
					</xf:hint>
				</xf:checkboxrow>
			<xf:else />
				<hr class="formRowSep" />

				<xf:formrow label="{{ phrase('available_fields') }}">
					{{ phrase('none')|parens }} <a href="{{ link('xa-ams/article-fields') }}" target="_blank">{{ phrase('add_field') }}</a>
				</xf:formrow>
			</xf:if>
		</div>

		<h3 class="block-formSectionHeader">
			<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up:next">
				<span class="block-formSectionHeader-aligner">{{ phrase('xa_ams_review_field_options') }}</span>
			</span>
		</h3>
		<div class="block-body block-body--collapsible">
			<xf:if is="$availableReviewFields is not empty">
				<hr class="formRowSep" />

				<xf:checkboxrow name="available_review_fields" value="{$category.review_field_cache}" listclass="field listColumns"
					label="{{ phrase('available_fields') }}">

					<xf:options source="$availableReviewFields" />
					<xf:hint>
						<xf:checkbox standalone="true">
							<xf:option check-all=".field.listColumns">{{ phrase('select_all') }}</xf:option>
						</xf:checkbox>
					</xf:hint>
				</xf:checkboxrow>
			<xf:else />
				<hr class="formRowSep" />

				<xf:formrow label="{{ phrase('available_fields') }}">
					{{ phrase('none')|parens }} <a href="{{ link('xa-ams/review-fields') }}" target="_blank">{{ phrase('add_field') }}</a>
				</xf:formrow>
			</xf:if>
		</div>

		<h3 class="block-formSectionHeader">
			<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up:next">
				<span class="block-formSectionHeader-aligner">{{ phrase('xa_ams_prefix_options') }}</span>
			</span>
		</h3>
		<div class="block-body block-body--collapsible">
			<xf:if is="$availablePrefixes is not empty">
				<hr class="formRowSep" />

				<xf:checkboxrow name="available_prefixes" value="{$category.prefix_cache}" listclass="prefix listColumns"
					label="{{ phrase('available_prefixes') }}">

					<xf:options source="$availablePrefixes" />
					<xf:hint>
						<xf:checkbox standalone="true">
							<xf:option check-all=".prefix.listColumns">{{ phrase('select_all') }}</xf:option>
						</xf:checkbox>
					</xf:hint>
				</xf:checkboxrow>

				<xf:selectrow name="default_prefix_id" value="{$category.default_prefix_id}"
					label="{{ phrase('xa_ams_default_article_prefix') }}"
					explain="{{ phrase('xa_ams_default_article_prefix_explain') }}">

					<xf:option value="-1">{{ phrase('none') }}</xf:option>
					<xf:foreach loop="$prefixGroups" key="$prefixGroupId" value="$prefixGroup"
						if="{{ count($prefixesGrouped.{$prefixGroupId}) > 0 }}">
						<xf:optgroup label="{{ $prefixGroupId > 0 ? $prefixGroup.title : phrase('ungrouped') }}">
							<xf:foreach loop="{$prefixesGrouped.{$prefixGroupId}}" key="$prefixId" value="$prefix">
								<xf:option value="{$prefixId}" disabled="{{ !in_array($prefixId, $category.prefix_cache) }}">{$prefix.title}</xf:option>
							</xf:foreach>
						</xf:optgroup>
					</xf:foreach>
				</xf:selectrow>

				<xf:checkboxrow name="require_prefix" value="{$category.require_prefix}">
					<xf:option value="1"
						label="{{ phrase('require_users_to_select_prefix') }}"
						hint="{{ phrase('xa_ams_if_selected_users_required_select_prefix_when_creating_editing') }}" />
				</xf:checkboxrow>
			<xf:else />

				<hr class="formRowSep" />

				<xf:formrow label="{{ phrase('available_prefixes') }}">
					{{ phrase('none')|parens }} <a href="{{ link('xa-ams/prefixes') }}" target="_blank">{{ phrase('add_prefix') }}</a>
				</xf:formrow>

			</xf:if>
		</div>

		<h3 class="block-formSectionHeader">
			<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up:next">
				<span class="block-formSectionHeader-aligner">{{ phrase('xa_ams_prompt_options') }}</span>
			</span>
		</h3>
		<div class="block-body block-body--collapsible">
			<xf:if is="$availablePrompts is not empty">
				<hr class="formRowSep" />

				<xf:checkboxrow name="available_prompts" rowtype="explainOffset" listclass="prompt"
					label="{{ phrase('available_prompts') }}"
					explain="{{ phrase('xa_ams_available_article_prompts_explain',
					{
						'link': link(
							'phrases/edit-by-name', {},
							{'title': 'ams_article_prompt.default'}
						)
					}) }}">

					<xf:foreach loop="$promptGroups" key="$promptGroupId" value="$promptGroup" if="{$promptsGrouped.{$promptGroupId}}">

						<xf:optgroup check-all="true" listclass="_listColumns"
							label="{{ $promptGroupId ? $promptGroup.title : phrase('ungrouped') }}">

							<xf:foreach loop="{$promptsGrouped.{$promptGroupId}}" key="$promptId" value="$prompt">
								<xf:option value="{$promptId}" selected="{$category.prompt_cache.{$promptId}}">
									<xf:label>{$prompt.title}</xf:label>
								</xf:option>
							</xf:foreach>
						</xf:optgroup>
					</xf:foreach>

					<xf:hint>
						<xf:checkbox standalone="true">
							<xf:option check-all=".prompt">{{ phrase('select_all') }}</xf:option>
						</xf:checkbox>
					</xf:hint>
				</xf:checkboxrow>
			<xf:else />

				<hr class="formRowSep" />

				<xf:formrow label="{{ phrase('available_prompts') }}">
					{{ phrase('none')|parens }} <a href="{{ link('xa-ams/prompts') }}" target="_blank">{{ phrase('add_prompt') }}</a>
				</xf:formrow>

			</xf:if>
		</div>

		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xa_ams_category_list" version_id="2020033" version_string="2.2.0 Beta 3"><![CDATA[<xf:title>{{ phrase('xa_ams_article_categories') }}</xf:title>

<xf:macro template="category_tree_macros" name="page_action"
	arg-linkPrefix="xa-ams/categories" />

<xf:macro name="category_list"
	arg-categoryTree="{$categoryTree}"
	arg-filterKey="xa-ams-categories"
	arg-linkPrefix="xa-ams/categories"
	arg-idKey="category_id"
/>

<xf:macro name="category_list" global="true"
	arg-categoryTree="!"
	arg-filterKey="!"
	arg-linkPrefix="!"
	arg-idKey="category_id"
	arg-parentIdKey="parent_category_id">

	<xf:if is="$categoryTree.countChildren()">
		<div class="block">
			<div class="block-outer">
				<xf:macro template="filter_macros" name="quick_filter" arg-key="{$filterKey}" arg-class="block-outer-opposite" />
			</div>
			<div class="block-container">
				<div class="block-body">
					<xf:datalist>
						<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
							<xf:set var="$category" value="{$treeEntry.record}" />
							<xf:datarow>
								<xf:cell class="dataList-cell--link dataList-cell--main" hash="{$category.{$idKey}}">
									<a href="{{ link($linkPrefix . '/edit', $category) }}">
										<div class="u-depth{$treeEntry.depth}">
											<div class="dataList-mainRow">{$category.title}</div>
										</div>
									</a>
								</xf:cell>
								<xf:if is="$permissionContentType">
									<xf:action
										class="{{ {$customPermissions.{$category.{$idKey}}} ? 'dataList-cell--highlighted' : '' }}"
										href="{{ link($linkPrefix . '/permissions', $category) }}">
										{{ phrase('permissions') }}
									</xf:action>
								</xf:if>
								<xf:popup class="dataList-cell--action u-hideMedium"
									label="{{ phrase('add...') }}">

									<div class="menu" data-menu="menu" aria-hidden="true">
										<div class="menu-content">
											<h3 class="menu-header">{{ phrase('add...') }}</h3>
											<a href="{{ link($linkPrefix . '/add', null, { {$parentIdKey}: $category.{$parentIdKey} }) }}" class="menu-linkRow">{{ phrase('sibling') }}</a>
											<a href="{{ link($linkPrefix . '/add', null, { {$parentIdKey}: $category.{$parentIdKey}, 'clone_category_id': {$category.category_id} }) }}" class="menu-linkRow">{{ phrase('xa_ams_sibling_clone_settings') }}</a>
											<a href="{{ link($linkPrefix . '/add', null, { {$parentIdKey}: $category.{$idKey} }) }}" class="menu-linkRow">{{ phrase('child') }}</a>
											<a href="{{ link($linkPrefix . '/add', null, { {$parentIdKey}: $category.{$idKey}, 'clone_category_id': {$category.category_id} }) }}" class="menu-linkRow">{{ phrase('xa_ams_child_clone_settings') }}</a>
										</div>
									</div>
								</xf:popup>
								<xf:delete href="{{ link($linkPrefix . '/delete', $category) }}" />
							</xf:datarow>
						</xf:foreach>
					</xf:datalist>
				</div>
			</div>
		</div>
	<xf:else />
		<div class="blockMessage">{{ phrase('xa_ams_no_categories_have_been_created_yet') }}</div>
	</xf:if>
</xf:macro>]]></template>
  <template type="admin" title="xa_ams_category_permission_edit" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:if is="$userGroup">
	<xf:title>{$userGroup.title}</xf:title>
<xf:else />
	<xf:title>{$user.username}</xf:title>
</xf:if>

<xf:breadcrumb href="{{ link('xa-ams/categories/permissions', $record) }}">{{ phrase('permissions:') }} {$record.title}</xf:breadcrumb>

<xf:macro template="permission_category_macros" name="edit"
	arg-category="{$record}"
	arg-permissionData="{$permissionData}"
	arg-typeEntries="{$typeEntries}"
	arg-routeBase="xa-ams/categories/permissions"
	arg-saveParams="{$saveParams}" />]]></template>
  <template type="admin" title="xa_ams_category_permission_list" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('permissions:') }} {$record.title}</xf:title>

<xf:macro template="permission_category_macros" name="list"
	arg-category="{$record}"
	arg-isPrivate="{$isPrivate}"
	arg-userGroups="{$userGroups}"
	arg-users="{$users}"
	arg-entries="{$entries}"
	arg-routeBase="xa-ams/categories/permissions" />]]></template>
  <template type="admin" title="xa_ams_category_sort" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('sort_categories') }}</xf:title>

<xf:macro template="category_tree_macros" name="sortable_form"
	arg-categoryTree="{$categoryTree}"
	arg-linkPrefix="xa-ams/categories" />]]></template>
  <template type="admin" title="xa_ams_feed_delete" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('xa-ams/feeds/delete', $feed) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('please_confirm_that_you_want_to_delete_following:') }}
				<strong><a href="{{ link('xa-ams/feeds/edit', $feed) }}">{$feed.title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow rowtype="simple" icon="delete" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xa_ams_feed_edit" version_id="2000014" version_string="2.0.0 Alpha 4"><![CDATA[<xf:if is="$feed.isInsert()">
	<xf:title>{{ phrase('add_feed') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('edit_feed:') }} {$feed.title}</xf:title>
</xf:if>

<xf:pageaction if="$feed.isUpdate()">
	<xf:button href="{{ link('xa-ams/feeds/delete', $feed) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:form action="{{ link('xa-ams/feeds/save', $feed) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$feed.feed_id">
				<xf:textboxrow name="title" value="{$feed.title}" maxlength="{{ max_length($feed, 'title') }}"
					label="{{ phrase('title') }}" />
			</xf:if>

			<xf:textboxrow name="url" value="{$feed.url}" maxlength="{{ max_length($feed, 'url') }}" type="url"
				label="{{ phrase('url') }}"
				dir="ltr" />

			<xf:selectrow name="frequency" value="{$feed.frequency}"
				label="{{ phrase('fetch_new_entries_every') }}">

				<xf:option value="600">{{ phrase('x_minutes', {'count': '10'}) }}</xf:option>
				<xf:option value="1200">{{ phrase('x_minutes', {'count': '20'}) }}</xf:option>
				<xf:option value="1800">{{ phrase('x_minutes', {'count': '30'}) }}</xf:option>
				<xf:option value="3600">{{ phrase('x_minutes', {'count': '60'}) }}</xf:option>
				<xf:option value="7200">{{ phrase('x_hours', {'count': '2'}) }}</xf:option>
				<xf:option value="14400">{{ phrase('x_hours', {'count': '4'}) }}</xf:option>
				<xf:option value="21600">{{ phrase('x_hours', {'count': '6'}) }}</xf:option>
				<xf:option value="43200">{{ phrase('x_hours', {'count': '12'}) }}</xf:option>
			</xf:selectrow>

			<xf:if is="$feed.feed_id">
				<xf:checkboxrow>
					<xf:option name="active" selected="$feed.active">
						<xf:label>{{ phrase('feed_is_active') }}</xf:label>
						<xf:hint>{{ phrase('disable_to_prevent_feed_import') }}</xf:hint>
					</xf:option>
				</xf:checkboxrow>
			<xf:else />
				<xf:hiddenval name="active">1</xf:hiddenval>
			</xf:if>

			<hr class="formRowSep" />

			<xf:radiorow name="user_id" value="{$feed.user_id}"
				label="{{ phrase('posting_user') }}">

				<xf:option value="0">{{ phrase('post_feed_entries_as_guest') }}</xf:option>
				<xf:option value="-1" label="{{ phrase('post_feed_entries_as_following_user') }}" selected="{$feed.User}">
					<xf:textbox name="username" value="{$feed.User.username}" placeholder="{{ phrase('user_name...') }}" ac="single" />
				</xf:option>
			</xf:radiorow>

			<hr class="formRowSep" />

			<xf:selectrow name="category_id" value="{$feed.category_id}" id="js-nodeList"
				label="{{ phrase('xa_ams_destination_category') }}">

				<xf:foreach loop="$categories" value="$category">
					<xf:option value="{$category.value}" disabled="{$category.disabled}" label="{$category.label}" />
				</xf:foreach>
				<xf:explain>
					{{ phrase('xa_ams_select_category_for_feed') }}
				</xf:explain>
			</xf:selectrow>

			<xf:prefixinputrow
				textbox-name="title_template"
				textbox-value="{$feed.title_template}"
				maxlength="{{ max_length($feed, 'title_template') }}"
				prefixes="{$prefixes}"
				prefix-value="{$feed.prefix_id}"
				type="ams_article"
				href="{{ link('xa-ams/prefixes/prefixes') }}"
				listen-to="#js-nodeList"
				label="{{ phrase('title_template') }}"
				hint="{{ phrase('optional') }}" />

			<xf:textarearow name="message_template" value="{$feed.message_template}" rows="5" autosize="true"
				label="{{ phrase('message_template') }}"
				hint="{{ phrase ('you_may_use_bb_code') }}"
				explain="{{ phrase('feed_message_template_explain') }}" />

			<hr class="formRowSep" />

			<xf:checkboxrow label="{{ phrase('options') }}">

				<xf:option name="article_visible" selected="$feed.article_visible">
					<xf:label>{{ phrase('post_immediately') }}</xf:label>
					<xf:hint>{{ phrase('otherwise_insert_into_moderation_queue') }}</xf:hint>
				</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow sticky="true" icon="save"><xf:html>
			<xf:button type="submit" name="preview" icon="preview" />
		</xf:html></xf:submitrow>
	</div>
</xf:form>]]></template>
  <template type="admin" title="xa_ams_feed_list" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('rss_feed_importer') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('xa-ams/feeds/add') }}" icon="add">{{ phrase('add_feed') }}</xf:button>
</xf:pageaction>

<xf:if is="$feeds is not empty">
	<xf:form action="{{ link('xa-ams/feeds/toggle') }}" class="block" ajax="true">
		<div class="block-outer">
			<xf:macro template="filter_macros" name="quick_filter" arg-key="feeds" arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$feeds" value="$feed">
						<xf:datarow>
							<xf:main hash="{$feed.feed_id}" href="{{ link('xa-ams/feeds/edit', $feed) }}"
								label="{$feed.title}" explain="{$feed.url}" />
							<xf:toggle name="active[{$feed.feed_id}]" selected="$feed.active"
								class="dataList-cell--separated" submit="true"
								tooltip="{{ phrase('enable_disable_x', {'title': $feed.title}) }}" />
							<xf:action href="{{ link('xa-ams/feeds/import', $feed) }}">{{ phrase('import_now') }}</xf:action>
							<xf:delete href="{{ link('xa-ams/feeds/delete', $feed) }}" />
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals($feeds) }}</span>
			</div>
		</div>
	</xf:form>
<xf:else />
	<div class="blockMessage">{{ phrase('no_feeds_have_been_registered_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="xa_ams_feed_preview" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('preview_feed_entry') }}</xf:title>
<xf:h1>
	{{ phrase('preview_feed_entry:') }} <a href="{$feed.url}" target="_blank">{$feed.title}</a>
</xf:h1>

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<div class="block-row block-row--separated">
				<h3 class="block-textHeader">{$entry.title}</h3>
				{{ bb_code($entry.message, 'post', $feed.User) }}
			</div>
			<div class="block-row block-row--separated">
				<dl class="pairs pairs--columns pairs--fluidSmall">
					<dt>{{ phrase('author') }}</dt>
					<dd>{$entry.author}</dd>
				</dl>
				<dl class="pairs pairs--columns pairs--fluidSmall">
					<dt>{{ phrase('last_modified') }}</dt>
					<dd><xf:date time="$entry.date_modified" /></dd>
				</dl>
			</div>
		</div>
	</div>
</div>]]></template>
  <template type="admin" title="xa_ams_helper_article_search_criteria" version_id="2022170" version_string="2.2.21"><![CDATA[<hr class="formRowSep" />

<xf:textboxrow name="criteria[title]" value="{$criteria.title}" type="search"
	label="{{ phrase('title') }}" />

<xf:macro template="public:prefix_macros" name="row"
	arg-includeAny="{{ true }}"
	arg-prefixes="{$prefixes.prefixesGrouped}"
	arg-selected="{$criteria.prefix_id}"
	arg-name="criteria[prefix_id]"
	arg-type="ams_article"
	arg-multiple="{{ true }}" />

<xf:tokeninputrow name="criteria[tags]" value="{$criteria.tags}"
	href="{{ link_type('public', 'misc/tag-auto-complete') }}"
	label="{{ phrase('tags') }}" />

<div class="formRowSep"></div>

<xf:formrow
	label="{{ phrase('category') }}">

	<ul class="inputList">
		<li><xf:radio name="criteria[category_id][search_type]"
			value="{{ (is_array($criteria.category_id) ? $criteria.category_id.search_type : '') ?: 'include' }}"
			listclass="inputChoices--inline">
			<xf:option value="include">{{ phrase('include_selected') }}</xf:option>
			<xf:option value="exclude">{{ phrase('exclude_selected') }}</xf:option>
		</xf:radio></li>

		<li><xf:select name="criteria[category_id]"
			value="{{ is_array($criteria.category_id) ? $criteria.category_id|numeric_keys_only : $criteria.category_id }}"
			multiple="true" size="8">
		<xf:option value="0" label="{{ phrase('(any)') }}" />
		<xf:foreach loop="$categories" value="$category">
			<xf:option value="{$category.value}" disabled="{$category.disabled}">{$category.label}</xf:option>
		</xf:foreach>
		</xf:select></li>
	</ul>
</xf:formrow>

<div class="formRowSep"></div>

<xf:textboxrow name="criteria[username]" value="{$criteria.username}" type="search"
	label="{{ phrase('created_by') }}" />

<xf:checkboxrow name="criteria[author_user_group_id]" value="{$criteria.author_user_group_id}" listclass="listColumns"
	label="{{ phrase('xa_ams_article_author_in_user_groups') }}">

	<xf:foreach loop="$userGroups" value="$userGroup">
		<xf:option value="{$userGroup.user_group_id}">{$userGroup.title}</xf:option>
	</xf:foreach>
	<xf:explain>{{ phrase('xa_ams_true_if_article_author_is_in_one_or_more_of_selected_groups') }}</xf:explain>
</xf:checkboxrow>

<xf:checkboxrow name="criteria[author_not_user_group_id]" value="{$criteria.author_not_user_group_id}" listclass="listColumns"
	label="{{ phrase('xa_ams_article_author_not_in_user_groups') }}">

	<xf:foreach loop="$userGroups" value="$userGroup">
		<xf:option value="{$userGroup.user_group_id}">{$userGroup.title}</xf:option>
	</xf:foreach>
	<xf:explain>{{ phrase('xa_ams_true_if_article_author_is_not_in_any_of_selected_groups') }}</xf:explain>
</xf:checkboxrow>

<hr class="formRowSep" />

<xf:formrow rowtype="input"
	label="{{ phrase('created_between') }}">
	<div class="inputGroup">
		<xf:dateinput name="criteria[publish_date][start]" value="{$criteria.publish_date.start}" size="15" />
		<span class="inputGroup-text">-</span>
		<xf:dateinput name="criteria[publish_date][end]" value="{$criteria.publish_date.end}" size="15" />
	</div>
</xf:formrow>

<xf:formrow rowtype="input"
	label="{{ phrase('created_in_last') }}"
	explain="{{ phrase('use_0_to_specify_no_restriction') }}">
	<div class="inputGroup inputGroup--auto">
		<xf:numberbox name="criteria[created_in_last][value]" value="{$criteria.created_in_last.value}"
			size="5" min="0" />
		<span class="inputGroup-splitter"></span>
		<xf:select name="criteria[created_in_last][unit]" value="{$criteria.created_in_last.unit}">
			<xf:option value="hour">{{ phrase('units_hours') }}</xf:option>
			<xf:option value="day">{{ phrase('units_days') }}</xf:option>
			<xf:option value="week">{{ phrase('units_weeks') }}</xf:option>
			<xf:option value="month">{{ phrase('units_months') }}</xf:option>
			<xf:option value="year">{{ phrase('units_years') }}</xf:option>
		</xf:select>
	</div>
</xf:formrow>

<hr class="formRowSep" />

<xf:formrow rowtype="input"
	label="{{ phrase('xa_ams_page_count_between') }}"
	explain="{{ phrase('use_negative_one_specify_no_max') }}">

	<div class="inputGroup">
		<xf:numberbox name="criteria[page_count][start]" value="{$criteria.page_count.start}" size="5" min="0" />
		<span class="inputGroup-text">-</span>
		<xf:numberbox name="criteria[page_count][end]" value="{$criteria.page_count.end}" size="5" min="-1" />
	</div>
</xf:formrow>

<xf:formrow rowtype="input"
	label="{{ phrase('xa_ams_comment_count_between') }}"
	explain="{{ phrase('use_negative_one_specify_no_max') }}">

	<div class="inputGroup">
		<xf:numberbox name="criteria[comment_count][start]" value="{$criteria.comment_count.start}" size="5" min="0" />
		<span class="inputGroup-text">-</span>
		<xf:numberbox name="criteria[comment_count][end]" value="{$criteria.comment_count.end}" size="5" min="-1" />
	</div>
</xf:formrow>

<xf:formrow rowtype="input"
	label="{{ phrase('xa_ams_rating_count_between') }}"
	explain="{{ phrase('use_negative_one_specify_no_max') }}">

	<div class="inputGroup">
		<xf:numberbox name="criteria[rating_count][start]" value="{$criteria.rating_count.start}" size="5" min="0" />
		<span class="inputGroup-text">-</span>
		<xf:numberbox name="criteria[rating_count][end]" value="{$criteria.rating_count.end}" size="5" min="-1" />
	</div>
</xf:formrow>

<xf:formrow rowtype="input"
	label="{{ phrase('xa_ams_review_count_between') }}"
	explain="{{ phrase('use_negative_one_specify_no_max') }}">

	<div class="inputGroup">
		<xf:numberbox name="criteria[review_count][start]" value="{$criteria.review_count.start}" size="5" min="0" />
		<span class="inputGroup-text">-</span>
		<xf:numberbox name="criteria[review_count][end]" value="{$criteria.review_count.end}" size="5" min="-1" />
	</div>
</xf:formrow>

<xf:formrow rowtype="input"
	label="{{ phrase('reaction_score_between') }}">

	<div class="inputGroup">
		<xf:numberbox name="criteria[reaction_score][start]" value="{$criteria.reaction_score.start}" size="5" />
		<span class="inputGroup-text">-</span>
		<xf:numberbox name="criteria[reaction_score][end]" value="{$criteria.reaction_score.end}" size="5" />
	</div>
</xf:formrow>

<xf:formrow rowtype="input"
	label="{{ phrase('view_count_between') }}"
	explain="{{ phrase('use_negative_one_specify_no_max') }}">

	<div class="inputGroup">
		<xf:numberbox name="criteria[view_count][start]" value="{$criteria.view_count.start}" size="5" min="0" />
		<span class="inputGroup-text">-</span>
		<xf:numberbox name="criteria[view_count][end]" value="{$criteria.view_count.end}" size="5" min="-1" />
	</div>
</xf:formrow>

<hr class="formRowSep" />

<xf:formrow rowtype="input"
	label="{{ phrase('xa_ams_discussion_reply_count_between') }}"
	explain="{{ phrase('use_negative_one_specify_no_max') }}">
	<div class="inputGroup">
		<xf:numberbox name="criteria[Discussion][reply_count][start]" value="{$criteria.Discussion.reply_count.start}" size="5" min="0" />
		<span class="inputGroup-text">-</span>
		<xf:numberbox name="criteria[Discussion][reply_count][end]" value="{$criteria.Discussion.reply_count.end}" size="5" min="-1" />
	</div>
</xf:formrow>

<hr class="formRowSep" />

<xf:checkboxrow name="criteria[article_state]"
	label="{{ phrase('state') }}">

	<xf:option value="visible" selected="in_array('visible', $criteria.article_state)">{{ phrase('visible') }}</xf:option>
	<xf:option value="deleted" selected="in_array('deleted', $criteria.article_state)">{{ phrase('deleted') }}</xf:option>
	<xf:option value="moderated" selected="in_array('moderated', $criteria.article_state)">{{ phrase('moderated') }}</xf:option>
	<xf:option value="draft" selected="in_array('draft', $criteria.article_state)">{{ phrase('xa_ams_draft') }}</xf:option>
	<xf:option value="awaiting" selected="in_array('awaiting', $criteria.article_state)">{{ phrase('xa_ams_awaiting_publishing') }}</xf:option>
</xf:checkboxrow>

<xf:checkboxrow name="criteria[sticky]" value="{$criteria.sticky}"
	label="{{ phrase('sticky') }}">
	<xf:option value="0">{{ phrase('not_sticky') }}</xf:option>
	<xf:option value="1">{{ phrase('sticky') }}</xf:option>
</xf:checkboxrow>

<xf:checkboxrow name="criteria[comments_open]"
	label="{{ phrase('xa_ams_comments_locked') }}">
	<xf:option value="1" selected="in_array(1, $criteria.comments_open)">{{ phrase('unlocked') }}</xf:option>
	<xf:option value="0" selected="in_array(0, $criteria.comments_open)">{{ phrase('locked') }}</xf:option>
</xf:checkboxrow>

<xf:checkboxrow name="criteria[ratings_open]"
	label="{{ phrase('xa_ams_ratings_locked') }}">
	<xf:option value="1" selected="in_array(1, $criteria.ratings_open)">{{ phrase('unlocked') }}</xf:option>
	<xf:option value="0" selected="in_array(0, $criteria.ratings_open)">{{ phrase('locked') }}</xf:option>
</xf:checkboxrow>

<hr class="formRowSep" />

<xf:if contentcheck="true">
	<hr class="formRowSep" />
	<xf:contentcheck>
		<xf:foreach loop="$xf.app.em.getRepository('XenAddons\AMS:ArticleField').getDisplayGroups()" key="$fieldGroup" value="$phrase">
			<xf:set var="$customFields" value="{$xf.app.getCustomFields('ams_articles', $fieldGroup)}" />
			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:foreach loop="$customFields" key="$fieldId" value="$fieldDefinition">
						<xf:set var="$choices" value="{$fieldDefinition.field_choices}" />
						<xf:set var="$fieldName" value="criteria[article_field]{{ ($choices && $fieldDefinition.type_group != 'multiple') ? '[exact]' : '' }}[{$fieldId}]" />
						<xf:formrow rowtype="input"
							label="{$fieldDefinition.title}">
							<xf:if is="!{$choices}">
								<xf:textbox name="{$fieldName}" value="{$criteria.{$fieldName}.text}" />
							<xf:else />
								<xf:checkbox name="{$fieldName}" value="{$criteria.custom.{$fieldId}}" listclass="listColumns">
									<xf:foreach loop="$choices" key="$val" value="$choice">
										<xf:option value="{{ $fieldDefinition.type_group == 'multiple' ? 's:' . strlen($val) . ':"' . $val . '"' : $val }}" label="{$choice}" />
									</xf:foreach>
								</xf:checkbox>
							</xf:if>
						</xf:formrow>
					</xf:foreach>
				</xf:contentcheck>
			</xf:if>
		</xf:foreach>
	</xf:contentcheck>
</xf:if>]]></template>
  <template type="admin" title="xa_ams_option_macros" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:macro name="option_form_block" arg-group="" arg-options="!" arg-containerBeforeHtml="">

	<xf:set var="$hundred" value="0" />

	<xf:if is="$options is not empty">
		<xf:form action="{{ link('options/update') }}" ajax="true" class="block">
			{$containerBeforeHtml|raw}
			<div class="block-container">
				<h3 class="block-formSectionHeader">
					{{ phrase('general_options') }}
				</h3>
				<div class="block-body">
					<xf:foreach loop="$options" value="$option">
						<xf:if is="$option.Relations.xaAms.display_order < 1000">
							<xf:if is="$group">
								<xf:set var="$curHundred" value="{{ floor($option.Relations.{$group.group_id}.display_order / 100) }}" />
								<xf:if is="{{ $curHundred > $hundred }}">
									<xf:set var="$hundred" value="{$curHundred}" />
									<hr class="formRowSep" />
								</xf:if>
							</xf:if>
							<xf:macro template="option_macros" name="option_row" arg-group="{$group}" arg-option="{$option}" />
						</xf:if>
					</xf:foreach>
				</div>

				<h3 class="block-formSectionHeader">
					{{ phrase('xa_ams_article_list_options') }}
				</h3>               
				<div class="block-body">
					<xf:foreach loop="$options" value="$option">
						<xf:if is="$option.Relations.xaAms.display_order >= 1000 AND $option.Relations.xaAms.display_order < 2000">
							<xf:if is="$group">
								<xf:set var="$curHundred" value="{{ floor($option.Relations.{$group.group_id}.display_order / 100) }}" />
								<xf:if is="{{ $curHundred > $hundred }}">
									<xf:set var="$hundred" value="{$curHundred}" />
									<hr class="formRowSep" />
								</xf:if>
							</xf:if>
							<xf:macro template="option_macros" name="option_row" arg-group="{$group}" arg-option="{$option}" />
						</xf:if>
					</xf:foreach>
				</div>

				<h3 class="block-formSectionHeader">
					{{ phrase('xa_ams_article_page_options') }}
				</h3>               
				<div class="block-body">
					<xf:foreach loop="$options" value="$option">
						<xf:if is="$option.Relations.xaAms.display_order >= 2000 AND $option.Relations.xaAms.display_order < 3000">
							<xf:if is="$group">
								<xf:set var="$curHundred" value="{{ floor($option.Relations.{$group.group_id}.display_order / 100) }}" />
								<xf:if is="{{ $curHundred > $hundred }}">
									<xf:set var="$hundred" value="{$curHundred}" />
									<hr class="formRowSep" />
								</xf:if>
							</xf:if>
							<xf:macro template="option_macros" name="option_row" arg-group="{$group}" arg-option="{$option}" />
						</xf:if>
					</xf:foreach>
				</div>

				<h3 class="block-formSectionHeader">
					{{ phrase('xa_ams_series_options') }}
				</h3>               
				<div class="block-body">
					<xf:foreach loop="$options" value="$option">
						<xf:if is="$option.Relations.xaAms.display_order >= 3000 AND $option.Relations.xaAms.display_order < 4000">
							<xf:if is="$group">
								<xf:set var="$curHundred" value="{{ floor($option.Relations.{$group.group_id}.display_order / 100) }}" />
								<xf:if is="{{ $curHundred > $hundred }}">
									<xf:set var="$hundred" value="{$curHundred}" />
									<hr class="formRowSep" />
								</xf:if>
							</xf:if>
							<xf:macro template="option_macros" name="option_row" arg-group="{$group}" arg-option="{$option}" />
						</xf:if>
					</xf:foreach>
				</div>

				<h3 class="block-formSectionHeader">
					{{ phrase('xa_ams_map_options') }}
				</h3>               
				<div class="block-body">
					<xf:foreach loop="$options" value="$option">
						<xf:if is="$option.Relations.xaAms.display_order >= 4000 AND $option.Relations.xaAms.display_order < 5000">
							<xf:if is="$group">
								<xf:set var="$curHundred" value="{{ floor($option.Relations.{$group.group_id}.display_order / 100) }}" />
								<xf:if is="{{ $curHundred > $hundred }}">
									<xf:set var="$hundred" value="{$curHundred}" />
									<hr class="formRowSep" />
								</xf:if>
							</xf:if>
							<xf:macro template="option_macros" name="option_row" arg-group="{$group}" arg-option="{$option}" />
						</xf:if>
					</xf:foreach>
				</div>

				<h3 class="block-formSectionHeader">
					{{ phrase('xa_ams_auto_feature_unfeature_options') }}
				</h3>               
				<div class="block-body">
					<xf:foreach loop="$options" value="$option">
						<xf:if is="$option.Relations.xaAms.display_order >= 5000 AND $option.Relations.xaAms.display_order < 6000">
							<xf:if is="$group">
								<xf:set var="$curHundred" value="{{ floor($option.Relations.{$group.group_id}.display_order / 100) }}" />
								<xf:if is="{{ $curHundred > $hundred }}">
									<xf:set var="$hundred" value="{$curHundred}" />
									<hr class="formRowSep" />
								</xf:if>
							</xf:if>
							<xf:macro template="option_macros" name="option_row" arg-group="{$group}" arg-option="{$option}" />
						</xf:if>
					</xf:foreach>
				</div>

				<h3 class="block-formSectionHeader">
					{{ phrase('xa_ams_misc_options') }}
				</h3>               
				<div class="block-body">
					<xf:foreach loop="$options" value="$option">
						<xf:if is="$option.Relations.xaAms.display_order >= 6000">
							<xf:if is="$group">
								<xf:set var="$curHundred" value="{{ floor($option.Relations.{$group.group_id}.display_order / 100) }}" />
								<xf:if is="{{ $curHundred > $hundred }}">
									<xf:set var="$hundred" value="{$curHundred}" />
									<hr class="formRowSep" />
								</xf:if>
							</xf:if>
							<xf:macro template="option_macros" name="option_row" arg-group="{$group}" arg-option="{$option}" />
						</xf:if>
					</xf:foreach>
				</div>
				<xf:submitrow sticky="true" icon="save" />
			</div>
		</xf:form>
	</xf:if>
</xf:macro>]]></template>
  <template type="admin" title="xa_ams_permission_category_edit" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:if is="$userGroup">
	<xf:title>{$userGroup.title}</xf:title>
<xf:else />
	<xf:title>{$user.username}</xf:title>
</xf:if>

<xf:breadcrumb href="{{ link('permissions/xa-ams-categories', $record) }}">{$record.title}</xf:breadcrumb>

<xf:macro template="permission_category_macros" name="edit"
	arg-category="{$record}"
	arg-permissionData="{$permissionData}"
	arg-typeEntries="{$typeEntries}"
	arg-routeBase="permissions/xa-ams-categories"
	arg-saveParams="{$saveParams}" />]]></template>
  <template type="admin" title="xa_ams_permission_category_list" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{$record.title}</xf:title>

<xf:macro template="permission_category_macros" name="list"
	arg-category="{$record}"
	arg-isPrivate="{$isPrivate}"
	arg-userGroups="{$userGroups}"
	arg-users="{$users}"
	arg-entries="{$entries}"
	arg-routeBase="permissions/xa-ams-categories" />]]></template>
  <template type="admin" title="xa_ams_permission_category_overview" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_article_category_permissions') }}</xf:title>

<xf:if is="$categoryTree.countChildren()">
	<div class="block">
		<div class="block-outer">
			<xf:macro template="filter_macros" name="quick_filter" arg-key="xa-ams-categories" arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
						<xf:set var="$category" value="{$treeEntry.record}" />
						<xf:datarow rowclass="{{ {$customPermissions.{$category.category_id}} ? 'dataList-row--custom' : '' }}">
							<xf:cell class="dataList-cell--link dataList-cell--main" hash="{$category.category_id}">
								<a href="{{ link('permissions/xa-ams-categories', $category) }}">
									<div class="u-depth{$treeEntry.depth}">
										<div class="dataList-mainRow">{$category.title}</div>
									</div>
								</a>
							</xf:cell>
							<xf:action href="{{ link('xa-ams/categories/edit', $category) }}">{{ phrase('edit') }}</xf:action>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
		</div>
	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="xa_ams_review_field_delete" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:include template="base_custom_field_delete" />]]></template>
  <template type="admin" title="xa_ams_review_field_edit" version_id="2022070" version_string="2.2.20"><![CDATA[<xf:include template="base_custom_field_edit">
	<xf:set var="$extraOptions">
		<xf:macro template="base_custom_field_macros" name="common_options"
			arg-field="{$field}"
			arg-supportsGroupEditable="{{ true }}"/>
	</xf:set>
	<xf:set var="$displayOptions">
		<xf:selectrow name="category_ids[]" value="{$categoryIds}" multiple="multiple" size="7"
			label="{{ phrase('xa_ams_applicable_categories') }}">

			<xf:option value="" selected="!{$categoryIds}">{{ phrase('(none)') }}</xf:option>
			<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
				<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
			</xf:foreach>
		</xf:selectrow>
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="xa_ams_review_field_list" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_review_fields') }}</xf:title>

<xf:include template="base_custom_field_list" />]]></template>
  <template type="admin" title="xa_ams_tools_rebuild" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="AMS: {{ phrase('xa_ams_rebuild_article_categories') }}"
	arg-job="XenAddons\AMS:Category" />
<!--[XF:after_xa_ams_category]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="AMS: {{ phrase('xa_ams_rebuild_articles') }}"
	arg-job="XenAddons\AMS:ArticleItem" />
<!--[XF:after_xa_ams_article]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="AMS: {{ phrase('xa_ams_rebuild_article_location_data') }}"
	arg-job="XenAddons\AMS:ArticleLocationData" />
<!--[XF:after_xa_ams_article_location_data]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="AMS: {{ phrase('xa_ams_rebuild_series') }}"
	arg-job="XenAddons\AMS:Series" />
<!--[XF:after_xa_ams_series]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="AMS: {{ phrase('xa_ams_rebuild_series_parts') }}"
	arg-job="XenAddons\AMS:SeriesPart" />
<!--[XF:after_xa_ams_series_part]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="AMS: {{ phrase('xa_ams_rebuild_user_counts') }}"
	arg-job="XenAddons\AMS:UserArticleCount" />
<!--[XF:after_xa_ams_user_article_count]-->

<xf:set var="$amsArticleMdBody">
	<xf:checkboxrow name="options[types]" listclass="listColumns">
		<xf:option value="attachments"
			label="{{ phrase('attachments') }}"
			selected="true" />
	</xf:checkboxrow>
</xf:set>
<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="AMS: {{ phrase('xa_ams_rebuild_article_embed_metadata') }}"
	arg-body="{$amsArticleMdBody}"
	arg-job="XenAddons\AMS:AmsArticleEmbedMetadata" />
<!--[XF:after_xa_ams_article_metadata]-->

<xf:set var="$amsArticlePageMdBody">
	<xf:checkboxrow name="options[types]" listclass="listColumns">
		<xf:option value="attachments"
			label="{{ phrase('attachments') }}"
			selected="true" />
	</xf:checkboxrow>
</xf:set>
<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="AMS: {{ phrase('xa_ams_rebuild_article_page_embed_metadata') }}"
	arg-body="{$amsArticlePageMdBody}"
	arg-job="XenAddons\AMS:AmsArticlePageEmbedMetadata" />
<!--[XF:after_xa_ams_article_page_metadata]-->

<xf:set var="$amsCommentMdBody">
	<xf:checkboxrow name="options[types]" listclass="listColumns">
		<xf:option value="attachments"
			label="{{ phrase('attachments') }}"
			selected="true" />
	</xf:checkboxrow>
</xf:set>
<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="AMS: {{ phrase('xa_ams_rebuild_comment_embed_metadata') }}"
	arg-body="{$amsCommentMdBody}"
	arg-job="XenAddons\AMS:AmsCommentEmbedMetadata" />
<!--[XF:after_xa_ams_comment_metadata]-->

<xf:set var="$amsReviewMdBody">
	<xf:checkboxrow name="options[types]" listclass="listColumns">
		<xf:option value="attachments"
			label="{{ phrase('attachments') }}"
			selected="true" />
	</xf:checkboxrow>
</xf:set>
<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="AMS: {{ phrase('xa_ams_rebuild_review_embed_metadata') }}"
	arg-body="{$amsReviewMdBody}"
	arg-job="XenAddons\AMS:AmsReviewEmbedMetadata" />
<!--[XF:after_xa_ams_review_metadata]-->

<xf:set var="$amsSeriesMdBody">
	<xf:checkboxrow name="options[types]" listclass="listColumns">
		<xf:option value="attachments"
			label="{{ phrase('attachments') }}"
			selected="true" />
	</xf:checkboxrow>
</xf:set>
<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="AMS: {{ phrase('xa_ams_rebuild_series_embed_metadata') }}"
	arg-body="{$amsSeriesMdBody}"
	arg-job="XenAddons\AMS:AmsSeriesEmbedMetadata" />
<!--[XF:after_xa_ams_series_metadata]-->]]></template>
  <template type="email" title="xa_ams_activity_summary_latest_articles" version_id="2021870" version_string="2.2.18"><![CDATA[<xf:if is="$articles is not empty">
	<xf:macro template="activity_summary_macros" name="outer_header"
		arg-title="{$title}" />

	<xf:foreach loop="$articles" value="$article">
		<xf:set var="$header">
			<a href="{{ link('canonical:ams', $article) }}">{$article.title}</a>
		</xf:set>

		<xf:set var="$attribution">
			{{ $article.User ? $article.User.username : $article.username }}
			&middot; {{ date_time($article.publish_date) }}
			<xf:if is="$article.last_update > $article.publish_date">								
				&middot; <span class="u-muted">{{ phrase('updated') }}</span>
				<xf:date time="{$article.last_update}" />
			</xf:if>
			<xf:if is="$article.author_rating && $article.Category.allow_author_rating">
				&middot;
				<span style="font-size:14pt; font-weight:700; color:#176093;">
					{{
						($article.author_rating >= 1 ? '&#9733;' : '&#9734;')
						. ($article.author_rating >= 2 ? '&#9733;' : '&#9734;')
						. ($article.author_rating >= 3 ? '&#9733;' : '&#9734;')
						. ($article.author_rating >= 4 ? '&#9733;' : '&#9734;')
						. ($article.author_rating >= 5 ? '&#9733;' : '&#9734;')
					}}
				</span>
			</xf:if>
			<xf:if is="$article.rating_count && $article.Category.allow_ratings">
				&middot;
				<span style="font-size:14pt; font-weight:700; color:#f9c479;">
					{{
						($article.rating_avg >= 1 ? '&#9733;' : '&#9734;')
						. ($article.rating_avg >= 2 ? '&#9733;' : '&#9734;')
						. ($article.rating_avg >= 3 ? '&#9733;' : '&#9734;')
						. ($article.rating_avg >= 4 ? '&#9733;' : '&#9734;')
						. ($article.rating_avg >= 5 ? '&#9733;' : '&#9734;')
					}}
				</span>
			</xf:if>
			<xf:if is="$article.view_count">
				&middot; {{ phrase('views:') }} {$article.view_count|number_short}
			</xf:if>
			<xf:if is="$article.Category.allow_comments AND $article.comment_count">
				&middot; {{ phrase('comments:') }} {$article.comment_count|number_short}
			</xf:if>
			<xf:if is="$article.Category.allow_ratings && $article.review_count">
				&middot; {{ phrase('xa_ams_reviews:') }} {$article.review_count|number_short}
			</xf:if>
			<xf:if is="$article.reaction_score">
				&middot; {{ phrase('reaction_score:') }} {$article.reaction_score|number_short}
			</xf:if>
		</xf:set>

		<xf:set var="$content">
			<div style="width: 100%; margin: 0 auto;">
				<xf:if is="$article.cover_image_id && $article.CoverImage && $article.CoverImage.thumbnail_url">
					<div style="float: left; width: 100px; padding-bottom: 10px; margin-right: 20px;">
						<span style="max-width: 100px;">
							<a href="{{ link('canonical:ams', $article) }}"><img src="{$article.CoverImage.thumbnail_url}" alt="{$article.title}" style="display: block; width:100%;" /></a>
						</span>
					</div>
				<xf:elseif is="$article.Category.content_image_url" />
					<div style="float: left; width: 100px; padding-bottom: 10px; margin-right: 20px;">
						<span style="max-width: 100px;">
							<a href="{{ link('canonical:ams', $article) }}"><img src="{{ base_url({$article.Category.content_image_url}) }}" style="display: block; width:100%;"/></a>
						</span>
					</div>
				</xf:if>

				<div>
					<xf:if is="!$displayHeader">
						<div style="padding-bottom: 10px; font-weight:700; font-size: 14pt;">
							<a href="{{ link('canonical:ams', $article) }}">{$article.title}</a>
						</div>
					</xf:if>

					<xf:if is="$displayDescription && $article.description !=''">
						<div style="padding-bottom: 20px; font-weight:700;">
							{{ bb_code_type_snippet('emailHtml', $article.description, 'ams_article', $article.description, 200) }}
						</div>
					</xf:if>

					<xf:if is="$snippetType == 'rich_text'">
						{{ bb_code_type_snippet('emailHtml', $article.message, 'ams_article', $article, 300) }}
					<xf:else />
						{{ snippet($article.message, 300, {'stripBbCode': true, 'stripQuote': true}) }}
					</xf:if>
				</div>
			</div>
		</xf:set>

		<xf:set var="$footer">
			{{ phrase('category:') }} <a href="{{ link('canonical:ams/categories', $article.Category) }}">{$article.Category.title}</a>
		</xf:set>

		<xf:set var="$footerOpposite">
			<a href="{{ link('canonical:ams', $article) }}" class="button button--link">{{ phrase('xa_ams_view_this_article') }}</a>
		</xf:set>

		<xf:macro template="activity_summary_macros" name="block"
			arg-header="{{ $displayHeader ? $header : '' }}"
			arg-attribution="{{ $displayAttribution ? $attribution : '' }}"
			arg-content="{$content}"
			arg-footer="{{ $displayFooter ? $footer : '' }}"
			arg-footerOpposite="{{ $displayFooterOpposite ? $footerOpposite : '' }}" />
	</xf:foreach>
</xf:if>]]></template>
  <template type="email" title="xa_ams_activity_summary_latest_comments" version_id="2020032" version_string="2.2.0 Beta 2"><![CDATA[<xf:if is="$comments is not empty">
	<xf:macro template="activity_summary_macros" name="outer_header"
		arg-title="{$title}" />

	<xf:foreach loop="$comments" value="$comment">
		<xf:set var="$header">
			<a href="{{ link('canonical:ams/comment', $comment) }}">
				{$comment.Content.title}
			</a>
		</xf:set>

		<xf:set var="$attribution">
			{{ $comment.User ? $comment.User.username : $comment.username }}
			&middot; {{ date_time($comment.comment_date) }}

			<xf:if is="$comment.reaction_score">
				&middot; {{ phrase('reaction_score:') }} {$comment.reaction_score|number_short}
			</xf:if>
		</xf:set>

		<xf:set var="$content">
			<xf:if is="$comment.Content.cover_image_id">
				<div class="quote">
					<span class="articleCoverImage" style="display: inline-block; max-width: 600px; max-height: 400px;">
						<a href="{{ link('canonical:ams', $comment.Content) }}">{{ ams_article_thumbnail($comment.Content) }}</a>
					</span>
				</div>
			</xf:if>

			{{ bb_code_type_snippet('emailHtml', $comment.message, 'ams_comment', $comment, 300) }}
		</xf:set>

		<xf:set var="$footerOpposite">
			<a href="{{ link('canonical:ams/comments', $comment) }}" class="button button--link">{{ phrase('read_more') }}</a>
		</xf:set>

		<xf:macro template="activity_summary_macros" name="block"
			arg-header="{$header}"
			arg-attribution="{$attribution}"
			arg-content="{$content}"
			arg-footerOpposite="{$footerOpposite}" />
	</xf:foreach>
</xf:if>]]></template>
  <template type="email" title="xa_ams_activity_summary_latest_reviews" version_id="2021170" version_string="2.2.11"><![CDATA[<xf:if is="$reviews is not empty">
	<xf:macro template="activity_summary_macros" name="outer_header"
		arg-title="{$title}" />

	<xf:foreach loop="$reviews" value="$review">
		<xf:set var="$header">
			<a href="{{ link('canonical:ams/review', $review) }}">
				{$review.Article.title}
			</a>
		</xf:set>

		<xf:set var="$reviewAuthor">
			<xf:if is="$review.is_anonymous">
				{{ phrase('anonymous') }}
			<xf:else />
				{{ $review.User.username ?: phrase('deleted_member') }}
			</xf:if>
		</xf:set>

		<xf:set var="$attribution">
			{$reviewAuthor} &middot; {{ date_time($review.rating_date) }}

			<xf:if is="$review.reaction_score">
				&middot; {{ phrase('reaction_score:') }} {$review.reaction_score|number_short}
			</xf:if>
		</xf:set>

		<xf:set var="$content">
			<xf:if is="$review.Article.cover_image_id">
				<div class="quote">
					<span class="articleCoverImage" style="display: inline-block; max-width: 600px; max-height: 400px;">
						<a href="{{ link('canonical:ams', $review.Article) }}">{{ ams_article_thumbnail($review.Article) }}</a>
					</span>
				</div>
			</xf:if>

			<div style="padding: 5px 0;">
				<span style="font-weight:700;">{{ phrase('rating:') }}</span>
				<span style="font-size:18pt; font-weight:700; color:#f9c479;">
					{{
						($review.rating >= 1 ? '&#9733;' : '&#9734;')
						. ($review.rating >= 2 ? '&#9733;' : '&#9734;')
						. ($review.rating >= 3 ? '&#9733;' : '&#9734;')
						. ($review.rating >= 4 ? '&#9733;' : '&#9734;')
						. ($review.rating >= 5 ? '&#9733;' : '&#9734;')
					}}
				</span>
			</div>

			<xf:if is="$review.pros !=''">
				<div style="padding: 5px 0; color:green;">
					<span style="font-weight:700;">{{ phrase('xa_ams_pros:') }}</span>					
					{$review.pros}
				</div>
			</xf:if>

			<xf:if is="$review.cons !=''">
				<div style="padding: 5px 0; color:#B40000;">
					<span style="font-weight:700;">{{ phrase('xa_ams_cons:') }}</span>					
					{$review.cons}
				</div>
			</xf:if>

			{{ bb_code_type_snippet('emailHtml', $review.message, 'ams_rating', $review, 500) }}
		</xf:set>

		<xf:set var="$footerOpposite">
			<a href="{{ link('canonical:ams/review', $review) }}" class="button button--link">{{ phrase('read_more') }}</a>
		</xf:set>

		<xf:macro template="activity_summary_macros" name="block"
			arg-header="{$header}"
			arg-attribution="{$attribution}"
			arg-content="{$content}"
			arg-footerOpposite="{$footerOpposite}" />
	</xf:foreach>
</xf:if>]]></template>
  <template type="email" title="xa_ams_article_macros" version_id="2022070" version_string="2.2.20"><![CDATA[<xf:macro name="go_article_bar" arg-article="!" arg-watchType="!">
	<table cellpadding="10" cellspacing="0" border="0" width="100%" class="linkBar">
	<tr>
		<td>
			<a href="{{ link('canonical:ams', $article) }}" class="button">{{ phrase('xa_ams_view_this_article') }}</a>
		</td>
		<td align="{{ $xf.isRtl ? 'left' : 'right' }}">
			<xf:if is="$watchType == 'author'">
				<a href="{{ link('canonical:watched/ams-authors') }}" class="buttonFake">{{ phrase('xa_ams_watched_authors') }}</a>			
			<xf:elseif is="$watchType == 'category'" />
				<a href="{{ link('canonical:watched/ams-categories') }}" class="buttonFake">{{ phrase('watched_categories') }}</a>
			<xf:elseif is="$watchType == 'series'" />
				<a href="{{ link('canonical:watched/ams-series') }}" class="buttonFake">{{ phrase('xa_ams_watched_series') }}</a>
			<xf:elseif is="$watchType == 'article'" />
				<a href="{{ link('canonical:watched/ams-articles') }}" class="buttonFake">{{ phrase('xa_ams_watched_articles') }}</a>
			</xf:if>
		</td>
	</tr>
	</table>
</xf:macro>

<xf:macro name="watched_category_footer" arg-category="!">
	{{ phrase('xa_ams_watched_category_email_html_footer', {
		'category': $category.title,
		'board': $xf.options.boardTitle,
		'disable_this_link': link('canonical:email-stop/content', $xf.toUser, {'t': 'ams_category', 'id': $category.category_id}),
		'disable_all_link': link('canonical:email-stop/all', $xf.toUser)
	}) }}
</xf:macro>

<xf:macro name="watched_series_footer" arg-series="!">
	{{ phrase('xa_ams_watched_series_email_html_footer', {
		'series': $series.title,
		'board': $xf.options.boardTitle,
		'disable_this_link': link('canonical:email-stop/content', $xf.toUser, {'t': 'ams_series', 'id': $series.series_id}),
		'disable_all_link': link('canonical:email-stop/all', $xf.toUser)
	}) }}
</xf:macro>

<xf:macro name="watched_article_footer" arg-article="!">
	{{ phrase('xa_ams_watched_article_email_html_footer', {
		'article': $article.title,
		'board': $xf.options.boardTitle,
		'disable_this_link': link('canonical:email-stop/content', $xf.toUser, {'t': 'ams_article', 'id': $article.article_id}),
		'disable_all_link': link('canonical:email-stop/all', $xf.toUser)
	}) }}
</xf:macro>]]></template>
  <template type="email" title="xa_ams_watched_article_comment" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<mail:subject>
	{{ phrase('xa_ams_new_comment_on_watched_article') }}
</mail:subject>

{{ phrase('xa_ams_watched_article_comment_email_html', {
	'author': username_link_email($comment.User, $comment.username),
	'board_title': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:ams/comments', $comment) }}">{$content.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage">
	<div class="message">{{ bb_code_type('emailHtml', $comment.message, 'ams_comment', $comment) }}</div>
</xf:if>

<xf:macro template="xa_ams_article_macros" name="go_article_bar" arg-article="{$content}" arg-watchType="article" />
<xf:macro template="xa_ams_article_macros" name="watched_article_footer" arg-article="{$content}" />]]></template>
  <template type="email" title="xa_ams_watched_article_page" version_id="2010870" version_string="2.1.8"><![CDATA[<mail:subject>
	{{ phrase('xa_ams_new_page_added_to_watched_article') }}
</mail:subject>

{{ phrase('xa_ams_watched_article_page_email_html', {
	'author': username_link_email($article.User, $article.username),
	'board_title': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:ams', $article, {'article_page': $page.page_id}) }}">{$article.title} - {$page.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage">
	<div class="message">{{ bb_code_type('emailHtml', $page.message, 'ams_page', $page) }}</div>
</xf:if>

<xf:macro template="xa_ams_article_macros" name="go_article_bar" arg-article="{$article}" arg-watchType="article" />
<xf:macro template="xa_ams_article_macros" name="watched_article_footer" arg-article="{$article}" />]]></template>
  <template type="email" title="xa_ams_watched_article_review" version_id="2022070" version_string="2.2.20"><![CDATA[<mail:subject>
	{{ phrase('xa_ams_new_review_on_watched_article') }}
</mail:subject>

<xf:if is="$review.is_anonymous">
	{{ phrase('xa_ams_watched_article_review_email_html', {
		'author': phrase('anonymous'),
		'board_title': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
	}) }}	
<xf:else />
	{{ phrase('xa_ams_watched_article_review_email_html', {
		'author': username_link_email($review.User, $review.username),
		'board_title': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
	}) }}
</xf:if>

<h2><a href="{{ link('canonical:ams/review', $review) }}">{$content.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage">
	<div class="message">{{ bb_code_type('emailHtml', $review.message, 'ams_rating', $review) }}</div>
</xf:if>

<xf:macro template="xa_ams_article_macros" name="go_article_bar" arg-article="{$content}" arg-watchType="article" />
<xf:macro template="xa_ams_article_macros" name="watched_article_footer" arg-article="{$content}" />]]></template>
  <template type="email" title="xa_ams_watched_article_update" version_id="2011370" version_string="2.1.13"><![CDATA[<mail:subject>
	{{ phrase('xa_ams_article_x_watched_article_updated', {
		'article': prefix('ams_article', $article, 'escaped') . $article.title
	}) }}
</mail:subject>

{{ phrase('xa_ams_watched_article_update_email_html', {
	'receiver': $receiver.username,
	'author': username_link_email($article.User, $article.username),
	'board_title': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:ams', $article) }}">{{ prefix('ams_article', $article, 'escaped') }}{$article.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage">
	<div class="message">{{ bb_code_type('emailHtml', $article.message, 'ams_article', $article) }}</div>
</xf:if>

<xf:macro template="xa_ams_article_macros" name="go_article_bar" arg-article="{$article}" arg-watchType="article" />
<xf:macro template="xa_ams_article_macros" name="watched_article_footer" arg-article="{$article}" />]]></template>
  <template type="email" title="xa_ams_watched_author_article" version_id="2022070" version_string="2.2.20"><![CDATA[<mail:subject>
	{{ phrase('xa_ams_article_x_new_watched_author', {
		'article': prefix('ams_article', $article, 'escaped') . $article.title
	}) }}
</mail:subject>

{{ phrase('xa_ams_watched_author_article_email_html', {
	'receiver': $receiver.username,
	'author': username_link_email($article.User, $article.username),
	'board': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:ams', $article) }}">{{ prefix('ams_article', $article, 'escaped') }}{$article.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage AND $article.description">
	<div class="message">{{ structured_text($article.description)|raw }}</div>
</xf:if>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage">
	<div class="message">{{ bb_code_type('emailHtml', $article.message, 'ams_article', $article) }}</div>
</xf:if>

<xf:macro template="xa_ams_article_macros" name="go_article_bar" arg-article="{$article}" arg-watchType="author" />
<xf:macro template="xa_ams_article_macros" name="watched_article_footer" arg-article="{$article}" />]]></template>
  <template type="email" title="xa_ams_watched_category_article" version_id="2000170" version_string="2.0.1"><![CDATA[<mail:subject>
	{{ phrase('xa_ams_article_x_new_watched_category', {
		'article': prefix('ams_article', $article, 'escaped') . $article.title
	}) }}
</mail:subject>

{{ phrase('xa_ams_watched_category_article_email_html', {
	'receiver': $receiver.username,
	'author': username_link_email($article.User, $article.username),
	'board': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:ams', $article) }}">{{ prefix('ams_article', $article, 'escaped') }}{$article.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage">
	<div class="message">{{ bb_code_type('emailHtml', $article.message, 'ams_article', $article) }}</div>
</xf:if>

<xf:macro template="xa_ams_article_macros" name="go_article_bar" arg-article="{$article}" arg-watchType="category" />

<xf:macro template="xa_ams_article_macros" name="watched_category_footer" arg-category="{$category}" arg-article="{$article}" />]]></template>
  <template type="email" title="xa_ams_watched_series_article" version_id="2000170" version_string="2.0.1"><![CDATA[<mail:subject>
	{{ phrase('xa_ams_new_article_on_watched_series') }}
</mail:subject>

{{ phrase('xa_ams_watched_series_article_email_html', {
	'receiver': $receiver.username,
	'author': username_link_email($article.User, $article.username),
	'board': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:ams', $article) }}">{{ prefix('ams_article', $article, 'escaped') }}{$article.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage">
	<div class="message">{{ bb_code_type('emailHtml', $article.message, 'ams_article', $article) }}</div>
</xf:if>

<xf:macro template="xa_ams_article_macros" name="go_article_bar" arg-article="{$article}" arg-watchType="series" />

<xf:macro template="xa_ams_article_macros" name="watched_series_footer" arg-series="{$series}" />]]></template>
  <template type="public" title="alert_ams_article_co_author_add" version_id="2020031" version_string="2.2.0 Beta 1"><![CDATA[{{ phrase('xa_ams_x_added_you_as_co_author_for_article_y', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'title': '<a href="' . link('ams', $content) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $content) . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_ams_article_contributor_add" version_id="2020031" version_string="2.2.0 Beta 1"><![CDATA[{{ phrase('xa_ams_x_added_you_as_contributor_for_article_y', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'title': '<a href="' . link('ams', $content) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $content) . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_ams_article_contributor_join" version_id="2022070" version_string="2.2.20"><![CDATA[{{ phrase('xa_ams_x_joined_article_contributors_for_article_y', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'title': '<a href="' . link('ams', $content) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $content) . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_ams_article_contributor_leave" version_id="2020031" version_string="2.2.0 Beta 1"><![CDATA[{{ phrase('xa_ams_x_left_article_contributors_for_article_y', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'title': '<a href="' . link('ams', $content) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $content) . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_ams_article_insert" version_id="2010870" version_string="2.1.8"><![CDATA[{{ phrase('xa_ams_x_created_article_y', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'title': '<a href="' . link('ams', $content) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $content) . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_ams_article_mention" version_id="2000014" version_string="2.0.0 Alpha 4"><![CDATA[{{ phrase('xa_ams_x_mentioned_you_in_article_y', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'title': '<a href="' . link('ams', $content) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $content) . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_ams_article_reaction" version_id="2010031" version_string="2.1.0 Beta 1"><![CDATA[{{ phrase('xa_ams_x_reacted_to_your_article_y', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'item': '<a href="' . link('ams', $content) . '" class="fauxBlockLink-blockLink">' . $content.title . '</a>',
	'reaction': alert_reaction($extra.reaction_id)|preescaped
}) }}]]></template>
  <template type="public" title="alert_ams_article_reply_ban" version_id="2000052" version_string="2.0.0 Release Candidate 2"><![CDATA[<xf:if is="$extra.expiry">
	{{ phrase('xa_ams_you_unable_reply_to_article_x_until_expiry_y', {'title': '<a href="' . link('ams', $content) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $article) . $content.title . '</a>', 'expiry': date($extra.expiry)}) }}
<xf:else />
	{{ phrase('xa_ams_you_are_no_longer_able_to_reply_article_x', {'title': '<a href="' . link('ams', $content) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $article) . $content.title . '</a>'}) }}
</xf:if>
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_ams_article_update" version_id="2011370" version_string="2.1.13"><![CDATA[{{ phrase('xa_ams_x_updated_article_y', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'title': '<a href="' . link('ams', $content) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $content) . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_ams_comment_insert" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[{{ phrase('xa_ams_x_commented_on_article_y', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'article': '<a href="' . link('ams/comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_ams_comment_mention" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[{{ phrase('xa_ams_x_mentioned_you_in_comment_on_article_y', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'article': '<a href="' . link('ams/comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_ams_comment_pre_reg" version_id="2020270" version_string="2.2.2"><![CDATA[{{ phrase('welcome_to_boardtitle', {
	'boardTitle': $xf.options.boardTitle
})}}
{{ phrase('xa_ams_your_reply_to_article_x_was_submitted', {
	'title': '<a href="' . link('ams/comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_ams_comment_quote" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[{{ phrase('xa_ams_x_quoted_your_comment_on_article_y', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'article': '<a href="' . link('ams/comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_ams_comment_reaction" version_id="2010031" version_string="2.1.0 Beta 1"><![CDATA[{{ phrase('xa_ams_x_reacted_to_your_comment_on_article_y', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'article': '<a href="' . link('ams/comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>',
	'reaction': alert_reaction($extra.reaction_id)|preescaped
}) }}]]></template>
  <template type="public" title="alert_ams_page_insert" version_id="2010870" version_string="2.1.8"><![CDATA[{{ phrase('xa_ams_x_added_new_page_to_article_y', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'page_title': '<a href="' . link('ams', $content.Article, {'article_page':$content.page_id}) . '" class="fauxBlockLink-blockLink">' . $content.title . '</a>',
	'title': '<a href="' . link('ams', $content.Article) . '" class="">' . prefix('ams_article', $content.Article) . $content.Article.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_ams_page_reaction" version_id="2011370" version_string="2.1.13"><![CDATA[{{ phrase('xa_ams_x_reacted_to_your_page_on_article_y', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'page': '<a href="' . link('ams/page', $content) . '" class="fauxBlockLink-blockLink">' . $content.title . '</a>',
	'article': '<a href="' . link('ams/page', $content) . '">' . $content.Content.title . '</a>',
	'reaction': alert_reaction($extra.reaction_id)|preescaped
}) }}]]></template>
  <template type="public" title="alert_ams_rating_insert" version_id="2021870" version_string="2.2.18"><![CDATA[<xf:if is="$content.is_review">	
	<xf:if is="$content.is_anonymous">
		{{ phrase('xa_ams_x_reviewed_article_y', {
			'username': phrase('anonymous'),
			'title': '<a href="' . link('ams/review', $content) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $content.Article) . $content.Article.title . '</a>'
		}) }}
	<xf:else />
		{{ phrase('xa_ams_x_reviewed_article_y', {
			'username': username_link($user, false, {'defaultname': $alert.username}),
			'title': '<a href="' . link('ams/review', $content) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $content.Article) . $content.Article.title . '</a>'
		}) }}
	</xf:if>	
<xf:else />
	<xf:if is="$content.is_anonymous">	
		{{ phrase('xa_ams_x_rated_article_y', {
			'username': phrase('anonymous'),
			'title': '<a href="' . link('ams', $content.Article) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $content.Article) . $content.Article.title . '</a>'
		}) }}
	<xf:else />
		{{ phrase('xa_ams_x_rated_article_y', {
			'username': username_link($user, false, {'defaultname': $alert.username}),
			'title': '<a href="' . link('ams', $content.Article) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $content.Article) . $content.Article.title . '</a>'
		}) }}
	</xf:if>		
</xf:if>]]></template>
  <template type="public" title="alert_ams_rating_mention" version_id="2000170" version_string="2.0.1"><![CDATA[{{ phrase('xa_ams_x_mentioned_you_in_review_on_article_y', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'article': '<a href="' . link('ams/review', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_ams_rating_pre_reg" version_id="2020270" version_string="2.2.2"><![CDATA[{{ phrase('welcome_to_boardtitle', {
	'boardTitle': $xf.options.boardTitle
}) }}
{{ phrase('xa_ams_your_review_to_article_x_was_submitted', {
	'title': '<a href="' . link('ams/review', $content) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $content.Article) . $content.Article.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_ams_rating_reaction" version_id="2010031" version_string="2.1.0 Beta 1"><![CDATA[{{ phrase('xa_ams_x_reacted_to_your_review_on_article_y', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'article': '<a href="' . link('ams/review', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>',
	'reaction': alert_reaction($extra.reaction_id)|preescaped
}) }}]]></template>
  <template type="public" title="alert_ams_rating_reply" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[{{ phrase('xa_ams_x_replied_review_article_y', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'title': '<a href="' . link('ams/review', $content) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $content.Article) . $content.Article.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_ams_series_part_insert" version_id="2000170" version_string="2.0.1"><![CDATA[{{ phrase('xa_ams_x_added_article_y_to_series_z', {
	'username': username_link($user, false, {'defaultname': $alert.username}),
	'series': '<a href="' . link('ams/series', $content.Series) . '">' . $content.Series.title . '</a>',
	'article': '<a href="' . link('ams', $content.Article) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $content.Article) . $content.Article.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_ams_series_reaction" version_id="2011370" version_string="2.1.13"><![CDATA[{{ phrase('xa_ams_x_reacted_to_your_series_y', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'series': '<a href="' . link('ams/series/details', $content) . '" class="fauxBlockLink-blockLink">' . $content.title . '</a>',
	'reaction': alert_reaction($extra.reaction_id)|preescaped
}) }}]]></template>
  <template type="public" title="alert_user_ams_article_approve" version_id="2010970" version_string="2.1.9"><![CDATA[{{ phrase('xa_ams_your_article_x_has_been_approved', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $extra.prefix_id) . $extra.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_user_ams_article_converted_thread" version_id="2021570" version_string="2.2.15"><![CDATA[{{ phrase('xa_ams_your_thread_was_converted_to_article_x', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $extra.prefix_id) . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_article_delete" version_id="2021470" version_string="2.2.14"><![CDATA[{{ phrase('xa_ams_your_article_x_was_deleted', {
	'title': prefix('ams_article', $extra.prefix_id) . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_article_edit" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[{{ phrase('xa_ams_your_article_x_was_edited', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $extra.prefix_id) . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_article_merge" version_id="2010570" version_string="2.1.5"><![CDATA[{{ phrase('xa_ams_your_article_x_was_merged_into_article_y', {
	'title': $extra.title,
	'target': '<a href="' . base_url($extra.targetLink) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $extra.prefix_id) . $extra.targetTitle . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_article_move" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[{{ phrase('xa_ams_your_article_x_was_moved', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $extra.prefix_id) . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_article_reassign_from" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[{{ phrase('xa_ams_your_article_x_was_reassigned_to_y', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $extra.prefix_id) . $extra.title . '</a>',
	'to': $extra.to
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_article_reassign_to" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[{{ phrase('xa_ams_article_x_was_reassigned_to_you', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $extra.prefix_id) . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_comment_delete" version_id="2021070" version_string="2.2.10"><![CDATA[{{ phrase('xa_ams_your_comment_on_article_x_was_deleted', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_comment_edit" version_id="2010970" version_string="2.1.9"><![CDATA[{{ phrase('xa_ams_your_comment_on_article_x_was_edited', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_comment_merge" version_id="2010670" version_string="2.1.6"><![CDATA[{{ phrase('xa_ams_your_comments_in_article_x_were_merged_together', {
	'source': '<a href="' . base_url($extra.articleLink) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $extra.prefix_id) . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_comment_reassign_from" version_id="2010570" version_string="2.1.5"><![CDATA[{{ phrase('xa_ams_your_comment_on_article_x_was_reassigned_to_y', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $extra.prefix_id) . $extra.title . '</a>',
	'to': $extra.to
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_comment_reassign_to" version_id="2010570" version_string="2.1.5"><![CDATA[{{ phrase('xa_ams_comment_on_article_x_was_reassigned_to_you', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $extra.prefix_id) . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_page_delete" version_id="2021770" version_string="2.2.17"><![CDATA[{{ phrase('xa_ams_your_page_x_on_article_y_was_deleted', {
	'page': $extra.title,
	'article': '<a href="' . base_url($extra.itemLink) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $extra.prefix_id) . $extra.articleTitle . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_page_reassign_from" version_id="2011370" version_string="2.1.13"><![CDATA[{{ phrase('xa_ams_your_page_on_article_x_was_reassigned_to_y', {
	'page': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>',
	'article': '<a href="' . base_url($extra.link) . '">' . prefix('ams_article', $extra.prefix_id) . $extra.articleTitle . '</a>',
	'to': $extra.to
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_page_reassign_to" version_id="2011370" version_string="2.1.13"><![CDATA[{{ phrase('xa_ams_page_on_article_x_was_reassigned_to_you', {
	'page': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>',
	'article': '<a href="' . base_url($extra.link) . '">' . prefix('ams_article', $extra.prefix_id) . $extra.articleTitle . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_rating_delete" version_id="2000014" version_string="2.0.0 Alpha 4"><![CDATA[{{ phrase('xa_ams_your_review_on_x_was_deleted', {
	'title': prefix('ams_article', $extra.prefix_id) . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_rating_edit" version_id="2010970" version_string="2.1.9"><![CDATA[{{ phrase('xa_ams_your_review_on_article_x_was_edited', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_rating_reassign_from" version_id="2010570" version_string="2.1.5"><![CDATA[{{ phrase('xa_ams_your_review_on_article_x_was_reassigned_to_y', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $extra.prefix_id) . $extra.title . '</a>',
	'to': $extra.to
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_rating_reassign_to" version_id="2010570" version_string="2.1.5"><![CDATA[{{ phrase('xa_ams_review_on_article_x_was_reassigned_to_you', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('ams_article', $extra.prefix_id) . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_series_approve" version_id="2011370" version_string="2.1.13"><![CDATA[{{ phrase('xa_ams_your_series_x_has_been_approved', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_user_ams_series_delete" version_id="2011370" version_string="2.1.13"><![CDATA[{{ phrase('xa_ams_your_series_x_was_deleted', {
	'title': $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_series_edit" version_id="2011370" version_string="2.1.13"><![CDATA[{{ phrase('xa_ams_your_series_x_was_edited', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_series_reassign_from" version_id="2010670" version_string="2.1.6"><![CDATA[{{ phrase('xa_ams_your_series_x_was_reassigned_to_y', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>',
	'to': $extra.to
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_ams_series_reassign_to" version_id="2010670" version_string="2.1.6"><![CDATA[{{ phrase('xa_ams_series_x_was_reassigned_to_you', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_thread_converted_ams_article" version_id="2021670" version_string="2.2.16"><![CDATA[{{ phrase('xa_ams_your_article_was_converted_to_thread_x', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('thread', $extra.prefix_id) . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="approval_item_ams_article" version_id="2022170" version_string="2.2.21"><![CDATA[<xf:set var="$messageHtml">
	<xf:if is="$content.os_url_check_date && $content.os_url_check_fail_count">
		<h4 class="message-title"><span class="amsOsUrlCheckFailure">***** {{ phrase('xa_ams_os_url_check_failure') }} *****</span></h4>
	<xf:else />
		<h4 class="message-title"><a href="{{ link('ams', $content) }}">{$content.title}</a></h4>
		{{ bb_code($content.message, 'ams_article', $content) }}
	</xf:if>
</xf:set>

<xf:macro template="approval_queue_macros" name="item_message_type"
	arg-content="{$content}"
	arg-contentDate="{$content.publish_date}"
	arg-user="{$content.User}"
	arg-spamDetails="{$spamDetails}"
	arg-messageHtml="{$messageHtml}"
	arg-typePhraseHtml="{{ phrase('xa_ams_article') }}"
	arg-unapprovedItem="{$unapprovedItem}"
	arg-handler="{$handler}"
	arg-headerPhraseHtml="{{ phrase('xa_ams_article_x_posted_in_category_y', {
		'articleLink': link('ams', $content),
		'articleTitle': $content.title,
		'categoryLink': link('ams/categories', $content.Category),
		'categoryTitle': $content.Category.title
	}) }}"/>]]></template>
  <template type="public" title="approval_item_ams_comment" version_id="2010370" version_string="2.1.3"><![CDATA[<xf:macro template="approval_queue_macros" name="item_message_type"
	arg-content="{$content}"
	arg-contentDate="{$content.comment_date}"
	arg-user="{$content.User}"
	arg-messageHtml="{{ bb_code($content.message, 'ams_comment', $content) }}"
	arg-typePhraseHtml="{{ phrase('xa_ams_article_comment') }}"
	arg-spamDetails="{$spamDetails}"
	arg-unapprovedItem="{$unapprovedItem}"
	arg-handler="{$handler}"
	arg-headerPhraseHtml="{{ phrase('xa_ams_comment_on_article_x_by_y', {
		'commentLink': link('ams/comments', $content),
		'articleLink': link('ams', $content.Article),
		'articleTitle': {$content.Article.title},
		'userLink': link('members', $content.Article.User),
		'userName': {$content.Article.User.username}
	}) }}"/>]]></template>
  <template type="public" title="approval_item_ams_rating" version_id="2010370" version_string="2.1.3"><![CDATA[<xf:macro template="approval_queue_macros" name="item_message_type"
	arg-content="{$content}"
	arg-contentDate="{$content.rating_date}"
	arg-user="{$content.User}"
	arg-messageHtml="{{ bb_code($content.message, 'ams_rating', $content) }}"
	arg-typePhraseHtml="{{ phrase('xa_ams_article_review') }}"
	arg-spamDetails="{$spamDetails}"
	arg-unapprovedItem="{$unapprovedItem}"
	arg-handler="{$handler}"
	arg-headerPhraseHtml="{{ phrase('xa_ams_review_on_article_x_by_y', {
		'reviewLink': link('ams/review', $content),
		'articleLink': link('ams', $content.Article),
		'articleTitle': {$content.Article.title},
		'userLink': link('members', $content.Article.User),
		'userName': {$content.Article.User.username}
	}) }}"/>]]></template>
  <template type="public" title="approval_item_ams_series" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:set var="$messageHtml">
	<h4 class="message-title"><a href="{{ link('ams/series', $content) }}">{$content.title}</a></h4>
	{{ bb_code($content.message, 'ams_series', $content) }}
</xf:set>

<xf:macro template="approval_queue_macros" name="item_message_type"
	arg-content="{$content}"
	arg-contentDate="{$content.create_date}"
	arg-user="{$content.User}"
	arg-spamDetails="{$spamDetails}"
	arg-messageHtml="{$messageHtml}"
	arg-typePhraseHtml="{{ phrase('xa_ams_series') }}"
	arg-unapprovedItem="{$unapprovedItem}"
	arg-handler="{$handler}"
	arg-headerPhraseHtml="{{ phrase('xa_ams_series_x', {
		'seriesLink': link('ams/series', $content),
		'title': $content.title
	}) }}"/>]]></template>
  <template type="public" title="bookmark_item_ams_article" version_id="2000270" version_string="2.0.2"><![CDATA[{{ snippet($content.message, max_length($bookmark, 'message'), {'stripQuote': true}) }}]]></template>
  <template type="public" title="bookmark_item_ams_series" version_id="2000270" version_string="2.0.2"><![CDATA[{{ snippet($content.description, max_length($bookmark, 'message'), {'stripQuote': true}) }}]]></template>
  <template type="public" title="core_xa_ams.less" version_id="2022470" version_string="2.2.24"><![CDATA[// ############################ MISC AMS CSS ######################

.structItem-status
{
	&--amsArticle::before { .m-faContent(@fa-var-newspaper, 1.2em); color: @xf-textColorDimmed; }
	&--poll::before { .m-faContent(@fa-var-chart-bar); }
}

.contentRow-amsLocation
{
	font-size: @xf-fontSizeSmaller;
	color: @xf-textColorDimmed;
	padding-bottom: @xf-paddingMedium;

	.contentRow-amsLocationIcon
	{
		font-size: @xf-fontSizeSmall;
		padding-left: @xf-paddingSmall;
	}
}

.message-title .amsOsUrlCheckFailure
{
	font-size: @xf-fontSizeLarger;
	font-weight: @xf-fontWeightHeavy;
	color: @xf-errorColor;
}

.amsArticleSearchResultRow .contentRow-figure,
.amsSeriesSearchResultRow .contentRow-figure
{
	max-width: 100px;
}

.avatar.avatar--articleIconDefault
{
	color: @xf-textColorMuted !important;
	background: mix(@xf-textColorMuted, @xf-avatarBg, 25%) !important;
	text-align: center;
	line-height: 1.5;

	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;

	> span:before
	{
		.m-faBase();
		.m-faContent(@fa-var-cog, .86em);
		vertical-align: -0.03em;
	}
}]]></template>
  <template type="public" title="news_feed_item_ams_article_insert" version_id="2022570" version_string="2.2.25"><![CDATA[<div class="contentRow-title">
	{{ phrase('xa_ams_x_created_article_y_in_category_z', {
		'username': username_link($user, false, {'defaultname': $newsFeed.username}),
		'title': '<a href="' . link('ams', $content) . '">' . prefix('ams_article', $content) . $content.title . '</a>',
		'category': '<a href="' . link('ams/categories', $content.Category) . '">' . $content.Category.title . '</a>'
	}) }}
</div>

<div class="contentRow-snippet">{{ snippet($content.message, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true}) }}</div>

<xf:if is="{$content.attach_count}">
	<xf:macro template="news_feed_attached_images" name="attached_images"
		arg-attachments="{$content.Attachments}" arg-link="{{ link('ams', $content) }}" />
</xf:if>

<div class="contentRow-minor"><xf:date time="{$newsFeed.event_date}" /></div>]]></template>
  <template type="public" title="news_feed_item_ams_article_reaction" version_id="2010031" version_string="2.1.0 Beta 1"><![CDATA[<xf:macro template="reaction_item_ams_article" name="reaction_snippet"
	arg-reactionUser="{$user}"
	arg-reactionId="{$extra.reaction_id}"
	arg-articleItem="{$content}"
	arg-date="{$newsFeed.event_date}" />]]></template>
  <template type="public" title="news_feed_item_ams_comment_insert" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<div class="contentRow-title">
	{{ phrase('xa_ams_x_posted_comment_on_article_item_y', {
		'username': username_link($user, false, {'defaultname': $newsFeed.username}),
		'title': '<a href="' . link('ams/comments', $content) . '">' . $content.Article.title . '</a>'
	}) }}
</div>

<div class="contentRow-snippet">{{ snippet($content.message, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true}) }}</div>

<div class="contentRow-minor"><xf:date time="{$newsFeed.event_date}" /></div>]]></template>
  <template type="public" title="news_feed_item_ams_comment_reaction" version_id="2010031" version_string="2.1.0 Beta 1"><![CDATA[<xf:macro template="reaction_item_ams_comment" name="reaction_snippet"
	arg-reactionUser="{$user}"
	arg-reactionId="{$extra.reaction_id}"
	arg-comment="{$content}"
	arg-date="{$newsFeed.event_date}" />]]></template>
  <template type="public" title="news_feed_item_ams_page_insert" version_id="2011370" version_string="2.1.13"><![CDATA[<div class="contentRow-title">
	{{ phrase('xa_ams_x_add_new_page_on_article_y', {
		'user': username_link($user, false, {'defaultname': $newsFeed.username}),
		'page': '<a href="' . link('ams/page', $content) . '">' . $content.title . '</a>',
		'article': '<a href="' . link('ams/page', $content) . '">' . prefix('ams_article', $content.Article) . $content.Article.title . '</a>'
	}) }}
</div>

<div class="contentRow-snippet">
	{{ snippet($content.message, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true}) }}
</div>
<xf:if is="{$content.attach_count}">
	<xf:macro template="news_feed_attached_images" name="attached_images"
		arg-attachments="{$content.Attachments}" arg-link="{{ link('ams/page', $content) }}" />
</xf:if>

<div class="contentRow-minor"><xf:date time="{$newsFeed.event_date}" /></div>]]></template>
  <template type="public" title="news_feed_item_ams_page_reaction" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:macro template="reaction_item_ams_page" name="reaction_snippet"
	arg-reactionUser="{$user}"
	arg-reactionId="{$extra.reaction_id}"
	arg-page="{$content}"
	arg-date="{$newsFeed.event_date}" />]]></template>
  <template type="public" title="news_feed_item_ams_rating_insert" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<div class="contentRow-title">
	{{ phrase('xa_ams_x_reviewed_article_y', {
		'username': username_link($user, false, {'defaultname': phrase('anonymous')}),
		'title': '<a href="' . link('ams/review', $content) . '">' . prefix('ams_article', $content.Article) . $content.Article.title . '</a>'
	}) }}
</div>

<div class="contentRow-snippet">
	<xf:macro template="rating_macros" name="stars"
		arg-rating="{$content.rating}"
		arg-class="ratingStars--smaller" />

	{{ snippet($content.message, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true}) }}
</div>

<div class="contentRow-minor"><xf:date time="{$newsFeed.event_date}" /></div>]]></template>
  <template type="public" title="news_feed_item_ams_rating_reaction" version_id="2010031" version_string="2.1.0 Beta 1"><![CDATA[<xf:macro template="reaction_item_ams_rating" name="reaction_snippet"
	arg-reactionUser="{$user}"
	arg-reactionId="{$extra.reaction_id}"
	arg-review="{$content}"
	arg-date="{$newsFeed.event_date}" />]]></template>
  <template type="public" title="news_feed_item_ams_series_insert" version_id="2011370" version_string="2.1.13"><![CDATA[<div class="contentRow-title">
	{{ phrase('xa_ams_x_created_series_y', {
		'username': username_link($user, false, {'defaultname': $newsFeed.username}),
		'title': '<a href="' . link('ams/series/details', $content) . '">' . $content.title . '</a>'
	}) }}
</div>

<div class="contentRow-snippet">{{ snippet($content.message, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true}) }}</div>
<xf:if is="{$content.attach_count}">
	<xf:macro template="news_feed_attached_images" name="attached_images"
		arg-attachments="{$content.Attachments}" arg-link="{{ link('ams/series/details', $content) }}" />
</xf:if>

<div class="contentRow-minor"><xf:date time="{$newsFeed.event_date}" /></div>]]></template>
  <template type="public" title="news_feed_item_ams_series_reaction" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:macro template="reaction_item_ams_series" name="reaction_snippet"
	arg-reactionUser="{$user}"
	arg-reactionId="{$extra.reaction_id}"
	arg-seriesItem="{$content}"
	arg-date="{$newsFeed.event_date}" />]]></template>
  <template type="public" title="pre_reg_action_approval_queue_ams_article_rate" version_id="2020270" version_string="2.2.2"><![CDATA[<xf:extends template="pre_reg_action_approval_queue" />

<xf:extension name="content">
	<xf:macro template="rating_macros" name="stars"
		arg-rating="{$details.rating}"
		arg-class="ratingStars--smaller" />

	<xf:extensionparent />
</xf:extension>]]></template>
  <template type="public" title="push_ams_article_co_author_add" version_id="2020031" version_string="2.2.0 Beta 1"><![CDATA[{{ phrase('xa_ams_x_added_you_as_co_author_for_article_y', {
	'name': $user.username ?: $alert.username,
	'title': prefix('ams_article', $content, 'plain') . $content.title
}) }}
<push:url>{{ link('canonical:ams', $content) }}</push:url>]]></template>
  <template type="public" title="push_ams_article_contributor_add" version_id="2020031" version_string="2.2.0 Beta 1"><![CDATA[{{ phrase('xa_ams_x_added_you_as_contributor_for_article_y', {
	'name': $user.username ?: $alert.username,
	'title': prefix('ams_article', $content, 'plain') . $content.title
}) }}
<push:url>{{ link('canonical:ams', $content) }}</push:url>]]></template>
  <template type="public" title="push_ams_article_contributor_leave" version_id="2020031" version_string="2.2.0 Beta 1"><![CDATA[{{ phrase('xa_ams_x_left_article_contributors_for_article_y', {
	'name': $user.username ?: $alert.username,
	'title': prefix('ams_article', $content, 'plain') . $content.title
}) }}
<push:url>{{ link('canonical:ams', $content) }}</push:url>]]></template>
  <template type="public" title="push_ams_article_reaction" version_id="2010031" version_string="2.1.0 Beta 1"><![CDATA[{{ phrase('xa_ams_x_reacted_to_your_article_y', {
	'user': $user.username ?: $alert.username,
	'item': $content.title,
	'reaction': reaction_title($extra.reaction_id)
}) }}
<push:url>{{ link('canonical:ams', $content) }}</push:url>
<push:tag>ams_article_reaction_{$content.article_id}_{$extra.reaction_id}</push:tag>]]></template>
  <template type="public" title="push_ams_comment_pre_reg" version_id="2020270" version_string="2.2.2"><![CDATA[{{ phrase('welcome_to_boardtitle', {
	'boardTitle': $xf.options.boardTitle
})}}
{{ phrase('xa_ams_your_reply_to_article_x_was_submitted', {
	'title': $content.Content.title
}) }}
<push:url>{{ link('canonical:ams/comments', $content) }}</push:url>]]></template>
  <template type="public" title="push_ams_comment_reaction" version_id="2010031" version_string="2.1.0 Beta 1"><![CDATA[{{ phrase('xa_ams_x_reacted_to_your_comment_on_article_y', {
	'user': $user.username ?: $alert.username,
	'article': $content.Content.title,
	'reaction': reaction_title($extra.reaction_id)
}) }}

<push:url>{{ link('canonical:ams/comments', $content) }}</push:url>
<push:tag>ams_comment_reaction_{$content.comment_id}_{$extra.reaction_id}</push:tag>]]></template>
  <template type="public" title="push_ams_page_reaction" version_id="2011370" version_string="2.1.13"><![CDATA[{{ phrase('xa_ams_x_reacted_to_your_page_on_article_y', {
	'user': $user.username ?: $alert.username,
	'page': $content.title,
	'article': $content.Content.title,
	'reaction': reaction_title($extra.reaction_id)
}) }}

<push:url>{{ link('canonical:ams/page', $content) }}</push:url>
<push:tag>ams_page_reaction_{$content.page_id}_{$extra.reaction_id}</push:tag>]]></template>
  <template type="public" title="push_ams_rating_pre_reg" version_id="2020270" version_string="2.2.2"><![CDATA[{{ phrase('welcome_to_boardtitle', {
	'boardTitle': $xf.options.boardTitle
})}}
{{ phrase('xa_ams_your_review_to_article_x_was_submitted', {
	'title': prefix('ams_article', $content.Article, 'plain') . $content.Article.title
}) }}
<push:url>{{ link('canonical:ams/review', $content) }}</push:url>]]></template>
  <template type="public" title="push_ams_rating_reaction" version_id="2010031" version_string="2.1.0 Beta 1"><![CDATA[{{ phrase('xa_ams_x_reacted_to_your_review_on_article_y', {
	'user': $user.username ?: $alert.username,
	'article': $content.Content.title,
	'reaction': reaction_title($extra.reaction_id)
}) }}

<push:url>{{ link('canonical:ams/review', $content) }}</push:url>
<push:tag>ams_rating_reaction_{$content.rating_id}_{$extra.reaction_id}</push:tag>]]></template>
  <template type="public" title="push_user_ams_comment_merge" version_id="2010670" version_string="2.1.6"><![CDATA[{{ phrase('xa_ams_your_comments_in_article_x_were_merged_together', {
	'source': prefix('ams_article', $extra.prefix_id) . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.articleLink, 'canonical') }}</push:url>]]></template>
  <template type="public" title="reaction_item_ams_article" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:macro name="reaction_snippet" arg-reactionUser="!" arg-reactionId="!" arg-articleItem="!" arg-date="!" arg-fallbackName="{{ phrase('unknown_member') }}">
	<div class="contentRow-title">
		<xf:if is="$articleItem.user_id == $xf.visitor.user_id">
			{{ phrase('xa_ams_x_reacted_to_your_article_y', {
				'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'item': '<a href="' . link('ams', $articleItem) . '">' . $articleItem.title . '</a>',
				'reaction': alert_reaction($reactionId, 'medium')|preescaped
			}) }}
		<xf:else />
			{{ phrase('xa_ams_x_reacted_to_ys_article_z', {
				'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'author': $articleItem.username,
				'item': '<a href="' . link('ams', $articleItem) . '">' . $articleItem.title . '</a>',
				'reaction': alert_reaction($reactionId, 'medium')|preescaped
			}) }}
		</xf:if>
	</div>

	<div class="contentRow-snippet">{{
		snippet($articleItem.message, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true})
	}}</div>

	<xf:if is="$articleItem.CoverImage">
		<div class="contentRow-figure contentRow-figure--fixedMedium"><a href="{{ link('ams', $articleItem) }}">{{ ams_article_thumbnail($articleItem) }} </a></div>
	</xf:if>

	<div class="contentRow-minor"><xf:date time="{$date}" /></div>
</xf:macro>

<xf:macro name="reaction_snippet" arg-reactionUser="{$reaction.ReactionUser}" arg-reactionId="{$reaction.reaction_id}" arg-articleItem="{$content}" arg-date="{$reaction.reaction_date}" />]]></template>
  <template type="public" title="reaction_item_ams_comment" version_id="2010070" version_string="2.1.0"><![CDATA[<xf:macro name="reaction_snippet" arg-reactionUser="!" arg-reactionId="!" arg-comment="!" arg-date="!" arg-fallbackName="{{ phrase('unknown_member') }}">
	<div class="contentRow-title">
		<xf:if is="$comment.user_id == $xf.visitor.user_id">
			{{ phrase('xa_ams_x_reacted_to_your_comment_on_article_y', {
				'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'article': '<a href="' . link('ams/comments', $comment) . '" class="fauxBlockLink-blockLink">' . $comment.Content.title . '</a>',
				'reaction': alert_reaction($reactionId, 'medium')|preescaped
			}) }}
		<xf:else />
			{{ phrase('xa_ams_x_reacted_to_ys_comment_on_article_z', {
				'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'author': $comment.username,
				'article': '<a href="' . link('ams/comments', $comment) . '" class="fauxBlockLink-blockLink">' . $comment.Content.title . '</a>',
				'reaction': alert_reaction($reactionId, 'medium')|preescaped
			}) }}
		</xf:if>
	</div>

	<div class="contentRow-snippet">{{
		snippet($comment.message, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true})
	}}</div>

	<div class="contentRow-minor"><xf:date time="{$date}" /></div>
</xf:macro>

<xf:macro name="reaction_snippet" arg-reactionUser="{$reaction.ReactionUser}" arg-reactionId="{$reaction.reaction_id}" arg-comment="{$content}" arg-date="{$reaction.reaction_date}" />]]></template>
  <template type="public" title="reaction_item_ams_page" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:macro name="reaction_snippet" arg-reactionUser="!" arg-reactionId="!" arg-page="!" arg-date="!" arg-fallbackName="{{ phrase('unknown_member') }}">
	<div class="contentRow-title">
		<xf:if is="$page.user_id == $xf.visitor.user_id">
			{{ phrase('xa_ams_x_reacted_to_your_page_on_article_y', {
				'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'page': '<a href="' . link('ams/page', $page) . '" class="fauxBlockLink-blockLink">' . $page.title . '</a>',
				'article': '<a href="' . link('ams/page', $page) . '">' . $page.Content.title . '</a>',
				'reaction': alert_reaction($reactionId, 'medium')|preescaped
			}) }}
		<xf:else />
			{{ phrase('xa_ams_x_reacted_to_ys_page_on_article_z', {
				'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'author': $page.username,
				'page': '<a href="' . link('ams/page', $page) . '" class="fauxBlockLink-blockLink">' . $page.title . '</a>',
				'article': '<a href="' . link('ams/page', $page) . '">' . $page.Content.title . '</a>',
				'reaction': alert_reaction($reactionId, 'medium')|preescaped
			}) }}
		</xf:if>
	</div>

	<div class="contentRow-snippet">{{
		snippet($page.message, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true})
	}}</div>

	<div class="contentRow-minor"><xf:date time="{$date}" /></div>
</xf:macro>

<xf:macro name="reaction_snippet" arg-reactionUser="{$reaction.ReactionUser}" arg-reactionId="{$reaction.reaction_id}" arg-page="{$content}" arg-date="{$reaction.reaction_date}" />]]></template>
  <template type="public" title="reaction_item_ams_rating" version_id="2010770" version_string="2.1.7"><![CDATA[<xf:macro name="reaction_snippet" arg-reactionUser="!" arg-reactionId="!" arg-review="!" arg-date="!" arg-fallbackName="{{ phrase('unknown_member') }}">
	<div class="contentRow-title">
		<xf:if is="$review.user_id == $xf.visitor.user_id">
			{{ phrase('xa_ams_x_reacted_to_your_review_on_article_y', {
				'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'article': '<a href="' . link('ams/review', $review) . '" class="fauxBlockLink-blockLink">' . $review.Content.title . '</a>',
				'reaction': alert_reaction($reactionId, 'medium')|preescaped
			}) }}
		<xf:else />
			{{ phrase('xa_ams_x_reacted_to_ys_review_on_article_z', {
				'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'author': $review.is_anonymous ? phrase('anonymous') : $review.username,
				'article': '<a href="' . link('ams/review', $review) . '" class="fauxBlockLink-blockLink">' . $review.Content.title . '</a>',
				'reaction': alert_reaction($reactionId, 'medium')|preescaped
			}) }}
		</xf:if>
	</div>

	<div class="contentRow-snippet">{{
		snippet($review.message, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true})
	}}</div>

	<div class="contentRow-minor"><xf:date time="{$date}" /></div>
</xf:macro>

<xf:macro name="reaction_snippet" arg-reactionUser="{$reaction.ReactionUser}" arg-reactionId="{$reaction.reaction_id}" arg-review="{$content}" arg-date="{$reaction.reaction_date}" />]]></template>
  <template type="public" title="reaction_item_ams_series" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:macro name="reaction_snippet" arg-reactionUser="!" arg-reactionId="!" arg-seriesItem="!" arg-date="!" arg-fallbackName="{{ phrase('unknown_member') }}">
	<div class="contentRow-title">
		<xf:if is="$seriesItem.user_id == $xf.visitor.user_id">
			{{ phrase('xa_ams_x_reacted_to_your_series_y', {
				'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'series': '<a href="' . link('ams/series/details', $seriesItem) . '">' . $seriesItem.title . '</a>',
				'reaction': alert_reaction($reactionId, 'medium')|preescaped
			}) }}
		<xf:else />
			{{ phrase('xa_ams_x_reacted_to_ys_series_z', {
				'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'author': $seriesItem.username,
				'series': '<a href="' . link('ams/series/details', $seriesItem) . '">' . $seriesItem.title . '</a>',
				'reaction': alert_reaction($reactionId, 'medium')|preescaped
			}) }}
		</xf:if>
	</div>

	<div class="contentRow-snippet">{{
		snippet($seriesItem.message, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true})
	}}</div>

	<xf:if is="$seriesItem.icon_date">
		<div class="contentRow-figure contentRow-figure--fixedMedium"><a href="{{ link('ams/series/details', $seriesItem) }}">{{ ams_series_icon($seriesItem, 'm') }}</a></div>
	</xf:if>

	<div class="contentRow-minor"><xf:date time="{$date}" /></div>
</xf:macro>

<xf:macro name="reaction_snippet" arg-reactionUser="{$reaction.ReactionUser}" arg-reactionId="{$reaction.reaction_id}" arg-seriesItem="{$content}" arg-date="{$reaction.reaction_date}" />]]></template>
  <template type="public" title="report_content_ams_article" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<div class="block-row block-row--separated">
	{{ bb_code($report.content_info.message, 'ams_article', $content ?: $report.User) }}
</div>
<div class="block-row block-row--separated block-row--minor">
	<div>
		<dl class="pairs pairs--inline">
			<dt>{{ phrase('xa_ams_article') }}</dt>
			<dd><a href="{{ link('ams', $report.content_info) }}">{$report.content_info.title}</a></dd>
		</dl>
	</div>
	<div>
		<dl class="pairs pairs--inline">
			<dt>{{ phrase('category') }}</dt>
			<dd><a href="{{ link('ams/categories', $report.content_info) }}">{$report.content_info.category_title}</a></dd>
		</dl>
	</div>
</div>]]></template>
  <template type="public" title="report_content_ams_comment" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<div class="block-row block-row--separated">
	{{ bb_code($report.content_info.comment.message, 'ams_comment', $content ?: $report.User) }}
</div>
<div class="block-row block-row--separated block-row--minor">
	<dl class="pairs pairs--inline">
		<dt>{{ phrase('xa_ams_article') }}</dt>
		<dd>
			<a href="{{ link('ams', {
				 'article_id': $report.content_info.content_id,
				 'title': $report.content_info.content_title
			 }) }}">{$report.content_info.content_title}</a>
		</dd>
	</dl>
</div>]]></template>
  <template type="public" title="report_content_ams_page" version_id="2011370" version_string="2.1.13"><![CDATA[<div class="block-row block-row--separated">
	{{ bb_code($report.content_info.page.message, 'ams_page', $content ?: $report.User) }}
</div>
<div class="block-row block-row--separated block-row--minor">
	<div>
		<dl class="pairs pairs--inline">
			<dt>{{ phrase('xa_ams_article') }}</dt>
			<dd><a href="{{ link('ams', $report.content_info.article) }}">{$report.content_info.article.title}</a></dd>
		</dl>
	</div>
	<div>
		<dl class="pairs pairs--inline">
			<dt>{{ phrase('category') }}</dt>
			<dd><a href="{{ link('ams/categories', $report.content_info.category) }}">{$report.content_info.category.title}</a></dd>
		</dl>
	</div>
</div>]]></template>
  <template type="public" title="report_content_ams_rating" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<div class="block-row block-row--separated">
	{{ structured_text($report.content_info.rating.message) }}
</div>
<div class="block-row block-row--separated block-row--minor">
	<div>
		<dl class="pairs pairs--inline">
			<dt>{{ phrase('xa_ams_article') }}</dt>
			<dd><a href="{{ link('ams', $report.content_info.article) }}">{$report.content_info.article.title}</a></dd>
		</dl>
	</div>
	<div>
		<dl class="pairs pairs--inline">
			<dt>{{ phrase('category') }}</dt>
			<dd><a href="{{ link('ams/categories', $report.content_info.category) }}">{$report.content_info.category.title}</a></dd>
		</dl>
	</div>
</div>]]></template>
  <template type="public" title="report_content_ams_series" version_id="2011370" version_string="2.1.13"><![CDATA[<div class="block-row block-row--separated">
	{{ bb_code($report.content_info.description, 'ams_series', $content ?: $report.User) }}
</div>
<div class="block-row block-row--separated">
	{{ bb_code($report.content_info.message, 'ams_series', $content ?: $report.User) }}
</div>
<div class="block-row block-row--separated block-row--minor">
	<div>
		<dl class="pairs pairs--inline">
			<dt>{{ phrase('xa_ams_series') }}</dt>
			<dd><a href="{{ link('ams/series', $report.content_info) }}">{$report.content_info.title}</a></dd>
		</dl>
	</div>
</div>]]></template>
  <template type="public" title="search_form_ams_article" version_id="2021070" version_string="2.2.10"><![CDATA[<xf:title>{{ phrase('xa_ams_search_articles') }}</xf:title>

<xf:macro template="search_form_macros" name="keywords" arg-input="{$input}" />
<xf:macro template="search_form_macros" name="user" arg-input="{$input}" />
<xf:macro template="search_form_macros" name="date" arg-input="{$input}" />

<xf:if is="$prefixesGrouped is not empty">
	<xf:selectrow name="c[prefixes][]" size="7" multiple="true" value="{$input.c.prefixes|default([0])}"
		label="{{ phrase('prefixes') }}">

		<xf:option value="">{{ phrase('(any)') }}</xf:option>
		<xf:foreach loop="$prefixGroups" key="$groupId" value="$prefixGroup" if="{{ count($prefixesGrouped.{$groupId}) > 0 }}">
			<xf:optgroup label="{{ prefix_group('ams_article', $groupId) }}">
				<xf:foreach loop="{$prefixesGrouped.{$groupId}}" key="$prefixId" value="$prefix">
					<xf:option value="{$prefixId}">{{ prefix_title('ams_article', $prefixId) }}</xf:option>
				</xf:foreach>
			</xf:optgroup>
		</xf:foreach>
	</xf:selectrow>
</xf:if>

<xf:set var="$categoriesControlId" value="{{ unique_id() }}" />
<xf:formrow rowtype="input" label="{{ phrase('xa_ams_search_in_categories') }}" controlid="{$categoriesControlId}">
	<ul class="inputList">
		<li><xf:select name="c[categories][]" size="7" multiple="multiple" value="{$input.c.categories|default([0])}" id="{$categoriesControlId}">
			<xf:option value="">{{ phrase('all_categories') }}</xf:option>
			<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
				<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
			</xf:foreach>
		</xf:select></li>
		<li><xf:checkbox standalone="true">
			<xf:option name="c[child_categories]" selected="{{ (!$input.c || $input.c.child_categories) }}" label="{{ phrase('xa_ams_search_child_categories_as_well') }}" />
		</xf:checkbox></li>
	</ul>
</xf:formrow>

<xf:checkboxrow>
	<xf:option name="c[include_comments]" selected="{{ true }}">{{ phrase('xa_ams_include_article_comments') }}</xf:option>
	<xf:option name="c[include_reviews]" selected="{{ true }}">{{ phrase('xa_ams_include_article_reviews') }}</xf:option>
</xf:checkboxrow>

<xf:macro template="search_form_macros" name="order"
	arg-isRelevanceSupported="{$isRelevanceSupported}"
	arg-input="{$input}" />]]></template>
  <template type="public" title="search_result_ams_article" version_id="2022470" version_string="2.2.24"><![CDATA[<li class="block-row block-row--separated {{ $article.isIgnored() ? 'is-ignored' : '' }} js-inlineModContainer" data-author="{{ $article.User.username ?: $article.username }}">
	<div class="contentRow {{ !$article.isVisible() ? 'is-deleted' : '' }} amsArticleSearchResultRow">
		<span class="contentRow-figure">
			<xf:if is="$article.CoverImage">
				<a href="{{ link('ams', $article) }}">
					{{ ams_article_thumbnail($article) }}
				</a>				
			<xf:elseif is="$article.SeriesPart.Series && $article.SeriesPart.Series.icon_date" />
				{{ ams_series_icon($article.SeriesPart.Series, 's', link('ams', $article)) }}
			<xf:elseif is="$article.Category.content_image_url" />
				<a href="{{ link('ams', $article) }}">
					{{ ams_category_icon($article) }}
				</a>				
			<xf:else />
				<xf:avatar user="$article.User" size="s" defaultname="{{ $article.username ?: phrase('deleted_member') }}" />
			</xf:if>
		</span>
		<div class="contentRow-main">
			<h3 class="contentRow-title">
				<a href="{{ link('ams', $article) }}">{{ prefix('ams_article', $article) }}{{ highlight($article.title, $options.term) }}</a>
			</h3>

			<div class="contentRow-snippet">
				{{ snippet($article.message, 300, {'term': $options.term, 'stripQuote': true}) }}
			</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<xf:if is="$options.mod == 'ams_article' && $article.canUseInlineModeration()">
						<li><xf:checkbox standalone="true"><xf:option value="{$article.article_id}" class="js-inlineModToggle" /></xf:checkbox></li>
					</xf:if>
					<xf:if is="$article.User.Profile.xa_ams_author_name">
						<li><xf:username user="{'user_id':{$article.User.user_id}, 'username':{$article.User.Profile.xa_ams_author_name}}" defaultname="{$article.User.Profile.xa_ams_author_name}" /></li>
					<xf:else />
						<li><xf:username user="{$article.User}" defaultname="{$article.username}" /></li>
					</xf:if>
					<li>{{ phrase('xa_ams_article') }}</li>
					<li><xf:date time="{$article.publish_date}" /></li>
					<xf:if is="$article.article_read_time">
						<li>{{ phrase('xa_ams_x_min_read', {'minutes': $article.article_read_time}) }}</li>
					</xf:if>					
					<xf:if is="$xf.options.enableTagging && $article.tags">
						<li>
							<xf:macro template="tag_macros" name="simple_list"
								arg-tags="{$article.tags}"
								arg-containerClass="contentRow-minor"
								arg-highlightTerm="{{ $options.tag ?: $options.term}}" />
						</li>
					</xf:if>					
					<xf:if is="$article.comment_count"><li>{{ phrase('comments:') }} {$article.comment_count|number}</li></xf:if>
					<li>{{ phrase('category:') }} <a href="{{ link('ams/categories', $article.Category) }}">{$article.Category.title}</a></li>
				</ul>
			</div>
		</div>
	</div>
</li>]]></template>
  <template type="public" title="search_result_ams_comment" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<li class="block-row block-row--separated {{ $comment.isIgnored() ? 'is-ignored' : '' }} js-inlineModContainer" data-author="{{ $comment.User.username ?: $comment.username }}">
	<div class="contentRow {{ !$comment.isVisible() ? 'is-deleted' : '' }}">
		<span class="contentRow-figure">
			<xf:avatar user="{$comment.User}" size="s" defaultname="{$comment.username}" />
		</span>
		<div class="contentRow-main">
			<h3 class="contentRow-title">
				<a href="{{ link('ams/comments', $comment) }}">
					{{ phrase('xa_ams_comment_by_x_in_article_y', {
						'user': $comment.username,
						'title': $comment.Article.title
					}) }}
				</a>
			</h3>

			<div class="contentRow-snippet">{{ snippet($comment.message, 300, {'term': $options.term, 'stripQuote': true}) }}</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<xf:if is="$options.mod == 'ams_comment' AND $comment.canUseInlineModeration()">
						<li><xf:checkbox standalone="true"><xf:option value="{$comment.comment_id}" class="js-inlineModToggle" /></xf:checkbox></li>
					</xf:if>
					<li><xf:username user="{$comment.User}" defaultname="{$comment.username}" /></li>
					<li>{{ phrase('xa_ams_article_comment') }}</li>
					<li><xf:date time="{$comment.comment_date}" /></li>
				</ul>
			</div>
		</div>
	</div>
</li>]]></template>
  <template type="public" title="search_result_ams_page" version_id="2022470" version_string="2.2.24"><![CDATA[<li class="block-row block-row--separated {{ $page.isIgnored() ? 'is-ignored' : '' }} js-inlineModContainer" data-author="{{ $page.User.username ?: $page.username }}">
	<div class="contentRow {{ !$page.isVisible() ? 'is-deleted' : '' }} amsArticleSearchResultRow">
		<span class="contentRow-figure">
			<xf:if is="$page.CoverImage">
				<a href="{{ link('ams/page', $page) }}">
					{{ ams_article_page_thumbnail($page, $page.Article) }}
				</a>	
			<xf:elseif is="$page.Article.CoverImage" />
				<a href="{{ link('ams/page', $page) }}">
					{{ ams_article_thumbnail($page.Article) }}
				</a>				
			<xf:elseif is="$page.Article.Category.content_image_url" />
				<a href="{{ link('ams/page', $page) }}">
					{{ ams_category_icon($page.Article) }}
				</a>				
			<xf:else />
				<xf:avatar user="$page.User" size="s" defaultname="{{ $page.username ?: phrase('deleted_member') }}" />
			</xf:if>
		</span>
		<div class="contentRow-main">
			<h3 class="contentRow-title">
				<a href="{{ link('ams/page', $page) }}">{{ prefix('ams_article', $page.Article) }}{{ highlight($page.Article.title, $options.term) }} | {{ highlight($page.title, $options.term) }}</a>
			</h3>

			<div class="contentRow-snippet">
				{{ snippet($page.message, 300, {'term': $options.term, 'stripQuote': true}) }}
			</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<xf:if is="$options.mod == 'ams_page' && $page.canUseInlineModeration()">
						<li><xf:checkbox standalone="true"><xf:option value="{$page.page_id}" class="js-inlineModToggle" /></xf:checkbox></li>
					</xf:if>
					<xf:if is="$page.User.Profile.xa_ams_author_name">
						<li><xf:username user="{'user_id':{$page.User.user_id}, 'username':{$page.User.Profile.xa_ams_author_name}}" defaultname="{$page.User.Profile.xa_ams_author_name}" /></li>
					<xf:else />
						<li><xf:username user="{$page.User}" defaultname="{$page.username}" /></li>
					</xf:if>
					<li>{{ phrase('xa_ams_page') }}</li>
					<li><xf:date time="{$page.create_date}" /></li>
					<xf:if is="$xf.options.enableTagging && $page.Article.tags">
						<li>
							<xf:macro template="tag_macros" name="simple_list"
								arg-tags="{$page.Article.tags}"
								arg-containerClass="contentRow-minor"
								arg-highlightTerm="{{ $options.tag ?: $options.term}}" />
						</li>
					</xf:if>					
					<li>{{ phrase('category:') }} <a href="{{ link('ams/categories', $page.Article.Category) }}">{$page.Article.Category.title}</a></li>
				</ul>
			</div>
		</div>
	</div>
</li>]]></template>
  <template type="public" title="search_result_ams_rating" version_id="2010770" version_string="2.1.7"><![CDATA[<li class="block-row block-row--separated {{ $review.isIgnored() ? 'is-ignored' : '' }} js-inlineModContainer" data-author="{{ $review.is_anonymous ? phrase('anonymous') : $review.User.username ?: $review.username }}">
	<div class="contentRow {{ !$review.isVisible() ? 'is-deleted' : '' }}">
		<span class="contentRow-figure">
			<xf:if is="$review.is_anonymous">
				<xf:avatar user="{{ NULL }}" size="s" defaultname="{{ phrase('anonymous') }}" />
				<xf:else />
				<xf:avatar user="$review.User" size="s" defaultname="{{ $review.username ?: phrase('deleted_member') }}" />
			</xf:if>
		</span>
		<div class="contentRow-main">
			<h3 class="contentRow-title">
				<a href="{{ link('ams/review', $review) }}">
					{{ phrase('xa_ams_review_by_x_in_article_y', {
						'user': $review.is_anonymous ? phrase('anonymous') : $review.username,
						'title': $review.Article.title
					}) }}
				</a>
			</h3>

			<div class="contentRow-snippet">{{ snippet($review.message, 300, {'term': $options.term, 'stripQuote': true}) }}</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<xf:if is="$options.mod == 'ams_rating' AND $review.canUseInlineModeration()">
						<li><xf:checkbox standalone="true"><xf:option value="{$review.rating_id}" class="js-inlineModToggle" /></xf:checkbox></li>
					</xf:if>
					<xf:if is="$review.is_anonymous">
						<li><xf:username user="{{ null }}" defaultname="{{ phrase('anonymous') }}" />
						<xf:if is="$review.canViewAnonymousAuthor()">
							(<xf:username user="{$review.User}" defaultname="{{ phrase('deleted_member') }}" />)
						</xf:if></li>
					<xf:else />
						<li><xf:username user="{$review.User}" defaultname="$review.username" /></li>
					</xf:if>
					<li>{{ phrase('xa_ams_article_rating') }}</li>
					<li><xf:date time="{$review.rating_date}" /></li>
				</ul>
			</div>
		</div>
	</div>
</li>]]></template>
  <template type="public" title="search_result_ams_series" version_id="2021970" version_string="2.2.19"><![CDATA[<li class="block-row block-row--separated {{ $series.isIgnored() ? 'is-ignored' : '' }} js-inlineModContainer" data-author="{{ $series.User.username ?: $series.username }}">
	<div class="contentRow amsSeriesSearchResultRow">
		<span class="contentRow-figure">
			<xf:if is="$series.icon_date">
				<a href="{{ link('ams/series', $series) }}">
					{{ ams_series_icon($series) }}
				</a>				
			<xf:else />
				<xf:avatar user="$series.User" size="s" defaultname="{$series.User.username}" />
			</xf:if>
		</span>
		<div class="contentRow-main">
			<h3 class="contentRow-title">
				<a href="{{ link('ams/series', $series) }}">{{ highlight($series.title, $options.term) }}</a>
			</h3>

			<div class="contentRow-snippet">
				<xf:if is="$series.description !='' ">				
						{{ snippet($series.description, 300, {'term': $options.term, 'stripQuote': true}) }}
					<xf:else />
						{{ snippet($series.message, 300, {'term': $options.term, 'stripQuote': true}) }}
				</xf:if>					
			</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<xf:if is="$options.mod == 'ams_series' && $series.canUseInlineModeration()">
						<li><xf:checkbox standalone="true"><xf:option value="{$series.series_id}" class="js-inlineModToggle" /></xf:checkbox></li>
					</xf:if>
					<li><xf:username user="{$series.User}" defaultname="{$series.User.username}" /></li>
					<li>{{ phrase('xa_ams_series') }}</li>
					<li><xf:date time="{$series.create_date}" /></li>
					<xf:if is="$xf.options.enableTagging && $series.tags">
						<li>
							<xf:macro template="tag_macros" name="simple_list"
								arg-tags="{$series.tags}"
								arg-containerClass="contentRow-minor"
								arg-highlightTerm="{{ $options.tag ?: $options.term}}" />
						</li>
					</xf:if>					
					<xf:if is="$series.article_count"><li>{{ phrase('xa_ams_articles:') }} {$series.article_count|number}</li></xf:if>
				</ul>
			</div>
		</div>
	</div>
</li>]]></template>
  <template type="public" title="watched_ams_articles_manage" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_manage_watched_articles') }}</xf:title>

<xf:form action="{{ link('watched/ams-articles/manage', null, {'state': $state}) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-row">
			<xf:inforow rowtype="confirm">
				<xf:if is="$state == 'delete'">
					{{ phrase('xa_ams_you_sure_you_want_to_stop_watching_all_articles') }}
				<xf:else />
					{{ phrase('xa_ams_you_sure_you_want_to_update_notification_settings_for_all_articles') }}
				</xf:if>
			</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('confirm') }}" icon="notificationsOff" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams.less" version_id="2022770" version_string="2.2.27"><![CDATA[// ############################ MISC CSS ######################

.ams-muted
{
	color: @xf-textColorMuted;
}

.amsNextArticle,
.amsPreviousArticle,
.amsNextPage,
.amsPreviousPage
{
	font-size: @xf-fontSizeNormal;
	font-weight: @xf-fontWeightHeavy;
}

.amsSetCoverImage-attachments .attachment-icon.attachment-icon--img img 
{
	max-height: 100px;
	max-width: 100%;
}

.amsSetCoverImage-attachments .avatar
{
	border-radius: 0;
}

.structItem--article.awaiting
{
	background-color: @xf-inlineModHighlightColor;
}


// ############################ CAROUSEL Full/Simple CSS ######################

.carousel--amsFeaturedArticles .contentRow-figure
{
	width: 175px;
	margin-left:10px;
	float:right;	
}

.carousel--amsFeaturedSeries .contentRow-figure
{
	width: 150px;
	margin-left:10px;
	float:right;	
}

.carousel--amsFeaturedArticles .carousel-item
{
	&.is-unread
	{
		.contentRow-title
		{
			font-weight: @xf-fontWeightHeavy;
		}
	}
}

.carousel--amsFeaturedArticles,
.carousel--amsFeaturedSeries
{
	.contentRow-title
	{
		font-size: @xf-fontSizeLarger;
	}	
}

.carousel--amsCarousleSimple,
.carousel--amsFeaturedArticlesSimple
{
	.contentRow-figure
	{
		width: 100%;
		float: none;
		margin: 0 auto;
	}
	
	.contentRow-title
	{
		font-size: @xf-fontSizeNormal;
	}

	.carousel-body
	{
		height: 100% !important;
	}
}

.carousel--amsFeaturedArticles .contentRow-amsCategory,
.carousel--amsFeaturedSeries .contentRow-amsSeries
{
	font-size: @xf-fontSizeSmaller;
	font-style: italic;
	color: @xf-textColorMuted;
	padding-bottom: 2px;
}

.carousel--amsFeaturedArticles .contentRow-lesser,
.carousel--amsFeaturedSeries .contentRow-lesser
{
	padding: 5px 0;
}

.carousel--amsFeaturedSeries .contentRow-amsLatestArticle
{
	font-size: @xf-fontSizeSmaller;
	font-style: italic;
	color: @xf-textColorMuted;
	padding-top: 5px;
}

.carousel--amsFeaturedArticles .contentRow-articleLocation
{
	font-size: @xf-fontSizeSmaller;
	color: @xf-textColorDimmed;
	margin-top: @xf-paddingSmall;
}

.carousel--amsFeaturedArticles .contentRow-articleLocationIcon
{
	font-size: @xf-fontSizeSmaller;
	padding-left: @xf-paddingSmall;
}

.carousel--amsFeaturedArticles .contentRow-articleCustomFields
{
	font-size: @xf-fontSizeSmaller;
	margin-top: @xf-paddingSmall;
	margin-bottom: @xf-paddingSmall;
}

.carousel--amsFeaturedArticles .contentRow-articleMeta
{
	padding-top: @xf-paddingSmall
}

@media (max-width: @xf-responsiveMedium)
{
	.carousel--amsFeaturedArticles .contentRow-figure,
	.carousel--amsFeaturedSeries .contentRow-figure	
	{
		width: 150px;
	}
	
	.carousel--amsFeaturedArticles,
	.carousel--amsFeaturedSeries
	{
		.contentRow-title
		{
			font-size: @xf-fontSizeLarge;
		}	
	}
}

@media (max-width: @xf-responsiveNarrow)
{
	.carousel--amsFeaturedArticles .contentRow-figure,
	.carousel--amsFeaturedSeries .contentRow-figure	
	{
		width: 125px;
	}
}

@media (max-width: 374px)
{
	.carousel--amsFeaturedArticles .contentRow-figure,
	.carousel--amsFeaturedSeries .contentRow-figure
	{
		width: 100px;
	}
}

// ############################ ARTICLE LIST (non layout specific) CSS ######################

.ratingStars--amsAuthorRating .ratingStars-star.ratingStars-star--full::before,
.ratingStars--amsAuthorRating .ratingStars-star.ratingStars-star--half::after
{
	color: #176093;
}

.structItem-cell.structItem-cell--icon.structItem-cell--iconExpanded.structItem-cell--iconAmsCoverImage,
.structItem-cell.structItem-cell--icon.structItem-cell--iconExpanded.structItem-cell--iconAmsSeriesCoverImage  
{
    width: 175px;
}

.structItem-cell--iconAmsCoverImage .structItem-iconContainer .avatar,
.structItem-cell--iconAmsSeriesCoverImage .structItem-iconContainer .avatar
{
	width: 96px;
	height: 96px;
	font-size: 57.6px;
}

@media (max-width: @xf-responsiveMedium)
{
	.structItem-cell.structItem-cell--icon.structItem-cell--iconExpanded.structItem-cell--iconAmsCoverImage,
	.structItem-cell.structItem-cell--icon.structItem-cell--iconExpanded.structItem-cell--iconAmsSeriesCoverImage 
	{
    		width: 150px;		
	}
}

@media (max-width: @xf-responsiveNarrow)
{
	.structItem-cell.structItem-cell--icon.structItem-cell--iconExpanded.structItem-cell--iconAmsCoverImage,
	.structItem-cell.structItem-cell--icon.structItem-cell--iconExpanded.structItem-cell--iconAmsSeriesCoverImage  
	{
    		width: 125px;		
	}
}

@media (max-width: 374px)
{
	.structItem-cell.structItem-cell--icon.structItem-cell--iconExpanded.structItem-cell--iconAmsCoverImage,
	.structItem-cell.structItem-cell--icon.structItem-cell--iconExpanded.structItem-cell--iconAmsSeriesCoverImage 
	{
		width: 100px;
	}

	.structItem-cell--iconAmsCoverImage .structItem-iconContainer .avatar,
	.structItem-cell--iconAmsSeriesCoverImage .structItem-iconContainer .avatar
	{
		width: 48px;
		height: 48px;
		font-size: 28.8px;
	}
}

// #################################### LIST VIEW LAYOUT SPECIFIC CSS ########################

.structItem-cell.structItem-cell--listViewLayout
{
	display: block;
	padding-bottom: .2em;
}

.structItem-cell.structItem-cell--listViewLayout .structItem-minor 
{
	float: none !important;
}

.structItem-cell.structItem-cell--listViewLayout
{
	.structItem-title
	{
		font-size: @xf-fontSizeLarger;
		padding-bottom: @xf-paddingSmall;
	}	
}

.structItem-articleCategoryTitleHeader
{
	font-size: @xf-fontSizeSmaller;
	font-style: italic;
	color: @xf-textColorMuted;
}

.structItem-LatestArticleTitleFooter
{
	padding-top: @xf-paddingSmall;
	font-size: @xf-fontSizeSmaller;
	font-style: italic;
	color: @xf-textColorMuted;
}

.structItem-articleLocation
{
	font-size: @xf-fontSizeSmaller;
	color: @xf-textColorDimmed;
	padding-bottom: @xf-paddingSmall;

	.structItem-articleLocationIcon
	{
		font-size: @xf-fontSizeSmaller;
		padding-left: @xf-paddingSmall;
	}
}

.structItem-articleDescription
{
	font-size: @xf-fontSizeSmaller;
	padding-top: @xf-paddingSmall;
	padding-bottom: @xf-paddingSmall;
}

.structItem-articleCustomFields
{
	font-size: @xf-fontSizeSmaller;
	padding-bottom: @xf-paddingSmall;
}

.structItem-listViewMeta
{
	padding-bottom: @xf-paddingSmall;
	color: @xf-textColorMuted;

	.pairs
	{
		display: inline;

		&:before,
		&:after
		{
			display: none;
		}

		> dt,
		> dd
		{
			display: inline;
			float: none;
			margin: 0;
		}
	}

	.structItem-metaItem
	{
		display: inline;
	}

	.ratingStarsRow
	{
		display: inline;

		.ratingStarsRow-text
		{
			display: none;
		}
	}

	.structItem-metaItem--author > dt,
	.structItem-metaItem--publishdate > dt,
	.structItem-metaItem--articleReadTime > dt
	{
		display: none;
	}

	.structItem-metaItem + .structItem-metaItem:before
	{
		display: inline;
		content: "\20\00B7\20";
		color: @xf-textColorMuted;
	}
}

@media (max-width: @xf-responsiveMedium)
{
	.structItem-cell.structItem-cell--listViewLayout
	{
		.structItem-title
		{
			font-size: @xf-fontSizeLarge;
		}	
	}
}


// #################################### ARTICLE VIEW LAYOUT SPECIFIC CSS ########################

.message--articleView
{
	&.is-unread
	{
		.message-attribution-amsArticleTitle .contentRow-title
		{
			font-weight: @xf-fontWeightHeavy;
		}
	}
	&.is-moderated
	{
		background: @xf-contentHighlightBg;
	}

	&.is-deleted
	{
		opacity: .7;

		.message-attribution-amsArticleTitle .contentRow-title
		{
			text-decoration: line-through;
		}
	}
}

.message--articleView .message-cell.message-cell--main
{
	padding-left: @xf-messagePadding;
}

.message--articleView .message-attribution-amsCategoryTitle
{
	font-style: italic;
}

.message--articleView .message-attribution-amsArticleTitle
{
	border-bottom: none;

	.contentRow-title
	{
		font-size: @xf-fontSizeLarger;

		.label 
		{
    			font-weight: @xf-fontWeightNormal;
		}
	}
}

.message--articleView .message-attribution-amsArticleLocation
{
	border-bottom: none;
	font-size: @xf-fontSizeSmall;
	color: @xf-textColorDimmed;

	.message-attribution-amsArticleLocationIcon
	{
		padding-left: @xf-paddingSmall;
		font-size: @xf-fontSizeSmall;
	}
}

.message--articleView .message-attribution-amsArticleMeta
{
	border-bottom: none;
}

@media (max-width: @xf-responsiveMedium)
{
	.message--articleView .message-attribution-amsArticleTitle .contentRow-title
	{
		font-size: @xf-fontSizeLarge;
	}
}


// #################################### ARTICLE BODY / VIEW SPECIFIC CSS ########################

.articleBody
{
	display: flex;
}

.articleBody .message-attribution-amsPageMeta
{
	margin-top: -10px;
	margin-bottom: 10px;
}

.articleBody-main
{
	flex: 1;
	min-width: 0;
	padding: @xf-blockPaddingV @xf-blockPaddingH;
	
	<xf:if is="property('xbMessageLink')">
		.bbWrapper a { .xf-xbMessageLink(); &:hover { .xf-xbMessageLinkHover(); } }
	</xf:if>
}

.articleBody-aboutAuthor
{
	flex: 1;
	min-width: 0;
	padding-top: 5px;
}

.articleBody-sidebar
{
	flex: 0 0 auto;
	width: 250px;
	.xf-contentAltBase();
	border-left: @xf-borderSize solid @xf-borderColor;
	padding: @xf-blockPaddingV @xf-blockPaddingH;
	font-size: @xf-fontSizeSmall;

	> :first-child
	{
		margin-top: 0;
	}

	> :last-child
	{
		margin-bottom: 0;
	}
}

.articleBody-fields
{
	&.articleBody-fields--header
	{
		margin-top: @xf-paddingLarge;
		padding-top: @xf-paddingMedium;
	}

	&.articleBody-fields--before
	{
		margin-bottom: @xf-paddingLarge;
		padding-bottom: @xf-paddingMedium;
		border-bottom: @xf-borderSize solid @xf-borderColorLight;
	}

	&.articleBody-fields--after
	{
		margin-top: @xf-paddingLarge;
		padding-top: @xf-paddingMedium;
		border-top: @xf-borderSize solid @xf-borderColorLight;
	}
}

.articleBody-attachments
{
	margin: .5em 0;
}

.articleBody .actionBar-set
{
	margin-top: @xf-messagePadding;
	font-size: @xf-fontSizeSmall;
}

.articleSidebarGroup
{
	margin-bottom: @xf-elementSpacer;

	&.articleSidebarGroup--buttons
	{
		> .button
		{
			display: block;
			margin: 5px 0;

			&:first-child
			{
				margin-top: 0;
			}

			&:last-child
			{
				margin-bottom: 0;
			}
		}
	}
}

.articleSidebarGroup-title
{
	margin: 0;
	padding: 0;

	font-size: @xf-fontSizeLarge;
	font-weight: @xf-fontWeightNormal;
	color: @xf-textColorFeature;
	padding-bottom: @xf-paddingMedium;

	.m-hiddenLinks();
}

.articleSidebarList
{
	.m-listPlain();

	> li
	{
		padding: @xf-paddingSmall 0;

		&:first-child
		{
			padding-top: 0;
		}

		&:last-child
		{
			padding-bottom: 0;
		}
	}
}

@media (max-width: @xf-responsiveWide)
{
	.articleBody
	{
		display: block;
	}

	.articleBody-sidebar
	{
		width: auto;
		border-left: none;
		border-top: @xf-borderSize solid @xf-borderColor;
	}

	.articleSidebarGroup
	{
		max-width: 600px;
		margin-left: auto;
		margin-right: auto;
	}
}

// #################################### ARTICLE PAGE LIST SPECIFIC CSS ########################

.message-attribution-amsPageTitle
{
	border-bottom: none !important;
}

.message-attribution-amsPageTitle .contentRow-title
{
	font-size: @xf-fontSizeLarge;
	font-weight: @xf-fontWeightHeavy;
}

.message-attribution-amsPageMeta
{
	border-bottom: none !important;
}

.message-attribution-amsPageStats
{
	padding-top: 5px;
	border-bottom: none !important;
}


@media (max-width: @xf-responsiveNarrow)
{
	.message-attribution-amsPageTitle .contentRow-title
	{
		font-size: @xf-fontSizeNormal;
	}
}


// #################################### SERIES LIST SPECIFIC CSS ########################

.structItem-status
{
	&--community::before { .m-faContent(@fa-var-users, 1.04em); color: @xf-textColorFeature; }	
}

.structItem-seriesTitleHeader
{
	font-size: @xf-fontSizeSmall;
}

.actionBarSeries
{
	font-size: @xf-fontSizeSmall;	
}


// #################################### SERIES BODY / VIEW SPECIFIC CSS ########################

.seriesBody
{
	display: flex;
}

.seriesBody-main
{
	flex: 1;
	min-width: 0;
	padding: @xf-blockPaddingV @xf-blockPaddingH;
	
	<xf:if is="property('xbMessageLink')">
		.bbWrapper a { .xf-xbMessageLink(); &:hover { .xf-xbMessageLinkHover(); } }
	</xf:if>	
}

.seriesBody-sidebar
{
	flex: 0 0 auto;
	width: 250px;
	.xf-contentAltBase();
	border-left: @xf-borderSize solid @xf-borderColor;
	padding: @xf-blockPaddingV @xf-blockPaddingH;
	font-size: @xf-fontSizeSmall;

	> :first-child
	{
		margin-top: 0;
	}

	> :last-child
	{
		margin-bottom: 0;
	}
}

.seriesBody-attachments
{
	margin: .5em 0;
}

.seriesBody .actionBar-set
{
	margin-top: @xf-messagePadding;
	font-size: @xf-fontSizeSmall;
}

.blogSidebarGroup,
.blogEntrySidebarGroup
{
	margin-bottom: @xf-elementSpacer;

	&.blogEntrySidebarGroup--buttons
	{
		> .button
		{
			display: block;
			margin: 5px 0;

			&:first-child
			{
				margin-top: 0;
			}

			&:last-child
			{
				margin-bottom: 0;
			}
		}
	}
}

.seriesSidebarGroup-title
{
	margin: 0;
	padding: 0;

	font-size: @xf-fontSizeLarge;
	font-weight: @xf-fontWeightNormal;
	color: @xf-textColorFeature;
	padding-bottom: @xf-paddingMedium;

	.m-hiddenLinks();
}

.seriesSidebarList
{
	.m-listPlain();

	> li
	{
		padding: @xf-paddingSmall 0;

		&:first-child
		{
			padding-top: 0;
		}

		&:last-child
		{
			padding-bottom: 0;
		}
	}
}

@media (max-width: @xf-responsiveWide)
{
	.seriesBody
	{
		display: block;
	}

	.seriesBody-sidebar
	{
		width: auto;
		border-left: none;
		border-top: @xf-borderSize solid @xf-borderColor;
	}

	.seriesSidebarGroup
	{
		max-width: 600px;
		margin-left: auto;
		margin-right: auto;
	}
}


// #################################### COVER IMAGE CONTAINER FOR ARTICLE VIEW LAYOUT AND ARTICLE VIEW ####################################

.amsCoverImage
{
	position: relative;
	margin-bottom: @xf-elementSpacer;

	&.has-caption
	{
		margin-bottom: 0px;
	}
}

.message--articleView .amsCoverImage
{
	margin-top: @xf-paddingLarge;
}

.amsCoverImage-container
{
	display: flex;
	justify-content: center;
	align-items: center;

	border: 1px solid transparent;

	min-height: 50px;

	img
	{
		max-width: 100%;
		max-height: 80vh;
	}

	.amsCoverImage-container-image
	{
		position: relative;
	}
}

.amsCoverImage-caption
{
	font-style: italic;
	color: @xf-textColorDimmed;
	margin-bottom: @xf-elementSpacer;
}


// #################################### CATEGORY MAP SPECIFIC CSS ########################

.amsMapContainer {}

	.amsMapContainer.top 
	{
		padding-bottom: @xf-paddingLarge;
	}
	
	.amsMapContainer.bottom {}

.amsMapInfoWindow 
{
	width: 400px;
}
	
.amsMapInfoWindowItem
{
	font-size: @xf-fontSizeSmall;
	font-weight: @xf-fontWeightNormal;  
	word-wrap: normal;
}

	.amsMapInfoWindowItem .listBlock
	{
		vertical-align: top;
	}

	.amsMapInfoWindowItem .listBlockInner
	{
		padding-right: 5px;		
	}

	.amsMapInfoWindowItem .listBlockInnerImage 
	{
		padding: 0px;
	}

	.amsMapInfoWindowItem .articleCoverImage
	{
		width: 20%;
		min-width: 100px;
		max-width: 100px;
	}

		.amsMapInfoWindowItem .articleCoverImage.left
		{
			float: left;
			margin-right: 10px;
		}

		.amsMapInfoWindowItem .articleCoverImage .thumbImage
		{
			width: 100%;
			vertical-align: middle;
		}

		.amsMapInfoWindowItem .articleCoverImage .listBlockInner
		{
			padding-right: 0px;
		}

	.amsMapInfoWindowItem .title 
	{
		font-size: @xf-fontSizeLarge;
		font-weight:  @xf-fontWeightHeavy;
		padding: 5px 0;	 
	}
	
	.amsMapInfoWindowItem .address, 
	.amsMapInfoWindowItem .authorRating, 
	.amsMapInfoWindowItem .userRating
	{
		padding: 2px 0;
	}

	.amsMapInfoWindowItem .ams-muted
	{
		color: @xf-textColorMuted;
	}		

@media (max-width: @xf-responsiveMedium)
{
	.amsMapInfoWindow 
	{
		width: 100%;
	}

	.amsMapInfoWindowItem
	{
		font-size: @xf-fontSizeSmaller;
	}

	.amsMapInfoWindow .amsMapInfoWindowItem .articleCoverImage
	{
		width: 10%;
		min-width: 75px;
		max-width: 75px;
	}	

	.amsMapInfoWindow .amsMapInfoWindowItem .title
	{
		font-size: @xf-fontSizeNormal;
	}			
}

@media (max-width: @xf-responsiveNarrow)
{
	.amsMapInfoWindow 
	{
		width: 100%;
	}

	.amsMapInfoWindowItem
	{
		font-size: @xf-fontSizeSmallest;
	}

	.amsMapInfoWindow .amsMapInfoWindowItem .articleCoverImage
	{
		width: 10%;
		min-width: 50px;
		max-width: 50px;
	}	

	.amsMapInfoWindow .amsMapInfoWindowItem .title
	{
		font-size: @xf-fontSizeSmall;
	}				
}]]></template>
  <template type="public" title="xa_ams_ams_bb_code_article" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:css src="xa_ams.less" />
<xf:css src="message.less" />
<div class="embeddedAmsArticle block--messages">
	<div class="block-row block-row--separated" data-author="{{ $article.User.username ?: $article.username }}">
		<div class="contentRow amsArticleSearchResultRow">
			<xf:if is="$article.CoverImage || $article.Category.content_image_url || ($article.SeriesPart.Series && $article.SeriesPart.Series.icon_date)">
				<span class="contentRow-figure">
					<xf:if is="$article.CoverImage">
						<a href="{{ link('ams', $article) }}">
							{{ ams_article_thumbnail($article) }}
						</a>				
					<xf:elseif is="$article.SeriesPart.Series && $article.SeriesPart.Series.icon_date" />
						{{ ams_series_icon($article.SeriesPart.Series, 's', link('ams', $article)) }}
					<xf:elseif is="$article.Category.content_image_url" />
						<a href="{{ link('ams', $article) }}">
							{{ ams_category_icon($article) }}
						</a>				
					</xf:if>
				</span>
			</xf:if>
			<div class="contentRow-main">
				<h3 class="contentRow-title">
					<a href="{{ link('ams', $article) }}">{{ prefix('ams_article', $article) }} {$article.title}</a>
				</h3>

				<div class="contentRow-snippet">
					{{ snippet($article.message, 300, {'stripQuote': true}) }}
				</div>

				<div class="contentRow-minor contentRow-minor--hideLinks">
					<ul class="listInline listInline--bullet">
						<li><xf:username user="{$article.User}" defaultname="{$article.username}" /></li>
						<li><xf:date time="{$article.publish_date}" /></li>
						<xf:if is="$article.author_rating">
							<li>
								<xf:macro template="rating_macros" name="stars_text"
									arg-rating="{$article.author_rating}"
									arg-text="{{ phrase('xa_ams_author_rating:') }}"
									arg-rowClass="ratingStarsRow"
									arg-starsClass="ratingStars--smaller ratingStars--amsAuthorRating" />
							</li>
						</xf:if>
						<xf:if is="$article.rating_avg AND $article.rating_count">
							<li>
								<xf:macro template="rating_macros" name="stars_text"
									arg-rating="{$article.rating_avg}"
									arg-count="{$article.rating_count}"
									arg-rowClass="ratingStarsRow"
									arg-starsClass="ratingStars--smaller" />
							</li>
						</xf:if>
						<xf:if is="$article.comment_count"><li>{{ phrase('comments:') }} {$article.comment_count|number}</li></xf:if>
						<xf:if is="$article.review_count"><li>{{ phrase('xa_ams_reviews:') }} {$article.review_count|number_short}</li></xf:if>
						<li>{{ phrase('category:') }} <a href="{{ link('ams/categories', $article.Category) }}">{$article.Category.title}</a></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_ams_bb_code_article_page" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:css src="xa_ams.less" />
<xf:css src="message.less" />
<div class="embeddedAmsArticle block--messages">
	<div class="block-row block-row--separated" data-author="{{ $articlePage.User.username ?: $articlePage.username }}">
		<div class="contentRow amsArticleSearchResultRow">
			<xf:if is="$articlePage.CoverImage || $articlePage.Article.CoverImage || $articlePage.Article.Category.content_image_url || ($articlePage.Article.SeriesPart.Series && $articlePage.Article.SeriesPart.Series.icon_date)">
				<span class="contentRow-figure">
					<xf:if is="$articlePage.CoverImage">
						<a href="{{ link('ams/page', $articlePage) }}">
							{{ ams_article_page_thumbnail($articlePage, $articlePage.Article) }}
						</a>	
					<xf:elseif is="$articlePage.Article.CoverImage" />					
						<a href="{{ link('ams/page', $articlePage) }}">
							{{ ams_article_thumbnail($articlePage.Article) }}
						</a>				
					<xf:elseif is="$articlePage.Article.SeriesPart.Series && $articlePage.Article.SeriesPart.Series.icon_date" />
						{{ ams_series_icon($articlePage.Article.SeriesPart.Series, 's', link('ams/page', $articlePage)) }}
					<xf:elseif is="$articlePage.Article.Category.content_image_url" />
						<a href="{{ link('ams/page', $articlePage) }}">
							{{ ams_category_icon($articlePage.Article) }}
						</a>				
					</xf:if>
				</span>
			</xf:if>
			<div class="contentRow-main">
				<h3 class="contentRow-title">
					<a href="{{ link('ams/page', $articlePage) }}">{{ prefix('ams_article', $articlePage.Article) }} {$articlePage.Article.title} - {$articlePage.title}</a>
				</h3>

				<div class="contentRow-snippet">
					{{ snippet($articlePage.message, 300, {'stripQuote': true}) }}
				</div>

				<div class="contentRow-minor contentRow-minor--hideLinks">
					<ul class="listInline listInline--bullet">
						<li><xf:username user="{$articlePage.User}" defaultname="{$articlePage.username}" /></li>
						<li><xf:date time="{$articlePage.create_date}" /></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_ams_bb_code_series" version_id="2021970" version_string="2.2.19"><![CDATA[<xf:css src="xa_ams.less" />
<xf:css src="message.less" />
<div class="embeddedAmsSeries  block--messages">
	<div class="block-row block-row--separated" data-author="{{ $series.User.username ?: $series.username }}">
		<div class="contentRow amsSeriesSearchResultRow">
			<xf:if is="$series.icon_date">
				<span class="contentRow-figure">
					<a href="{{ link('ams/series', $series) }}">
						{{ ams_series_icon($series, 's', link('ams/series', $series)) }}
					</a>				
				</span>
			</xf:if>
			<div class="contentRow-main">
				<h3 class="contentRow-title">
					<a href="{{ link('ams/series', $series) }}">{{ highlight($series.title, $options.term) }}</a>
				</h3>

				<div class="contentRow-snippet">
					<xf:if is="$series.description !='' ">
						{{ snippet($series.description, 300, {'term': $options.term, 'stripQuote': true}) }}
					<xf:else />
						{{ snippet($series.message, 300, {'term': $options.term, 'stripQuote': true}) }}
					</xf:if>
				</div>

				<div class="contentRow-minor contentRow-minor--hideLinks">
					<ul class="listInline listInline--bullet">
						<li><xf:username user="{$series.User}" defaultname="{$series.User.username}" /></li>
						<li><xf:date time="{$series.create_date}" /></li>
						<xf:if is="$series.last_part_date AND $series.last_part_date > $series.create_date">
							<li>{{ phrase('updated') }} <xf:date time="{$series.last_part_date}" /></li>
						</xf:if>
						<xf:if is="$series.article_count"><li>{{ phrase('xa_ams_articles:') }} {$series.article_count|number}</li></xf:if>
						<xf:if is="$series.LastArticle">
							<li>
								{{ phrase('xa_ams_latest_article') }}: <a href="{{ link('ams', $series.LastArticle) }}" class="">{$series.LastArticle.title}</a>
							</li>
						</xf:if>
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_article_add_chooser" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_post_article_in...') }}</xf:title>

<xf:macro name="category_list" arg-children="{$categoryTree}" arg-extras="{$categoryExtras}" />

<xf:macro name="category_list" arg-children="!" arg-extras="!" arg-depth="0">
	<xf:foreach loop="$children" key="$id" value="$child">
		<xf:macro name="category_list_entry"
			arg-category="{$child.record}"
			arg-extras="{$extras.{$id}}"
			arg-children="{$child.children}"
			arg-childExtras="{$extras}"
			arg-depth="{$depth}"
		/>
	</xf:foreach>
</xf:macro>

<xf:macro name="category_list_entry" arg-category="!" arg-extras="!" arg-children="!" arg-childExtras="!" arg-depth="0">
	<xf:if is="$category.canAddArticle()">
		<xf:macro name="{{ $depth == 0 ? 'category_list_entry_add_level_0' : 'category_list_entry_add' }}"
			arg-category="{$category}"
			arg-extras="{$extras}"
			arg-children="{$children}"
			arg-childExtras="{$childExtras}"
			arg-depth="{$depth}"
		/>
	<xf:else />
		<xf:macro name="{{ $depth == 0 ? 'category_list_entry_no_add_level_0' : 'category_list_entry_no_add' }}"
			arg-category="{$category}"
			arg-extras="{$extras}"
			arg-children="{$children}"
			arg-childExtras="{$childExtras}"
			arg-depth="{$depth}"
		/>
	</xf:if>
</xf:macro>

<xf:macro name="category_list_entry_no_add_level_0"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0"
>
	<div class="block block--treeEntryChooser">
		<div class="block-container">
			<h2 class="block-header">
				{$category.title}
				<xf:if is="$category.description">
					<span class="block-desc">
						{$category.description|strip_tags}
					</span>
				</xf:if>
			</h2>
			<div class="block-body">
				<xf:macro name="category_list"
					arg-children="{$children}"
					arg-extras="{$childExtras}"
					arg-depth="{{ $depth + 1 }}"
				/>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="category_list_entry_add_level_0"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0"
>
	<div class="block block--treeEntryChooser">
		<div class="block-container">
			<xf:macro name="category_list_entry_add"
				arg-category="{$category}"
				arg-extras="{$extras}"
				arg-children="{$children}"
				arg-childExtras="{$childExtras}"
				arg-depth="{$depth}"
			/>
		</div>
	</div>
</xf:macro>

<xf:macro name="category_list_entry_add"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0"
>
	<div class="block-row block-row--clickable block-row--separated fauxBlockLink">
		<div class="contentRow contentRow--alignMiddle{{ $depth > 1 ? ' u-depth' . ($depth - 1) : '' }}">
			<div class="contentRow-main">
				<h2 class="contentRow-title">
					<a href="{{ link('ams/categories/add', $category) }}" class="fauxBlockLink-blockLink">
						{$category.title}
					</a>
				</h2>
				<xf:if is="$category.description">
					<div class="contentRow-minor contentRow-minor--singleLine">
						{$category.description|strip_tags}
					</div>
				</xf:if>
			</div>
			<div class="contentRow-suffix">
				<dl class="pairs pairs--rows pairs--rows--centered">
					<dt>{{ phrase('xa_ams_articles') }}</dt>
					<dd>{$extras.article_count|number_short}</dd>
				</dl>
			</div>
		</div>
	</div>
	<xf:macro name="category_list"
		arg-children="{$children}"
		arg-extras="{$childExtras}"
		arg-depth="{{ $depth + 1 }}"
	/>
</xf:macro>

<xf:macro name="category_list_entry_no_add"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0"
>
	<div class="block-row block-row--separated">
		<div class="contentRow contentRow--alignMiddle{{ $depth > 1 ? ' u-depth' . ($depth - 1) : '' }} is-disabled">
			<div class="contentRow-main">
				<h2 class="contentRow-title">
					{$category.title}
				</h2>
				<div class="contentRow-minor contentRow-minor--singleLine">
					{{ phrase('xa_ams_you_may_not_add_articles_to_this_category') }}
				</div>
			</div>
			<div class="contentRow-suffix">
				<dl class="pairs pairs--rows pairs--rows--centered">
					<dt>{{ phrase('xa_ams_articles') }}</dt>
					<dd>{$extras.article_count|number_short}</dd>
				</dl>
			</div>
		</div>
	</div>
	<xf:macro name="category_list"
		arg-children="{$children}"
		arg-extras="{$childExtras}"
		arg-depth="{{ $depth + 1 }}"
	/>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_article_add_page" version_id="2022870" version_string="2.2.28"><![CDATA[<xf:title>{{ phrase('xa_ams_add_page') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />
<xf:breadcrumb href="{{ link('ams/pages', $article) }}">{{ phrase('xa_ams_manage_pages') }}</xf:breadcrumb>

<xf:form action="{{ link('ams/add-page', $article) }}" ajax="true" class="block"
	data-preview-url="{{ link('ams/page-preview', $article) }}">

	<div class="block-container">
		<div class="block-body">
			<xf:macro template="xa_ams_page_edit_macros" name="title" arg-page="{$page}" />

			<xf:macro template="xa_ams_page_edit_macros" name="message"
				arg-page="{$page}"					  
				arg-message="{$page.message_}"
				arg-attachmentData="{$attachmentData}" />

			<hr class="formRowSep" />

			<xf:macro template="xa_ams_page_edit_macros" name="description" arg-page="{$page}" />

			<hr class="formRowSep" />

			<xf:numberboxrow name="display_order" value="1" min="1" pattern="\d*"
				label="{{ phrase('display_order') }}" />

			<xf:numberboxrow name="depth" value="0" min="0" pattern="\d*"
				label="{{ phrase('xa_ams_depth') }}" 
				explain="{{ phrase('xa_ams_page_depth_explain') }}" />

			<hr class="formRowSep" />

			<xf:formrow label="{{ phrase('options') }}" >
				<xf:if is="$category.canUploadAndManagePageAttachments()">
					<xf:checkbox>
						<xf:option name="cover_image_above_page" 
								   label="{{ phrase('xa_ams_display_cover_image_above_article_page') }}"
								   hint="{{ phrase('xa_ams_display_cover_image_above_article_page_explain') }}"
								   checked="{{ false }}">
						</xf:option>
					</xf:checkbox>
				</xf:if>
				<xf:checkbox>
					<xf:option name="display_byline" 
						label="{{ phrase('xa_ams_display_page_byline') }}"
						hint="{{ phrase('xa_ams_display_page_byline_explain') }}">
					</xf:option>
				</xf:checkbox>
			</xf:formrow>

			<hr class="formRowSep" />

			<xf:radiorow name="page_state" value="visible" label="{{ phrase('status') }}">
				<xf:option value="visible">{{ phrase('visible') }}</xf:option>
				<xf:option value="draft">{{ phrase('xa_ams_draft') }}</xf:option>
			</xf:radiorow>
		</div>
		
		<xf:if is="$article.canManageSeoOptions()">		
			<h3 class="block-formSectionHeader">
				<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up:next">
					<span class="block-formSectionHeader-aligner">{{ phrase('xa_ams_search_engine_optimization_options') }}</span>
				</span>
			</h3>
			<div class="block-body block-body--collapsible">
				<xf:macro template="xa_ams_page_edit_macros" name="og_title_meta_title" arg-page="{$page}" />			
				<xf:macro template="xa_ams_page_edit_macros" name="meta_description" arg-page="{$page}" />
			</div>		
		</xf:if>
		
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_add_to_series" version_id="2021970" version_string="2.2.19"><![CDATA[<xf:title>{{ phrase('xa_ams_add_article_to_series') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/add-to-series', $article) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">

			<xf:radiorow name="series_input_type" value="series_list" listclass="_listColumns"
				label="{{ phrase('xa_ams_select_or_set_series') }}">

				<xf:option value="series_list" data-hide="true"
					label="{{ phrase('xa_ams_select_series_you_own_or_manage') }}">

					<xf:dependent>
						<xf:if is="$series is not empty">
							<xf:select name="series_id" value="0" class="input--inline" style="max-width:99%;">
								<xf:option value="0"></xf:option>
								<xf:foreach loop="$series" value="$seriesItem">
									<xf:option value="{$seriesItem.series_id}">{$seriesItem.title}</xf:option>
								</xf:foreach>
							</xf:select>
							<p class="formRow-explain">{{ phrase('xa_ams_select_series_you_own_or_manage_explain') }}</p>
						<xf:else />
							<p class="formRow-explain">{{ phrase('xa_ams_you_do_not_own_any_series_able_to_add_this_article_to') }}</p>
						</xf:if>	
					</xf:dependent>
				</xf:option>

				<xf:option value="community_series_list" data-hide="true"
					label="{{ phrase('xa_ams_select_community_series') }}">

					<xf:dependent>
						<xf:if is="$communitySeries is not empty">
							<xf:select name="series_id" value="0" class="input--inline" style="max-width:99%;">
								<xf:option value="0"></xf:option>
								<xf:foreach loop="$communitySeries" value="$communitySeriesItem">
									<xf:option value="{$communitySeriesItem.series_id}">{$communitySeriesItem.title}</xf:option>
								</xf:foreach>
							</xf:select>
							<p class="formRow-explain">{{ phrase('xa_ams_select_community_series_explain') }}</p>
						<xf:else />
							<p class="formRow-explain">{{ phrase('xa_ams_there_are_no_community_series_available_to_add_this_article_to') }}</p>
						</xf:if>	
					</xf:dependent>
				</xf:option>

				<xf:option value="input_series_url" data-hide="true"
					label="{{ phrase('xa_ams_set_series_by_url') }}">
					<xf:dependent>
						<xf:textbox name="series_url" type="url" label="{{ phrase('xa_ams_series_url') }}" />
						<p class="formRow-explain">{{ phrase('xa_ams_set_series_by_url_explain') }}</p>
					</xf:dependent>
				</xf:option>
			</xf:radiorow>

			<xf:numberboxrow name="display_order" value="1" min="1" pattern="\d*"
				label="{{ phrase('display_order') }}"
				explain="{{ phrase('xa_ams_series_part_display_order_explain') }}" />
		</div>

		<xf:hiddenval name="article_id">{$article.article_id}</xf:hiddenval>

		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_approve" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_approve_article') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/approve', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('please_confirm_that_you_want_to_approve_the_following:') }}
				<strong><a href="{{ link('ams', $article) }}">{$article.title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow icon="save" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_bookmark_custom_icon" version_id="2022470" version_string="2.2.24"><![CDATA[<div class="contentRow-figure contentRow-figure--fixedBookmarkIcon">
	<xf:if is="$content.CoverImage">
		<div class="contentRow-figureContainer">
			<a href="{{ link('ams', $content) }}">
				{{ ams_article_thumbnail($content) }}
			</a>			
		</div>
	<xf:elseif is="$content.SeriesPart.Series && $content.SeriesPart.Series.icon_date" />
		<div class="contentRow-figureContainer">
			{{ ams_series_icon($content.SeriesPart.Series, 's', link('ams', $content)) }}
		</div>
	<xf:elseif is="$content.Category.content_image_url" />
		<div class="contentRow-figureContainer">
			<a href="{{ link('ams', $content) }}">
				{{ ams_category_icon($content) }}
			</a>			
		</div>
	<xf:else />
		<xf:avatar user="$content.User" size="s" defaultname="{$content.username}" />
	</xf:if>
</div>]]></template>
  <template type="public" title="xa_ams_article_change_dates" version_id="2010470" version_string="2.1.4"><![CDATA[<xf:title>{{ phrase('xa_ams_change_article_dates') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/change-dates', $article) }}" ajax="true" class="block">

	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('xa_ams_publish_date') }}">
				<div class="inputGroup">
					<xf:dateinput name="article_publish_date" value="{{ $articlePublishDate ? date($articlePublishDate, 'picker') : '' }}" />
					<span class="inputGroup-text">
						{{ phrase('criteria_time:') }}
					</span>
					<span class="inputGroup" dir="ltr">
						<xf:select name="article_publish_hour" value="{$articlePublishHour}" class="input--inline input--autoSize">
							<xf:foreach loop="$hours" value="$hour">
								<xf:option value="{$hour}" label="{$hour}" />
							</xf:foreach>
						</xf:select>
						<span class="inputGroup-text">:</span>
						<xf:select name="article_publish_minute" value="{$articlePublishMinute}" class="input--inline input--autoSize">
							<xf:foreach loop="$minutes" value="$minute">
								<xf:option value="{$minute}" label="{$minute}" />
							</xf:foreach>
						</xf:select>
					</span>
				</div>
			</xf:formrow>

			<xf:formrow label="{{ phrase('xa_ams_last_update') }}">
				<div class="inputGroup">
					<xf:dateinput name="article_last_update_date" value="{{ $articleLastUpdateDate ? date($articleLastUpdateDate, 'picker') : '' }}" />
					<span class="inputGroup-text">
						{{ phrase('criteria_time:') }}
					</span>
					<span class="inputGroup" dir="ltr">
						<xf:select name="article_last_update_hour" value="{$articleLastUpdateHour}" class="input--inline input--autoSize">
							<xf:foreach loop="$hours" value="$hour">
								<xf:option value="{$hour}" label="{$hour}" />
							</xf:foreach>
						</xf:select>
						<span class="inputGroup-text">:</span>
						<xf:select name="article_last_update_minute" value="{$articleLastUpdateMinute}" class="input--inline input--autoSize">
							<xf:foreach loop="$minutes" value="$minute">
								<xf:option value="{$minute}" label="{$minute}" />
							</xf:foreach>
						</xf:select>
					</span>
				</div>
			</xf:formrow>

			<xf:selectrow name="article_timezone" value="{{ $article.publish_date_timezone ? $article.publish_date_timezone : $xf.visitor.timezone }}">
				<xf:options source="$timeZones" />
			</xf:selectrow>
		</div>

		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_change_scheduled_publish_date" version_id="2020970" version_string="2.2.9"><![CDATA[<xf:title>{{ phrase('xa_ams_change_scheduled_publish_date') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/change-scheduled-publish-date', $article) }}" ajax="true" class="block">

	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('xa_ams_publish_date') }}">
				<div class="inputGroup">
					<xf:dateinput name="article_publish_date" value="{{ $articlePublishDate ? date($articlePublishDate, 'picker') : '' }}" />
					<span class="inputGroup-text">
						{{ phrase('criteria_time:') }}
					</span>
					<span class="inputGroup" dir="ltr">
						<xf:select name="article_publish_hour" value="{$articlePublishHour}" class="input--inline input--autoSize">
							<xf:foreach loop="$hours" value="$hour">
								<xf:option value="{$hour}" label="{$hour}" />
							</xf:foreach>
						</xf:select>
						<span class="inputGroup-text">:</span>
						<xf:select name="article_publish_minute" value="{$articlePublishMinute}" class="input--inline input--autoSize">
							<xf:foreach loop="$minutes" value="$minute">
								<xf:option value="{$minute}" label="{$minute}" />
							</xf:foreach>
						</xf:select>
					</span>
				</div>
			</xf:formrow>

			<xf:selectrow name="article_timezone" value="{{ $article.publish_date_timezone ? $article.publish_date_timezone : $xf.visitor.timezone }}">
				<xf:options source="$timeZones" />
			</xf:selectrow>
		</div>

		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_change_thread" version_id="2022570" version_string="2.2.25"><![CDATA[<xf:if is="$article.discussion_thread_id">
	<xf:title>{{ phrase('xa_ams_change_discussion_thread') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('xa_ams_add_discussion_thread') }}</xf:title>
</xf:if>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/change-thread', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$article.discussion_thread_id">
				<xf:radiorow name="thread_action" value="update" label="{{ phrase('action') }}">
					<xf:option value="update" 
						label="{{ phrase('xa_ams_update_discussion_thread:') }}">
						<xf:textbox name="thread_url"
							value="{{ $article.hasViewableDiscussion() ? link('full:threads', $article.Discussion) : '' }}"
							placeholder="{{ phrase('thread_url') }}" />
							<xf:afterhint>{{ phrase('xa_ams_update_discussion_thread_explain') }}</xf:afterhint>
					</xf:option>
					<xf:option value="disconnect" 
						label="{{ phrase('xa_ams_disconnect_existing_discussion') }}"
						hint="{{ phrase('xa_ams_disconnect_existing_discussion_hint') }}" />
				</xf:radiorow>
			<xf:else />
				<xf:radiorow name="thread_action" value="update" label="{{ phrase('action') }}">
					<xf:option value="update" 
						label="{{ phrase('xa_ams_associate_with_existing_discussion_thread:') }}"
						hint="{{ phrase('xa_ams_associate_with_existing_discussion_thread_hint') }}" >
						<xf:textbox name="thread_url" 
							value=""
							placeholder="{{ phrase('thread_url') }}" />
							<xf:afterhint>{{ phrase('xa_ams_associate_with_existing_discussion_thread_note') }}</xf:afterhint>
					</xf:option>
					<xf:if is="$category->thread_node_id && $category->ThreadForum">
						<xf:option value="create" 
							label="{{ phrase('xa_ams_create_discussion_thread') }}" 
							hint="{{ phrase('xa_ams_create_discussion_thread_hint') }}" />
					</xf:if>
				</xf:radiorow>
			</xf:if>
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_delete" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_delete_article') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/delete', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$article.canDelete('hard')}" />

			<xf:if is="$article.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="delete" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_edit" version_id="2022870" version_string="2.2.28"><![CDATA[<xf:title>{{ $category.content_term ?  phrase('xa_ams_edit_x', {'term': $category.content_term}) : phrase('xa_ams_edit_article') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/edit', $article) }}" ajax="true" class="block"
	data-preview-url="{{ link('ams/preview', $article) }}">

	<div class="block-container">
		<div class="block-body">
			<xf:macro template="xa_ams_article_edit_macros" name="title_article_edit"
				arg-article="{$article}"
				arg-prefixes="{$prefixes}" />

			<xf:macro template="xa_ams_article_edit_macros" name="message"
				arg-article="{$article}"					  
				arg-message="{$article.message_}"
				arg-attachmentData="{$attachmentData}"
				arg-showAttachmentRequired="{{ true }}"	/>

			<hr class="formRowSep" />

			<xf:macro template="xa_ams_article_edit_macros" name="description" arg-article="{$article}" />

			<hr class="formRowSep" />

			<xf:if is="$article.Category.allow_original_source">
				<xf:macro template="xa_ams_article_edit_macros" name="original_source_article_author" arg-article="{$article}" />
				<xf:dateinputrow name="os_article_date" value="{{ $article.original_source.os_article_date ? date($article.original_source.os_article_date, 'Y-m-d') : '' }}"
					label="{{ phrase('xa_ams_original_source_article_date') }}" 
					hint="{{ $article.Category.require_original_source ? phrase('required') : phrase('optional') }}" />
				<xf:macro template="xa_ams_article_edit_macros" name="original_source_article_title" arg-article="{$article}" />
				<xf:macro template="xa_ams_article_edit_macros" name="original_source_name" arg-article="{$article}" />
				<xf:macro template="xa_ams_article_edit_macros" name="original_source_url" arg-article="{$article}" />

				<xf:formrow>
					<div>{{ phrase('xa_ams_original_source_explain') }}</div>
				</xf:formrow>

				<hr class="formRowSep" />
			</xf:if>
			
			<xf:if is="$category.allow_author_rating && $article.canSetAuthorRating()">			
				<xf:selectrow name="author_rating" value="{$article.author_rating}" label="{{ phrase('xa_ams_author_rating') }}" hint="{{ phrase('optional') }}">
					<xf:option value="0" label="{{ phrase('xa_ams_no_rating') }}" />
					<xf:option value="5" label="5.00" />
					<xf:option value="4.75" label="4.75" />
					<xf:option value="4.5" label="4.50" />
					<xf:option value="4.25" label="4.25" />
					<xf:option value="4" label="4.00" />
					<xf:option value="3.75" label="3.75" />
					<xf:option value="3.5" label="3.50" />
					<xf:option value="3.25" label="3.25" />
					<xf:option value="3" label="3.00" />
					<xf:option value="2.75" label="2.75" />
					<xf:option value="2.5" label="2.50" />
					<xf:option value="2.25" label="2.25" />
					<xf:option value="2" label="2.00" />
					<xf:option value="1.75" label="1.75" />
					<xf:option value="1.5" label="1.50" />
					<xf:option value="1.25" label="1.25" />
					<xf:option value="1" label="1.00" />
				</xf:selectrow>

				<hr class="formRowSep" />		
			</xf:if>
			
			<xf:if is="$category.allow_location">
				<xf:macro template="xa_ams_article_edit_macros" name="location" arg-article="{$article}" />

				<hr class="formRowSep" />
			</xf:if>

			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
						arg-type="ams_articles"
						arg-set="{$article.custom_fields}"
						arg-group="header"
						arg-editMode="{{ $article.getFieldEditMode() }}"
						arg-onlyInclude="{$category.field_cache}" />
				</xf:contentcheck>

				<hr class="formRowSep" />
			</xf:if>

			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
						arg-type="ams_articles"
						arg-set="{$article.custom_fields}"
						arg-group="above_article"
						arg-editMode="{{ $article.getFieldEditMode() }}"
						arg-onlyInclude="{$category.field_cache}" />
				</xf:contentcheck>

				<hr class="formRowSep" />
			</xf:if>

			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
						arg-type="ams_articles"
						arg-set="{$article.custom_fields}"
						arg-group="below_article"
						arg-editMode="{{ $article.getFieldEditMode() }}"
						arg-onlyInclude="{$category.field_cache}" />
				</xf:contentcheck>

				<hr class="formRowSep" />
			</xf:if>

			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit_groups"
						arg-type="ams_articles"
						arg-set="{$article.custom_fields}"
						arg-groups="{{ ['new_tab', 'sidebar', 'self_place'] }}"
						arg-editMode="{{ $article.getFieldEditMode() }}"
						arg-onlyInclude="{$category.field_cache}" />
				</xf:contentcheck>

				<hr class="formRowSep" />
			</xf:if>

			<xf:if is="$category.canUploadAndManageArticleAttachments()">
				<xf:formrow>
					<xf:checkbox>
						<xf:option name="cover_image_above_article" data-hide="true"
							label="{{ phrase('xa_ams_display_cover_image_above_article') }}"
							hint="{{ phrase('xa_ams_article_edit_display_cover_image_above_article_explain') }}"
							checked="{{ $article.cover_image_above_article }}">

							<xf:dependent>
								<xf:textarearow name="cover_image_caption" value="{$article.cover_image_caption_}"
									maxlength="{{ max_length($article, 'cover_image_caption') }}"
									label="{{ phrase('xa_ams_cover_image_caption') }}"
									rowtype="fullWidth"
									hint="{{ phrase('optional') }}"
									explain="{{ phrase('xa_ams_cover_image_caption_explain') }}" />
							</xf:dependent>
						</xf:option>
					</xf:checkbox>
				</xf:formrow>
			</xf:if>

			<hr class="formRowSep" />

			<xf:formrow>
				<xf:checkbox>
					<xf:option name="about_author" 
						label="{{ phrase('xa_ams_display_about_author') }}"
						hint="{{ phrase('xa_ams_display_about_author_explain') }}"
						checked="{{ $article.about_author }}">
					</xf:option>
				</xf:checkbox>
				
				<hr class="formRowSep" />
			</xf:formrow>

			<xf:if is="$article.canLockUnlockComments() && $category.allow_comments">
				<xf:formrow>
					<xf:checkbox>
						<xf:option name="comments_open" 
							label="{{ phrase('xa_ams_comments_open') }}"
							hint="{{ phrase('xa_ams_comments_open_explain') }}"
							checked="{{ $article.comments_open }}">
						</xf:option>
					</xf:checkbox>
				</xf:formrow>

				<hr class="formRowSep" />
			<xf:else />
				<xf:hiddenval name="comments_open">{$article.comments_open}</xf:hiddenval>
			</xf:if>
			
			<xf:if is="$article.canLockUnlockRatings() && $category.allow_ratings">
				<xf:formrow>
					<xf:checkbox>
						<xf:option name="ratings_open" 
							label="{{ phrase('xa_ams_ratings_open') }}"
							hint="{{ phrase('xa_ams_ratings_open_explain') }}"
							checked="{{ $article.ratings_open }}">
						</xf:option>
					</xf:checkbox>
				</xf:formrow>

				<hr class="formRowSep" />
			<xf:else />
				<xf:hiddenval name="ratings_open">{$article.ratings_open}</xf:hiddenval>
			</xf:if>			

			<xf:if is="$article.article_state == 'visible'">
				<xf:formrow>
					<xf:checkbox>
						<xf:option name="post_as_update" 
							label="{{ phrase('xa_ams_post_as_update') }}"
							hint="{{ phrase('xa_ams_post_as_update_explain') }}">

							<xf:textarea name="update_message" autosize="true" placeholder="{{ phrase('xa_ams_optional_update_message') }}" />
						</xf:option>
					</xf:checkbox>
				</xf:formrow>

				<hr class="formRowSep" />
			</xf:if>

			<xf:if is="$article.canSendModeratorActionAlert()">
				<hr class="formRowSep" />

				<xf:formrow>
					<xf:macro template="helper_action" name="author_alert" arg-row="{{ false }}" />
				</xf:formrow>
			</xf:if>
		</div>

		<h3 class="block-formSectionHeader">
			<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up:next">
				<span class="block-formSectionHeader-aligner">{{ phrase('xa_ams_multi_page_article_options') }}</span>
			</span>
		</h3>
		<div class="block-body block-body--collapsible">
			<xf:macro template="xa_ams_article_edit_macros" name="overview_page_title" arg-article="{$article}" />
		</div>	

		<xf:if is="$article.canManageSeoOptions()">		
			<h3 class="block-formSectionHeader">
				<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up:next">
					<span class="block-formSectionHeader-aligner">{{ phrase('xa_ams_search_engine_optimization_options') }}</span>
				</span>
			</h3>
			<div class="block-body block-body--collapsible">
				<xf:macro template="xa_ams_article_edit_macros" name="og_title_meta_title" arg-article="{$article}" />			
				<xf:macro template="xa_ams_article_edit_macros" name="meta_description" arg-article="{$article}" />
			</div>	
		</xf:if>
		
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_edit_macros" version_id="2022670" version_string="2.2.26"><![CDATA[<xf:macro name="title_article_add" arg-article="!" arg-prefixes="!">
	<xf:prefixinputrow
		label="{{ phrase('title') }}"
		prefixes="{$prefixes}"
		type="ams_article"
		prefix-value="{{ $article.Category.draft_article.prefix_id ?: ($article.prefix_id ?: $article.Category.default_prefix_id) }}"
		textbox-value="{$article.title_}"
		textbox-class="input--title"
		rowtype="fullWidth noLabel"					   
		maxlength="{{ max_length($article, 'title') }}"
		placeholder="{$article.Category.article_prompt}" 
		help-href="{{ link('ams/categories/prefix-help', $article) }}"					   
	/>
</xf:macro>

<xf:macro name="title_article_edit" arg-article="!" arg-prefixes="!">
	<xf:prefixinputrow
		label="{{ phrase('title') }}"
		prefixes="{$prefixes}"
		type="ams_article"
		prefix-value="{$article.prefix_id}"
		textbox-value="{$article.title_}"
		textbox-class="input--title"
		rowtype="fullWidth noLabel"
		maxlength="{{ max_length($article, 'title') }}"
		placeholder="{$article.Category.article_prompt}" 
		help-href="{{ link('ams/categories/prefix-help', $article) }}"
	/>
</xf:macro>

<xf:macro name="message" arg-article="!" arg-message="" arg-attachmentData="{{ [] }}" arg-showAttachmentRequired="{{ false }}">
	<div data-xf-init="attachment-manager">
		<xf:editorrow name="message" value="{$message}" data-min-height="250"
			attachments="{$attachmentData.attachments}"
			rowtype="fullWidth noLabel"
			label="{{ phrase('xa_ams_article') }}" />

		<xf:if is="$attachmentData">
			<xf:formrow>				
				<xf:macro template="helper_attach_upload" name="upload_block" arg-attachmentData="{$attachmentData}" />
			</xf:formrow>
		</xf:if>
		<xf:if is="$attachmentData && $article.Category.require_article_image && $showAttachmentRequired">		
			<xf:formrow>
				{{ phrase('xa_ams_you_must_upload_at_least_one_image_attachment') }}
			</xf:formrow>
		</xf:if>		
	</div>
</xf:macro>

<xf:macro name="description" arg-article="!">
	<xf:textarearow name="description" value="{$article.description_}"
		maxlength="{{ max_length($article, 'description') }}"
		label="{{ phrase('description') }}"
		hint="{{ phrase('optional') }}"
		explain="{{ phrase('xa_ams_provide_very_brief_description_of_your_article') }}" />
</xf:macro>

<xf:macro name="og_title_meta_title" arg-article="!">
	<xf:textboxrow name="og_title" value="{$article.og_title}"
		maxlength="{{ max_length($article, 'og_title') }}"
		label="{{ phrase('xa_ams_og_title') }}"
		hint="{{ phrase('optional') }}"
		explain="{{ phrase('xa_ams_og_title_explain') }}" />

	<xf:textboxrow name="meta_title" value="{$article.meta_title}"
		maxlength="{{ max_length($article, 'meta_title') }}"
		label="{{ phrase('xa_ams_meta_title') }}"
		hint="{{ phrase('optional') }}"
		explain="{{ phrase('xa_ams_meta_title_explain') }}" />
</xf:macro>

<xf:macro name="meta_description" arg-article="!">
	<xf:textarearow name="meta_description" value="{$article.meta_description_}"
		maxlength="{{ max_length($article, 'meta_description') }}"
		label="{{ phrase('xa_ams_meta_description') }}"
		hint="{{ phrase('optional') }}"
		explain="{{ phrase('xa_ams_provide_brief_summary_of_your_article_for_search_engines') }}" />
</xf:macro>

<xf:macro name="overview_page_title" arg-article="!">
	<xf:textboxrow name="overview_page_title" value="{$article.overview_page_title_}"
		maxlength="{{ max_length($article, 'overview_page_title') }}"
		label="{{ phrase('xa_ams_overview_page_title') }}"
		hint="{{ phrase('optional') }}"
		explain="{{ phrase('xa_ams_overview_page_title_explain') }}" />
</xf:macro>

<xf:macro name="original_source_article_author" arg-article="!">
	<xf:textboxrow name="os_article_author" value="{$article.original_source.os_article_author}"
		maxlength="256"
		label="{{ phrase('xa_ams_original_source_article_author') }}"
		hint="{{ $article.Category.require_original_source ? phrase('required') : phrase('optional') }}" />
</xf:macro>

<xf:macro name="original_source_article_title" arg-article="!">
	<xf:textboxrow name="os_article_title" value="{$article.original_source.os_article_title}"
		maxlength="256"
		label="{{ phrase('xa_ams_original_source_article_title') }}" 
		hint="{{ $article.Category.require_original_source ? phrase('required') : phrase('optional') }}" />
</xf:macro>

<xf:macro name="original_source_name" arg-article="!">
	<xf:textboxrow name="os_source_name" value="{$article.original_source.os_source_name}"
		maxlength="256"
		label="{{ phrase('xa_ams_original_source_name') }}" 
		hint="{{ $article.Category.require_original_source ? phrase('required') : phrase('optional') }}" />
</xf:macro>

<xf:macro name="original_source_url" arg-article="!">
	<xf:textboxrow name="os_source_url" value="{$article.original_source.os_source_url}" 
		type="url"
		maxlength="256"
		id="osUrl"
		label="{{ phrase('xa_ams_original_source_url') }}"
		placeholder="{{ phrase('url...') }}"
		class="amsOsUrl"
		hint="{{ $article.Category.require_original_source ? phrase('required') : phrase('optional') }}"
		explain="{{ phrase('xa_ams_original_source_url_explain') }}" />
</xf:macro>

<xf:macro name="location" arg-article="!">
	<xf:textboxrow name="location" value="{$article.location_}"
		maxlength="{{ max_length($article, 'location') }}"
		label="{{ phrase('location') }}"
		hint="{{ $article.Category.require_location ? phrase('required') : phrase('optional') }}"
		explain="{{ $article.Category.require_location ? phrase('xa_ams_location_required_explain') : phrase('xa_ams_location_explain') }}" />
</xf:macro>]]></template>
  <template type="public" title="xa_ams_article_field" version_id="2021770" version_string="2.2.17"><![CDATA[<xf:title>{{ prefix('ams_article', $article, 'escaped') }}{{ $article.meta_title ? $article.meta_title : $article.title }} - {$fieldDefinition.title}</xf:title>

<xf:wrap template="xa_ams_article_wrapper">
	<xf:set var="$pageSelected" value="field_{$fieldId}" />
</xf:wrap>

<div class="block">
	<xf:if contentcheck="true">
		<div class="block-outer">
			<div class="block-outer-opposite">
			<xf:contentcheck>
				<xf:macro template="xa_ams_article_wrapper_macros" name="action_buttons" arg-article="{$article}" arg-showRateButton="true" />
			</xf:contentcheck>
			</div>
		</div>
	</xf:if>

	<div class="block-container">
		<div class="block-body block-row">
			<xf:macro template="custom_fields_macros" name="custom_field_value"
				arg-definition="{$fieldDefinition}"
				arg-value="{$fieldValue}" />
		</div>
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_article_gallery" version_id="2022570" version_string="2.2.25"><![CDATA[<xf:title>{{ prefix('ams_article', $article, 'escaped') }}{{ $article.meta_title ? $article.meta_title : $article.title }} - {{ phrase('xa_ams_gallery') }}</xf:title>

<xf:wrap template="xa_ams_article_wrapper">
	<xf:set var="$pageSelected" value="gallery" />
</xf:wrap>

<xf:macro template="lightbox_macros" name="setup" arg-canViewAttachments="{{ $article.canViewAttachments() }}" />

<div class="block">
	<xf:if contentcheck="true">
		<div class="block-outer">
			<div class="block-outer-opposite">
			<xf:contentcheck>
				<xf:macro template="xa_ams_article_wrapper_macros" name="action_buttons" arg-article="{$article}" arg-showRateButton="true" />
			</xf:contentcheck>
			</div>
		</div>
	</xf:if>

	<div class="block-container">
		<div class="block-body lbContainer js-articleBody"
			data-xf-init="lightbox"
			data-lb-id="article-{$article.article_id}"
			data-lb-caption-desc="{{ $article.User ? $article.User.username : $article.username }} &middot; {{ date_time($article.publish_date) }}">
			
			<div class="articleBody">
				<article class="articleBody-main js-lbContainer">
					<xf:if contentcheck="true">
						<xf:css src="attachments.less" />
						<ul class="attachmentList articleBody-attachments">
							<xf:contentcheck>
								<xf:foreach loop="$article.Attachments" value="$attachment" if="$attachment.has_thumbnail">
									<xf:macro template="attachment_macros" name="attachment_list_item"
										arg-attachment="{$attachment}"
										arg-canView="{{ $article.canViewAttachments() }}" />
								</xf:foreach>
								
								<xf:foreach loop="$pagesImages" value="$attachment" if="$attachment.has_thumbnail">
									<xf:macro template="attachment_macros" name="attachment_list_item"
										arg-attachment="{$attachment}"
										arg-canView="{{ $article.canViewAttachments() }}" />
								</xf:foreach>	

								<xf:if is="$xf.options.xaAmsGalleryDisplayType =='single_block'">
									<xf:foreach loop="$reviewsImages" value="$attachment" if="$attachment.has_thumbnail">
										<xf:macro template="attachment_macros" name="attachment_list_item"
											arg-attachment="{$attachment}"
											arg-canView="{{ $article.canViewReviewAttachments() }}" />
									</xf:foreach>

									<xf:foreach loop="$commentsImages" value="$attachment" if="$attachment.has_thumbnail">
										<xf:macro template="attachment_macros" name="attachment_list_item"
											arg-attachment="{$attachment}"
											arg-canView="{{ $article.canViewCommentAttachments() }}" />
									</xf:foreach>

									<xf:foreach loop="$postsImages" value="$attachment" if="$attachment.has_thumbnail">
										<xf:macro template="attachment_macros" name="attachment_list_item"
											arg-attachment="{$attachment}"
											arg-canView="{{ $article.Discussion.canViewAttachments() }}" />
									</xf:foreach>
								</xf:if>								
							</xf:contentcheck>
						</ul>
					</xf:if>
				</article>
			</div>
		</div>
	</div>
</div>


<xf:if is="$xf.options.xaAmsGalleryDisplayType =='multiple_blocks'">
	<xf:if contentcheck="true">
		<div class="block block--messages">
			<div class="block-container">
				<h3 class="block-header">{{ phrase('xa_ams_member_submitted_images_via_reviews') }}</h3>
				<div class="block-body lbContainer js-articleBody"
					data-xf-init="lightbox"
					data-lb-id="article-{$article.article_id}"
					data-lb-caption-desc="{{ $article.User ? $article.User.username : $article.username }} &middot; {{ date_time($article.publish_date) }}">

					<div class="articleBody">
						<article class="articleBody-main js-lbContainer">
							<xf:css src="attachments.less" />
							<ul class="attachmentList articleBody-attachments">
								<xf:contentcheck>
									<xf:foreach loop="$reviewsImages" value="$attachment" if="$attachment.has_thumbnail">
										<xf:macro template="attachment_macros" name="attachment_list_item"
											arg-attachment="{$attachment}"
											arg-canView="{{ $article.canViewReviewAttachments() }}" />
									</xf:foreach>
								</xf:contentcheck>
							</ul>
						</article>
					</div>
				</div>
			</div>
		</div>
	</xf:if>

	<xf:if contentcheck="true">
		<div class="block block--messages">
			<div class="block-container">
				<h3 class="block-header">{{ phrase('xa_ams_member_submitted_images_via_comments') }}</h3>
				<div class="block-body lbContainer js-articleBody"
					data-xf-init="lightbox"
					data-lb-id="article-{$article.article_id}"
					data-lb-caption-desc="{{ $article.User ? $article.User.username : $article.username }} &middot; {{ date_time($article.publish_date) }}">

					<div class="articleBody">
						<article class="articleBody-main js-lbContainer">
							<xf:css src="attachments.less" />
							<ul class="attachmentList articleBody-attachments">
								<xf:contentcheck>
									<xf:foreach loop="$commentsImages" value="$attachment" if="$attachment.has_thumbnail">
										<xf:macro template="attachment_macros" name="attachment_list_item"
											arg-attachment="{$attachment}"
											arg-canView="{{ $article.canViewCommentAttachments() }}" />
									</xf:foreach>
								</xf:contentcheck>
							</ul>
						</article>
					</div>
				</div>
			</div>
		</div>
	</xf:if>

	<xf:if contentcheck="true">
		<div class="block block--messages">
			<div class="block-container">
				<h3 class="block-header">{{ phrase('xa_ams_member_submitted_images_via_posts') }}</h3>
				<div class="block-body lbContainer js-articleBody"
					data-xf-init="lightbox"
					data-lb-id="article-{$article.article_id}"
					data-lb-caption-desc="{{ $article.User ? $article.User.username : $article.username }} &middot; {{ date_time($article.publish_date) }}">

					<div class="articleBody">
						<article class="articleBody-main js-lbContainer">
							<xf:css src="attachments.less" />
							<ul class="attachmentList articleBody-attachments">
								<xf:contentcheck>
									<xf:foreach loop="$postsImages" value="$attachment" if="$attachment.has_thumbnail">
										<xf:macro template="attachment_macros" name="attachment_list_item"
											arg-attachment="{$attachment}"
											arg-canView="{{ $article.Discussion.canViewAttachments() }}" />
									</xf:foreach>
								</xf:contentcheck>
							</ul>
						</article>
					</div>
				</div>
			</div>
		</div>
	</xf:if>
</xf:if>]]></template>
  <template type="public" title="xa_ams_article_join_contributors_team" version_id="2022070" version_string="2.2.20"><![CDATA[<xf:title>{{ phrase('xa_ams_join_article_contributors_team') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/join-contributors-team', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('xa_ams_you_sure_you_want_to_join_article_contributors_team') }}
			</xf:inforow>
		</div>

		<xf:submitrow submit="{{ phrase('xa_ams_join_team') }}" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_leave_contributors_team" version_id="2020031" version_string="2.2.0 Beta 1"><![CDATA[<xf:title>{{ phrase('xa_ams_leave_article_contributors_team') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/leave-contributors-team', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('xa_ams_you_sure_you_want_to_leave_article_contributors_team') }}
			</xf:inforow>
		</div>

		<xf:submitrow submit="{{ phrase('leave') }}" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_list_macros" version_id="2022870" version_string="2.2.28"><![CDATA[<xf:macro name="tile_view_layout"
	arg-article="!"
	arg-category="{{ null }}"
	arg-filterPrefix="{{ false }}"
	arg-showWatched="{{ true }}"
	arg-showSticky="{{ false }}"
	arg-allowInlineMod="{{ true }}">

	<xf:css src="structured_list.less" />

	<xf:set var="$extras" value="{{ property('xaAmsTileViewLayoutElements') }}" />

	<li class="tile-container {{ $article.prefix_id ? 'is-prefix' . $article.prefix_id : '' }} {{ $article.isIgnored() ? 'is-ignored' : '' }}{{ ($article.isUnread() AND !$forceRead) ? ' is-unread' : '' }}{{ $article.article_state == 'moderated' ? ' is-moderated' : '' }}{{ $article.article_state == 'deleted' ? ' is-deleted' : '' }}{{ $article.article_state == 'draft' ? ' is-draft' : '' }} js-inlineModContainer js-articleListItem-{$article.article_id}" data-author="{{ $article.User.username ?: $article.username }}">
		<div class="tile-item large-tile-item">
			<xf:if is="$article.CoverImage">
				<a class="tile-image-link" style="background: url({{ link('ams/cover-image', $article) }}) no-repeat center center transparent; background-size: cover;" href="{{ link('ams', $article) }}"></a>
			<xf:elseif is="$article.Category.content_image_url" />
				<a class="tile-image-link" style="background: url({{ base_url({$article.Category.content_image_url}) }}) no-repeat center center transparent; background-size: cover;" href="{{ link('ams', $article) }}"></a>
			<xf:else />
				<a class="tile-image-link" style="background: #185886; background-size: cover;" href="{{ link('ams', $article) }}"></a>
			</xf:if>

			<div class="tile-caption tile-caption-large">
				<h3>
					<span class="tile-item-heading">
						<xf:if is="$article.prefix_id">
							<xf:if is="$category">
								<a href="{{ link('ams/categories', $category, {'prefix_id': $article.prefix_id}) }}" class="labelLink">{{ prefix('ams_article', $article, 'html', '') }}</a>
							<xf:else />
								<xf:if is="$filterPrefix">
									<a href="{{ link('ams', null, {'prefix_id': $article.prefix_id}) }}" class="labelLink" rel="nofollow">{{ prefix('ams_article', $article, 'html', '') }}</a>
								<xf:else />
									{{ prefix('ams_article', $article, 'html', '') }}
								</xf:if>
							</xf:if>
						</xf:if>
						<a href="{{ link('ams', $article) }}" class="" data-tp-primary="on">{$article.title}</a>
					</span>
				</h3>

				<xf:if is="$extras.author_rating || $extras.rating_avg"> 
					<ul class="listInline listInline--bullet tile-item-rating">
						<xf:if is="$extras.author_rating && $article.author_rating && $article.Category.allow_author_rating">
							<li>
								<xf:macro template="rating_macros" name="stars"
									arg-rating="{$article.author_rating}"
									arg-class="ratingStars--smaller ratingStars--amsAuthorRating" />
							</li>
						</xf:if>
						<xf:if is="$extras.rating_avg && $article.rating_avg AND $article.review_count">
							<li>
								<xf:macro template="rating_macros" name="stars"
									arg-rating="{$article.rating_avg}"
									arg-class="ratingStars--smaller" />
							</li>
						</xf:if>
					</ul>
				</xf:if>

				<xf:if contentcheck="true">
					<div class="tile-item-location">
						<xf:contentcheck>{$article.getArticleLocationForList()}</xf:contentcheck>

						<xf:if is="$article.canViewArticleMap()">
							<a href="{{ link('ams/map-overlay', $article) }}" rel="nofollow" class="tile-item-location-icon" data-xf-click="overlay"><xf:fa icon="fa-map-marker-alt" /></a>
						</xf:if>
					</div>	
				</xf:if>

				<xf:if contentcheck="true">
					<ul class="tile-item-extraInfo tile-item-minor">
					<xf:contentcheck>
						<xf:if is="$allowInlineMod AND $article.canUseInlineModeration()">
							<li><xf:checkbox standalone="true"><xf:option value="{$article.article_id}"
								class="js-inlineModToggle"
								data-xf-init="{{ $article.canUseInlineModeration() ? 'tooltip' : '' }}" 
								title="{{ $article.canUseInlineModeration() ? phrase('select_for_moderation') : '' }}" /></xf:checkbox></li>
						</xf:if>
						<xf:if is="$extras.share_this_article">
							<li class="u-flexStretch"><a href="{{ link('ams', $article) }}"
								class="u-muted"
								data-xf-init="share-tooltip"
								data-href="{{ link('ams/share', $article) }}"
								aria-label="{{ phrase('share')|for_attr }}"
								rel="nofollow">
								<xf:fa icon="fa-share-alt"/>
							</a></li>
						</xf:if>
						<xf:if is="$article.Featured">
							<li>
								<i class="structItem-status structItem-status--attention" aria-hidden="true" title="{{ phrase('xa_ams_featured')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('xa_ams_featured') }}</span>
							</li>
						</xf:if>
						<xf:if is="$article.has_poll">
							<li>
								<i class="structItem-status structItem-status--poll" aria-hidden="true" title="{{ phrase('poll')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('poll') }}</span>
							</li>
						</xf:if>
						<xf:if is="$article.article_state == 'moderated'">
							<li>
								<i class="structItem-status structItem-status--moderated" aria-hidden="true" title="{{ phrase('awaiting_approval')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('awaiting_approval') }}</span>
							</li>
						</xf:if>
						<xf:if is="$article.article_state == 'deleted'">
							<li>
								<i class="structItem-status structItem-status--deleted" aria-hidden="true" title="{{ phrase('deleted')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('deleted') }}</span>
							</li>
						</xf:if>
						<xf:if is="$article.article_state == 'draft'">
							<li>
								<i class="structItem-status structItem-status--moderated" aria-hidden="true" title="{{ phrase('draft')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('draft') }}</span>
							</li>
						</xf:if>
						<xf:if is="{$showWatched} AND {$xf.visitor.user_id}">
							<xf:if is="{$article.Watch.{$xf.visitor.user_id}}">
								<li>
									<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('xa_ams_article_watched')|for_attr }}"></i>
									<span class="u-srOnly">{{ phrase('xa_ams_article_watched') }}</span>
								</li>
							<xf:elseif is="!$category AND {$article.Category.Watch.{$xf.visitor.user_id}}" />
								<li>
									<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('xa_ams_category_watched')|for_attr }}"></i>
									<span class="u-srOnly">{{ phrase('xa_ams_category_watched') }}</span>
								</li>
							</xf:if>
						</xf:if>
						<xf:if is="$article.sticky && $showSticky">
							<li>
								<i class="structItem-status structItem-status--sticky" aria-hidden="true" title="{{ phrase('sticky')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('sticky') }}</span>
							</li>
						</xf:if>
					</xf:contentcheck>
					</ul>
				</xf:if>

				<xf:if contentcheck="true">
					<ul class="listInline listInline--bullet">
					<xf:contentcheck>
						<xf:if is="$extras.username">
							<li>
								<xf:if is="$article.User.Profile.xa_ams_author_name">
									<xf:username user="{'user_id':{$article.User.user_id}, 'username':{$article.User.Profile.xa_ams_author_name}}" defaultname="{$article.User.Profile.xa_ams_author_name}" class="tile-username" />
								<xf:else />
									<xf:username user="{$article.User}" defaultname="{{ $article.username ?: phrase('deleted_member') }}" class="tile-username" />
								</xf:if>
							</li>
						</xf:if>
						<xf:if is="$extras.publish_date">
							<li><time class="publish-date"><xf:date time="{$article.publish_date}" /></time></li>

							<xf:if is="$article.last_update AND $article.last_update > $article.publish_date">								
								<li>
									<time class="publish-date"><span>{{ phrase('updated') }}
									<xf:date time="{$article.last_update}" /></span></time>
								</li>
							</xf:if>
						</xf:if>
						<xf:if is="$article.article_read_time && $extras.article_read_time">
							<li>{{ phrase('xa_ams_x_min_read', {'minutes': $article.article_read_time}) }}</li>
						</xf:if>
						<xf:if is="$extras.category_title">
							<li><a class="category-title category-{$articlead.category_id}" href="{{ link('ams/categories', $article.Category) }}">{$article.Category.title}</a></li>
						</xf:if>
					</xf:contentcheck>
					</ul>
				</xf:if>
			</div>
		</div>
	</li>
</xf:macro>

<xf:macro name="grid_view_layout"
	arg-article="!"
	arg-category="{{ null }}"
	arg-filterPrefix="{{ false }}"
	arg-showWatched="{{ true }}"
	arg-showSticky="{{ false }}"
	arg-allowInlineMod="{{ true }}"
	arg-chooseName=""
	arg-extraInfo="">

	<xf:css src="structured_list.less" />

	<xf:set var="$extras" value="{{ property('xaAmsGridViewLayoutElements') }}" />

	<li class="grid-container {{ $article.prefix_id ? 'is-prefix' . $article.prefix_id : '' }} {{ $article.isIgnored() ? 'is-ignored' : '' }}{{ ($article.isUnread() AND !$forceRead) ? ' is-unread' : '' }}{{ $article.article_state == 'moderated' ? ' is-moderated' : '' }}{{ $article.article_state == 'deleted' ? ' is-deleted' : '' }}{{ $article.article_state == 'draft' ? ' is-draft' : '' }} js-inlineModContainer js-articleListItem-{$article.article_id}" data-author="{{ $article.User.username ?: $article.username }}">
		<div class="grid-item large-grid-item">
			<div style="overflow: hidden;">
				<xf:if is="$article.CoverImage">
					<a class="grid-image-link" style="background: url({{ link('ams/cover-image', $article) }}) no-repeat center center transparent; background-size: cover;" href="{{ link('ams', $article) }}"></a>
				<xf:elseif is="$article.Category.content_image_url" />
					<a class="grid-image-link" style="background: url({{ base_url({$article.Category.content_image_url}) }}) no-repeat center center transparent; background-size: cover;" href="{{ link('ams', $article) }}"></a>
				<xf:else />
					<a class="grid-image-link" style="background: #185886; background-size: cover;" href="{{ link('ams', $article) }}"></a>
				</xf:if>
			</div>
			
			<div class="grid-caption grid-caption-large">
				<xf:if contentcheck="true">
					<ul class="structItem-statuses grid-item-minor">
					<xf:contentcheck>
						<xf:if is="$extras.share_this_article">
							<li class="u-flexStretch"><a href="{{ link('ams', $article) }}"
								class="u-muted"
								data-xf-init="share-tooltip"
								data-href="{{ link('ams/share', $article) }}"
								aria-label="{{ phrase('share')|for_attr }}"
								rel="nofollow">
								<xf:fa icon="fa-share-alt"/>
							</a></li>
						</xf:if>
						<xf:if is="$article.Featured">
							<li>
								<i class="structItem-status structItem-status--attention" aria-hidden="true" title="{{ phrase('xa_ams_featured')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('xa_ams_featured') }}</span>
							</li>
						</xf:if>
						<xf:if is="$article.has_poll">
							<li>
								<i class="structItem-status structItem-status--poll" aria-hidden="true" title="{{ phrase('poll')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('poll') }}</span>
							</li>
						</xf:if>
						<xf:if is="$article.article_state == 'moderated'">
							<li>
								<i class="structItem-status structItem-status--moderated" aria-hidden="true" title="{{ phrase('awaiting_approval')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('awaiting_approval') }}</span>
							</li>
						</xf:if>
						<xf:if is="$article.article_state == 'deleted'">
							<li>
								<i class="structItem-status structItem-status--deleted" aria-hidden="true" title="{{ phrase('deleted')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('deleted') }}</span>
							</li>
						</xf:if>
						<xf:if is="$article.article_state == 'draft'">
							<li>
								<i class="structItem-status structItem-status--moderated" aria-hidden="true" title="{{ phrase('deleted')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('draft') }}</span>
							</li>
						</xf:if>
						<xf:if is="{$showWatched} AND {$xf.visitor.user_id}">
							<xf:if is="{$article.Watch.{$xf.visitor.user_id}}">
								<li>
									<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('xa_ams_article_watched')|for_attr }}"></i>
									<span class="u-srOnly">{{ phrase('xa_ams_article_watched') }}</span>
								</li>
							<xf:elseif is="!$category AND {$article.Category.Watch.{$xf.visitor.user_id}}" />
								<li>
									<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('xa_ams_category_watched')|for_attr }}"></i>
									<span class="u-srOnly">{{ phrase('xa_ams_category_watched') }}</span>
								</li>
							</xf:if>
						</xf:if>
						<xf:if is="$article.sticky && $showSticky">
							<li>
								<i class="structItem-status structItem-status--sticky" aria-hidden="true" title="{{ phrase('sticky')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('sticky') }}</span>
							</li>
						</xf:if>
					</xf:contentcheck>
					</ul>
				</xf:if>

				<xf:if is="(!$category OR $category.hasChildren()) && $extras.category">
					<div class="grid-item-category-title-header">
						<a href="{{ link('ams/categories', $article.Category) }}">{$article.Category.title}</a>
					</div>
				</xf:if>

				<h3>
					<span class="grid-item-heading">
						<xf:if is="$article.prefix_id">
							<xf:if is="$category">
								<a href="{{ link('ams/categories', $category, {'prefix_id': $article.prefix_id}) }}" class="labelLink">{{ prefix('ams_article', $article, 'html', '') }}</a>
							<xf:else />
								<xf:if is="$filterPrefix">
									<a href="{{ link('ams', null, {'prefix_id': $article.prefix_id}) }}" class="labelLink" rel="nofollow">{{ prefix('ams_article', $article, 'html', '') }}</a>
								<xf:else />
									{{ prefix('ams_article', $article, 'html', '') }}
								</xf:if>
							</xf:if>
						</xf:if>
						<a href="{{ link('ams', $article) }}" class="" data-tp-primary="on">{$article.title}</a>
					</span>		
				</h3>

				<xf:if contentcheck="true">
					<ul class="grid-item-extraInfo grid-item-minor">
					<xf:contentcheck>
						<xf:if is="{$extraInfo}">
							<li>{$extraInfo}</li>
						</xf:if>
						<xf:if is="$chooseName">
							<li><xf:checkbox standalone="true">
								<xf:option name="{$chooseName}[]" value="{$article.article_id}" class="js-chooseItem" />
							</xf:checkbox></li>
						<xf:elseif is="$allowInlineMod AND $article.canUseInlineModeration()" />
							<li><xf:checkbox standalone="true"><xf:option value="{$article.article_id}"
								class="js-inlineModToggle"
								data-xf-init="tooltip" title="{{ phrase('select_for_moderation')|for_attr }}" /></xf:checkbox></li>
						</xf:if>
					</xf:contentcheck>
					</ul>
				</xf:if>

				<ul class="listInline listInline--bullet">
					<li>
						<xf:if is="$article.User.Profile.xa_ams_author_name">
							<xf:username user="{'user_id':{$article.User.user_id}, 'username':{$article.User.Profile.xa_ams_author_name}}" defaultname="{$article.User.Profile.xa_ams_author_name}" class="u-muted" />
						<xf:else />
							<xf:username user="{$article.User}" defaultname="{{ $article.username ?: phrase('deleted_member') }}" class="u-muted" />
						</xf:if>
					</li>
					<li><a href="{{ link('ams', $article) }}" class="u-muted"><xf:date time="$article.publish_date" /></a></li>
					<xf:if is="$article.last_update AND $article.last_update > $article.publish_date">								
						<li>
							<span class="u-muted">{{ phrase('updated') }}
							<xf:date time="{$article.last_update}" /></span>
						</li>
					</xf:if>
					<xf:if is="$article.article_read_time && $extras.article_read_time">
						<li>
							<span class="u-muted">{{ phrase('xa_ams_x_min_read', {'minutes': $article.article_read_time}) }}</span>
						</li>
					</xf:if>
					<xf:if is="$article.author_rating && $article.Category.allow_author_rating && $extras.author_rating">
						<li>
							<xf:macro template="rating_macros" name="stars"
								arg-rating="{$article.author_rating}"
								arg-class="ratingStars--amsAuthorRating" />
						</li>
					</xf:if>
					<xf:if is="$article.rating_avg AND $article.rating_count && $extras.rating_avg">
						<li>
							<xf:macro template="rating_macros" name="stars"
								arg-rating="{$article.rating_avg}"
								arg-class="" />
						</li>
					</xf:if>
					<xf:if is="$article.view_count && $extras.view_count">
						<li>
							<span class="u-muted">{{ phrase('views') }}: 
							{$article.view_count|number_short}</span>
						</li>
					</xf:if>
					<xf:if is="$article.reaction_score && $extras.reaction_score">
						<li>
							<span class="u-muted">{{ phrase('reaction_score') }}: 
							{$article.reaction_score|number_short}</span>
						</li>
					</xf:if>
					<xf:if is="$article.comment_count && $extras.comment_count">
						<li>
							<a href="{{ link('ams', $article) }}#comments" class="u-muted"><span>{{ phrase('xa_ams_comments') }}:</span> {$article.comment_count|number_short}</a>
						</li>
					</xf:if>
					<xf:if is="$article.review_count && $extras.review_count">
						<li>
							<a href="{{ link('ams/reviews', $article) }}" class="u-muted"><span>{{ phrase('xa_ams_reviews') }}:</span> {$article.review_count|number_short}</a>
						</li>
					</xf:if>
				</ul>

				<xf:if contentcheck="true">
					<div class="grid-item-location">
						<xf:contentcheck>{$article.getArticleLocationForList()}</xf:contentcheck>

						<xf:if is="$article.canViewArticleMap()">
							<a href="{{ link('ams/map-overlay', $article) }}" rel="nofollow" class="grid-item-location-icon" data-xf-click="overlay"><xf:fa icon="fa-map-marker-alt" /></a>
						</xf:if>
					</div>	
				</xf:if>

				<xf:if is="$extras.preview_snippet">
					<div class="grid-description">
						{{ snippet($article.message, $xf.options.xaAmsSnippetLengthGV, {'stripQuote': true}) }}
					</div>
				</xf:if>

				<xf:if is="$extras.custom_fields">
					<xf:set var="$amsCustomFieldGroupNames" value="{{ ['header','above_article','below_article','new_tab','sidebar','self_place'] }}" />
					<xf:if contentcheck="true">
						<div class="grid-item-articleCustomFieldsOnList">
							<div class="amsGridView-amsDescription">
								<xf:contentcheck>
									<xf:foreach loop="$amsCustomFieldGroupNames" value="$amsCustomFieldGroupName">
										<xf:macro template="custom_fields_macros" name="custom_fields_view"
											arg-type="ams_articles"
											arg-group="{$amsCustomFieldGroupName}"
											arg-set="{$article.custom_fields}"
											arg-onlyInclude="{$article.Category.field_cache}"
											arg-additionalFilters="{{ ['display_on_list'] }}"
											arg-wrapperClass="gridViewLayout-fields gridViewLayout-fields--before" 
											arg-valueClass="pairs pairs--columns pairs--fixedSmall" />
									</xf:foreach>
								</xf:contentcheck>
							</div>
						</div>
					</xf:if>
				</xf:if>
			</div>
		</div>
	</li>
</xf:macro>

<xf:macro name="list_view_layout"
	arg-article="!"
	arg-category="{{ null }}"
	arg-filterPrefix="{{ false }}"
	arg-showWatched="{{ true }}"
	arg-showSticky="{{ false }}"
	arg-allowInlineMod="{{ true }}"
	arg-chooseName=""
	arg-extraInfo="">

	<xf:css src="structured_list.less" />
	<xf:css src="xa_ams.less" />

	<xf:set var="$extras" value="{{ property('xaAmsListViewLayoutElements') }}" />

	<div class="structItem structItem--article {{ $article.prefix_id ? 'is-prefix' . $article.prefix_id : '' }} {{ $article.isIgnored() ? 'is-ignored' : '' }}{{ ($article.isUnread() AND !$forceRead) ? ' is-unread' : '' }}{{ $article.article_state == 'moderated' ? ' is-moderated' : '' }}{{ $article.article_state == 'deleted' ? ' is-deleted' : '' }}{{ $article.article_state == 'draft' ? ' is-draft' : '' }} js-inlineModContainer js-articleListItem-{$article.article_id}" data-author="{{ $article.User.username ?: $article.username }}">
		<xf:if is="$extras.cover_image">
			<div class="structItem-cell structItem-cell--icon structItem-cell--iconExpanded structItem-cell--iconAmsCoverImage">
				<div class="structItem-iconContainer">
					<xf:if is="$article.CoverImage && $article.CoverImage.thumbnail_url">
						<a href="{{ link('ams', $article) }}">
							{{ ams_article_thumbnail($article) }}
						</a>
					<xf:elseif is="$article.SeriesPart.Series && $article.SeriesPart.Series.icon_date" />
						{{ ams_series_icon($article.SeriesPart.Series, 's', link('ams', $article)) }}
					<xf:elseif is="$article.Category.content_image_url" />
						<a href="{{ link('ams', $article) }}">
							{{ ams_category_icon($article) }}
						</a>
					<xf:else />
						<xf:avatar user="$article.User" size="m" defaultname="{{ $article.username ?: phrase('deleted_member') }}" />
					</xf:if>
				</div>
			</div>
		</xf:if>
		
		<div class="structItem-cell structItem-cell--main structItem-cell--listViewLayout" data-xf-init="touch-proxy">
			<xf:if contentcheck="true">
				<ul class="structItem-statuses">
				<xf:contentcheck>
					<xf:if is="$extras.share_this_article">
						<li class="u-flexStretch"><a href="{{ link('ams', $article) }}"
							class="u-muted structItem-status"
							data-xf-init="share-tooltip"
							data-href="{{ link('ams/share', $article) }}"
							aria-label="{{ phrase('share')|for_attr }}"
							rel="nofollow">
							<xf:fa icon="fa-share-alt"/>
						</a></li>
					</xf:if>
					<xf:if is="$article.Featured">
						<li>
							<i class="structItem-status structItem-status--attention" aria-hidden="true" title="{{ phrase('xa_ams_featured')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('xa_ams_featured') }}</span>
						</li>
					</xf:if>
					<xf:if is="$article.has_poll">
						<li>
							<i class="structItem-status structItem-status--poll" aria-hidden="true" title="{{ phrase('poll')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('poll') }}</span>
						</li>
					</xf:if>
					<xf:if is="$article.article_state == 'draft'">
						<li>
							<i class="structItem-status structItem-status--moderated" aria-hidden="true" title="{{ phrase('draft')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('draft') }}</span>
						</li>
					</xf:if>
					<xf:if is="$article.article_state == 'moderated'">
						<li>
							<i class="structItem-status structItem-status--moderated" aria-hidden="true" title="{{ phrase('awaiting_approval')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('awaiting_approval') }}</span>
						</li>
					</xf:if>
					<xf:if is="$article.article_state == 'deleted'">
						<li>
							<i class="structItem-status structItem-status--deleted" aria-hidden="true" title="{{ phrase('deleted')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('deleted') }}</span>
						</li>
					</xf:if>
					<xf:if is="{$showWatched} AND {$xf.visitor.user_id}">
						<xf:if is="{$article.Watch.{$xf.visitor.user_id}}">
							<li>
								<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('xa_ams_article_watched')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('xa_ams_article_watched') }}</span>
							</li>
						<xf:elseif is="!$category AND {$article.Category.Watch.{$xf.visitor.user_id}}" />
							<li>
								<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('xa_ams_category_watched')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('xa_ams_category_watched') }}</span>
							</li>
						</xf:if>
					</xf:if>
					<xf:if is="$article.sticky && $showSticky">
						<li>
							<i class="structItem-status structItem-status--sticky" aria-hidden="true" title="{{ phrase('sticky')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('sticky') }}</span>
						</li>
					</xf:if>
				</xf:contentcheck>
				</ul>
			</xf:if>

			<xf:if is="(!$category OR $category.hasChildren()) && $extras.category">
				<div class="structItem-articleCategoryTitleHeader">
					<a href="{{ link('ams/categories', $article.Category) }}">{$article.Category.title}</a>
				</div>
			</xf:if>

			<div class="structItem-title">
				<xf:if is="$article.prefix_id">
					<xf:if is="$category">
						<a href="{{ link('ams/categories', $category, {'prefix_id': $article.prefix_id}) }}" class="labelLink">{{ prefix('ams_article', $article, 'html', '') }}</a>
					<xf:else />
						<xf:if is="$filterPrefix">
							<a href="{{ link('ams', null, {'prefix_id': $article.prefix_id}) }}" class="labelLink" rel="nofollow">{{ prefix('ams_article', $article, 'html', '') }}</a>
						<xf:else />
							{{ prefix('ams_article', $article, 'html', '') }}
						</xf:if>
					</xf:if>
				</xf:if>
				<a href="{{ link('ams', $article) }}" class="" data-tp-primary="on">{$article.title}</a>
			</div>

			<div class="structItem-minor">
				<xf:if contentcheck="true">
					<ul class="structItem-extraInfo">
					<xf:contentcheck>
						<xf:if is="{$extraInfo}">
							<li>{$extraInfo}</li>
						</xf:if>
						<xf:if is="$chooseName">
							<li><xf:checkbox standalone="true">
								<xf:option name="{$chooseName}[]" value="{$article.article_id}" class="js-chooseItem" />
							</xf:checkbox></li>
						<xf:elseif is="$allowInlineMod AND $article.canUseInlineModeration()" />
							<li><xf:checkbox standalone="true"><xf:option value="{$article.article_id}"
								class="js-inlineModToggle"
								data-xf-init="tooltip" title="{{ phrase('select_for_moderation')|for_attr }}" /></xf:checkbox></li>
						</xf:if>
					</xf:contentcheck>
					</ul>
				</xf:if>

				<xf:if is="$article.article_state == 'deleted'">
					<xf:if is="{$extraInfo}"><span class="structItem-extraInfo">{$extraInfo}</span></xf:if>

					<xf:macro template="deletion_macros" name="notice" arg-log="{$article.DeletionLog}" />
				<xf:else />
					<div class="structItem-listViewMeta">
						<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--author">
							<dt></dt>
							<xf:if is="$article.User.Profile.xa_ams_author_name">
								<dd><xf:username user="{'user_id':{$article.User.user_id}, 'username':{$article.User.Profile.xa_ams_author_name}}" defaultname="{$article.User.Profile.xa_ams_author_name}" /></dd>
							<xf:else />
								<dd><xf:username user="$article.User" defaultname="{{ $article.username ?: phrase('deleted_member') }}" /></dd>
							</xf:if>
						</dl>
						<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--publishdate">
							<dt></dt>
							<dd><a href="{{ link('ams', $article) }}" rel="nofollow" class="u-concealed"><xf:date time="{$article.publish_date}" /></a></dd>
						</dl>
						<xf:if is="$article.last_update AND $article.last_update > $article.publish_date">
							<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--lastUpdate">
								<dt>{{ phrase('updated') }}</dt>
								<dd><xf:date time="{$article.last_update}" /></dd>
							</dl>
						</xf:if>
						<xf:if is="$article.article_read_time && $extras.article_read_time">
							<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--articleReadTime">
								<dt></dt>
								<dd>{{ phrase('xa_ams_x_min_read', {'minutes': $article.article_read_time}) }}</dd>
							</dl>
						</xf:if>
						<xf:if is="$article.author_rating && $article.Category.allow_author_rating && $extras.author_rating">
							<div class="structItem-metaItem structItem-metaItem--rating">
								<xf:macro template="rating_macros" name="stars_text"
									arg-rating="{$article.author_rating}"
									arg-text="{{ phrase('xa_ams_author_rating') }}"
									arg-rowClass="ratingStarsRow--justified"
									arg-starsClass="ratingStars--smaller ratingStars--amsAuthorRating" />
							</div>
						</xf:if>
						<xf:if is="$article.rating_avg AND $article.rating_count && $extras.rating_avg">
							<div class="structItem-metaItem structItem-metaItem--rating">
								<xf:macro template="rating_macros" name="stars_text"
									arg-rating="{$article.rating_avg}"
									arg-count="{$article.rating_count}"
									arg-rowClass="ratingStarsRow--justified"
									arg-starsClass="ratingStars--smaller" />
							</div>
						</xf:if>
						<xf:if is="$article.view_count && $extras.view_count">
							<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--views">
								<dt>{{ phrase('views') }}</dt>
								<dd>{$article.view_count|number}</dd>
							</dl>
						</xf:if>
						<xf:if is="$article.reaction_score && $extras.reaction_score">
							<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--reaction_score">
								<dt>{{ phrase('reaction_score') }}</dt>
								<dd>{$article.reaction_score|number}</dd>
							</dl>
						</xf:if>
						<xf:if is="$article.comment_count && $extras.comment_count">
							<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--comments">
								<dt><a href="{{ link('ams', $article) }}#comments" class="u-concealed">{{ phrase('comments') }}</a></dt>
								<dd><a href="{{ link('ams', $article) }}#comments" class="u-concealed">{$article.comment_count|number}</a></dd>
							</dl>
						</xf:if>
						<xf:if is="$article.review_count && $extras.review_count">
							<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--reviews">
								<dt><a href="{{ link('ams/reviews', $article) }}" class="u-concealed">{{ phrase('xa_ams_reviews') }}</a></dt>
								<dd><a href="{{ link('ams/reviews', $article) }}" class="u-concealed">{$article.review_count|number}</a></dd>
							</dl>
						</xf:if>
					</div>
				</xf:if>
			</div>

			<xf:if contentcheck="true">
				<div class="structItem-articleLocation">
					<xf:contentcheck>{$article.getArticleLocationForList()}</xf:contentcheck>

					<xf:if is="$article.canViewArticleMap()">
						<a href="{{ link('ams/map-overlay', $article) }}" rel="nofollow" class="structItem-articleLocationIcon" data-xf-click="overlay"><xf:fa icon="fa-map-marker-alt" /></a>
					</xf:if>
				</div>	
			</xf:if>

			<xf:if is="$article.article_state != 'deleted'">
				<xf:if is="$extras.preview_snippet">
					<div class="structItem-articleDescription">
						{{ snippet($article.message, $xf.options.xaAmsSnippetLengthLV, {'stripQuote': true}) }}
					</div>
				</xf:if>
			</xf:if>

			<xf:if is="$extras.custom_fields">
				<xf:set var="$amsCustomFieldGroupNames" value="{{ ['header','above_article','below_article','new_tab','sidebar','self_place'] }}" />
				<xf:if contentcheck="true">
					<div class="structItem-articleCustomFields">
						<xf:contentcheck>
							<xf:foreach loop="$amsCustomFieldGroupNames" value="$amsCustomFieldGroupName">
								<xf:macro template="custom_fields_macros" name="custom_fields_view"
									arg-type="ams_articles"
									arg-group="{$amsCustomFieldGroupName}"
									arg-set="{$article.custom_fields}"
									arg-onlyInclude="{$article.Category.field_cache}"
									arg-additionalFilters="{{ ['display_on_list'] }}"
									arg-wrapperClass="listViewLayout-fields listViewLayout-fields--before" 
									arg-valueClass="pairs pairs--columns pairs--fixedSmall" />
							</xf:foreach>
						</xf:contentcheck>
					</div>
				</xf:if>
			</xf:if>
		</div>
	</div>
</xf:macro>

<xf:macro name="article_view_layout"
	arg-article="!"
	arg-category="{{ null }}"
	arg-filterPrefix="{{ false }}"
	arg-showWatched="{{ true }}"
	arg-showSticky="{{ false }}"
	arg-allowInlineMod="{{ true }}"
	arg-chooseName=""
	arg-extraInfo="">

	<xf:css src="message.less" />
	<xf:css src="xa_ams.less" />

	<xf:set var="$extras" value="{{ property('xaAmsArticleViewLayoutElements') }}" />

	<div class="message message--simple message--articleView {{ ($article.sticky && $showSticky) ? 'sticky' : '' }} {{ $article.prefix_id ? 'is-prefix' . $article.prefix_id : '' }} {{ $article.isIgnored() ? 'is-ignored' : '' }}{{ ($article.isUnread() AND !$forceRead) ? ' is-unread' : '' }}{{ $article.article_state == 'moderated' ? ' is-moderated' : '' }}{{ $article.article_state == 'deleted' ? ' is-deleted' : '' }} js-inlineModContainer js-amsArticle" id="js-amsArticle-{$article.article_id}">
		<span class="u-anchorTarget" id="ams-article-{$article.article_id}"></span>
		<div class="message-inner">
			<div class="message-cell message-cell--main">
				<div class="message-attribution-source message-attribution-amsCategoryTitle">
					<xf:if is="(!$category OR $category.hasChildren()) && $extras.category">
						<a href="{{ link('ams/categories', $article.Category) }}">{$article.Category.title}</a>
					</xf:if>

					<ul class="message-attribution-opposite message-attribution-opposite--list ams-muted">
						<xf:if is="$chooseName">
							<li><xf:checkbox standalone="true">
								<xf:option name="{$chooseName}[]" value="{$article.article_id}" class="js-chooseItem" />
							</xf:checkbox></li>
						<xf:elseif is="$allowInlineMod AND $article.canUseInlineModeration()" />
							<li><xf:checkbox standalone="true"><xf:option value="{$article.article_id}"
								class="js-inlineModToggle"
								data-xf-init="tooltip" title="{{ phrase('select_for_moderation')|for_attr }}" /></xf:checkbox></li>
						</xf:if>

						<xf:if is="$extras.share_this_article">
							<li class="u-flexStretch"><a href="{{ link('ams', $article) }}"
								class="u-muted"
								data-xf-init="share-tooltip"
								data-href="{{ link('ams/share', $article) }}"
								aria-label="{{ phrase('share')|for_attr }}"
								rel="nofollow">
								<xf:fa icon="fa-share-alt"/>
							</a></li>
						</xf:if>

						<xf:if is="$article.Featured">
							<li><xf:fa icon="fa-bullhorn" title="{{ phrase('xa_ams_featured')|for_attr }}" /></li> 
						</xf:if>
						<xf:if is="$article.has_poll">
							<li><xf:fa icon="fa-chart-bar" title="{{ phrase('poll')|for_attr }}" /></li> 
						</xf:if>
						<xf:if is="$article.article_state == 'moderated'">
							<li><xf:fa icon="fa-shield" title="{{ phrase('awaiting_approval')|for_attr }}" /></li>
						</xf:if>
						<xf:if is="$article.article_state == 'deleted'">
							<li><xf:fa icon="fa-trash-alt" title="{{ phrase('deleted')|for_attr }}" /></li> 
						</xf:if>
						<xf:if is="{$showWatched} AND {$xf.visitor.user_id}">
							<xf:if is="{$article.Watch.{$xf.visitor.user_id}}">
								<li><xf:fa icon="fa-eye" title="{{ phrase('xa_ams_article_watched')|for_attr }}" /></li>
							<xf:elseif is="!$category AND {$article.Category.Watch.{$xf.visitor.user_id}}" />
								<li><xf:fa icon="fa-eye" title="{{ phrase('xa_ams_category_watched')|for_attr }}" /></li>
							</xf:if>
						</xf:if>
						<xf:if is="$article.sticky && $showSticky">
							<li><xf:fa icon="fa-thumbtack" title="{{ phrase('sticky')|for_attr }}" /></li>
						</xf:if>
					</ul>
				</div>

				<div class="message-attribution message-attribution-amsArticleTitle">
					<h2 class="message-attribution-main contentRow-title">
						<xf:if is="$article.prefix_id">
							<xf:if is="$category">
								<a href="{{ link('ams/categories', $category, {'prefix_id': $article.prefix_id}) }}" class="labelLink">{{ prefix('ams_article', $article, 'html', '') }}</a>
							<xf:else />
								<xf:if is="$filterPrefix">
									<a href="{{ link('ams', null, {'prefix_id': $article.prefix_id}) }}" class="labelLink" rel="nofollow">{{ prefix('ams_article', $article, 'html', '') }}</a>
								<xf:else />
									{{ prefix('ams_article', $article, 'html', '') }}
								</xf:if>
							</xf:if>
						</xf:if>
						<a href="{{ link('ams', $article) }}" class="" >{$article.title}</a>
					</h2>
				</div>

				<xf:if is="$article.article_state != 'deleted'">
					<xf:if contentcheck="true">
						<div class="message-attribution message-attribution-amsArticleLocation">
							<xf:contentcheck>{$article.getArticleLocationForList()}</xf:contentcheck>

							<xf:if is="$article.canViewArticleMap()">
								<a href="{{ link('ams/map-overlay', $article) }}" rel="nofollow" class="message-attribution-amsArticleLocationIcon" data-xf-click="overlay"><xf:fa icon="fa-map-marker-alt" /></a>
							</xf:if>
						</div>	
					</xf:if>
				</xf:if>

				<xf:if is="$article.article_state != 'deleted'">
					<div class="message-attribution message-attribution-amsArticleMeta">
						<ul class="listInline listInline--bullet">
							<li>
								<xf:if is="$article.User.Profile.xa_ams_author_name">
									<xf:username user="{'user_id':{$article.User.user_id}, 'username':{$article.User.Profile.xa_ams_author_name}}" defaultname="{$article.User.Profile.xa_ams_author_name}" class="u-muted" />
								<xf:else />
									<xf:username user="{$article.User}" defaultname="{{ $article.username ?: phrase('deleted_member') }}" class="u-muted" />
								</xf:if>
							</li>
							<li><a href="{{ link('ams', $article) }}" class="u-muted"><xf:date time="$article.publish_date" /></a></li>
							<xf:if is="$article.last_update > $article.publish_date">								
								<li>
									<span class="u-muted">{{ phrase('updated') }}</span>
									<xf:date time="{$article.last_update}" />
								</li>
							</xf:if>
							<xf:if is="$article.article_read_time && $extras.article_read_time">
								<li>
									<span class="u-muted">{{ phrase('xa_ams_x_min_read', {'minutes': $article.article_read_time}) }}</span>
								</li>
							</xf:if>
							<xf:if is="$article.author_rating && $article.Category.allow_author_rating && $extras.author_rating">
								<li>
									<xf:macro template="rating_macros" name="stars"
										arg-rating="{$article.author_rating}"
										arg-class="ratingStars--amsAuthorRating" />
								</li>
							</xf:if>
							<xf:if is="$article.rating_count && $article.Category.allow_ratings && $extras.rating_avg">
								<li>
									<xf:macro template="rating_macros" name="stars"
										arg-rating="{$article.rating_avg}"
										arg-class="" />
								</li>
							</xf:if>
							<xf:if is="$article.view_count && $extras.view_count">
								<li>
									<span class="u-muted">{{ phrase('views') }}: </span>
									{$article.view_count|number_short}
								</li>
							</xf:if>
							<xf:if is="$article.reaction_score && $extras.reaction_score">
								<li>
									<span class="u-muted">{{ phrase('reaction_score') }}: </span>
									{$article.reaction_score|number_short}
								</li>
							</xf:if>
							<xf:if is="$article.Category.allow_comments && $article.comment_count && $extras.comment_count">
								<li>
									<a href="{{ link('ams', $article) }}#comments" class="u-muted"><span>{{ phrase('comments') }}:</span> {$article.comment_count|number_short}</a>
								</li>
							</xf:if>
							<xf:if is="$article.Category.allow_ratings && $article.review_count && $extras.review_count">
								<li>
									<a href="{{ link('ams/reviews', $article) }}" class="u-muted"><span>{{ phrase('xa_ams_reviews') }}:</span> {$article.review_count|number_short}</a>
								</li>
							</xf:if>
						</ul>
					</div>
				</xf:if>

				<xf:if is="$article.article_state == 'deleted'">
					<div class="message-content js-messageContent">
						<div class="messageNotice messageNotice--deleted">
							<xf:macro template="deletion_macros" name="notice" arg-log="{$article.DeletionLog}" />
						</div>
					</div>
				<xf:elseif is="$article.article_state == 'moderated'" />
					<div class="message-content js-messageContent">
						<div class="messageNotice messageNotice--moderated">
							{{ phrase('this_message_is_awaiting_moderator_approval_and_is_invisible_to_normal') }}
						</div>
					</div>
				</xf:if>

				<xf:if is="$article.CoverImage && $extras.cover_image">
					<div class="amsCoverImage {{ $article.cover_image_caption ? 'has-caption' : '' }}">
						<div class="amsCoverImage-container">
							<div class="amsCoverImage-container-image js-coverImageContainerImage">
								<a href="{{ link('ams', $article) }}" class="" ><img src="{{ link('ams/cover-image', $article) }}" alt="{$article.CoverImage.filename}" class="js-articleCoverImage" /></a>
							</div>
						</div>
					</div>

					<xf:if is="$article.cover_image_caption">
						<div class="amsCoverImage-caption">
							{{ snippet($article.cover_image_caption, 500, {'stripBbCode': true}) }}
						</div>
					</xf:if>
				</xf:if>

				<xf:if is="$article.article_state != 'deleted' AND ($extras.preview_snippet || $extras.custom_fields)">
					<div class="message-content js-messageContent">
						<div class="message-userContent lbContainer js-lbContainer"
							data-lb-id="amsArticle-{$article.article_id}"
							data-lb-caption-desc="{{ $article.User ? $article.User.username : $article.username }} &middot; {{ date_time($article.publish_date) }}">

							<xf:if is="$extras.preview_snippet">
								<blockquote class="message-body">
									{{ snippet($article.message, $xf.options.xaAmsSnippetLengthAV, {'stripQuote': true}) }}
								</blockquote>
							</xf:if>

							<xf:if is="$extras.custom_fields">
								<xf:set var="$amsCustomFieldGroupNames" value="{{ ['header','above_article','below_article','new_tab','sidebar','self_place'] }}" />
								<xf:if contentcheck="true">
									<blockquote class="message-body">
										<xf:contentcheck>
											<xf:foreach loop="$amsCustomFieldGroupNames" value="$amsCustomFieldGroupName">
												<xf:macro template="custom_fields_macros" name="custom_fields_view"
													arg-type="ams_articles"
													arg-group="{$amsCustomFieldGroupName}"
													arg-set="{$article.custom_fields}"
													arg-onlyInclude="{$article.Category.field_cache}"
													arg-additionalFilters="{{ ['display_on_list'] }}"
													arg-wrapperClass="articleViewLayout-fields articleViewLayout-fields--before articleBody-fields" 
													arg-valueClass="pairs pairs--columns pairs--fixedSmall" />
											</xf:foreach>
										</xf:contentcheck>
									</blockquote>
								</xf:if>
							</xf:if>
						</div>
					</div>
				</xf:if>

				<xf:if is="$extras.view_article_button || ($xf.options.enableTagging AND $article.tags && $extras.tags)">
					<footer class="message-footer">
						<div class="message-actionBar actionBar">
							<div class="actionBar-set actionBar-set--external">
								<xf:if is="$extras.view_article_button">
									<xf:button href="{{ link('ams', $article) }}" class="button--link">
										{{ phrase('xa_ams_view_article...') }}
									</xf:button>
								</xf:if>
							</div>

							<xf:if contentcheck="true">
								<div class="actionBar-set actionBar-set--internal">  
									<div class="block">
										<div class="blockMessage blockMessage--none blockMessage--close">
											<xf:contentcheck>
												<xf:if is="$xf.options.enableTagging AND $article.tags && $extras.tags">
													<div class="contentRow contentRow--hideFigureNarrow">
														<div class="contentRow-main">
															<div class="p-description">
																<ul class="listInline listInline--bullet">
																	<li>
																		<xf:fa icon="fa-tags" title="{{ phrase('tags')|for_attr }}" />
																		<span class="u-srOnly">{{ phrase('tags') }}</span>
																		<xf:foreach loop="$article.tags" value="$tag">
																			<a href="{{ link('tags', $tag) }}" class="tagItem" dir="auto">{$tag.tag}</a>
																		</xf:foreach>
																	</li>
																</ul>
															</div>
														</div>
													</div>
												</xf:if>
											</xf:contentcheck>
										</div>
									</div>	
								</div>
							</xf:if>
						</div>
					</footer>
				</xf:if>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="article_simple" 
	arg-article="!" 
	arg-withMeta="{{ true }}">
	
	<div class="contentRow">
		<div class="contentRow-figure">
			<xf:avatar user="$article.User" size="xxs" />
		</div>
		
		<div class="contentRow-main contentRow-main--close">
			<a href="{{ link('ams', $article) }}">{{ prefix('ams_article', $article) }}{$article.title}</a>

			<xf:if contentcheck="true">
				<div class="contentRow-snippet contentRow-minor contentRow-minor--smaller">
					<xf:contentcheck>{$article.getArticleLocationForList()}</xf:contentcheck>

					<xf:if is="$article.canViewArticleMap()">
						<a href="{{ link('ams/map-overlay', $article) }}" rel="nofollow" style="padding-left:3px;" data-xf-click="overlay"><xf:fa icon="fa-map-marker-alt" /></a>
					</xf:if>
				</div>	
			</xf:if>
			
			<div class="contentRow-snippet">
				{{ smilie(snippet($article.message, 100, {'stripBbCode': true, 'stripQuote': true})) }}
			</div>				

			<xf:if is="$withMeta">
				<div class="contentRow-minor contentRow-minor--smaller">
					<ul class="listInline listInline--bullet">
						<xf:if is="$article.User.Profile.xa_ams_author_name">
							<li>{$article.User.Profile.xa_ams_author_name}</li>
						<xf:else />
							<li>{{ $article.User.username ?: $article.username }}</li>
						</xf:if>
						<li>{{ phrase('updated:') }} <xf:date time="{$article.last_update}" /></li>
						<xf:if is="$article.article_read_time">
							<li>{{ phrase('xa_ams_x_min_read', {'minutes': $article.article_read_time}) }}</li>
						</xf:if>
					</ul>
				</div>
			</xf:if>
		</div>
	</div>
</xf:macro>

<xf:macro name="article_list_item_struct_item" 
	arg-item="!" 
	arg-chooseName="" 
	arg-extraInfo="">
	
	<xf:css src="structured_list.less" />

	<xf:if is="$item.LastComment AND $item.LastComment.isUnread()">
		<xf:set var="$link">{{ link('ams/article-comments/unread', $item) }}</xf:set>
	<xf:else />
		<xf:set var="$link">{{ link('ams', $item) }}</xf:set>
	</xf:if>
	<div class="structItem structItem--middle{{ ($item.LastComment AND $item.LastComment.isUnread()) ? ' is-unread' : '' }}" data-author="{{ $item.User.username ?: $item.username }}">
		<div class="structItem-cell structItem-cell--icon structItem-cell--iconFixedSmall">
			<div class="structItem-iconContainer">
				<xf:if is="$item.CoverImage">
					<a href="{$link}">
						{{ ams_article_thumbnail($item) }}
					</a>
					<xf:avatar user="$item.User" size="s"
						href="" class="avatar--separated structItem-secondaryIcon" />
				<xf:elseif is="$item.SeriesPart.Series && $item.SeriesPart.Series.icon_date" />
					{{ ams_series_icon($item.SeriesPart.Series, 'm', link('ams', $item)) }}
					<xf:avatar user="$item.User" size="s"
						href="" class="avatar--separated structItem-secondaryIcon" />
				<xf:elseif is="$item.Category.content_image_url" />
					<a href="{$link}">
						{{ ams_category_icon($item) }}
					</a>
					<xf:avatar user="$item.User" size="s"
						href="" class="avatar--separated structItem-secondaryIcon" />
				<xf:else />
					<xf:avatar user="$item.User" size="m" defaultname="{{ $item.username ?: phrase('deleted_member') }}" />
				</xf:if>
			</div>
		</div>
		<div class="structItem-cell structItem-cell--main" data-xf-init="touch-proxy">
			<div class="structItem-title">
				<a href="{$link}" class="" data-tp-primary="on">{$item.title}</a>
			</div>

			<div class="structItem-minor">
				<xf:if contentcheck="true">
					<ul class="structItem-extraInfo">
						<xf:contentcheck>
							<xf:if is="{$extraInfo}">
								<li>{$extraInfo}</li>
							</xf:if>
							<xf:if is="$chooseName">
								<li><xf:checkbox standalone="true">
									<xf:option name="{$chooseName}[]" value="{$item.article_id}" class="js-chooseItem" />
								</xf:checkbox></li>
							</xf:if>
						</xf:contentcheck>
					</ul>
				</xf:if>
				<ul class="structItem-parts">
					<li><xf:username user="{$item.User}" defaultname="{{ $item.username ?: phrase('deleted_member') }}" /></li>
					<li>{{ phrase('xa_ams_article') }}</li>
					<li><xf:date time="{$item.publish_date}" /></li>
					<xf:if is="$item.article_read_time">
						<li>{{ phrase('xa_ams_x_min_read', {'minutes': $item.article_read_time}) }}</li>
					</xf:if>
					<xf:if is="$item.category_id AND $item.Category">
						<li>{{ phrase('category:') }} {$item.Category.title}</li>
					</xf:if>
				</ul>
			</div>
		</div>
		<div class="structItem-cell structItem-cell--meta">
			<dl class="pairs pairs--justified">
				<dt>{{ phrase('comments') }}</dt>
				<dd>{$item.comment_count|number}</dd>
			</dl>
		</div>
		<div class="structItem-cell structItem-cell--latest">
			<xf:if is="$item.LastComment">
				<a href="{{ link('ams/comments', $item.LastComment) }}" rel="nofollow"><xf:date time="{$item.last_comment_date}" class="structItem-latestDate" /></a>
				<div class="structItem-minor">
					<xf:username user="{$item.LastCommenter}" />
				</div>
			<xf:else />
				-
			</xf:if>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_article_lock_unlock_comments" version_id="2000014" version_string="2.0.0 Alpha 4"><![CDATA[<xf:if is="{$article.comments_open}">
	<xf:title>{{ phrase('xa_ams_lock_comments') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('xa_ams_unlock_comments') }}</xf:title>
</xf:if>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/lock-unlock-comments', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				<xf:if is="{$article.comments_open}">
					{{ phrase('xa_ams_please_confirm_that_you_want_to_lock_comments_on:') }}
				<xf:else />
					{{ phrase('xa_ams_please_confirm_that_you_want_to_unlock_comments_on:') }}
				</xf:if>

				<strong><a href="{{ link('ams', $article) }}">{$article.title}</a></strong>
			</xf:inforow>
		</div>

		<xf:if is="{$article.comments_open}">
			<xf:submitrow submit="{{ phrase('xa_ams_lock_comments') }}" rowtype="simple" />
		<xf:else />
			<xf:submitrow submit="{{ phrase('xa_ams_unlock_comments') }}" rowtype="simple" />
		</xf:if>
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_lock_unlock_ratings" version_id="2010370" version_string="2.1.3"><![CDATA[<xf:if is="{$article.ratings_open}">
	<xf:title>{{ phrase('xa_ams_lock_ratings') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('xa_ams_unlock_ratings') }}</xf:title>
</xf:if>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/lock-unlock-ratings', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				<xf:if is="{$article.ratings_open}">
					{{ phrase('xa_ams_please_confirm_that_you_want_to_lock_ratings_on:') }}
				<xf:else />
					{{ phrase('xa_ams_please_confirm_that_you_want_to_unlock_ratings_on:') }}
				</xf:if>

				<strong><a href="{{ link('ams', $article) }}">{$article.title}</a></strong>
			</xf:inforow>
		</div>

		<xf:if is="{$article.ratings_open}">
			<xf:submitrow submit="{{ phrase('xa_ams_lock_ratings') }}" rowtype="simple" />
		<xf:else />
			<xf:submitrow submit="{{ phrase('xa_ams_unlock_ratings') }}" rowtype="simple" />
		</xf:if>
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_manage_contributors" version_id="2020031" version_string="2.2.0 Beta 1"><![CDATA[<xf:title>{{ phrase('xa_ams_manage_contributors_co_authors') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/manage-contributors', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$article.canRemoveContributors() && $contributors is not empty">
				<xf:checkboxrow name="remove_contributors"
					label="{{ phrase('xa_ams_remove_contributors_co_authors') }}">

					<xf:foreach loop="$contributors" value="$contributor" if="$contributor.is_co_author">
						<xf:option value="{$contributor.user_id}">{$contributor.User.username} - {{  phrase('xa_ams_co_author') }}</xf:option>
					</xf:foreach>

					<xf:foreach loop="$contributors" value="$contributor" if="!$contributor.is_co_author">
						<xf:option value="{$contributor.user_id}">{$contributor.User.username}</xf:option>
					</xf:foreach>
				</xf:checkboxrow>
			</xf:if>

			<xf:if is="$article.canAddContributors()">
				<xf:tokeninputrow name="add_contributors" href="{{ link('members/find') }}"
					label="{{ phrase('xa_ams_add_contributors') }}">

					<xf:explain>
						{{ phrase('separate_names_with_comma') }}
						{{ phrase('xa_ams_you_may_have_up_to_x_contributors_co_authors', {'number': $maxContributors|number}) }}
					</xf:explain>
				</xf:tokeninputrow>
			</xf:if>

			<xf:if is="$article.canAddCoAuthors()">
				<xf:tokeninputrow name="add_co_authors" href="{{ link('members/find') }}"
					label="{{ phrase('xa_ams_add_co_authors') }}">

					<xf:explain>
						{{ phrase('separate_names_with_comma') }}
						{{ phrase('xa_ams_you_may_have_up_to_x_contributors_co_authors', {'number': $maxContributors|number}) }}
					</xf:explain>
				</xf:tokeninputrow>
			</xf:if>
		</div>

		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_map" version_id="2021770" version_string="2.2.17"><![CDATA[<xf:title>{{ prefix('ams_article', $article, 'escaped') }}{{ $article.meta_title ? $article.meta_title : $article.title }} - {{ phrase('xa_ams_map') }}</xf:title>

<xf:wrap template="xa_ams_article_wrapper">
	<xf:set var="$pageSelected" value="map" />
</xf:wrap>

<xf:if is="$article.location && $category.allow_location && $xf.options.xaAmsLocationDisplayType == 'map_own_tab' && $xf.options.xaAmsGoogleMapsEmbedApiKey">
	<div class="block">
		<xf:if contentcheck="true">
			<div class="block-outer">
				<div class="block-outer-opposite">
				<xf:contentcheck>
					<xf:macro template="xa_ams_article_wrapper_macros" name="action_buttons" arg-article="{$article}" />
				</xf:contentcheck>
				</div>
			</div>
		</xf:if>

		<div class="block-container">
			<h3 class="block-header">{{ phrase('location') }}</h3>
			<div class="block-body block-row contentRow-lesser">
				<p class="mapLocationName"><a href="{{ link('misc/location-info', '', {'location': $article.location}) }}" rel="nofollow" target="_blank" class="">{$article.location}</a></p>
			</div>	
			<div class="block-body block-row">
				<div class="mapContainer">
					<iframe
						width="100%" height="600" frameborder="0" style="border: 0"
						src="https://www.google.com/maps/embed/v1/place?key={$xf.options.xaAmsGoogleMapsEmbedApiKey}&q={$article.location|censor}{{ $xf.options.xaAmsLocalizeGoogleMaps ? '&language=' . {$xf.language.language_code|substr} : '' }}">
					</iframe>
				</div>
			</div>	
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="xa_ams_article_map_overlay" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:title>{{ prefix('ams_article', $article, 'escaped') }}{$article.title}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:if is="$article.location && $category.allow_location && $xf.options.xaAmsGoogleMapsEmbedApiKey">
	<div class="block">
		<div class="block-container">
			<div class="block-body block-row">
				<div class="mapContainer">
					<iframe
						width="100%" height="600" frameborder="0" style="border: 0"
						src="https://www.google.com/maps/embed/v1/place?key={$xf.options.xaAmsGoogleMapsEmbedApiKey}&q={$article.location|censor}{{ $xf.options.xaAmsLocalizeGoogleMaps ? '&language=' . {$xf.language.language_code|substr} : '' }}">
					</iframe>
				</div>
			</div>	
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="xa_ams_article_mark_read" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_mark_articles_read') }}</xf:title>

<xf:form action="{{ link('ams/mark-read', null, {'date': $date}) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('xa_ams_you_sure_you_want_to_mark_all_articles_read') }}</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('xa_ams_mark_articles_read') }}" rowtype="simple" icon="markRead" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_move" version_id="2010770" version_string="2.1.7"><![CDATA[<xf:title>{{ phrase('xa_ams_move_article') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/move', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body js-prefixListenContainer">
			<xf:prefixinputrow
				label="{{ phrase('title') }}"
				prefixes="{$prefixes}"
				type="ams_article"
				prefix-value="{$article.prefix_id}"
				textbox-value="{$article.title}"
				href="{{ link('ams/prefixes') }}"
				listen-to="< .js-prefixListenContainer | .js-categoryList"
				autofocus="autofocus"
				maxlength="{{ max_length($article, 'title') }}" />

			<xf:selectrow name="target_category_id" value="{$article.category_id}" class="js-categoryList"
				label="{{ phrase('xa_ams_destination_category') }}">

				<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
					<xf:option value="{$treeEntry.record.category_id}">{{ repeat_raw('&nbsp; ', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>
				</xf:foreach>
			</xf:selectrow>

			<xf:checkboxrow>
				<xf:option name="notify_watchers" value="1" selected="{{ true }}">{{ phrase('xa_ams_notify_members_watching_destination_category') }}</xf:option>
			</xf:checkboxrow>

			<xf:if is="$article.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" arg-selected="{{ true }}" />
			</xf:if>
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_page_macros" version_id="2000056" version_string="2.0.0 Release Candidate 6"><![CDATA[<xf:macro name="article_page_options" arg-category="!" arg-article="{{ null }}">
	<xf:page option="amsCategory" value="{$category}" />

	<xf:page option="searchConstraints" value="{{ {
		phrase('xa_ams_articles'): {'search_type': 'ams_article'},
		phrase('xa_ams_this_category'): {'search_type': 'ams_article', 'c': {'categories': [$category.category_id], 'child_categories': 1}}
	} }}" />
</xf:macro>]]></template>
  <template type="public" title="xa_ams_article_page_set_cover_image" version_id="2022770" version_string="2.2.27"><![CDATA[<xf:title>{{ phrase('xa_ams_set_cover_image') }}</xf:title>

<xf:breadcrumb source="$page.getBreadcrumbs()" />

<xf:css src="attachments.less" />
<xf:css src="xa_ams.less" />

<xf:form action="{{ link('ams/page/set-cover-image', $page) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<div class="block-row">
				<ul class="attachmentList amsSetCoverImage-attachments">
					<xf:foreach loop="$page.Attachments" value="$attachment">
						<xf:if is="$attachment.has_thumbnail">
							<li class="attachment">
								<div class="attachment-icon attachment-icon--img">
									<a class="avatar NoOverlay"><img width="48" height="48" border="0" src="{$attachment.thumbnail_url}" alt="{$attachment.filename}" /></a>
								</div>
								<div class="attachment-name" style="padding-top: 5px;">
									<span class="attachment-select"><input type="radio" name="attachment_id" value="{$attachment.attachment_id}" {{ $page.cover_image_id == $attachment.attachment_id ? "checked" : "" }} /></span>
								</div>
							</li>
						</xf:if>
					</xf:foreach>
				</ul>
			</div>

			<div class="block-row">
				<xf:checkbox>
					<xf:option name="cover_image_above_page" data-hide="true"
						label="{{ phrase('xa_ams_display_cover_image_above_article_page') }}"
						hint="{{ phrase('xa_ams_display_cover_image_above_article_page_explain') }}"
						checked="{{ $page.cover_image_above_page }}">
						
						<xf:dependent>
							<xf:textarearow name="cover_image_caption" value="{$page.cover_image_caption_}"
								maxlength="{{ max_length($page, 'cover_image_caption') }}"
								label="{{ phrase('xa_ams_cover_image_caption') }}"
								rowtype="fullWidth"
								hint="{{ phrase('optional') }}"
								explain="{{ phrase('xa_ams_cover_image_caption_above_article_page_explain') }}" />
						</xf:dependent>						
					</xf:option>
				</xf:checkbox>
			</div>	
			
			<xf:if is="{$from_page_management}">
				<xf:hiddenval name="mp">{{ true }}</xf:hiddenval>
			</xf:if>
		</div>

		<xf:submitrow icon="save" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_page_view" version_id="2022870" version_string="2.2.28"><![CDATA[<xf:title>{{ prefix('ams_article', $article, 'escaped') }}{{ $article.meta_title ? $article.meta_title : $article.title }} | {{ $articlePage.meta_title ? $articlePage.meta_title : $articlePage.title }}</xf:title>

<xf:if is="!$article.isSearchEngineIndexable()">
	<xf:head option="metaNoindex"><meta name="robots" content="noindex" /></xf:head>
</xf:if>

<xf:if is="$articlePage.meta_description">
	<xf:set var="$descSnippet" value="{{ snippet($articlePage.meta_description, 320, {'stripBbCode': true}) }}" />
<xf:elseif is="$articlePage.description" />
	<xf:set var="$descSnippet" value="{{ snippet($articlePage.description, 256, {'stripBbCode': true}) }}" />
<xf:else />
	<xf:set var="$descSnippet" value="{{ snippet($articlePage.message, 250, {'stripBbCode': true}) }}" />
</xf:if>

<xf:if is="$articlePage.CoverImage">
	<xf:set var="$imageUrl" value="{{ link('canonical:ams/page/cover-image', $articlePage) }}" />
<xf:elseif is="$article.CoverImage" />
	<xf:set var="$imageUrl" value="{{ link('canonical:ams/cover-image', $article) }}" />
<xf:else />
	<xf:set var="$imageUrl" value="{{ $article.Category.content_image_url ? base_url({$article.Category.content_image_url}, true) : '' }}" />
</xf:if>

<xf:macro template="metadata_macros" name="metadata"
	arg-title="{{ $articlePage.og_title ? $articlePage.og_title : ($articlePage.meta_title ? $articlePage.meta_title : $articlePage.title) }} | {{ $article.og_title ? $article.og_title : ($article.meta_title ? $article.meta_title : $article.title) }}"	
	arg-description="{$descSnippet}"
	arg-type="article"
	arg-shareUrl="{{ link('canonical:ams/page', $articlePage) }}"
	arg-canonicalUrl="{{ link('canonical:ams/page', $articlePage) }}" 
	arg-imageUrl="{$imageUrl}"
	arg-twitterCard="summary_large_image" />

<xf:page option="ldJsonHtml">
    <xf:extension name="structured_data_extra_params" value="{{ [] }}" />
    <xf:extension name="structured_data">
        <xf:set var="$ldJson"
            value="{{ $articlePage.getLdStructuredData(0, extension_value('structured_data_extra_params')) }}"
        />
        <xf:if is="$ldJson">
            <script type="application/ld+json">
                {$ldJson|json(true)|raw}
            </script>
        </xf:if>
    </xf:extension>
</xf:page>

<xf:wrap template="xa_ams_article_wrapper">
	<xf:set var="$pageSelected" value="overview" />
</xf:wrap>

<xf:macro template="lightbox_macros" name="setup" arg-canViewAttachments="{{ $articlePage.canViewPageAttachments() }}" />

<div class="block">
	<xf:if contentcheck="true">
		<div class="block-outer">
			<div class="block-outer-opposite">
			<xf:contentcheck>
				<xf:macro template="xa_ams_article_wrapper_macros" name="action_buttons" 
					arg-article="{$article}" 
					arg-seriesToc="{$seriesToc}" 
					arg-articlePages="{$articlePages}" 
					arg-articlePage="{$articlePage}" 
					arg-isFullView="{$isFullView}" 
					arg-showRateButton="{{ true }}" 
					arg-showAddPageButton="{{ true }}"
					arg-showAddToSeriesButton="{{ true }}" />
			</xf:contentcheck>
			</div>
		</div>
	</xf:if>

	<xf:if is="$articlePage.CoverImage && $articlePage.cover_image_above_page">
		<div class="amsCoverImage {{ $articlePage.cover_image_caption ? 'has-caption' : '' }}">
			<div class="amsCoverImage-container">
				<div class="amsCoverImage-container-image js-coverImageContainerImage">
					<img src="{{ link('ams/page/cover-image', $articlePage) }}" alt="{$articlePage.CoverImage.filename}" class="js-articleCoverImage" />
				</div>
			</div>
		</div>

		<xf:if is="$articlePage.cover_image_caption">
			<div class="amsCoverImage-caption">
				{{ snippet($articlePage.cover_image_caption, 500, {'stripBbCode': true}) }}
			</div>
		</xf:if>
	</xf:if>
	
	<xf:if is="$pagePoll">
		<xf:macro template="poll_macros" name="poll_block" arg-poll="{$pagePoll}" />
	</xf:if>
	
	<xf:widgetpos id="xa_ams_article_view_above_article" context-article="{$article}" />	

	<div class="block-container">
		<div class="block-body lbContainer js-articleBody"
			data-xf-init="lightbox"
			data-lb-id="article-{$article.article_id}"
			data-lb-caption-desc="{{ $article.User ? $article.User.username : $article.username }} &middot; {{ date_time($article.publish_date) }}"
			id="js-articleBody-{$article.article_id}">

			<div class="articleBody">
				<article class="articleBody-main js-lbContainer">
					
					<xf:ad position="ams_article_view_above_article" arg-article="{$article}" />

					<h2>{$articlePage.title}</h2>

					<xf:if is="{$articlePage.display_byline}">
						<div class="message-attribution message-attribution-amsPageMeta">
							<ul class="listInline listInline--bullet">
								<li>
									<xf:fa icon="fa-user" title="{{ phrase('author')|for_attr }}" />
									<span class="u-srOnly">{{ phrase('author') }}</span>
									<xf:if is="$articlePage.User.Profile.xa_ams_author_name">
										<xf:username user="{'user_id':{$articlePage.user_id}, 'username':{$articlePage.User.Profile.xa_ams_author_name}}" defaultname="{$articlePage.User.Profile.xa_ams_author_name}" class="u-concealed" />
									<xf:else />
										<xf:username user="{$articlePage.User}" defaultname="{$articlePage.username}" class="u-concealed" />
									</xf:if>
								</li>
								<li>
									<xf:fa icon="fa-clock" title="{{ phrase('xa_ams_publish_date')|for_attr }}" />
									<span class="u-srOnly">{{ phrase('xa_ams_publish_date') }}</span>

									<a href="{{ link('ams/page', $articlePage) }}" class="u-concealed"><xf:date time="{$articlePage.create_date}" /></a>
								</li>


								<xf:if is="$articlePage.edit_date > $articlePage.create_date">								
									<li>
										<xf:fa icon="fa-clock" title="{{ phrase('xa_ams_last_update')|for_attr }}" />
										<span class="u-concealed">{{ phrase('updated') }}</span>

										<xf:date time="{$articlePage.edit_date}" />
									</li>
								</xf:if>
							</ul>
						</div>
					</xf:if>

					<xf:if contentcheck="true">
						<dl class="blockStatus blockStatus--standalone">
							<dt>{{ phrase('status') }}</dt>
							<xf:contentcheck>
								<xf:if is="$articlePage.warning_message">
									<dd class="blockStatus-message blockStatus-message--warning">
										{$articlePage.warning_message}
									</dd>
								</xf:if>
								<xf:if is="$articlePage.isIgnored()">
									<dd class="blockStatus-message blockStatus-message--ignored">
										{{ phrase('you_are_ignoring_content_by_this_member') }}
									</dd>
								</xf:if>
							</xf:contentcheck>
						</dl>
					</xf:if>	

					{{ bb_code($articlePage.message, 'ams_page', $articlePage) }}
					
					<xf:ad position="ams_article_view_below_article" arg-article="{$article}" />					

					<xf:if is="($article.page_count && $articlePages) || ($article.isInSeries(true) && $seriesToc)">
						<div style="padding-top: 10px;">
							<xf:if is="($article.page_count && $articlePages)">
								<xf:if is="$nextPage">						
									<dl class="blockStatus blockStatus--info blockStatus--standalone">
										<dt></dt>
										<dd class="blockStatus-message amsNextPage">
											<span class="">{{ phrase('xa_ams_next_page') }}:</span>
											<a href="{{ link('ams/page', $nextPage) }}" class="" title="{$nextPage.title}">{$nextPage.title}</a>
										</dd>
									</dl>
								</xf:if>

								<xf:if is="$articlePage && !$previousPage">
									<dl class="blockStatus blockStatus--info blockStatus--standalone">
										<dt></dt>
										<dd class="blockStatus-message amsPreviousPage">
											<span class="">{{ phrase('xa_ams_previous_page') }}:</span>
											<xf:if is="$article.overview_page_title">
												<a href="{{ link('ams', $article) }}" class="" title="{$article.overview_page_title}">{$article.overview_page_title}</a>
											<xf:else />
												<a href="{{ link('ams', $article) }}" class="" title="{{ phrase('overview') }}">{{ phrase('overview') }}</a>
											</xf:if>
										</dd>
									</dl>
								</xf:if>

								<xf:if is="$previousPage">						
									<dl class="blockStatus blockStatus--info blockStatus--standalone">
										<dt></dt>
										<dd class="blockStatus-message amsPreviousPage">
											<span class="">{{ phrase('xa_ams_previous_page') }}:</span>
											<a href="{{ link('ams/page', $previousPage) }}" class="" title="{$previousPage.title}">{$previousPage.title}</a>
										</dd>
									</dl>
								</xf:if>
							</xf:if>

							<xf:if is="$article.isInSeries(true) && $seriesToc">
								<xf:if is="$nextSeriesPart">
									<dl class="blockStatus blockStatus--info blockStatus--standalone">
										<dt></dt>
										<dd class="blockStatus-message amsNextArticle">
											<span class="">{{ phrase('xa_ams_next_article_in_the_series_x:', {'title': $nextSeriesPart.Series.title}) }}</span>
											<a href="{{ link('ams', $nextSeriesPart.Article) }}" class="" title="{$nextSeriesPart.Article.title}">
												{$nextSeriesPart.Article.title}</a>
										</dd>
									</dl>
								</xf:if>

								<xf:if is="$previousSeriesPart">
									<dl class="blockStatus blockStatus--info blockStatus--standalone">
										<dt></dt>
										<dd class="blockStatus-message amsPreviousArticle">
											<span class="">{{ phrase('xa_ams_previous_article_in_the_series_x:', {'title': $previousSeriesPart.Series.title}) }}</span>
											<a href="{{ link('ams', $previousSeriesPart.Article) }}" class="" title="{$previousSeriesPart.Article.title}">
												 {$previousSeriesPart.Article.title}</a>
										</dd>
									</dl>
								</xf:if>
							</xf:if>
						</div>
					</xf:if>

					<xf:if is="$articlePage.attach_count">
						<xf:if contentcheck="true">
							<xf:css src="attachments.less" />
							<ul class="attachmentList articleBody-attachments">
								<xf:contentcheck>
									<xf:foreach loop="$articlePage.Attachments" value="$attachment" if="$attachment.has_thumbnail AND !$articlePage.isAttachmentEmbedded($attachment)">
										<xf:if is="$articlePage.cover_image_above_page AND $attachment.attachment_id == $articlePage.cover_image_id">
											<xf:comment>do nothing as we don't want the cover iamge displaying both above the article page and as a thumbnail in the image collection below the page</xf:comment>
										<xf:else />
											<xf:macro template="attachment_macros" name="attachment_list_item"
												arg-attachment="{$attachment}"
												arg-canView="{{ $articlePage.canViewPageAttachments() }}" />
										</xf:if>
									</xf:foreach>
								</xf:contentcheck>
							</ul>
						</xf:if>

						<xf:if contentcheck="true">
							<xf:css src="attachments.less" />
							<ul class="attachmentList articleBody-attachments">
								<xf:contentcheck>
									<xf:foreach loop="$articlePage.Attachments" value="$attachment">
										<xf:if is="$attachment.has_thumbnail || $attachment.is_video">
											<xf:comment>do nothing as we don't want to display images or video here</xf:comment>
										<xf:else />
											<xf:macro template="attachment_macros" name="attachment_list_item"
												arg-attachment="{$attachment}"
												arg-canView="{{ $articlePage.canViewPageAttachments() }}" />
										</xf:if>
									</xf:foreach>
								</xf:contentcheck>
							</ul>
						</xf:if>
					</xf:if>

					<xf:if contentcheck="true">
						<div class="actionBar">
							<xf:contentcheck>
								<xf:if contentcheck="true">
									<div class="actionBar-set actionBar-set--external">
									<xf:contentcheck>
										<xf:react content="{$articlePage}" link="ams/page/react" list="< .js-articleBody | .js-reactionsList" />
									</xf:contentcheck>
									</div>
								</xf:if>

								<xf:if contentcheck="true">
									<div class="actionBar-set actionBar-set--internal">
									<xf:contentcheck>
										<xf:if is="$article.canReport()">
											<a href="{{ link('ams/page/report', $articlePage) }}"
												class="actionBar-action actionBar-action--report" 
												data-xf-click="overlay">{{ phrase('report_verb') }}</a>
										</xf:if>

										<xf:set var="$hasActionBarMenu" value="{{ false }}" />

										<xf:if is="$articlePage.canEdit()">
											<a href="{{ link('ams/page/edit', $articlePage) }}"
												class="actionBar-action actionBar-action--edit actionBar-action--menuItem">{{ phrase('edit') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$articlePage.edit_count AND $articlePage.canViewHistory()">
											<a href="{{ link('ams/page/history', $articlePage) }}" 
												class="actionBar-action actionBar-action--history actionBar-action--menuItem"
												data-xf-click="toggle"
												data-target="#js-articleBody-{$article.article_id} .js-historyTarget"
												data-menu-closer="true">{{ phrase('history') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$articlePage.canDelete('soft')">
											<a href="{{ link('ams/page/delete', $articlePage) }}"
												class="actionBar-action actionBar-action--delete actionBar-action--menuItem"
												data-xf-click="overlay">{{ phrase('delete') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$articlePage.canReassign()">
											<a href="{{ link('ams/page/reassign', $articlePage) }}"
												class="actionBar-action actionBar-action--reassign actionBar-action--menuItem" 
												data-xf-click="overlay">{{ phrase('reassign') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$articlePage.canSetCoverImage()">
											<a href="{{ link('ams/page/set-cover-image', $articlePage) }}" 
												class="actionBar-action actionBar-action--cover-image actionBar-action--menuItem"
												data-xf-click="overlay">{{ phrase('xa_ams_set_cover_image') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$articlePage.canCreatePoll()">
											<a href="{{ link('ams/page/poll-create', $articlePage) }}"
												class="actionBar-action actionBar-action--poll-create actionBar-action--menuItem" 
												data-xf-click="overlay">{{ phrase('create_poll') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$xf.visitor.canViewIps() && $articlePage.ip_id">
											<a href="{{ link('ams/page/ip', $articlePage) }}"
												class="actionBar-action actionBar-action--ip actionBar-action--menuItem"
												data-xf-click="overlay">{{ phrase('ip') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$articlePage.canWarn()">
											<a href="{{ link('ams/page/warn', $articlePage) }}"
												class="actionBar-action actionBar-action--warn actionBar-action--menuItem">{{ phrase('warn') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										<xf:elseif is="$articlePage.warning_id && $xf.visitor.canViewWarnings()" />
											<a href="{{ link('warnings', {'warning_id': $articlePage.warning_id}) }}"
												class="actionBar-action actionBar-action--warn actionBar-action--menuItem"
												data-xf-click="overlay">{{ phrase('view_warning') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$hasActionBarMenu">
											<a class="actionBar-action actionBar-action--menuTrigger"
												data-xf-click="menu"
												title="{{ phrase('more_options') }}"
												role="button"
												tabindex="0"
												aria-expanded="false"
												aria-haspopup="true">&#8226;&#8226;&#8226;</a>

											<div class="menu" data-menu="menu" aria-hidden="true" data-menu-builder="actionBar">
												<div class="menu-content">
													<h4 class="menu-header">{{ phrase('more_options') }}</h4>
													<div class="js-menuBuilderTarget"></div>
												</div>
											</div>
										</xf:if>
									</xf:contentcheck>
									</div>
								</xf:if>
							</xf:contentcheck>
						</div>
					</xf:if>

					<div class="reactionsBar js-reactionsList {{ $articlePage.reactions ? 'is-active' : '' }}">
						<xf:reactions content="{$articlePage}" link="ams/page/reactions" />
					</div>

					<div class="js-historyTarget toggleTarget" data-href="trigger-href"></div>
				</article>
			</div>
		</div>
	</div>
	
	<xf:widgetpos id="xa_ams_article_view_below_article" context-article="{$article}" />
</div>

<xf:if contentcheck="true">
	<div class="block">
		<div class="blockMessage blockMessage--none">
			<xf:contentcheck>
				<xf:if is="$xf.options.xaAmsDisplayShareBelowArticle">
					<xf:macro template="share_page_macros" name="buttons" arg-iconic="{{ true }}" arg-label="{{ phrase('share') }}:" />
				</xf:if>
			</xf:contentcheck>
		</div>
	</div>	
</xf:if>

<xf:if is="$latestReviews is not empty">
	<xf:if is="$canInlineModReviews">
		<xf:js src="xf/inline_mod.js" min="1" />
	</xf:if>

	<div class="block"
		data-xf-init="{{ $canInlineModReviews ? 'inline-mod' : '' }}"
		data-type="ams_rating"
		data-href="{{ link('inline-mod') }}">

		<div class="block-container"
			data-xf-init="lightbox"
			data-lb-id="article-{$article.article_id}"
			data-lb-universal="{$xf.options.lightBoxUniversal}">

			<h3 class="block-header">{{ phrase('xa_ams_latest_reviews') }}</h3>
			<div class="block-body">
			<xf:foreach loop="$latestReviews" value="$review">
				<xf:macro template="xa_ams_review_macros" name="review"
					arg-review="{$review}"
					arg-article="{$article}" 
					arg-showAttachments="{{ true }}" />
			</xf:foreach>
			</div>
			<div class="block-footer">
				<span class="block-footer-controls"><xf:button class="button--link" href="{{ link('ams/reviews', $article) }}">{{ phrase('xa_ams_read_more...') }}</xf:button></span>
			</div>
		</div>
	</div>
</xf:if>

<xf:if is="$xf.options.xaAmsMoreInCategoryLocation == 'below_article' && $categoryOthers is not empty">
	<div class="block">
		<div class="block-container">
			<h3 class="block-header"><a href="{{ link('ams/categories', $article.Category) }}">{{ phrase('xa_ams_more_in_x', {'title': $article.Category.title}) }}</a></h3>
			<div class="block-body">
				<xf:if is="$xf.options.xaAmsMoreInCategoryLayoutType == 'article_view' && $article.canViewAttachments()">
					<xf:foreach loop="$categoryOthers" value="$categoryOther">
						<xf:macro template="xa_ams_article_list_macros" name="article_view_layout"
							arg-allowInlineMod="{{ false }}"								  
							arg-article="{$categoryOther}" />
					</xf:foreach>
				<xf:elseif is="$xf.options.xaAmsMoreInCategoryLayoutType == 'grid_view' && $article.canViewAttachments()" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_grid_view_layout.less" />

					<div class="gridContainerAmsGridView">		
						<ul class="ams-grid-view">
							<xf:foreach loop="$categoryOthers" value="$categoryOther">
								<xf:macro template="xa_ams_article_list_macros" name="grid_view_layout"
									arg-allowInlineMod="{{ false }}"									  
									arg-article="{$categoryOther}" />
							</xf:foreach>
						</ul>
					</div>
				<xf:elseif is="$xf.options.xaAmsMoreInCategoryLayoutType == 'tile_view' && $article.canViewAttachments()" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_tile_view_layout.less" />

					<div class="gridContainerAmsTileView">		
						<ul class="ams-tile-view">
							<xf:foreach loop="$categoryOthers" value="$categoryOther">
								<xf:macro template="xa_ams_article_list_macros" name="tile_view_layout"
									arg-allowInlineMod="{{ false }}"								  
									arg-article="{$categoryOther}" />
							</xf:foreach>
						</ul>
					</div>							
				<xf:else />
					<div class="structItemContainer structItemContainerAmsListView">
						<xf:foreach loop="$categoryOthers" value="$categoryOther">
							<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
								arg-allowInlineMod="{{ false }}"									  
								arg-article="{$categoryOther}" />
						</xf:foreach>
					</div>
				</xf:if>
			</div>
		</div>
	</div>
</xf:if>

<xf:if is="$xf.options.xaAmsMoreFromAuthorLocation == 'below_article' && $authorOthers is not empty">
	<div class="block">
		<div class="block-container">
			<xf:if is="$article.User.Profile.xa_ams_author_name">
				<h3 class="block-header"><a href="{{ link('ams/authors', $article.User) }}">{{ phrase('xa_ams_more_from_x', {'name': $article.User.Profile.xa_ams_author_name}) }}</a></h3>
			<xf:else />
				<h3 class="block-header"><a href="{{ link('ams/authors', $article.User) }}">{{ phrase('xa_ams_more_from_x', {'name': $article.User.username}) }}</a></h3>
			</xf:if>

			<div class="block-body">
				<xf:if is="$xf.options.xaAmsMoreFromAuthorLayoutType == 'article_view' && $article.canViewAttachments()">
					<xf:foreach loop="$authorOthers" value="$authorOther">
						<xf:macro template="xa_ams_article_list_macros" name="article_view_layout"
							arg-allowInlineMod="{{ false }}"								  
							arg-article="{$authorOther}" />
					</xf:foreach>
				<xf:elseif is="$xf.options.xaAmsMoreFromAuthorLayoutType == 'grid_view' && $article.canViewAttachments()" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_grid_view_layout.less" />

					<div class="gridContainerAmsGridView">		
						<ul class="ams-grid-view">
							<xf:foreach loop="$authorOthers" value="$authorOther">
								<xf:macro template="xa_ams_article_list_macros" name="grid_view_layout"
									arg-allowInlineMod="{{ false }}"									  
									arg-article="{$authorOther}" />
							</xf:foreach>
						</ul>
					</div>
				<xf:elseif is="$xf.options.xaAmsMoreFromAuthorLayoutType == 'tile_view' && $article.canViewAttachments()" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_tile_view_layout.less" />

					<div class="gridContainerAmsTileView">		
						<ul class="ams-tile-view">
							<xf:foreach loop="$authorOthers" value="$authorOther">
								<xf:macro template="xa_ams_article_list_macros" name="tile_view_layout"
									arg-allowInlineMod="{{ false }}"								  
									arg-article="{$authorOther}" />
							</xf:foreach>
						</ul>
					</div>							
				<xf:else />
					<div class="structItemContainer structItemContainerAmsListView">
						<xf:foreach loop="$authorOthers" value="$authorOther">
							<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
								arg-allowInlineMod="{{ false }}"									  
								arg-article="{$authorOther}" />
						</xf:foreach>
					</div>
				</xf:if>		
			</div>
		</div>
	</div>
</xf:if>

<xf:if is="$article.canViewComments()">
	<div class="columnContainer"
		data-xf-init="lightbox"
		data-lb-id="article-{$article.article_id}"
		data-lb-universal="{$xf.options.lightBoxUniversal}">

		<span class="u-anchorTarget" id="comments"></span>

		<div class="columnContainer-comments">
			<xf:macro template="xa_ams_comment_macros" name="comment_list"
				arg-comments="{$comments}"
				arg-attachmentData="{$attachmentData}"
				arg-content="{$article}"
				arg-linkPrefix="ams/article-comments"
				arg-link="ams"
				arg-page="{$page}"
				arg-perPage="{$perPage}"
				arg-totalItems="{$totalItems}"
				arg-pageNavHash="{$pageNavHash}"					  
				arg-canInlineMod="{$canInlineModComments}" />
		</div>
	</div>	
</xf:if>

<xf:if is="$articlePages is not empty">
	<xf:sidebar key="articleTocSidebar">
		<div class="block">
			<div class="block-container">
				<h3 class="block-header">{{ phrase('xa_ams_table_of_contents') }}</h3>
				<div class="block-body">
					<a class="blockLink {{ (!$articlePage && !$isFullView) ? 'is-selected' : '' }}" href="{{ link('ams', $article) }}">
						<xf:if is="$article.overview_page_title">
							{$article.overview_page_title}
						<xf:else />
							{{ phrase('overview') }}
						</xf:if>
					</a>

					<xf:foreach loop="$articlePages" value="$article_page">
						<a href="{{ link('ams/page', $article_page) }}" class="blockLink {{ $articlePage.page_id == $article_page.page_id ? 'is-selected' : '' }}">
							{{ repeat('&nbsp;&nbsp;', $article_page.depth)|raw }} {$article_page.title}</a>
					</xf:foreach>

					<xf:if is="$xf.options.xaAmsViewFullArticle">
						<a href="{{ link('ams', $article, {'full': 1}) }}" class="blockLink {{ $isFullView ? 'is-selected' : '' }}">{{ $article.Category.content_term ?  phrase('xa_ams_view_full_x', {'term': $article.Category.content_term|to_lower}) : phrase('xa_ams_view_full_article') }}</a>
					</xf:if>
				</div>
			</div>
		</div>
	</xf:sidebar>
</xf:if>

<xf:if is="$seriesToc is not empty">
	<xf:sidebar key="seriesTocSidebar">
		<div class="block">
			<div class="block-container">
				<h3 class="block-header">
					<xf:if is="$xf.visitor.canViewAmsSeries()">
						<a href="{{ link('ams/series', $article.SeriesPart.Series) }}">{{ phrase('xa_ams_series_table_of_contents') }}</a>
					<xf:else />
						{{ phrase('xa_ams_series_table_of_contents') }}
					</xf:if>
				</h3>
				<div class="block-body">
					<xf:foreach loop="$seriesToc" value="$seriesToc_part">
						<a href="{{ link('ams', $seriesToc_part.Article) }}" class="blockLink {{ $seriesToc_part.series_part_id == $article.series_part_id ? 'is-selected' : '' }}">{$seriesToc_part.Article.title}</a>
					</xf:foreach>
				</div>
			</div>
		</div>
	</xf:sidebar>
</xf:if>
		
<xf:sidebar key="infoSidebar">
	<div class="block">
		<div class="block-container">
			<h3 class="block-minorHeader">{{ $article.Category.content_term ?  phrase('xa_ams_x_information', {'term': $article.Category.content_term}) : phrase('xa_ams_article_information') }}</h3>
			<div class="block-body block-row block-row--minor">
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('author') }}</dt>
					<xf:if is="$article.User.Profile.xa_ams_author_name">
						<dd><xf:username user="{'user_id':{$article.User.user_id}, 'username':{$article.User.Profile.xa_ams_author_name}}" defaultname="{$article.User.Profile.xa_ams_author_name}" /></dd>
					<xf:else />
						<dd><xf:username user="{$article.User}" defaultname="{$article.username}" /></dd>
					</xf:if>
				</dl>
				<xf:if is="$article.view_count">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('views') }}</dt>
						<dd>{$article.view_count|number}</dd>
					</dl>
				</xf:if>
				<xf:if is="$article.comment_count">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('comments') }}</dt>
						<dd>{$article.comment_count|number}</dd>
					</dl>
				</xf:if>
				<xf:if is="$article.review_count">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xa_ams_reviews') }}</dt>
						<dd>{$article.review_count|number}</dd>
					</dl>
				</xf:if>
				<xf:if is="$article.last_update">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xa_ams_last_update') }}</dt>
						<dd><xf:date time="{$article.last_update}" /></dd>
					</dl>
				</xf:if>
				<xf:if is="$article.author_rating && $category.allow_author_rating">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xa_ams_author_rating') }}</dt>
						<dd>
							<xf:macro template="rating_macros" name="stars"
								arg-rating="{$article.author_rating}"
								arg-class="ratingStars--amsAuthorRating" />
						</dd>
					</dl>
				</xf:if>
				<xf:if is="$article.rating_count AND $article.rating_avg">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('rating') }}</dt>
						<dd>
							<xf:macro template="rating_macros" name="stars_text"
								arg-rating="{$article.rating_avg}"
								arg-count="{$article.rating_count}"
								arg-rowClass="ratingStarsRow--textBlock" />
						</dd>
					</dl>
				</xf:if>

				<xf:if is="$category.allow_location && $xf.options.xaAmsLocationDisplayType == 'link' && $article.location">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('location') }}</dt>
						<dd>
							<a href="{{ link('misc/location-info', '', {'location': $article.location}) }}" rel="nofollow" target="_blank" class="">{$article.location}</a>
						</dd>
					</dl>
				</xf:if>
			</div>
		</div>
	</div>
</xf:sidebar>

<xf:sidebar key="additionalInfoSidebar">
	<xf:if contentcheck="true">
		<div class="block">
			<div class="block-container">
				<h3 class="block-minorHeader">{{ phrase('xa_ams_additional_information') }}</h3>
				<div class="block-body block-row block-row--minor">
					<xf:contentcheck>
						<xf:macro template="custom_fields_macros" name="custom_fields_view"
							arg-type="ams_articles"
							arg-group="sidebar"
							arg-onlyInclude="{$category.field_cache}"
							arg-set="{$article.custom_fields}"
							arg-wrapperClass="" 
							arg-valueClass="pairs pairs--justified" />
					</xf:contentcheck>
				</div>	
			</div>
		</div>
	</xf:if>
</xf:sidebar>

<xf:sidebar key="discussionButtonSidebar">
	<xf:if contentcheck="true">
		<div class="block">
			<div class="block-container">
				<xf:contentcheck>
					<xf:if is="$article.hasViewableDiscussion()">
						<xf:button href="{{ link('threads', $article.Discussion) }}" class="button--fullWidth">{{ phrase('xa_ams_join_discussion') }}</xf:button>
					</xf:if>
				</xf:contentcheck>
			</div>
		</div>
	</xf:if>	
</xf:sidebar>

<xf:if is="$xf.options.xaAmsMoreInCategoryLocation == 'sidebar' && $categoryOthers is not empty">
	<xf:sidebar key="moreArticlesInCategorySidebar">
		<div class="block">
			<div class="block-container">
				<h3 class="block-minorHeader"><a href="{{ link('ams/categories', $article.Category) }}">{{ phrase('xa_ams_more_in_x', {'title': $article.Category.title}) }}</a></h3>
				<div class="block-body block-row">
					<ul class="articleSidebarList">
					<xf:foreach loop="$categoryOthers" value="$categoryOther">
						<li>
							<xf:macro template="xa_ams_article_list_macros" name="article_simple"
								arg-article="{$categoryOther}"
								arg-withMeta="{{ false }}" />
						</li>
					</xf:foreach>
					</ul>
				</div>
			</div>
		</div>
	</xf:sidebar>
</xf:if>

<xf:if is="$xf.options.xaAmsMoreFromAuthorLocation == 'sidebar' && $authorOthers is not empty">
	<xf:sidebar key="moreArticlesFromAuthorSidebar">
		<div class="block">
			<div class="block-container">
				<xf:if is="$articlePage.User.Profile.xa_ams_author_name">
					<h3 class="block-minorHeader"><a href="{{ link('ams/authors', $articlePage.User) }}">{{ phrase('xa_ams_more_from_x', {'name': $articlePage.User.Profile.xa_ams_author_name}) }}</a></h3>
				<xf:else />
					<h3 class="block-minorHeader"><a href="{{ link('ams/authors', $articlePage.User) }}">{{ phrase('xa_ams_more_from_x', {'name': $articlePage.User.username}) }}</a></h3>
				</xf:if>

				<div class="block-body block-row">
					<ul class="articleSidebarList">
					<xf:foreach loop="$authorOthers" value="$authorOther">
						<li>
							<xf:macro template="xa_ams_article_list_macros" name="article_simple"
								arg-article="{$authorOther}"
								arg-withMeta="{{ false }}" />
						</li>
					</xf:foreach>
					</ul>
				</div>
			</div>
		</div>
	</xf:sidebar>
</xf:if>

<xf:set var="$extras" value="{{ property('xaAmsShareThisArticleBlockElements') }}" />
<xf:if is="$extras.share_article_block">
	<xf:sidebar key="shareSidebar">
		<xf:if contentcheck="true">
			<div class="block">
				<div class="block-container">
					<xf:contentcheck>
						<h3 class="block-minorHeader">{{ $article.Category.content_term ?  phrase('xa_ams_share_this_x', {'term': $article.Category.content_term|to_lower}) : phrase('xa_ams_share_this_article_page') }}</h3>
						<xf:if contentcheck="true">
							<div class="block-body block-row block-row--separated">
								<xf:contentcheck>
									<xf:macro template="share_page_macros" name="buttons" arg-iconic="{{ true }}" />
								</xf:contentcheck>
							</div>
						</xf:if>
						<xf:if contentcheck="true">
							<div class="block-body block-row block-row--separated">
								<xf:contentcheck>
									<xf:if is="$extras.url_bb_code">									
										<xf:macro template="share_page_macros" name="share_clipboard_input"
											arg-label="{{ phrase('xa_ams_copy_url_bb_code') }}"
											arg-text="[URL=&quot;{{ link('canonical:ams/page', $articlePage) }}&quot;]{$articlePage.title}[/URL]" />
									</xf:if>
									<xf:if is="$extras.ams_bb_code">
										<xf:macro template="share_page_macros" name="share_clipboard_input"
											arg-label="{{ phrase('xa_ams_copy_ams_bb_code') }}"
											arg-text="[AMS=page, {$articlePage.page_id}][/AMS]" />
									</xf:if>									
								</xf:contentcheck>
							</div>
						</xf:if>
					</xf:contentcheck>
				</div>
			</div>
		</xf:if>
	</xf:sidebar>
</xf:if>]]></template>
  <template type="public" title="xa_ams_article_pages" version_id="2022570" version_string="2.2.25"><![CDATA[<xf:title>{{ phrase('xa_ams_manage_pages') }} - {{ prefix('ams_article', $article, 'escaped') }}{$article.title}</xf:title>
<xf:h1>{{ phrase('xa_ams_manage_pages') }}</xf:h1>

<xf:css src="xa_ams.less" />
<xf:css src="message.less" />

<xf:breadcrumb source="$article.getBreadcrumbs(true)" />

{$innerContent|raw}

<div class="block block--messages">
	<xf:if contentcheck="true">
		<div class="block-outer">
			<div class="block-outer-opposite">
			<xf:contentcheck>
				<xf:if is="$article.canAddPage()">
					<xf:button href="{{ link('ams/add-page', $article) }}">
						{{ phrase('xa_ams_add_page') }}
					</xf:button>
				</xf:if>
			</xf:contentcheck>
			</div>
		</div>
	</xf:if>

	<div class="block-container">
		<div class="block-body">
			<xf:if is="$articlePages is not empty">
				<xf:foreach loop="$articlePages" value="$page">
					<div class="message message--simple js-articlePage" id="js-articlePage-{$page.page_id}">
						<span class="u-anchorTarget" id="article-page-{$page.page_id}"></span>
						<div class="message-inner">
							<div class="message-cell message-cell--main">
								<div class="message-content js-messageContent">
									<div class="message-attribution-source message-attribution-amsPageStatus">
										<span class="message-attribution-opposite">
											<xf:if is="$page.has_poll">
												<xf:fa icon="fal fa-poll" title="{{ phrase('poll')|for_attr }}" /> 
											</xf:if>
											<xf:if is="$page.page_state == 'deleted'">
												<xf:fa icon="fal fa-trash-alt" title="{{ phrase('deleted')|for_attr }}" /> 
											</xf:if>
											<xf:if is="$page.page_state == 'draft'">
												<xf:fa icon="fal fa-exclamation-triangle" title="{{ phrase('draft')|for_attr }}" /> 
											</xf:if>
										</span>
									</div>

									<div class="message-attribution message-attribution-amsPageTitle">
										<h2 class="message-attribution-main contentRow-title">
											<xf:if is="$page.page_state == 'visible'">
												<a href="{{ link('ams/page', $page) }}" class="" rel="nofollow">{$page.title}</a>
											<xf:else />
												{$page.title}
											</xf:if>
										</h2>
									</div>

									<div class="message-attribution message-attribution-amsPageMeta">
										<ul class="listInline listInline--bullet">
											<li>
												<xf:fa icon="fa-user" title="{{ phrase('author')|for_attr }}" />
												<span class="u-srOnly">{{ phrase('author') }}</span>
												<xf:if is="$page.User.Profile.xa_ams_author_name">
													<xf:username user="{'user_id':{$page.user_id}, 'username':{$page.User.Profile.xa_ams_author_name}}" 
														defaultname="{$page.User.Profile.xa_ams_author_name}" class="u-concealed" />
												<xf:else />
													<xf:username user="{$page.User}" defaultname="{$page.username}" class="u-concealed" />
												</xf:if>
											</li>
											<xf:if is="$page.page_state == 'visible'">
												<li>
													<xf:fa icon="fa-clock" title="{{ phrase('xa_ams_publish_date')|for_attr }}" />
													<span class="u-srOnly">{{ phrase('xa_ams_publish_date') }}</span>

													<a href="{{ link('ams/page', $page) }}" class="u-concealed"><xf:date time="{$page.create_date}" /></a>
												</li>
											<xf:else />
												<li>
													<xf:fa icon="fa-clock" title="{{ phrase('xa_ams_publish_date')|for_attr }}" />
													<span class="u-srOnly">{{ phrase('xa_ams_publish_date') }}</span>

													<xf:date time="{$page.create_date}" />
												</li>
											</xf:if>

											<xf:if is="$page.edit_date > $page.create_date">								
												<li>
													<xf:fa icon="fa-clock" title="{{ phrase('xa_ams_last_update')|for_attr }}" />
													<span class="u-concealed">{{ phrase('updated') }}</span>

													<xf:date time="{$page.edit_date}" />
												</li>
											</xf:if>
										</ul>
									</div>

									<div class="message-attribution message-attribution-amsPageMeta">
										<ul class="listInline listInline--bullet">
											<li><span class="u-concealed">{{ phrase('display_order') }}: {$page.display_order}</span></li>
											<xf:if is="$page.depth">
												<li><span class="u-concealed">{{ phrase('xa_ams_depth') }}: {$page.depth}</span></li>
											</xf:if>
											<xf:if is="$page.attach_count">
												<li><span class="u-concealed">{{ phrase('attachments') }}: {$page.attach_count}</span></li>
											</xf:if>
										</ul>
									</div>

									<xf:if is="$page.page_state == 'deleted'">
										<div class="messageNotice messageNotice--deleted">
											<xf:macro template="deletion_macros" name="notice" arg-log="{$page.DeletionLog}" />
										</div>
									<xf:elseif is="$page.page_state == 'draft'" />
										<div class="messageNotice messageNotice--locked">
											{{ phrase('xa_ams_draft_page_not_visible_public') }}
										</div>
									</xf:if>

									<xf:if contentcheck="true">
										<div class="message-actionBar actionBar">
											<xf:contentcheck>
												<xf:if contentcheck="true">
													<div class="actionBar-set actionBar-set--internal">
													<xf:contentcheck>
														<xf:if is="$page.canEdit()">
															<a href="{{ link('ams/page/edit', $page, {'mp': 1}) }}"
																class="actionBar-action actionBar-action--edit">{{ phrase('edit') }}</a>
														</xf:if>
														<xf:if is="$page.edit_count AND $page.canViewHistory()">
															<a href="{{ link('ams/page/history', $page) }}" 
																class="actionBar-action actionBar-action--history" 
																data-xf-click="toggle" data-target="< .js-articlePage | .js-historyTarget">{{ phrase('history') }}</a>
														</xf:if>
														<xf:if is="$page.canDelete()">
															<a href="{{ link('ams/page/delete', $page, {'mp': 1}) }}"
																class="actionBar-action actionBar-action--delete"
																data-xf-click="overlay">{{ phrase('delete') }}</a>
														</xf:if>
														<xf:if is="$page.page_state == 'deleted' && $page.canUndelete()">
															<a href="{{ link('ams/page/undelete', $page, {'t': csrf_token(), 'mp': 1}) }}"
																class="actionBar-action actionBar-action--undelete">{{ phrase('undelete') }}</a>
														</xf:if>
														<xf:if is="$page.canReassign()">
															<a href="{{ link('ams/page/reassign', $page, {'mp': 1}) }}"
																class="actionBar-action actionBar-action--report" 
																data-xf-click="overlay">{{ phrase('reassign') }}</a>
														</xf:if>
														<xf:if is="$page.canSetCoverImage()">
															<a href="{{ link('ams/page/set-cover-image', $page, {'mp': 1}) }}"
																class="actionBar-action actionBar-action--cover-image actionBar-action--menuItem"
																data-xf-click="overlay">{{ phrase('xa_ams_set_cover_image') }}</a>
														</xf:if>														
														<xf:if is="$page.canCreatePoll()">
															<a href="{{ link('ams/page/poll-create', $page) }}"
																class="actionBar-action actionBar-action--report" 
																data-xf-click="overlay">{{ phrase('create_poll') }}</a>
														</xf:if>
														<xf:if is="$xf.visitor.canViewIps() && $page.ip_id">
															<a href="{{ link('ams/page/ip', $page) }}"
																class="actionBar-action actionBar-action--ip actionBar-action--menuItem"
																data-xf-click="overlay">{{ phrase('ip') }}</a>
															<xf:set var="$hasActionBarMenu" value="{{ true }}" />
														</xf:if>
														<xf:if is="$page.warning_id && $xf.visitor.canViewWarnings()">
															<a href="{{ link('warnings', {'warning_id': $page.warning_id}) }}"
																class="actionBar-action actionBar-action--warn actionBar-action--menuItem"
																data-xf-click="overlay">{{ phrase('view_warning') }}</a>
															<xf:set var="$hasActionBarMenu" value="{{ true }}" />
														</xf:if>
													</xf:contentcheck>
													</div>
												</xf:if>
											</xf:contentcheck>
										</div>
									</xf:if>

									<div class="js-historyTarget toggleTarget" data-href="trigger-href"></div>
								</div>
							</div>
						</div>
					</div>
				</xf:foreach>
			<xf:else />
				<div class="block-row">
					{{ phrase('xa_ams_no_pages_to_display') }}
				</div>
			</xf:if>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_article_publish_draft" version_id="2020970" version_string="2.2.9"><![CDATA[<xf:title>{{ phrase('xa_ams_publish_article_now') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/publish-draft', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('xa_ams_please_confirm_that_you_want_to_publish_article_now:') }}
				<strong><a href="{{ link('ams', $article) }}">{$article.title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('xa_ams_publish_now') }}" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_publish_draft_scheduled" version_id="2020970" version_string="2.2.9"><![CDATA[<xf:title>{{ phrase('xa_ams_publish_article_scheduled_date_time') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/publish-draft-scheduled', $article) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('xa_ams_publish_date') }}">
				<div class="inputGroup">
					<xf:dateinput name="article_publish_date" value="{{ $xf.time ? date($xf.time, 'picker') : '' }}" />
					<span class="inputGroup-text">
						{{ phrase('criteria_time:') }}
					</span>
					<span class="inputGroup" dir="ltr">
						<xf:select name="article_publish_hour" value="" class="input--inline input--autoSize">
							<xf:foreach loop="$hours" value="$hour">
								<xf:option value="{$hour}" label="{$hour}" />
							</xf:foreach>
						</xf:select>
						<span class="inputGroup-text">:</span>
						<xf:select name="article_publish_minute" value="" class="input--inline input--autoSize">
							<xf:foreach loop="$minutes" value="$minute">
								<xf:option value="{$minute}" label="{$minute}" />
							</xf:foreach>
						</xf:select>
					</span>
				</div>
			</xf:formrow>

			<xf:selectrow name="article_timezone" value="{$xf.visitor.timezone}">
				<xf:options source="$timeZones" />
			</xf:selectrow>
		</div>

		<xf:submitrow icon="save" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_queue" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:title page="{$page}">{{ phrase('xa_ams_article_queue') }}</xf:title>

<xf:css src="xa_ams.less" />

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:ams/article-queue', null, {'page': $page > 1 ? $page : null}) }}" />

<xf:if is="$upcomingArticles is not empty">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:datarow rowtype="header">
						<xf:cell width="25%" style="white-space: nowrap;">{{ phrase('xa_ams_upcoming_publish_date') }}</xf:cell>
						<xf:cell>{{ phrase('xa_ams_article') }}</xf:cell>
					</xf:datarow>

					<xf:foreach loop="$upcomingArticles" value="$upcomingArticle">
						<xf:datarow rowclass="dataList-row--parentCustom">
							<xf:cell style="white-space: nowrap;">
								<time class="publish-date"><xf:date time="{$upcomingArticle.publish_date}" data-full-date="true" /></time>
							</xf:cell>
							<xf:cell>
								{{ prefix('ams_article', $upcomingArticle, 'html', '') }} <a href="{{ link('ams', $upcomingArticle) }}" class="" data-tp-primary="on">{$upcomingArticle.title}</a>
							</xf:cell>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
		</div>

		<div style="float: right; font-size: 13px; line-height: 20px; padding-top:5px;">
			<a href="{{ link('ams/article-queue-upcoming') }}">
				{{ phrase('xa_ams_view_all_upcoming_articles') }}
			</a>
		</div>
		<div style="clear:both;"></div>
	</div>
</xf:if>

<div class="block">
	<div class="block-outer"><xf:trim>
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/article-queue" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
				<xf:contentcheck>

				</xf:contentcheck>
				</div>
			</div>
		</xf:if>

	</xf:trim></div>

	<div class="block-container">
		<xf:macro template="xa_ams_article_queue_macros" name="list_filter_bar"
			arg-filters="{$filters}"
			arg-baseLinkPath="ams/article-queue"
			arg-creatorFilter="{$creatorFilter}" />

		<div class="block-body">
			<xf:if is="$articles is not empty">
				<div class="structItemContainer">
					<xf:foreach loop="$articles" value="$article">
						<xf:macro template="xa_ams_article_queue_macros" name="article_queue_item"
							arg-article="{$article}" 
							arg-category="{$article.Category}" />
					</xf:foreach>
				</div>
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('xa_ams_there_no_articles_matching_your_filters') }}</div>
			<xf:else />
				<div class="block-row">{{ phrase('xa_ams_no_pending_articles') }}</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/article-queue" params="{$filters}"
			wrapperclass="block-outer-main" />
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_article_queue_filters" version_id="2021370" version_string="2.2.13"><![CDATA[<xf:form action="{{ link('ams/article-queue-filters') }}">

	<!--[XF:above_state]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('xa_ams_content_state:') }}
		<div class="u-inputSpacer">
			<xf:select name="state" value="{$filters.state}">
				<xf:option value="">{{ phrase('any') }}</xf:option>
				<xf:option value="draft">{{ phrase('xa_ams_draft') }}</xf:option>
				<xf:option value="awaiting">{{ phrase('xa_ams_awaiting') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<!--[XF:above_title]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('title:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="title" value="{$filters.title}" />
		</div>
	</div>

	<!--[XF:above_prefixes]-->
	<xf:if is="$prefixesGrouped is not empty">
		<div class="menu-row menu-row--separated">
			{{ phrase('prefix:') }}
			<div class="u-inputSpacer">
				<xf:macro template="prefix_macros" name="select"
					arg-prefixes="{$prefixesGrouped}"
					arg-type="ams_article"
					arg-selected="{{ $filters.prefix_id ?: 0 }}"
					arg-name="prefix_id"
					arg-noneLabel="{{ phrase('(any)') }}"
				/>
			</div>
		</div>
	</xf:if>

	<!--[XF:above_created_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('created_by:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="creator" value="{{ $creatorFilter ? $creatorFilter.username : '' }}" ac="single" />
		</div>
	</div>

	<!--[XF:above_last_updated]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('last_updated:') }}
		<div class="u-inputSpacer">
			<xf:select name="last_days" value="{{ $filters.last_days ?: $forum.list_date_limit_days }}">
				<xf:option value="-1">{{ phrase('any_time') }}</xf:option>
				<xf:option value="7">{{ phrase('x_days', {'days': '7'}) }}</xf:option>
				<xf:option value="14">{{ phrase('x_days', {'days': '14'}) }}</xf:option>
				<xf:option value="30">{{ phrase('x_days', {'days': '30'}) }}</xf:option>
				<xf:option value="60">{{ phrase('x_months', {'months': '2'}) }}</xf:option>
				<xf:option value="90">{{ phrase('x_months', {'months': '3'}) }}</xf:option>
				<xf:option value="182">{{ phrase('x_months', {'months': '6'}) }}</xf:option>
				<xf:option value="365">{{ phrase('1_year') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<!--[XF:above_sort_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('sort_by:') }}
		<div class="inputGroup u-inputSpacer">
			<xf:select name="order" value="{{ $filters.order ?: $xf.options.xaAmsListDefaultOrder }}">
				<xf:option value="publish_date">{{ phrase('xa_ams_publish_date') }}</xf:option>
				<xf:option value="last_update">{{ phrase('xa_ams_last_update') }}</xf:option>
				<xf:option value="title">{{ phrase('title') }}</xf:option>
			</xf:select>
			<span class="inputGroup-splitter"></span>
			<xf:select name="direction" value="{{ $filters.direction ?: 'desc' }}">
				<xf:option value="desc">{{ phrase('descending') }}</xf:option>
				<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<div class="menu-footer">
		<span class="menu-footer-controls">
			<xf:button type="submit" class="button--primary">{{ phrase('filter') }}</xf:button>
		</span>
	</div>
	<xf:hiddenval name="apply">1</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_queue_macros" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:macro name="list_filter_bar" arg-filters="!" arg-baseLinkPath="!" arg-creatorFilter="{{ null }}">
	<xf:set var="$dateLimits" value="{{ {
		'-1': phrase('any_time'),
		'7': phrase('x_days', {'days': '7'}),
		'14': phrase('x_days', {'days': '14'}),
		'30': phrase('x_days', {'days': '30'}),
		'60': phrase('x_months', {'months': '2'}),
		'90': phrase('x_months', {'months': '3'}),
		'182': phrase('x_months', {'months': '6'}),
		'365': phrase('1_year')
	} }}" />
	<xf:set var="$sortOrders" value="{{ {
		'last_update': phrase('xa_ams_last_update'),
		'publish_date': phrase('xa_ams_publish_date'),
		'title': phrase('title')
	} }}" />

	<div class="block-filterBar">
		<div class="filterBar">
			<xf:if contentcheck="true">
				<ul class="filterBar-filters">
					<xf:contentcheck>
						<xf:if is="$filters.state">
							<li><a href="{{ link($baseLinkPath, null, $filters|replace('state', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('state:') }}</span>
								<xf:if is="$filters.state == 'draft'">
									{{ phrase('xa_ams_draft') }}
								<xf:elseif is="$filters.state == 'awaiting'" />
									{{ phrase('xa_ams_awaiting') }}
								</xf:if>
							</a></li>
						</xf:if>

						<xf:if is="$filters.title">
							<li><a href="{{ link($baseLinkPath, null, $filters|replace('title', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('title:') }}</span>
								{$filters.title}</a></li>
						</xf:if>

						<xf:if is="$filters.prefix_id">
							<li><a href="{{ link($baseLinkPath, null, $filters|replace('prefix_id', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('prefix:') }}</span>
								{{ prefix_title('ams_article', $filters.prefix_id) }}</a></li>
						</xf:if>

						<xf:if is="$filters.creator_id AND $creatorFilter">
							<li><a href="{{ link($baseLinkPath, null, $filters|replace('creator_id', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('created_by:') }}</span>
								{$creatorFilter.username}</a></li>
						</xf:if>

						<xf:if is="$filters.last_days AND {$dateLimits.{$filters.last_days}}">
							<li><a href="{{ link($baseLinkPath, null, $filters|replace('last_days', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('last_updated:') }}</span>
								{$dateLimits.{$filters.last_days}}</a></li>
						</xf:if>

						<xf:if is="$filters.order AND {$sortOrders.{$filters.order}}">
							<li><a href="{{ link($baseLinkPath, null, $filters|replace({'order': null, 'direction': null})) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('return_to_default_order')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
								{$sortOrders.{$filters.order}}
								<xf:fa icon="{{ $filters.direction == 'asc' ? 'fa-angle-up' : 'fa-angle-down' }}" />
								<span class="u-srOnly"><xf:if is="$filters.direction == 'asc'">{{ phrase('ascending') }}<xf:else />{{ phrase('descending') }}</xf:if></span>
							</a></li>
						</xf:if>
					</xf:contentcheck>
				</ul>
			</xf:if>

			<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
			<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
				data-href="{{ link('ams/article-queue-filters', null, $filters) }}"
				data-load-target=".js-filterMenuBody">
				<div class="menu-content">
					<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
					<div class="js-filterMenuBody">
						<div class="menu-row">{{ phrase('loading...') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="article_queue_item"
	arg-article="!"
	arg-category="!"
	arg-extraInfo="">

	<xf:css src="structured_list.less" />
	<xf:css src="xa_ams.less" />

	<div class="structItem structItem--article {$article.article_state} js-articleQueueItem-{$article.article_id}" data-author="{{ $article.User.username ?: $article.username }}">
		<div class="structItem-cell structItem-cell--icon structItem-cell--iconExpanded structItem-cell--iconAmsCoverImage">
			<div class="structItem-iconContainer">
				<xf:if is="$article.CoverImage">
					<a href="{{ link('ams', $article) }}">
						{{ ams_article_thumbnail($article) }}
					</a>
				<xf:elseif is="$article.Category.content_image_url" />
					<a href="{{ link('ams', $article) }}">
						{{ ams_category_icon($article) }}
					</a>
				<xf:else />
					<xf:avatar user="$article.User" size="m" defaultname="{{ $article.username ?: phrase('deleted_member') }}" />
				</xf:if>
			</div>
		</div>
		<div class="structItem-cell structItem-cell--main structItem-cell--listViewLayout" data-xf-init="touch-proxy">
			<xf:if contentcheck="true">
				<ul class="structItem-statuses">
				<xf:contentcheck>
					<xf:if is="$article.article_state == 'awaiting'">
						<li><span class="label label--smallest label--orange">{{ phrase('xa_ams_awaiting') }}</span></li>
					</xf:if>
					<xf:if is="$article.article_state == 'draft'">
						<li><span class="label label--smallest label--red">{{ phrase('xa_ams_draft') }}</span></li>
					</xf:if>
				</xf:contentcheck>
				</ul>
			</xf:if>

			<div class="structItem-title">
				{{ prefix('ams_article', $article, 'html', '') }} <a href="{{ link('ams', $article) }}" class="" data-tp-primary="on">{$article.title}</a>
			</div>

			<div class="structItem-articleDescription">
				{{ snippet($article.message, 300, {'stripQuote': true}) }}
			</div>

			<div class="structItem-listViewMeta">
				<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--author">
					<dt></dt>
					<dd><xf:username user="$article.User" defaultname="{{ $article.username ?: phrase('deleted_member') }}" /></dd>
				</dl>

				<xf:if is="$article.article_state == 'draft'">
					<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--createdate">
						<dt>{{ phrase('xa_ams_create_date') }}</dt>
						<dd><a href="{{ link('ams', $article) }}" rel="nofollow" class="u-concealed"><xf:date time="{$article.publish_date}" /></a></dd>
					</dl>
				<xf:else />
					<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--delayedpublishdate">
						<dt>{{ phrase('xa_ams_publish_date') }}</dt>
						<dd><a href="{{ link('ams', $article) }}" rel="nofollow" class="u-concealed"><xf:date time="{$article.publish_date}" /></a></dd>
					</dl>
				</xf:if>

				<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--lastUpdate">
					<dt>{{ phrase('last_edited') }}</dt>
					<dd><xf:date time="{$article.edit_date}" /></dd>
				</dl>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_article_queue_upcoming" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:title>{{ phrase('xa_ams_upcoming_articles') }}</xf:title>

<xf:breadcrumb href="{{ link('ams/article-queue') }}">{{ phrase('xa_ams_article_queue') }}</xf:breadcrumb>

<xf:css src="xa_ams.less" />

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:ams/article-queue-upcoming', null, {'page': $page > 1 ? $page : null}) }}" />

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:datalist>
				<xf:datarow rowtype="header">
					<xf:cell width="25%" style="white-space: nowrap;">{{ phrase('xa_ams_upcoming_publish_date') }}</xf:cell>
					<xf:cell>{{ phrase('xa_ams_article') }}</xf:cell>
				</xf:datarow>

				<xf:foreach loop="$upcomingArticles" value="$upcomingArticle">
					<xf:datarow rowclass="dataList-row--parentCustom">
						<xf:cell style="white-space: nowrap;">
							<time class="publish-date"><xf:date time="{$upcomingArticle.publish_date}" data-full-date="true" /></time>
						</xf:cell>
						<xf:cell>
							{{ prefix('ams_article', $upcomingArticle, 'html', '') }} <a href="{{ link('ams', $upcomingArticle) }}" class="" data-tp-primary="on">{$upcomingArticle.title}</a>
						</xf:cell>
					</xf:datarow>
				</xf:foreach>
			</xf:datalist>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_article_rate" version_id="2020270" version_string="2.2.2"><![CDATA[<xf:title>{{ $article.Category.content_term ?  phrase('xa_ams_rate_this_x', {'term': $article.Category.content_term}) : phrase('xa_ams_rate_this_article') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/rate', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="rating_macros" name="rating" />

			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
						arg-type="ams_reviews"
						arg-set="{$review.custom_fields}"
						arg-group="top"
						arg-editMode="{{ $article.getFieldEditMode() }}"
						arg-onlyInclude="{$category.review_field_cache}" />
				</xf:contentcheck>
			</xf:if>
			
			<xf:if is="$category.allow_pros_cons">
				<xf:textarearow name="pros" rows="2" autosize="true"
					data-xf-init="min-length"
					data-min-length="{$xf.options.xa_amsMinProsLength}"
					data-allow-empty="true"
					data-toggle-target="#js-articleProsLength"
					maxlength="{$xf.options.xa_amsMaxProsLength}"
					label="{{ phrase('xa_ams_pros') }}">
				</xf:textarearow>

				<xf:textarearow name="cons" rows="2" autosize="true"
					data-xf-init="min-length"
					data-min-length="{$xf.options.xaAmsMinConsLength}"
					data-allow-empty="true"
					data-toggle-target="#js-articleConsLength"
					maxlength="{$xf.options.xaAmsMaxConsLength}"
					label="{{ phrase('xa_ams_cons') }}">
				</xf:textarearow>
			</xf:if>
			
			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
						arg-type="ams_reviews"
						arg-set="{$review.custom_fields}"
						arg-group="middle"
						arg-editMode="{{ $article.getFieldEditMode() }}"
						arg-onlyInclude="{$category.review_field_cache}" />
				</xf:contentcheck>
			</xf:if>

			<div data-xf-init="attachment-manager">
				<xf:editorrow name="message" value="{$review.message}" data-min-height="100"
					attachments="{$attachmentData.attachments}"
					label="{{ phrase('review') }}"
					hint="{{ $category.require_review ? phrase('required') : '' }}"
					explain="{{ phrase('xa_ams_explain_why_youre_giving_this_rating') }}" 
					data-preview-url="{{ link('ams/review-preview', $article) }}" />

				<xf:formrow>
					<xf:if is="$attachmentData">
						<xf:macro template="helper_attach_upload" name="upload_block" arg-attachmentData="{$attachmentData}" />
					</xf:if>
				</xf:formrow>
			</div>

			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
						arg-type="ams_reviews"
						arg-set="{$review.custom_fields}"
						arg-group="bottom"
						arg-editMode="{{ $article.getFieldEditMode() }}"
						arg-onlyInclude="{$category.review_field_cache}" />
				</xf:contentcheck>
			</xf:if>

			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
						arg-type="ams_reviews"
						arg-set="{$review.custom_fields}"
						arg-group="self_place"
						arg-editMode="{{ $article.getFieldEditMode() }}"
						arg-onlyInclude="{$category.review_field_cache}" />
				</xf:contentcheck>
			</xf:if>

			<xf:if is="$category.allow_anon_reviews && ($article.canReviewAnon() OR $article.canReviewAnonPreReg())">
				<xf:checkboxrow>
					<xf:option name="is_anonymous"
						label="{{ phrase('xa_ams_submit_review_anonymously') }}"
						hint="{{ phrase('xa_ams_if_selected_only_staff_will_be_able_to_see_who_wrote_this_review') }}" />
				</xf:checkboxrow>
			</xf:if>
		</div>

		<xf:submitrow submit="{{ phrase('submit_rating') }}" icon="rate" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_ratings" version_id="2010370" version_string="2.1.3"><![CDATA[<xf:title page="{$page}">{{ prefix('ams_article', $article, 'escaped') }}{$article.title} - {{ phrase('xa_ams_ratings') }}</xf:title>

<xf:wrap template="xa_ams_article_wrapper">
	<xf:set var="$pageSelected" value="ratings" />
</xf:wrap>

<xf:if is="$canInlineModReviews">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block"
	data-xf-init="{{ $canInlineModReviews ? 'inline-mod' : '' }}"
	data-type="ams_rating"
	data-href="{{ link('inline-mod') }}">
	
	<xf:if contentcheck="true">
		<div class="block-outer">
			<div class="block-outer-opposite">
				<xf:contentcheck>
					<xf:macro template="xa_ams_article_wrapper_macros" name="action_buttons" arg-article="{$article}" arg-showRateButton="{{false}}" arg-canInlineMod="{$canInlineModReviews}" />
				</xf:contentcheck>
			</div>
		</div>
	</xf:if>

	<div class="block-container">
		<div class="block-body">
			<xf:foreach loop="$ratings" value="$rating">
				<xf:macro template="xa_ams_review_macros" name="rating"
					arg-rating="{$rating}" 	  
					arg-article="{$article}" />
			</xf:foreach>
		</div>
	</div>
	<xf:if contentcheck="true">
		<div class="block-outer block-outer--after">
			<xf:contentcheck>
				<xf:pagenav
					page="{$page}" perpage="{$perPage}" total="{$total}"
					link="ams/ratings" data="{$article}"
					wrapperclass="block-outer-main" />
			</xf:contentcheck>
		</div>
	</xf:if>
</div>]]></template>
  <template type="public" title="xa_ams_article_reassign" version_id="2022870" version_string="2.2.28"><![CDATA[<xf:title>{{ phrase('xa_ams_reassign_article') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/reassign', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="username" ac="single" maxlength="{{ max_length($xf.visitor, 'username') }}"
				label="{{ phrase('xa_ams_new_owner') }}" />

			<xf:if is="$article.page_count">
				<xf:checkboxrow>
					<xf:option name="reassign_pages" selected="{{ true }}"
						label="{{ phrase('xa_ams_reassign_pages') }}">
					</xf:option>
				</xf:checkboxrow>
			</xf:if>
			
			<xf:checkboxrow>
				<xf:option name="alert" selected="{{ true }}"
					label="{{ phrase('xa_ams_notify_current_and_new_owners_of_this_action') }} {{ phrase('reason:') }}">

					<xf:textbox name="alert_reason" placeholder="{{ phrase('optional') }}" maxlength="250" />
				</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_remove_from_series" version_id="2022170" version_string="2.2.21"><![CDATA[<xf:title>{{ phrase('xa_ams_remove_article_from_series') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/remove-from-series', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('xa_ams_you_sure_you_want_to_remove_article_from_series') }}
				<strong><a href="{{ link('ams/series', $series) }}">{$series.title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('xa_ams_remove_article_from_series') }}" rowtype="simple" />
	</div>
	<xf:redirect />
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_reply_bans" version_id="2000052" version_string="2.0.0 Release Candidate 2"><![CDATA[<xf:title>{{ phrase('manage_reply_bans:') }} {{ prefix('ams_article', $article, 'escaped') }}{$article.title}</xf:title>
<xf:h1>{{ phrase('manage_reply_bans:') }} {{ prefix('ams_article', $article) }}{$article.title}</xf:h1>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/reply-bans', $article) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$bans is not empty">
				<xf:datalist data-xf-init="responsive-data-list">
					<xf:datarow rowtype="header">
						<xf:cell>{{ phrase('user') }}</xf:cell>
						<xf:cell>{{ phrase('reason') }}</xf:cell>
						<xf:cell>{{ phrase('end_date') }}</xf:cell>
						<xf:cell class="dataList-cell--min">{{ phrase('delete') }}</xf:cell>
					</xf:datarow>
					<xf:foreach loop="$bans" value="$ban">
						<xf:datarow rowclass="dataList-row--noHover">
							<xf:cell><xf:username user="$ban.User" /></xf:cell>
							<xf:cell>
								<xf:if is="$ban.reason">
									{$ban.reason}
								<xf:else />
									{{ phrase('n_a') }}
								</xf:if>
							</xf:cell>
							<xf:cell>
								<xf:if is="$ban.expiry_date">
									<xf:date time="{$ban.expiry_date}" />
								<xf:else />
									{{ phrase('permanent') }}
								</xf:if>
							</xf:cell>
							<xf:toggle name="delete[{$ban.user_id}]" class="dataList-cell--separated dataList-cell--alt" />
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<h2 class="block-formSectionHeader">{{ phrase('new_reply_ban') }}</h2>
			<div class="block-body">
			</xf:if>

			<xf:textboxrow name="username" ac="single"
				maxlength="{{ max_length($xf.visitor, 'username') }}"
				label="{{ phrase('user_name') }}"
				explain="{{ phrase('xa_ams_this_user_still_able_to_view_article_not_reply') }}" />

			<xf:radiorow name="ban_length"
				label="{{ phrase('ban_length') }}">

				<xf:option value="permanent"
					label="{{ phrase('permanent') }}" />

				<xf:option value="temporary" selected="true"
					label="{{ phrase('temporary:') }}">

					<xf:dependent>
						<div class="inputGroup inputGroup--auto">
							<xf:textbox name="ban_length_value" value="7" />
							<span class="inputGroup-splitter"></span>
							<xf:select name="ban_length_unit">
								<xf:option value="hours">{{ phrase('hours') }}</xf:option>
								<xf:option value="days" selected="true">{{ phrase('days') }}</xf:option>
								<xf:option value="weeks">{{ phrase('weeks') }}</xf:option>
								<xf:option value="months">{{ phrase('months') }}</xf:option>
							</xf:select>
						</div>
					</xf:dependent>
				</xf:option>
			</xf:radiorow>

			<xf:textboxrow name="reason" maxlength="{{ max_length('XenAddons\AMS:ArticleReplyBan', 'reason') }}"
				label="{{ phrase('reason') }}"
				explain="{{ phrase('this_will_be_shown_to_user_if_you_choose_to_notify_them') }}" />

			<xf:checkboxrow>
				<xf:option name="send_alert">{{ phrase('notify_user_of_this_action') }}</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_reviews" version_id="2022570" version_string="2.2.25"><![CDATA[<xf:title page="{$page}">{{ prefix('ams_article', $article, 'escaped') }}{{ $article.meta_title ? $article.meta_title : $article.title }} - {{ phrase('xa_ams_reviews') }}</xf:title>

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:ams/reviews', $article, {'page': $page > 1 ? $page : null}) }}" />

<xf:wrap template="xa_ams_article_wrapper">
	<xf:set var="$pageSelected" value="reviews" />
</xf:wrap>

<xf:macro template="lightbox_macros" name="setup" 
	arg-canViewAttachments="{{ $article.canViewReviewAttachments() }}" />

<xf:if is="$canInlineModReviews">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<xf:set var="$sortOrders" value="{{ {
	'rating_date': phrase('date'),
	'vote_score': phrase('xa_ams_most_helpful'),
	'rating': phrase('rating')
} }}" />

<div class="block block--messages"
	data-xf-init="{{ $canInlineModReviews ? 'inline-mod' : '' }}"
	data-type="ams_rating"
	data-href="{{ link('inline-mod') }}">

	<xf:macro name="ratings_status" arg-content="{$article}" arg-wrapperClass="block-outer" />
	
	<xf:if contentcheck="true">
		<div class="block-outer">
			<div class="block-outer-opposite">
				<xf:contentcheck>
					<xf:macro template="xa_ams_article_wrapper_macros" name="action_buttons" 
						arg-article="{$article}" 
						arg-showRateButton="true" 
						arg-canInlineMod="{$canInlineModReviews}" />
				</xf:contentcheck>
			</div>
		</div>
	</xf:if>

	<div class="block-container"
		data-xf-init="lightbox"
		data-lb-id="article-{$article.article_id}"
		data-lb-universal="{$xf.options.lightBoxUniversal}">

		<div class="block-tabHeader tabs">
			<div class="hScroller" data-xf-init="h-scroller">
				<span class="hScroller-scroll">
					<!--[XF:review_tabs:start]-->
					<a href="{{ link('ams/reviews', $article, $reviewTabs.latest.filters) }}" class="tabs-tab {{ $reviewTabs.latest.selected ? 'is-active' : '' }}">{{ phrase('latest') }}</a>
					<xf:if is="$article.Category.review_voting">
						<a href="{{ link('ams/reviews', $article, $reviewTabs.helpful.filters) }}" class="tabs-tab {{ $reviewTabs.helpful.selected ? 'is-active' : '' }}">{{ phrase('xa_ams_most_helpful') }}</a>
					</xf:if>
					<a href="{{ link('ams/reviews', $article, $reviewTabs.rating.filters) }}" class="tabs-tab {{ $reviewTabs.rating.selected ? 'is-active' : '' }}">{{ phrase('rating') }}</a>
					<!--[XF:review_tabs:end]-->
				</span>
			</div>

			<div class="tabs-extra tabs-extra--minor">
				<a class="menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
				<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
					data-href="{{ link('ams/reviews/filters', $article, $filters) }}"
					data-load-target=".js-filterMenuBody">
					<div class="menu-content">
						<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
						<div class="js-filterMenuBody">
							<div class="menu-row">{{ phrase('loading...') }}</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<xf:if contentcheck="true">
			<div class="block-filterBar">
				<div class="filterBar">
					<ul class="filterBar-filters">
					<xf:contentcheck>
						<xf:if is="$filters.rating">
							<li><a href="{{ link('ams/reviews', $article, $filters|replace({'rating': null})) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('rating:') }}</span>
								{{ phrase('x_stars', {'rating': $filters.rating}) }}
							</a></li>
						</xf:if>
						
						<xf:if is="$filters.term">
							<li><a href="{{ link('ams/reviews', $article, $filters|replace('term', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('xa_ams_mentions:') }}</span>
								{$filters.term}</a></li>
						</xf:if>						
						
						<xf:if is="$filters.order AND {$sortOrders.{$filters.order}}">
							<xf:if is="
								!$reviewTabs.latest.selected
								AND !$reviewTabs.helpful.selected
								AND !$reviewTabs.rating.selected
							">
								<li><a href="{{ link('ams/reviews', $article, $filters|replace({'order': null, 'direction': null})) }}"
									class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('return_to_default_order')|for_attr }}">
									<span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
									{$sortOrders.{$filters.order}}
									<xf:fa icon="{{ $filters.direction == 'asc' ? 'fa-angle-up' : 'fa-angle-down' }}" />
									<span class="u-srOnly"><xf:if is="$filters.direction == 'asc'">{{ phrase('ascending') }}<xf:else />{{ phrase('descending') }}</xf:if></span>
								</a></li>
							</xf:if>
						</xf:if>
					</xf:contentcheck>
					</ul>
				</div>
			</div>
		</xf:if>

		<div class="block-body">
			<xf:foreach loop="$reviews" value="$review">
				<xf:macro template="xa_ams_review_macros" name="review"
					arg-review="{$review}"
					arg-article="{$article}" />
			<xf:else />
				<xf:if is="$filters">
					<div class="block-row">
						{{ phrase('xa_ams_there_no_reviews_matching_your_filters') }}
					</div>
				</xf:if>
			</xf:foreach>
		</div>
	</div>
	<xf:if contentcheck="true">
		<div class="block-outer block-outer--after">
			<xf:contentcheck>
				<xf:pagenav
					page="{$page}" perpage="{$perPage}" total="{$total}"
					link="ams/reviews" data="{$article}"
					wrapperclass="block-outer-main" />
				<xf:showignored wrapperclass="block-outer-opposite" />
			</xf:contentcheck>
		</div>
	</xf:if>
	
	<xf:macro name="ratings_status" 
		arg-content="{$article}" 
		arg-wrapperClass="block-outer block-outer--after" />	
</div>

<xf:macro name="ratings_status" 
	arg-content="!" 
	arg-wrapperClass="">

	<xf:if contentcheck="true">
		<div class="{$wrapperClass}">
			<dl class="blockStatus">
				<dt>{{ phrase('status') }}</dt>
				<xf:contentcheck>
					<xf:if is="!$content.ratings_open">
						<dd class="blockStatus-message blockStatus-message--locked">
							{{ phrase('xa_ams_not_open_for_further_reviews') }}
						</dd>
					</xf:if>
				</xf:contentcheck>
			</dl>
		</div>
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_article_set_cover_image" version_id="2022770" version_string="2.2.27"><![CDATA[<xf:title>{{ phrase('xa_ams_set_cover_image') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:css src="attachments.less" />
<xf:css src="xa_ams.less" />

<xf:form action="{{ link('ams/set-cover-image', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<div class="block-row">
				<ul class="attachmentList amsSetCoverImage-attachments">
					<xf:foreach loop="$article.Attachments" value="$attachment">
						<xf:if is="$attachment.has_thumbnail">
							<li class="attachment">
								<div class="attachment-icon attachment-icon--img">
									<a class="avatar NoOverlay"><img width="48" height="48" border="0" src="{$attachment.thumbnail_url}" alt="{$attachment.filename}" /></a>
								</div>
								<div class="attachment-name" style="padding-top: 5px;">
									<span class="attachment-select"><input type="radio" name="attachment_id" value="{$attachment.attachment_id}" {{ $article.cover_image_id == $attachment.attachment_id ? "checked" : "" }} /></span>
								</div>
							</li>
						</xf:if>
					</xf:foreach>
				</ul>
			</div>

			<div class="block-row">
				<xf:checkbox>
					<xf:option name="cover_image_above_article" data-hide="true"
						label="{{ phrase('xa_ams_display_cover_image_above_article') }}"
						hint="{{ phrase('xa_ams_display_cover_image_above_article_explain') }}"
						checked="{{ $article.cover_image_above_article }}">

						<xf:dependent>
							<xf:textarearow name="cover_image_caption" value="{$article.cover_image_caption_}"
								maxlength="{{ max_length($article, 'cover_image_caption') }}"
								label="{{ phrase('xa_ams_cover_image_caption') }}"
								rowtype="fullWidth"
								hint="{{ phrase('optional') }}"
								explain="{{ phrase('xa_ams_cover_image_caption_explain') }}" />
						</xf:dependent>
					</xf:option>

				</xf:checkbox>
			</div>
		</div>

		<xf:submitrow icon="save" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_tags" version_id="2010870" version_string="2.1.8"><![CDATA[<xf:title>{{ phrase('edit_tags') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:macro template="tag_macros" name="edit_form"
	arg-action="{{ link('ams/tags', $article) }}"
	arg-uneditableTags="{$uneditableTags}"
	arg-editableTags="{$editableTags}"
	arg-minTags="{$category.min_tags}" 
	arg-tagList="tagList--article-{$article.article_id}" />]]></template>
  <template type="public" title="xa_ams_article_tags_list" version_id="2010870" version_string="2.1.8"><![CDATA[<xf:macro template="tag_macros" name="list"
	arg-tags="{$article.tags}"
	arg-tagList="tagList--article-{$article.article_id}"
	arg-editLink="{{ $article.canEditTags() ? link('ams/tags', $article) : '' }}" />]]></template>
  <template type="public" title="xa_ams_article_undelete" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_undelete_article') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/undelete', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('please_confirm_that_you_want_to_undelete_following:') }}
				<strong><a href="{{ link('ams', $article) }}">{$article.title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('undelete') }}" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_view" version_id="2022770" version_string="2.2.27"><![CDATA[<xf:title page="{$page}">{{ prefix('ams_article', $article, 'escaped') }}{{ $article.meta_title ? $article.meta_title : $article.title }}</xf:title>

<xf:if is="!$article.isSearchEngineIndexable()">
	<xf:head option="metaNoindex"><meta name="robots" content="noindex" /></xf:head>
</xf:if>

<xf:if is="$article.meta_description">
	<xf:set var="$descSnippet" value="{{ snippet($article.meta_description, 250, {'stripBbCode': true}) }}" />
<xf:elseif is="$article.description" />
	<xf:set var="$descSnippet" value="{{ snippet($article.description, 250, {'stripBbCode': true}) }}" />
<xf:else />
	<xf:set var="$descSnippet" value="{{ snippet($article.message, 250, {'stripBbCode': true}) }}" />
</xf:if>

<xf:macro template="metadata_macros" name="metadata"
	arg-title="{{ $article.og_title ? $article.og_title : ($article.meta_title ? $article.meta_title : $article.title) }}"		  
	arg-description="{$descSnippet}"
	arg-type="article"
	arg-shareUrl="{{ link('canonical:ams', $article) }}"
	arg-canonicalUrl="{{ link('canonical:ams', $article, {'page': $page > 1 ? $page : null}) }}"
	arg-imageUrl="{{ $article.CoverImage ? link('canonical:ams/cover-image', $article) : ($article.Category.content_image_url ? base_url({$article.Category.content_image_url}, true) : '') }}"
	arg-twitterCard="summary_large_image" />

<xf:page option="ldJsonHtml">
    <xf:extension name="structured_data_extra_params" value="{{ [] }}" />
    <xf:extension name="structured_data">
        <xf:set var="$ldJson"
            value="{{ $article.getLdStructuredData($page, extension_value('structured_data_extra_params')) }}"
        />
        <xf:if is="$ldJson">
            <script type="application/ld+json">
                {$ldJson|json(true)|raw}
            </script>
        </xf:if>
    </xf:extension>
</xf:page>

<xf:wrap template="xa_ams_article_wrapper">
	<xf:set var="$pageSelected" value="overview" />
</xf:wrap>

<xf:macro template="lightbox_macros" name="setup" arg-canViewAttachments="{{ $article.canViewAttachments() }}" />

<div class="block">
	<xf:if contentcheck="true">
		<div class="block-outer">
			<div class="block-outer-opposite">
			<xf:contentcheck>
				<xf:macro template="xa_ams_article_wrapper_macros" name="action_buttons" 
					arg-article="{$article}" 
					arg-seriesToc="{$seriesToc}" 
					arg-articlePages="{$articlePages}" 
					arg-isFullView="{$isFullView}" 
					arg-showRateButton="{{ true }}" 
					arg-showAddPageButton="{{ true }}"
					arg-showAddToSeriesButton="{{ true }}" />				
			</xf:contentcheck>
			</div>
		</div>
	</xf:if>

	<xf:if is="$article.CoverImage && $article.cover_image_above_article">
		<div class="amsCoverImage {{ $article.cover_image_caption ? 'has-caption' : '' }}">
			<div class="amsCoverImage-container">
				<div class="amsCoverImage-container-image js-coverImageContainerImage">
					<xf:if is="$article.canViewAttachments()">					
						<img src="{{ link('ams/cover-image', $article) }}" alt="{$article.CoverImage.filename}" class="js-articleCoverImage" />
					<xf:else />
						<div style="text-align: center;">
							{{ ams_article_thumbnail($article) }}
						</div>
					</xf:if>						
				</div>
			</div>
		</div>

		<xf:if is="$article.cover_image_caption">
			<div class="amsCoverImage-caption">
				{{ snippet($article.cover_image_caption, 500, {'stripBbCode': true}) }}
			</div>
		</xf:if>
	</xf:if>
	
	<xf:if is="$poll && !$isFullView">
		<xf:macro template="poll_macros" name="poll_block" arg-poll="{$poll}" />
	</xf:if>	
	
	<xf:widgetpos id="xa_ams_article_view_above_article" context-article="{$article}" />
	
	<div class="block-container">
		<div class="block-body lbContainer js-articleBody"
			data-xf-init="lightbox"
			data-lb-id="article-{$article.article_id}"
			data-lb-caption-desc="{{ $article.User ? $article.User.username : $article.username }} &middot; {{ date_time($article.publish_date) }}"
			id="js-articleBody-{$article.article_id}">

			<div class="articleBody">
				<article class="articleBody-main js-lbContainer">
					
					<xf:ad position="ams_article_view_above_article" arg-article="{$article}" />
					
					<xf:if is="!$trimmedArticle">
						<xf:macro template="custom_fields_macros" name="custom_fields_view"
							arg-type="ams_articles"
							arg-group="above_article"
							arg-onlyInclude="{$category.field_cache}"
							arg-set="{$article.custom_fields}"
							arg-wrapperClass="articleBody-fields articleBody-fields--before" />
					</xf:if>

					<xf:if is="$trimmedArticle">
						{{ bb_code($trimmedArticle, 'ams_article', $article) }}

						<div class="block-rowMessage block-rowMessage--important">
							{{ $article.Category.content_term ?  phrase('xa_ams_do_not_have_permission_to_view_full_content_of_this_x', {'term': $article.Category.content_term|to_lower}) : phrase('xa_ams_do_not_have_permission_to_view_full_content_of_this_article') }}
							<xf:if is="!$xf.visitor.user_id">
								<a href="{{ link('login') }}" data-xf-click="overlay">{{ phrase('log_in_or_register_now') }}</a>
							</xf:if>
						</div>
					<xf:elseif is="$isFullView" />

						<xf:if is="$article.overview_page_title">
							<h2>{$article.overview_page_title}</h2>
						</xf:if>

						{{ bb_code($article.message, 'ams_article', $article) }}

						<xf:foreach loop="$articlePages" value="$_article_page">

							<h2>{$_article_page.title}</h2>

							<xf:if is="{$_article_page.display_byline}">
								<div class="message-attribution message-attribution-amsPageMeta">
									<ul class="listInline listInline--bullet">
										<li>
											<xf:fa icon="fa-user" title="{{ phrase('author')|for_attr }}" />
											<span class="u-srOnly">{{ phrase('author') }}</span>
											<xf:if is="$_article_page.User.Profile.xa_ams_author_name">
												<xf:username user="{'user_id':{$_article_page.user_id}, 'username':{$_article_page.User.Profile.xa_ams_author_name}}" defaultname="{$_article_page.User.Profile.xa_ams_author_name}" class="u-concealed" />
											<xf:else />
												<xf:username user="{$_article_page.User}" defaultname="{$_article_page.username}" class="u-concealed" />
											</xf:if>
										</li>
										<li>
											<xf:fa icon="fa-clock" title="{{ phrase('xa_ams_publish_date')|for_attr }}" />
											<span class="u-srOnly">{{ phrase('xa_ams_publish_date') }}</span>

											<a href="{{ link('ams/page', $_article_page) }}" class="u-concealed"><xf:date time="{$_article_page.create_date}" /></a>
										</li>
	

										<xf:if is="$_article_page.edit_date > $_article_page.create_date">								
											<li>
												<xf:fa icon="fa-clock" title="{{ phrase('xa_ams_last_update')|for_attr }}" />
												<span class="u-concealed">{{ phrase('updated') }}</span>

												<xf:date time="{$_article_page.edit_date}" />
											</li>
										</xf:if>
									</ul>
								</div>
							</xf:if>

							<xf:if is="$_article_page.CoverImage && $_article_page.cover_image_above_page">
								<div class="amsCoverImage {{ $_article_page.cover_image_caption ? 'has-caption' : '' }}">
									<div class="amsCoverImage-container">
										<div class="amsCoverImage-container-image js-coverImageContainerImage">
											<img src="{{ link('ams/page/cover-image', $_article_page) }}" alt="{$_article_page.CoverImage.filename}" class="js-articleCoverImage" />
										</div>
									</div>
								</div>

								<xf:if is="$_article_page.cover_image_caption">
									<div class="amsCoverImage-caption">
										{{ snippet($_article_page.cover_image_caption, 500, {'stripBbCode': true}) }}
									</div>
								</xf:if>
							</xf:if>

							{{ bb_code($_article_page.message, 'ams_page', $_article_page) }}
						</xf:foreach>
					<xf:else />
						<xf:if is="$article.page_count && $article.overview_page_title">
							<h2>{$article.overview_page_title}</h2>
						</xf:if>

						{{ bb_code($article.message, 'ams_article', $article) }}
					</xf:if>

					<xf:if is="!$trimmedArticle">
						<xf:macro template="custom_fields_macros" name="custom_fields_view"
							arg-type="ams_articles"
							arg-group="below_article"
							arg-onlyInclude="{$category.field_cache}"
							arg-set="{$article.custom_fields}"
							arg-wrapperClass="articleBody-fields articleBody-fields--after" />
					</xf:if>
					
					<xf:ad position="ams_article_view_below_article" arg-article="{$article}" />					

					<xf:if is="$nextPage || ($article->isInSeries(true) && $seriesToc)">
						<div style="padding-top: 10px;">
							<xf:if is="$nextPage">
								<dl class="blockStatus blockStatus--info blockStatus--standalone">
									<dt></dt>
									<dd class="blockStatus-message amsNextPage">
										<span class="">{{ phrase('xa_ams_next_page') }}:</span>
										<a href="{{ link('ams/page', $nextPage) }}" class="" title="{$nextPage.title}">{$nextPage.title}</a>
									</dd>
								</dl>
							</xf:if>

							<xf:if is="$article->isInSeries(true) && $seriesToc">
								<xf:if is="$nextSeriesPart">
									<dl class="blockStatus blockStatus--info blockStatus--standalone">
										<dt></dt>
										<dd class="blockStatus-message amsNextArticle">
											<span class="">{{ phrase('xa_ams_next_article_in_the_series_x:', {'title': $nextSeriesPart.Series.title}) }}</span>
											<a href="{{ link('ams', $nextSeriesPart.Article) }}" class="" title="{$nextSeriesPart.Article.title}">
												{$nextSeriesPart.Article.title}</a>
										</dd>
									</dl>
								</xf:if>

								<xf:if is="$previousSeriesPart">
									<dl class="blockStatus blockStatus--info blockStatus--standalone">
										<dt></dt>
										<dd class="blockStatus-message amsPreviousArticle">
											<span class="">{{ phrase('xa_ams_previous_article_in_the_series_x:', {'title': $previousSeriesPart.Series.title}) }}</span>
											<a href="{{ link('ams', $previousSeriesPart.Article) }}" class="" title="{$previousSeriesPart.Article.title}">
												 {$previousSeriesPart.Article.title}</a>
										</dd>
									</dl>
								</xf:if>
							</xf:if>
						</div>				
					</xf:if>

					<xf:if is="$xf.options.xaAmsGalleryLocation == 'below_article' AND $article.attach_count">
						<xf:if contentcheck="true">
							<xf:css src="attachments.less" />
							<ul class="attachmentList articleBody-attachments">
								<xf:contentcheck>
									<xf:foreach loop="$article.Attachments" value="$attachment" if="$attachment.has_thumbnail AND !$article.isAttachmentEmbedded($attachment)">
										<xf:if is="$article.cover_image_above_article AND $attachment.attachment_id == $article.cover_image_id">
											<xf:comment>do nothing as we don't want the cover iamge displaying both above the article and as a thumbnail in the gallery</xf:comment>
										<xf:else />
											<xf:macro template="attachment_macros" name="attachment_list_item"
												arg-attachment="{$attachment}"
												arg-canView="{{ $article.canViewAttachments() }}" />
										</xf:if>
									</xf:foreach>
								</xf:contentcheck>
							</ul>
						</xf:if>
					<xf:else />
						<xf:if contentcheck="true">
							<xf:css src="attachments.less" />
							<ul class="attachmentList articleBody-attachments" style="display:none;">
								<xf:contentcheck>
									<xf:foreach loop="$article.Attachments" value="$attachment" if="$attachment.has_thumbnail AND !$article.isAttachmentEmbedded($attachment)">
										<xf:macro template="attachment_macros" name="attachment_list_item"
											arg-attachment="{$attachment}"
											arg-canView="{{ $article.canViewAttachments() }}" />
									</xf:foreach>
								</xf:contentcheck>
							</ul>
						</xf:if>
					</xf:if>

					<xf:if is="$xf.options.xaAmsFilesLocation == 'below_article' AND $article.attach_count">
						<xf:if contentcheck="true">
							<xf:css src="attachments.less" />
							<ul class="attachmentList articleBody-attachments">
								<xf:contentcheck>
									<xf:foreach loop="$article.Attachments" value="$attachment">
										<xf:if is="$attachment.has_thumbnail || $attachment.is_video">
											<xf:comment>do nothing as we don't want to display images or video here</xf:comment>
										<xf:else />
											<xf:macro template="attachment_macros" name="attachment_list_item"
												arg-attachment="{$attachment}"
												arg-canView="{{ $article.canViewAttachments() }}" />
										</xf:if>
									</xf:foreach>
								</xf:contentcheck>
							</ul>
						</xf:if>
					</xf:if>

					<xf:if contentcheck="true">
						<div class="actionBar">
							<xf:contentcheck>
								<xf:if contentcheck="true">
									<div class="actionBar-set actionBar-set--external">
									<xf:contentcheck>
										<xf:react content="{$article}" link="ams/react" list="< .js-articleBody | .js-reactionsList" />
									</xf:contentcheck>
									</div>
								</xf:if>

								<xf:if contentcheck="true">
									<div class="actionBar-set actionBar-set--internal">
									<xf:contentcheck>
										<xf:if is="$article.canReport()">
											<a href="{{ link('ams/report', $article) }}"
												class="actionBar-action actionBar-action--report" 
												data-xf-click="overlay">{{ phrase('report_verb') }}</a>
										</xf:if>

										<xf:set var="$hasActionBarMenu" value="{{ false }}" />

										<xf:if is="$article.canEdit()">
											<a href="{{ link('ams/edit', $article) }}"
												class="actionBar-action actionBar-action--edit actionBar-action--menuItem">{{ phrase('edit') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$article.edit_count AND $article.canViewHistory()">
											<a href="{{ link('ams/history', $article) }}" 
												class="actionBar-action actionBar-action--history actionBar-action--menuItem"
												data-xf-click="toggle"
												data-target="#js-articleBody-{$article.article_id} .js-historyTarget"
												data-menu-closer="true">{{ phrase('history') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$article.canDelete('soft')">
											<a href="{{ link('ams/delete', $article) }}"
												class="actionBar-action actionBar-action--delete actionBar-action--menuItem"
												data-xf-click="overlay">{{ phrase('delete') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$xf.visitor.canViewIps() && $article.ip_id">
											<a href="{{ link('ams/ip', $article) }}"
												class="actionBar-action actionBar-action--ip actionBar-action--menuItem"
												data-xf-click="overlay">{{ phrase('ip') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$article.canWarn()">
											<a href="{{ link('ams/warn', $article) }}"
												class="actionBar-action actionBar-action--warn actionBar-action--menuItem">{{ phrase('warn') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										<xf:elseif is="$article.warning_id && $xf.visitor.canViewWarnings()" />
											<a href="{{ link('warnings', {'warning_id': $article.warning_id}) }}"
												class="actionBar-action actionBar-action--warn actionBar-action--menuItem"
												data-xf-click="overlay">{{ phrase('view_warning') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$hasActionBarMenu">
											<a class="actionBar-action actionBar-action--menuTrigger"
												data-xf-click="menu"
												title="{{ phrase('more_options') }}"
												role="button"
												tabindex="0"
												aria-expanded="false"
												aria-haspopup="true">&#8226;&#8226;&#8226;</a>

											<div class="menu" data-menu="menu" aria-hidden="true" data-menu-builder="actionBar">
												<div class="menu-content">
													<h4 class="menu-header">{{ phrase('more_options') }}</h4>
													<div class="js-menuBuilderTarget"></div>
												</div>
											</div>
										</xf:if>
									</xf:contentcheck>
									</div>
								</xf:if>
							</xf:contentcheck>
						</div>
					</xf:if>

					<div class="reactionsBar js-reactionsList {{ $article.reactions ? 'is-active' : '' }}">
						<xf:reactions content="{$article}" link="ams/reactions" />
					</div>

					<div class="js-historyTarget toggleTarget" data-href="trigger-href"></div>
				</article>
			</div>
		</div>
	</div>
	
	<xf:widgetpos id="xa_ams_article_view_below_article" context-article="{$article}" />
</div>

<xf:if contentcheck="true">
	<div class="block">
		<div class="blockMessage">			
			<h4 class="block-textHeader">{{ phrase ('xa_ams_original_source') }}</h4>
			<ul class="listInline listInline--bullet">
			<xf:contentcheck>
				<xf:if is="$article.original_source.os_article_author"><li>{$article.original_source.os_article_author}</li></xf:if>  
				<xf:if is="$article.original_source.os_article_date"><li><xf:date time="$article.original_source.os_article_date" /></li></xf:if>
				<xf:if is="$article.original_source.os_article_title">
					<xf:if is="$article.original_source.os_source_url">	
						<li><a href="{$article.original_source.os_source_url}" target="_blank">{$article.original_source.os_article_title}</a></li>
					<xf:else />
						<li>{$article.original_source.os_article_title}</li>
					</xf:if>
				</xf:if>  
				<xf:if is="$article.original_source.os_source_name">
					<xf:if is="$article.original_source.os_source_url">	
						<li><a href="{$article.original_source.os_source_url}" target="_blank">{$article.original_source.os_source_name}</a></li>
					<xf:else />
						<li>{$article.original_source.os_source_name}</li>
					</xf:if>
				</xf:if>  
			</xf:contentcheck>
			</ul>
		</div>
	</div>	
</xf:if>

<xf:if is="$article.location && $article.canViewArticleMap() && $category.allow_location && $xf.options.xaAmsLocationDisplayType == 'map_below_content' && $xf.options.xaAmsGoogleMapsEmbedApiKey">
	<div class="block">
		<div class="block-container">
			<h3 class="block-header">{{ phrase('location') }}</h3>
			<div class="block-body block-row contentRow-lesser">
				<p class="mapLocationName"><a href="{{ link('misc/location-info', '', {'location': $article.location}) }}" rel="nofollow" target="_blank" class="">{$article.location}</a></p>
			</div>	
			<div class="block-body block-row">
				<div class="mapContainer">
					<iframe
						width="100%" height="200" frameborder="0" style="border: 0"
						src="https://www.google.com/maps/embed/v1/place?key={$xf.options.xaAmsGoogleMapsEmbedApiKey}&q={$article.location|censor}{{ $xf.options.xaAmsLocalizeGoogleMaps ? '&language=' . {$xf.language.language_code|substr} : '' }}">
					</iframe>
				</div>
			</div>	
		</div>
	</div>
</xf:if>

<xf:if contentcheck="true">
	<div class="block">
		<div class="block-container">	
			<div class="block-header">{{ phrase('xa_ams_about_author') }}</div>

			<div class="block-body ">
				<div class="block-row block-row--separated ">
					<div class="contentRow">
						<span class="contentRow-figure">
							<xf:avatar user="{$article.User}" size="s" />
						</span>

						<div class="contentRow-main">
							<div class="contentRow-title">
								<xf:if is="$article.User.Profile.xa_ams_author_name">
									<xf:username user="{'user_id':{$article.User.user_id}, 'username':{$article.User.Profile.xa_ams_author_name}}" defaultname="{$article.User.Profile.xa_ams_author_name}" rich="true" />
								<xf:else />
									<xf:username user="$article.User" rich="true" />
								</xf:if>
							</div>
							<xf:contentcheck>
								<xf:if is="$article.User.Profile.xa_ams_about_author && $article.about_author">
									<div class="articleBody">
										<article class="articleBody-aboutAuthor">
											{{ bb_code($article.User.Profile.xa_ams_about_author, 'user:xa_ams_about_author', $article.User) }}
										</article>
									</div>
								<xf:elseif is="$article.User.Profile.about && $article.about_author && {$xf.options.xaAmsDisplayUserProfileAboutMe}"/>
									<div class="articleBody">
										<article class="articleBody-aboutAuthor">
											{{ bb_code($article.User.Profile.about, 'user:about', $article.User) }}
										</article>
									</div>
								</xf:if>
							</xf:contentcheck>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:if>

<xf:if contentcheck="true">
	<div class="block">
		<div class="blockMessage blockMessage--none">
			<xf:contentcheck>
				<xf:if is="$xf.options.xaAmsDisplayShareBelowArticle">
					<xf:macro template="share_page_macros" name="buttons" arg-iconic="{{ true }}" arg-label="{{ phrase('share') }}:" />
				</xf:if>
			</xf:contentcheck>
		</div>
	</div>	
</xf:if>

<xf:if is="$latestReviews is not empty">
	<xf:if is="$canInlineModReviews">
		<xf:js src="xf/inline_mod.js" min="1" />
	</xf:if>

	<div class="block block--messages"
		data-xf-init="{{ $canInlineModReviews ? 'inline-mod' : '' }}"
		data-type="ams_rating"
		data-href="{{ link('inline-mod') }}">

		<div class="block-container"
			data-xf-init="lightbox"
			data-lb-id="article-{$article.article_id}"
			data-lb-universal="{$xf.options.lightBoxUniversal}">

			<h3 class="block-header">{{ phrase('xa_ams_latest_reviews') }}</h3>
			<div class="block-body">
			<xf:foreach loop="$latestReviews" value="$review">
				<xf:macro template="xa_ams_review_macros" name="review"
					arg-review="{$review}"
					arg-article="{$article}" 
					arg-showAttachments="{{ true }}" />
			</xf:foreach>
			</div>
			<div class="block-footer">
				<span class="block-footer-controls"><xf:button class="button--link" href="{{ link('ams/reviews', $article) }}">{{ phrase('xa_ams_read_more...') }}</xf:button></span>
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
	</div>
</xf:if>

<xf:if is="$xf.options.xaAmsMoreInCategoryLocation == 'below_article' && $categoryOthers is not empty">
	<div class="block">
		<div class="block-container">
			<h3 class="block-header"><a href="{{ link('ams/categories', $article.Category) }}">{{ phrase('xa_ams_more_in_x', {'title': $article.Category.title}) }}</a></h3>
			<div class="block-body">
				<xf:if is="$xf.options.xaAmsMoreInCategoryLayoutType == 'article_view' && $article.canViewAttachments()">
					<xf:foreach loop="$categoryOthers" value="$categoryOther">
						<xf:macro template="xa_ams_article_list_macros" name="article_view_layout"
							arg-allowInlineMod="{{ false }}"								  
							arg-article="{$categoryOther}" />
					</xf:foreach>
				<xf:elseif is="$xf.options.xaAmsMoreInCategoryLayoutType == 'grid_view' && $article.canViewAttachments()" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_grid_view_layout.less" />

					<div class="gridContainerAmsGridView">		
						<ul class="ams-grid-view">
							<xf:foreach loop="$categoryOthers" value="$categoryOther">
								<xf:macro template="xa_ams_article_list_macros" name="grid_view_layout"
									arg-allowInlineMod="{{ false }}"									  
									arg-article="{$categoryOther}" />
							</xf:foreach>
						</ul>
					</div>
				<xf:elseif is="$xf.options.xaAmsMoreInCategoryLayoutType == 'tile_view' && $article.canViewAttachments()" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_tile_view_layout.less" />

					<div class="gridContainerAmsTileView">		
						<ul class="ams-tile-view">
							<xf:foreach loop="$categoryOthers" value="$categoryOther">
								<xf:macro template="xa_ams_article_list_macros" name="tile_view_layout"
									arg-allowInlineMod="{{ false }}"								  
									arg-article="{$categoryOther}" />
							</xf:foreach>
						</ul>
					</div>							
				<xf:else />
					<div class="structItemContainer structItemContainerAmsListView">
						<xf:foreach loop="$categoryOthers" value="$categoryOther">
							<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
								arg-allowInlineMod="{{ false }}"									  
								arg-article="{$categoryOther}" />
						</xf:foreach>
					</div>
				</xf:if>
			</div>
		</div>
	</div>
</xf:if>

<xf:if is="$xf.options.xaAmsMoreFromAuthorLocation == 'below_article' && $authorOthers is not empty">
	<div class="block">
		<div class="block-container">
			<xf:if is="$article.User.Profile.xa_ams_author_name">
				<h3 class="block-header"><a href="{{ link('ams/authors', $article.User) }}">{{ phrase('xa_ams_more_from_x', {'name': $article.User.Profile.xa_ams_author_name}) }}</a></h3>
			<xf:else />
				<h3 class="block-header"><a href="{{ link('ams/authors', $article.User) }}">{{ phrase('xa_ams_more_from_x', {'name': $article.User.username}) }}</a></h3>
			</xf:if>

			<div class="block-body">
				<xf:if is="$xf.options.xaAmsMoreFromAuthorLayoutType == 'article_view' && $article.canViewAttachments()">
					<xf:foreach loop="$authorOthers" value="$authorOther">
						<xf:macro template="xa_ams_article_list_macros" name="article_view_layout"
							arg-allowInlineMod="{{ false }}"								  
							arg-article="{$authorOther}" />
					</xf:foreach>
				<xf:elseif is="$xf.options.xaAmsMoreFromAuthorLayoutType == 'grid_view' && $article.canViewAttachments()" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_grid_view_layout.less" />

					<div class="gridContainerAmsGridView">		
						<ul class="ams-grid-view">
							<xf:foreach loop="$authorOthers" value="$authorOther">
								<xf:macro template="xa_ams_article_list_macros" name="grid_view_layout"
									arg-allowInlineMod="{{ false }}"									  
									arg-article="{$authorOther}" />
							</xf:foreach>
						</ul>
					</div>
				<xf:elseif is="$xf.options.xaAmsMoreFromAuthorLayoutType == 'tile_view' && $article.canViewAttachments()" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_tile_view_layout.less" />

					<div class="gridContainerAmsTileView">		
						<ul class="ams-tile-view">
							<xf:foreach loop="$authorOthers" value="$authorOther">
								<xf:macro template="xa_ams_article_list_macros" name="tile_view_layout"
									arg-allowInlineMod="{{ false }}"								  
									arg-article="{$authorOther}" />
							</xf:foreach>
						</ul>
					</div>							
				<xf:else />
					<div class="structItemContainer structItemContainerAmsListView">
						<xf:foreach loop="$authorOthers" value="$authorOther">
							<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
								arg-allowInlineMod="{{ false }}"									  
								arg-article="{$authorOther}" />
						</xf:foreach>
					</div>
				</xf:if>		
			</div>
		</div>
	</div>
</xf:if>

<xf:if is="$article.canViewComments()">
	<div class="columnContainer"
		data-xf-init="lightbox"
		data-lb-id="article-{$article.article_id}"
		data-lb-universal="{$xf.options.lightBoxUniversal}">

		<span class="u-anchorTarget" id="comments"></span>

		<div class="columnContainer-comments">
			<xf:macro template="xa_ams_comment_macros" name="comment_list"
				arg-comments="{$comments}"
				arg-attachmentData="{$attachmentData}"
				arg-content="{$article}"
				arg-linkPrefix="ams/article-comments"
				arg-link="ams"
				arg-page="{$page}"
				arg-perPage="{$perPage}"
				arg-totalItems="{$totalItems}"
				arg-pageNavHash="{$pageNavHash}"
				arg-canInlineMod="{$canInlineModComments}" />
		</div>
	</div>	
</xf:if>

<xf:if is="$articlePages is not empty">
	<xf:sidebar key="articleTocSidebar">
		<div class="block">
			<div class="block-container">
				<h3 class="block-header">{{ phrase('xa_ams_table_of_contents') }}</h3>
				<div class="block-body">
					<a class="blockLink {{ !$isFullView ? 'is-selected' : '' }}" href="{{ link('ams', $article) }}">
						<xf:if is="$article.overview_page_title">
							{$article.overview_page_title}
						<xf:else />
							{{ phrase('overview') }}
						</xf:if>
					</a>

					<xf:foreach loop="$articlePages" value="$article_page">
						<a href="{{ link('ams/page', $article_page) }}" class="blockLink">
							{{ repeat('&nbsp;&nbsp;', $article_page.depth)|raw }} {$article_page.title}</a>
					</xf:foreach>

					<xf:if is="$xf.options.xaAmsViewFullArticle">
						<a href="{{ link('ams', $article, {'full': 1}) }}" class="blockLink {{ $isFullView ? 'is-selected' : '' }}">{{ $article.Category.content_term ?  phrase('xa_ams_view_full_x', {'term': $article.Category.content_term|to_lower}) : phrase('xa_ams_view_full_article') }}</a>
					</xf:if>
				</div>
			</div>
		</div>
	</xf:sidebar>
</xf:if>

<xf:if is="$seriesToc is not empty">
	<xf:sidebar key="seriesTocSidebar">
		<div class="block">
			<div class="block-container">
				<h3 class="block-header">
					<xf:if is="$xf.visitor.canViewAmsSeries()">
						<a href="{{ link('ams/series', $article.SeriesPart.Series) }}">{{ phrase('xa_ams_series_table_of_contents') }}</a>
					<xf:else />
						{{ phrase('xa_ams_series_table_of_contents') }}
					</xf:if>
				</h3>
				<div class="block-body">
					<xf:foreach loop="$seriesToc" value="$seriesToc_part">
						<a href="{{ link('ams', $seriesToc_part.Article) }}" class="blockLink {{ $seriesToc_part.series_part_id == $article.series_part_id ? 'is-selected' : '' }}">{$seriesToc_part.Article.title}</a>
					</xf:foreach>
				</div>
			</div>
		</div>
	</xf:sidebar>
</xf:if>
		
<xf:sidebar key="infoSidebar">
	<div class="block">
		<div class="block-container">
			<h3 class="block-minorHeader">{{ $article.Category.content_term ?  phrase('xa_ams_x_information', {'term': $article.Category.content_term}) : phrase('xa_ams_article_information') }}</h3>
			<div class="block-body block-row block-row--minor">
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('author') }}</dt>
					<xf:if is="$article.User.Profile.xa_ams_author_name">
						<dd><xf:username user="{'user_id':{$article.User.user_id}, 'username':{$article.User.Profile.xa_ams_author_name}}" defaultname="{$article.User.Profile.xa_ams_author_name}" /></dd>
					<xf:else />
						<dd><xf:username user="{$article.User}" defaultname="{$article.username}" /></dd>
					</xf:if>
				</dl>
				<xf:if is="$article.article_read_time">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xa_ams_article_read_time') }}</dt>
						<dd>{{ phrase('xa_ams_x_min_read', {'minutes': $article.article_read_time}) }}</dd>
					</dl>
				</xf:if>
				<xf:if is="$article.view_count">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('views') }}</dt>
						<dd>{$article.view_count|number}</dd>
					</dl>
				</xf:if>
				<xf:if is="$article.comment_count">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('comments') }}</dt>
						<dd>{$article.comment_count|number}</dd>
					</dl>
				</xf:if>
				<xf:if is="$article.review_count">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xa_ams_reviews') }}</dt>
						<dd>{$article.review_count|number}</dd>
					</dl>
				</xf:if>
				<xf:if is="$article.last_update">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xa_ams_last_update') }}</dt>
						<dd><xf:date time="{$article.last_update}" /></dd>
					</dl>
				</xf:if>
				<xf:if is="$article.author_rating && $category.allow_author_rating">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xa_ams_author_rating') }}</dt>
						<dd>
							<xf:macro template="rating_macros" name="stars"
								arg-rating="{$article.author_rating}"
								arg-class="ratingStars--amsAuthorRating" />
						</dd>
					</dl>
				</xf:if>
				<xf:if is="$article.rating_count AND $article.rating_avg">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('rating') }}</dt>
						<dd>
							<xf:macro template="rating_macros" name="stars_text"
								arg-rating="{$article.rating_avg}"
								arg-count="{$article.rating_count}"
								arg-rowClass="ratingStarsRow--textBlock" />
						</dd>
					</dl>
				</xf:if>

				<xf:if is="$article.location && $category.allow_location && ($xf.options.xaAmsLocationDisplayType == 'link' || !$article.canViewArticleMap())">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('location') }}</dt>
						<dd>
							<a href="{{ link('misc/location-info', '', {'location': $article.location}) }}" rel="nofollow" target="_blank" class="">{$article.location}</a>
						</dd>
					</dl>
				</xf:if>
			</div>
		</div>
	</div>
</xf:sidebar>

<xf:if is="$article.canViewContributors() && $contributors is not empty">
	<xf:sidebar key="articleContributors">	
		<xf:if contentcheck="true">
			<div class="block">
				<div class="block-container">
					<h3 class="block-minorHeader">
						<xf:if is="$article.canManageContributors()">
							<a href="{{ link('ams/manage-contributors', $article) }}" data-xf-click="overlay">
								{{ phrase('xa_ams_article_contributors') }}
							</a>
						<xf:else />
							{{ phrase('xa_ams_article_contributors') }}
						</xf:if>
					</h3>
					<div class="block-body block-row block-row--minor">
						<ul class="articleSidebarList">
						<xf:contentcheck>
							<xf:foreach loop="$contributors" value="$contributor" if="!$contributor.is_co_author">
								<li>
									<div class="contentRow">
										<div class="contentRow-figure">
											<xf:avatar user="$contributor.User" size="xxs" />
										</div>

										<div class="contentRow-main contentRow-main--close">
											<xf:username user="$contributor.User" rich="true" />
											<div class="contentRow-minor">
												<xf:usertitle user="$contributor.User" />
											</div>
										</div>
									</div>
								</li>
							</xf:foreach>
						</xf:contentcheck>
						</ul>
					</div>	
				</div>
			</div>
		</xf:if>
	</xf:sidebar>	
</xf:if>

<xf:sidebar key="additionalInfoSidebar">
	<xf:if contentcheck="true">
		<div class="block">
			<div class="block-container">
				<h3 class="block-minorHeader">{{ phrase('xa_ams_additional_information') }}</h3>
				<div class="block-body block-row block-row--minor">
					<xf:contentcheck>
						<xf:macro template="custom_fields_macros" name="custom_fields_view"
							arg-type="ams_articles"
							arg-group="sidebar"
							arg-onlyInclude="{$category.field_cache}"
							arg-set="{$article.custom_fields}"
							arg-wrapperClass="" 
							arg-valueClass="pairs pairs--justified" />
					</xf:contentcheck>
				</div>	
			</div>
		</div>
	</xf:if>
</xf:sidebar>

<xf:sidebar key="discussionButtonSidebar">
	<xf:if contentcheck="true">
		<div class="block">
			<div class="block-container">
				<xf:contentcheck>
					<xf:if is="$article.hasViewableDiscussion()">
						<xf:button href="{{ link('threads', $article.Discussion) }}" class="button--fullWidth">{{ phrase('xa_ams_join_discussion') }}</xf:button>
					</xf:if>
				</xf:contentcheck>
			</div>
		</div>
	</xf:if>	
</xf:sidebar>

<xf:if is="$article.location && $article.canViewArticleMap() && $category.allow_location && $xf.options.xaAmsLocationDisplayType == 'map' && $xf.options.xaAmsGoogleMapsEmbedApiKey">
	<xf:sidebar key="locationSidebar">
		<div class="block">
			<div class="block-container">
				<h3 class="block-minorHeader">{{ phrase('location') }}</h3>
				<div class="block-body block-row contentRow-lesser">
					<p class="mapLocationName"><a href="{{ link('misc/location-info', '', {'location': $article.location}) }}" rel="nofollow" target="_blank" class="">{$article.location}</a></p>
				</div>	
				<div class="block-body block-row">
					<div class="mapContainer">
						<iframe
							width="100%" height="200" frameborder="0" style="border: 0"
							src="https://www.google.com/maps/embed/v1/place?key={$xf.options.xaAmsGoogleMapsEmbedApiKey}&q={$article.location|censor}{{ $xf.options.xaAmsLocalizeGoogleMaps ? '&language=' . {$xf.language.language_code|substr} : '' }}">
						</iframe>
					</div>
				</div>	
			</div>
		</div>
	</xf:sidebar>
</xf:if>

<xf:if is="$xf.options.xaAmsFilesLocation == 'sidebar' AND $article.attach_count">
	<xf:sidebar key="fileAttachmentsSidebar">
		<xf:if contentcheck="true">
			<div class="block">
				<div class="block-container">
					<h3 class="block-minorHeader">{{ phrase('xa_ams_downloads') }}</h3>
					<xf:css src="attachments.less" />
					<div class="block-body block-row">
						<ul class="attachmentList articleBody-attachments">
							<xf:contentcheck>
								<xf:foreach loop="$article.Attachments" value="$attachment">
									<xf:if is="$attachment.has_thumbnail || $attachment.is_video">
										<xf:comment>do nothing as we don't want to display images or video here</xf:comment>
									<xf:else />
										<xf:macro template="attachment_macros" name="attachment_list_item"
											arg-attachment="{$attachment}"
											arg-canView="{{ $article.canViewAttachments() }}" />
									</xf:if>
								</xf:foreach>
							</xf:contentcheck>
						</ul>
					</div>
				</div>
			</div>
		</xf:if>
	</xf:sidebar>
</xf:if>

<xf:if is="$xf.options.xaAmsMoreInCategoryLocation == 'sidebar' && $categoryOthers is not empty">
	<xf:sidebar key="moreArticlesInCategorySidebar">
		<div class="block">
			<div class="block-container">
				<h3 class="block-minorHeader"><a href="{{ link('ams/categories', $article.Category) }}">{{ phrase('xa_ams_more_in_x', {'title': $article.Category.title}) }}</a></h3>
				<div class="block-body block-row">
					<ul class="articleSidebarList">
					<xf:foreach loop="$categoryOthers" value="$categoryOther">
						<li>
							<xf:macro template="xa_ams_article_list_macros" name="article_simple"
								arg-article="{$categoryOther}"
								arg-withMeta="{{ false }}" />
						</li>
					</xf:foreach>
					</ul>
				</div>
			</div>
		</div>
	</xf:sidebar>
</xf:if>

<xf:if is="$xf.options.xaAmsMoreFromAuthorLocation == 'sidebar' && $authorOthers is not empty">
	<xf:sidebar key="moreArticlesFromAuthorSidebar">
		<div class="block">
			<div class="block-container">
				<xf:if is="$article.User.Profile.xa_ams_author_name">
					<h3 class="block-minorHeader"><a href="{{ link('ams/authors', $article.User) }}">{{ phrase('xa_ams_more_from_x', {'name': $article.User.Profile.xa_ams_author_name}) }}</a></h3>
				<xf:else />
					<h3 class="block-minorHeader"><a href="{{ link('ams/authors', $article.User) }}">{{ phrase('xa_ams_more_from_x', {'name': $article.User.username}) }}</a></h3>
				</xf:if>

				<div class="block-body block-row">
					<ul class="articleSidebarList">
					<xf:foreach loop="$authorOthers" value="$authorOther">
						<li>
							<xf:macro template="xa_ams_article_list_macros" name="article_simple"
								arg-article="{$authorOther}"
								arg-withMeta="{{ false }}" />
						</li>
					</xf:foreach>
					</ul>
				</div>
			</div>
		</div>
	</xf:sidebar>
</xf:if>

<xf:set var="$extras" value="{{ property('xaAmsShareThisArticleBlockElements') }}" />
<xf:if is="$extras.share_article_block">
	<xf:sidebar key="shareSidebar">
		<xf:if contentcheck="true">
			<div class="block">
				<div class="block-container">
					<xf:contentcheck>
						<h3 class="block-minorHeader">{{ $article.Category.content_term ?  phrase('xa_ams_share_this_x', {'term': $article.Category.content_term|to_lower}) : phrase('xa_ams_share_this_article') }}</h3>
						<xf:if contentcheck="true">
							<div class="block-body block-row block-row--separated">
								<xf:contentcheck>
									<xf:macro template="share_page_macros" name="buttons" arg-iconic="{{ true }}" />
								</xf:contentcheck>
							</div>
						</xf:if>
						<xf:if contentcheck="true">
							<div class="block-body block-row block-row--separated">
								<xf:contentcheck>
									<xf:if is="$extras.url_bb_code">
										<xf:macro template="share_page_macros" name="share_clipboard_input"
											arg-label="{{ phrase('xa_ams_copy_url_bb_code') }}"
											arg-text="[URL=&quot;{{ link('canonical:ams', $article) }}&quot;]{$article.title}[/URL]" />
									</xf:if>
									<xf:if is="$extras.ams_bb_code">
										<xf:macro template="share_page_macros" name="share_clipboard_input"
											arg-label="{{ phrase('xa_ams_copy_ams_bb_code') }}"
											arg-text="[AMS=article, {$article.article_id}][/AMS]" />
									</xf:if>
								</xf:contentcheck>
							</div>
						</xf:if>
					</xf:contentcheck>
				</div>
			</div>
		</xf:if>
	</xf:sidebar>
</xf:if>]]></template>
  <template type="public" title="xa_ams_article_watch" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:if is="$isWatched">
	<xf:title>{{ phrase('xa_ams_unwatch_article') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('xa_ams_watch_article') }}</xf:title>
</xf:if>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/watch', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$isWatched">
				<xf:inforow rowtype="confirm">
					{{ phrase('xa_ams_you_sure_you_want_to_unwatch_this_article') }}
				</xf:inforow>

				<xf:hiddenval name="stop">1</xf:hiddenval>
			<xf:else />
				<xf:radiorow name="email_subscribe"
					value="{{ $xf.visitor.Option.interaction_watch_state == 'watch_email' ? 1 : 0}}"
					rowtype="noColon"
					label="{{ phrase('xa_ams_watch_this_article...') }}">

					<xf:option value="1">{{ phrase('and_receive_email_notifications') }}</xf:option>
					<xf:option value="0">{{ phrase('without_receiving_email_notifications') }}</xf:option>
				</xf:radiorow>
			</xf:if>
		</div>
		<xf:if is="$isWatched">
			<xf:submitrow submit="{{ phrase('unwatch') }}" rowtype="simple" icon="notificationsOff" />
		<xf:else />
			<xf:submitrow submit="{{ phrase('watch') }}" icon="notificationsOn" />
		</xf:if>
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_article_wrapper" version_id="2021770" version_string="2.2.17"><![CDATA[<xf:h1 hidden="true" />

<xf:breadcrumb source="$article.Category.getBreadcrumbs()" />

<xf:css src="xa_ams.less" />

<xf:if is="$article.prefix_id">
	<xf:if contentcheck="true">
		<div class="blockMessage blockMessage--alt blockMessage--small blockMessage--close">
			<xf:contentcheck>{{ prefix_description('ams_article', $article.prefix_id) }}</xf:contentcheck>
		</div>
	</xf:if>
</xf:if>

<xf:macro template="xa_ams_article_wrapper_macros" name="status"
	arg-article="{$article}" />

<xf:macro template="xa_ams_article_page_macros" name="article_page_options"
	arg-category="{$article.Category}"
	arg-article="{$article}" />

<xf:macro template="xa_ams_article_wrapper_macros" name="header"
	arg-article="{$article}" />

<xf:macro template="xa_ams_article_wrapper_macros" name="tabs"
	arg-article="{$article}"
	arg-selected="{$pageSelected}" />

{$innerContent|raw}]]></template>
  <template type="public" title="xa_ams_article_wrapper_macros" version_id="2022570" version_string="2.2.25"><![CDATA[<xf:macro name="header"
	arg-article="!"
	arg-titleHtml="{{ null }}"
	arg-showMeta="{{ true }}"
	arg-metaHtml="{{ null }}">

	<xf:page option="headerHtml">
		<div class="contentRow contentRow--hideFigureNarrow">
			<div class="contentRow-main">
				<div class="p-title">
					<h1 class="p-title-value">
						<xf:if is="$titleHtml !== null">
							{$titleHtml|raw}
						<xf:else />
							<xf:if is="$article.article_state == 'draft'">  
								<span style="color: red;">[{{ phrase('xa_ams_draft') }}]</span> 
							<xf:elseif is="$article.article_state == 'awaiting'" /> 
								<span style="color: orange;">[{{ phrase('xa_ams_awaiting') }}]</span> 
							</xf:if>
							{{ prefix('ams_article', $article) }}{$article.title}
						</xf:if>
					</h1>
				</div>
				<xf:if is="$showMeta">
					<div class="p-description">
						<xf:if is="$metaHtml !== null">
							{$metaHtml|raw}
						<xf:else />
							<ul class="listInline listInline--bullet">
								<li>
									<xf:fa icon="fa-user" title="{{ phrase('author')|for_attr }}" />
									<span class="u-srOnly">{{ phrase('author') }}</span>
									<xf:if is="$article.User.Profile.xa_ams_author_name">
										<xf:username user="{'user_id':{$article.User.user_id}, 'username':{$article.User.Profile.xa_ams_author_name}}" defaultname="{$article.User.Profile.xa_ams_author_name}" class="u-concealed" />
									<xf:else />
										<xf:username user="{$article.User}" defaultname="{$article.username}" class="u-concealed" />
									</xf:if>
								</li>
								<xf:if is="$article.Contributors is not empty">
									<xf:foreach loop="$article.Contributors" value="$coAuthor" if="$coAuthor.is_co_author">
										<li>
											<xf:fa icon="fa-user" title="{{ phrase('author')|for_attr }}" />
											<span class="u-srOnly">{{ phrase('author') }}</span>
											<xf:if is="$coAuthor.User.Profile.xa_ams_author_name">
												<xf:username user="{'user_id':{$coAuthor.User.user_id}, 'username':{$coAuthor.User.Profile.xa_ams_author_name}}" defaultname="{$coAuthor.User.Profile.xa_ams_author_name}" class="u-concealed" />
											<xf:else />
												<xf:username user="{$coAuthor.User}" defaultname="{$coAuthor.User.username}" class="u-concealed" />
											</xf:if>
										</li>
									</xf:foreach>
								</xf:if>
								<li>
									<xf:fa icon="fa-clock" title="{{ phrase('xa_ams_publish_date')|for_attr }}" />
									<span class="u-srOnly">{{ phrase('xa_ams_publish_date') }}</span>

									<a href="{{ link('ams', $article) }}" class="u-concealed"><xf:date time="{$article.publish_date}" /></a>
								</li>
								<xf:if is="$article.last_update > $article.publish_date">								
									<li>
										<xf:fa icon="fa-clock" title="{{ phrase('xa_ams_last_update')|for_attr }}" />
										<span class="u-concealed">{{ phrase('updated') }}</span>

										<xf:date time="{$article.last_update}" />
									</li>
								</xf:if>
								<xf:if is="$article.article_read_time">								
									<li>
										<xf:fa icon="fa-hourglass" title="{{ phrase('xa_ams_article_read_time')|for_attr }}" />
										<span class="u-srOnly">{{ phrase('xa_ams_article_read_time') }}</span>

										{{ phrase('xa_ams_x_min_read', {'minutes': $article.article_read_time}) }}
									</li>
								</xf:if>
								<xf:if is="$xf.options.enableTagging AND ($article.canEditTags() OR $article.tags)">
									<li>
										<xf:macro template="tag_macros" name="list"
											arg-tags="{$article.tags}"
											arg-tagList="tagList--article-{$article.article_id}"
											arg-editLink="{{ $article.canEditTags() ? link('ams/tags', $article) : '' }}" />
									</li>
								</xf:if>
								<xf:if is="$article.Featured">
									<li><span class="label label--accent">{{ phrase('xa_ams_featured') }}</span></li>
								</xf:if>
							</ul>
						</xf:if>
					</div>
				</xf:if>

				<xf:macro template="custom_fields_macros" name="custom_fields_view"
					arg-type="ams_articles"
					arg-group="header"
					arg-onlyInclude="{$category.field_cache}"
					arg-set="{$article.custom_fields}"
					arg-wrapperClass="articleBody-fields articleBody-fields--header" />
			</div>
		</div>
	</xf:page>
</xf:macro>

<xf:macro name="status" arg-article="!">
	<xf:if contentcheck="true">
		<dl class="blockStatus blockStatus--standalone">
			<dt>{{ phrase('status') }}</dt>
			<xf:contentcheck>
				<xf:if is="$article.article_state == 'deleted'">
					<dd class="blockStatus-message blockStatus-message--deleted">
						<xf:macro template="deletion_macros" name="notice" arg-log="{$article.DeletionLog}" />
					</dd>
				<xf:elseif is="$article.article_state == 'moderated'" />
					<dd class="blockStatus-message blockStatus-message--moderated">
						{{ phrase('awaiting_approval_before_being_displayed_publicly') }}
					</dd>
				<xf:elseif is="$article.article_state == 'draft'" />
					<dd class="blockStatus-message blockStatus-message--warning">
						{{ phrase('xa_ams_draft_in_progress') }}
					</dd>
				<xf:elseif is="$article.article_state == 'awaiting'" />
					<dd class="blockStatus-message blockStatus-message--warning">
						{{ phrase('xa_ams_scheduled_for_publishing') }} <xf:date time="{$article.publish_date}" />
					</dd>
				</xf:if>
				<xf:if is="$article.warning_message">
					<dd class="blockStatus-message blockStatus-message--warning">
						{$article.warning_message}
					</dd>
				</xf:if>
				<xf:if is="$article.isIgnored()">
					<dd class="blockStatus-message blockStatus-message--ignored">
						{{ phrase('you_are_ignoring_content_by_this_member') }}
					</dd>
				</xf:if>
			</xf:contentcheck>
		</dl>
	</xf:if>

	<xf:if is="$article.isInSeries(true) && $article.SeriesPart">
		<dl class="blockStatus blockStatus--info blockStatus--standalone">
			<dt></dt>
			<dd class="blockStatus-message">
				<xf:if is="$xf.visitor.canViewAmsSeries()">
					{{ phrase('xa_ams_this_article_in_series_x', {
						'title': '<a href="' . link('ams/series', $article.SeriesPart.Series) . '" class="fauxBlockLink-blockLink">' . $article.SeriesPart.Series.title . '</a>'
					}) }}
				<xf:else />
					{{ phrase('xa_ams_this_article_in_series_x', {
						'title': '"' . $article.SeriesPart.Series.title . '"'
					}) }}
				</xf:if>
			</dd>
		</dl>
	</xf:if>
</xf:macro>

<xf:macro name="tabs" arg-article="!" arg-selected="!">
	<xf:if contentcheck="true">
		<div class="tabs tabs--standalone">
			<div class="hScroller" data-xf-init="h-scroller">
				<span class="hScroller-scroll">
					<a class="tabs-tab {{ $selected == 'overview' ? 'is-active' : '' }}" href="{{ link('ams', $article) }}">{{ $article.Category.content_term ?  phrase('xa_ams_content_term_x', {'term': $article.Category.content_term}) : phrase('xa_ams_article') }}</a>
					<xf:contentcheck>
						<xf:foreach loop="$article.getExtraFieldTabs()" key="$fieldId" value="$fieldValue">
							<a class="tabs-tab {{ $selected == ('field_' . $fieldId) ? 'is-active' : '' }}" href="{{ link('ams/field', $article, {'field': $fieldId}) }}">{$fieldValue}</a>
						</xf:foreach>
						<xf:if is="$article.real_review_count && $article.canViewReviews()">
							<a class="tabs-tab {{ $selected == 'reviews' ? 'is-active' : '' }}" href="{{ link('ams/reviews', $article) }}">{{ phrase('xa_ams_reviews') }} {$article.real_review_count|parens}</a>
						</xf:if>
						<xf:if is="$article.location && $article.canViewArticleMap() && $article.Category.allow_location && $xf.options.xaAmsLocationDisplayType == 'map_own_tab' && $xf.options.xaAmsGoogleMapsEmbedApiKey">
							<a class="tabs-tab {{ $selected == 'map' ? 'is-active' : '' }}" href="{{ link('ams/map', $article) }}">{{ phrase('xa_ams_map') }}</a>
						</xf:if>							
						<xf:if is="$xf.options.xaAmsGalleryLocation == 'own_tab' AND $article.hasImageAttachments($article)">
							<a class="tabs-tab {{ $selected == 'gallery' ? 'is-active' : '' }}" href="{{ link('ams/gallery', $article) }}">{{ phrase('xa_ams_gallery') }}</a>
						</xf:if>
						<xf:if is="$article.hasViewableDiscussion()">
							<a class="tabs-tab {{ $selected == 'discussion' ? 'is-active' : '' }}" href="{{ link('threads', $article.Discussion) }}">{{ phrase('xa_ams_discussion') }}</a>
						</xf:if>
					</xf:contentcheck>
				</span>
			</div>
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="action_buttons" 
	arg-article="!" 
	arg-seriesToc="{{ null }}" 
	arg-articlePages="{{ null }}" 
	arg-articlePage="{{ null }}" 
	arg-isFullView="{{ false }}" 
	arg-showRateButton="{{ false }}" 
	arg-showAddPageButton="{{ false }}"
	arg-showAddToSeriesButton="{{ false }}"
	arg-canInlineMod="{{ false }}">

	<xf:if is="$showRateButton && ($article.canRate() OR $article.canRatePreReg())">
		<xf:button href="{{ link('ams/rate', $article) }}" overlay="true">
			{{ phrase('leave_rating') }}
		</xf:button>
	</xf:if>

	<xf:if is="$article.canAddPage() && $showAddPageButton">
		<xf:button href="{{ link('ams/add-page', $article) }}">
			{{ phrase('xa_ams_add_page') }}
		</xf:button>
	</xf:if>

	<xf:if is="$article.canAddArticleToSeries() && $showAddToSeriesButton">
		<xf:button href="{{ link('ams/add-to-series', $article) }}" overlay="true">
			{{ phrase('xa_ams_add_to_series') }}
		</xf:button>
	</xf:if>

	<xf:if is="$article.canJoinContributorsTeam()">
		<xf:button href="{{ link('ams/join-contributors-team', $article) }}" class="button--cta" overlay="true">
			{{ phrase('xa_ams_contribute') }}
		</xf:button>
	</xf:if>

	<xf:if is="$article.canPublishDraft() AND ($article.article_state == 'draft' || $article.article_state == 'awaiting')">
		<xf:button href="{{ link('ams/publish-draft', $article) }}" class="button--cta" overlay="true">
			{{ phrase('xa_ams_publish_now') }}
		</xf:button>
	</xf:if>

	<xf:if is="$article.canPublishDraftScheduled() AND $article.article_state == 'draft'">
		<xf:button href="{{ link('ams/publish-draft-scheduled', $article) }}" class="button--cta" overlay="true">
			{{ phrase('xa_ams_publish_scheduled') }}
		</xf:button>
	</xf:if>

	<xf:if is="$article.canChangeScheduledPublishDate() AND $article.article_state == 'awaiting'">
		<xf:button href="{{ link('ams/change-scheduled-publish-date', $article) }}" class="button--cta" overlay="true">
			{{ phrase('xa_ams_change_scheduled_date') }}
		</xf:button>
	</xf:if>

	<xf:if contentcheck="true">
		<div class="buttonGroup">
		<xf:contentcheck>
			<xf:if is="$canInlineMod">
				<xf:macro template="inline_mod_macros" name="button" />
			</xf:if>

			<xf:if is="$article.canUndelete() AND $article.article_state == 'deleted'">
				<xf:button href="{{ link('ams/undelete', $article) }}" class="button--link" overlay="true">
					{{ phrase('undelete') }}
				</xf:button>
			</xf:if>
			<xf:if is="$article.canApproveUnapprove() AND $article.article_state == 'moderated'">
				<xf:button href="{{ link('ams/approve', $article) }}" class="button--link" overlay="true">
					{{ phrase('approve') }}
				</xf:button>
			</xf:if>
			<xf:if is="$article.canWatch()">
				<xf:button href="{{ link('ams/watch', $article) }}" class="button--link"
					data-xf-click="switch-overlay"
					data-sk-watch="{{ phrase('watch') }}"
					data-sk-unwatch="{{ phrase('unwatch') }}">

					<xf:if is="{$article.Watch.{$xf.visitor.user_id}}">
						{{ phrase('unwatch') }}
					<xf:else />
						{{ phrase('watch') }}
					</xf:if>
				</xf:button>
			</xf:if>
			<xf:macro template="bookmark_macros" name="button"
				arg-content="{$article}"
				arg-confirmUrl="{{ link('ams/bookmark', $article) }}" />
			
			<xf:if contentcheck="true">
				<div class="buttonGroup-buttonWrapper">
					<xf:button class="button--link menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true" title="{{ phrase('xa_ams_page_navigation')|for_attr }}">
						{{ phrase('xa_ams_table_of_contents') }}
					</xf:button>
					<div class="menu" data-menu="menu" aria-hidden="true">
						<div class="menu-content">
							<h4 class="menu-header">{{ phrase('xa_ams_select_page') }}</h4>

							<a href="{{ link('ams', $article) }}" class="menu-linkRow {{ (!$articlePage && !$isFullView) ? 'is-selected' : '' }}">
								<xf:if is="$article.overview_page_title">
									{$article.overview_page_title}
								<xf:else />
									{{ phrase('overview') }}
								</xf:if>
							</a>

							<xf:contentcheck>
								<xf:foreach loop="$articlePages" value="$article_page">
									<a href="{{ link('ams/page', $article_page) }}" class="menu-linkRow {{ $articlePage.page_id == $article_page.page_id ? 'is-selected' : '' }}">
									{{ repeat('&nbsp;&nbsp;', $article_page.depth)|raw }} {$article_page.title}</a>
								</xf:foreach>
							</xf:contentcheck>
							<xf:if is="$xf.options.xaAmsViewFullArticle">
								<a href="{{ link('ams', $article, {'full': 1}) }}" class="menu-linkRow {{ $isFullView ? 'is-selected' : '' }}">{{ $article.Category.content_term ?  phrase('xa_ams_view_full_x', {'term': $article.Category.content_term|to_lower}) : phrase('xa_ams_view_full_article') }}</a>
							</xf:if>
						</div>
					</div>
				</div>
			</xf:if>

			<xf:if contentcheck="true">
				<div class="buttonGroup-buttonWrapper">
					<xf:button class="button--link menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true" title="{{ phrase('xa_ams_series_navigation')|for_attr }}">
						{{ phrase('xa_ams_series') }}</xf:button>
					<div class="menu" data-menu="menu" aria-hidden="true">
						<div class="menu-content">
							<h4 class="menu-header">{{ phrase('xa_ams_select_article') }}</h4>
							<xf:contentcheck>
								<xf:foreach loop="$seriesToc" value="$seriesTocItem">
									<a href="{{ link('ams', $seriesTocItem.Article) }}" class="menu-linkRow {{ $article.series_part_id == $seriesTocItem.series_part_id ? 'is-selected' : '' }}">{$seriesTocItem.Article.title}</a>
								</xf:foreach>
							</xf:contentcheck>
							<xf:if is="$xf.visitor.canViewAmsSeries()">
								<a href="{{ link('ams/series', $article.SeriesPart.Series) }}" class="menu-linkRow">{{ phrase('xa_ams_view_series') }}</a>
							</xf:if>
						</div>
					</div>
				</div>
			</xf:if>

			<xf:if contentcheck="true">
				<div class="buttonGroup-buttonWrapper">
					<xf:button class="button--link menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true" title="{{ phrase('more_options')|for_attr }}">&#8226;&#8226;&#8226;</xf:button>
					<div class="menu" data-menu="menu" aria-hidden="true">
						<div class="menu-content">
							<h4 class="menu-header">{{ phrase('more_options') }}</h4>
							<xf:contentcheck>
								<!--[XF:article_tools_menu:top]-->
								<xf:if is="$article.canSetCoverImage()">
									<a href="{{ link('ams/set-cover-image', $article) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xa_ams_set_cover_image') }}</a>
								</xf:if>
								<xf:if is="$article.canFeatureUnfeature()">
									<a href="{{ link('ams/quick-feature', $article) }}"
										class="menu-linkRow"
										data-xf-click="switch"
										data-menu-closer="true">

										<xf:if is="$article.Featured">
											{{ phrase('xa_ams_article_quick_unfeature') }}
										<xf:else />
											{{ phrase('xa_ams_article_quick_feature') }}
										</xf:if>
									</a>
								</xf:if>
								<xf:if is="$article.canStickUnstick()">
									<a href="{{ link('ams/quick-stick', $article) }}"
										class="menu-linkRow"
										data-xf-click="switch"
										data-menu-closer="true">

										<xf:if is="$article.sticky">
											{{ phrase('xa_ams_unstick_article') }}
										<xf:else />
											{{ phrase('xa_ams_stick_article') }}
										</xf:if>
									</a>
								</xf:if>									
								<xf:if is="$article.canLockUnlockComments() && $article.Category.allow_comments">
									<a href="{{ link('ams/lock-unlock-comments', $article) }}" data-xf-click="overlay" class="menu-linkRow">
										<xf:if is="$article.comments_open">
											{{ phrase('xa_ams_lock_comments') }}
										<xf:else />
											{{ phrase('xa_ams_unlock_comments') }}
										</xf:if>
									</a>
								</xf:if>
								<xf:if is="$article.canLockUnlockRatings() && $article.Category.allow_ratings">
									<a href="{{ link('ams/lock-unlock-ratings', $article) }}" data-xf-click="overlay" class="menu-linkRow">
										<xf:if is="$article.ratings_open">
											{{ phrase('xa_ams_lock_ratings') }}
										<xf:else />
											{{ phrase('xa_ams_unlock_ratings') }}
										</xf:if>
									</a>
								</xf:if>
								<xf:if is="$article.canLeaveContributorsTeam()">
									<a href="{{ link('ams/leave-contributors-team', $article) }}" class="menu-linkRow" data-xf-click="overlay">
										{{ phrase('xa_ams_leave_article_contributors_team') }}
									</a>
								</xf:if>
								<xf:if is="$article.canManageContributors()">
									<a href="{{ link('ams/manage-contributors', $article) }}" class="menu-linkRow" data-xf-click="overlay">
										{{ phrase('xa_ams_manage_contributors_co_authors') }}
									</a>
								</xf:if>
								<xf:if is="$article.canEdit()">
									<a href="{{ link('ams/edit', $article) }}" class="menu-linkRow">{{ phrase('xa_ams_edit_article') }}</a>
								</xf:if>
								<xf:if is="$article.canDelete('soft')">
									<a href="{{ link('ams/delete', $article) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xa_ams_delete_article') }}</a>
								</xf:if>
								<xf:if is="$article.canMove()">
									<a href="{{ link('ams/move', $article) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xa_ams_move_article') }}</a>
								</xf:if>
								<xf:if is="$article.canReassign()">
									<a href="{{ link('ams/reassign', $article) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xa_ams_reassign_article') }}</a>
								</xf:if>
								<xf:if is="$article.canChangeDates()">
									<a href="{{ link('ams/change-dates', $article) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xa_ams_change_article_dates') }}</a>
								</xf:if>
								<xf:if is="$article.canCreatePoll()">
									<a href="{{ link('ams/poll/create', $article) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('create_poll') }}</a>
								</xf:if>
								<xf:if is="$article.isInSeries(false) && $article.SeriesPart.canRemove()">
									<a href="{{ link('ams/remove-from-series', $article) }}" class="menu-linkRow" data-xf-click="overlay">{{ phrase('xa_ams_remove_article_from_series') }}</a>
								</xf:if>
								<xf:if is="$article.canManageRatings() && ($article.rating_count > 0 && $article.rating_count > $article.review_count)">
									<a href="{{ link('ams/ratings', $article) }}" class="menu-linkRow">{{ phrase('xa_ams_manage_ratings') }}</a>
								</xf:if>
								<xf:if is="$article.canManagePages()">
									<a href="{{ link('ams/pages', $article) }}" class="menu-linkRow">{{ phrase('xa_ams_manage_pages') }}</a>
								</xf:if>
								<xf:if is="$article.canReplyBan()">
									<a href="{{ link('ams/reply-bans', $article) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('manage_reply_bans') }}</a>
								</xf:if>
								<xf:if is="$article.canChangeDiscussionThread()">
									<a href="{{ link('ams/change-thread', $article) }}" data-xf-click="overlay" class="menu-linkRow">
										<xf:if is="$article.discussion_thread_id">			
											{{ phrase('xa_ams_change_discussion_thread') }}
										<xf:else />
											{{ phrase('xa_ams_add_discussion_thread') }}
										</xf:if>
									</a>
								</xf:if>
								<xf:if is="$article.canEnableDisableOsUrlCheck()">
									<a href="{{ link('ams/quick-disable-os-url-check', $article) }}"
										class="menu-linkRow"
										data-xf-click="switch"
										data-menu-closer="true">

										<xf:if is="$article.disable_os_url_check">
											{{ phrase('xa_ams_article_quick_enable_os_url_check') }}

										<xf:else />
											{{ phrase('xa_ams_article_quick_disable_os_url_check') }}
										</xf:if>
									</a>
								</xf:if>								
								<xf:if is="$article.canConvertToThread()">
									<a href="{{ link('ams/convert-to-thread', $article) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xa_ams_convert_article_to_thread') }}</a>
								</xf:if>								
								<xf:if is="$article.canViewModeratorLogs()">
									<a href="{{ link('ams/moderator-actions', $article) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('moderator_actions') }}</a>
								</xf:if>
								<!--[XF:article_tools_menu:before_footer]-->
								<xf:if is="$article.canUseInlineModeration()">
									<div class="menu-footer"
										data-xf-init="inline-mod"
										data-type="ams_article"
										data-href="{{ link('inline-mod') }}"
										data-toggle=".js-articleInlineModToggle">
										<xf:checkbox>
											<xf:option class="js-articleInlineModToggle" value="{$article.article_id}">{{ phrase('select_for_moderation') }}</xf:option>
										</xf:checkbox>
									</div>
									<xf:js src="xf/inline_mod.js" min="1" />
								</xf:if>
								<!--[XF:article_tools_menu:bottom]-->
							</xf:contentcheck>
						</div>
					</div>
				</div>
			</xf:if>
		</xf:contentcheck>
		</div>
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_author_article_list_macros" version_id="2022570" version_string="2.2.25"><![CDATA[<xf:macro name="list_filter_bar" 
	arg-filters="!" 
	arg-baseLinkPath="!" 
	arg-linkData="{{ null }}">
	
	<xf:set var="$dateLimits" value="{{ {
		'-1': phrase('any_time'),
		'7': phrase('x_days', {'days': '7'}),
		'14': phrase('x_days', {'days': '14'}),
		'30': phrase('x_days', {'days': '30'}),
		'60': phrase('x_months', {'months': '2'}),
		'90': phrase('x_months', {'months': '3'}),
		'182': phrase('x_months', {'months': '6'}),
		'365': phrase('1_year')
	} }}" />
	<xf:set var="$sortOrders" value="{{ {
		'last_update': phrase('xa_ams_last_update'),
		'publish_date': phrase('xa_ams_publish_date'),
		'rating_weighted': phrase('rating'),
		'reaction_score': phrase('reaction_score'),							 
		'view_count': phrase('views'),
		'title': phrase('title')
	} }}" />

	<div class="block-filterBar">
		<div class="filterBar">
			<xf:if contentcheck="true">
				<ul class="filterBar-filters">
					<xf:contentcheck>
						<xf:if is="$filters.featured">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('featured', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
								{{ phrase('xa_ams_featured') }}
							</a></li>
						</xf:if>

						<xf:if is="$filters.is_rated">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('is_rated', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
								{{ phrase('xa_ams_is_rated') }}
							</a></li>
						</xf:if>
						
						<xf:if is="$filters.has_reviews">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('has_reviews', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
								{{ phrase('xa_ams_has_reviews') }}
							</a></li>
						</xf:if>
						
						<xf:if is="$filters.has_comments">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('has_comments', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
								{{ phrase('xa_ams_has_comments') }}
							</a></li>
						</xf:if>
						
						<xf:if is="$filters.title">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('title', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('title:') }}</span>
								{$filters.title}</a></li>
						</xf:if>
						
						<xf:if is="$filters.term">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('term', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('xa_ams_mentions:') }}</span>
								{$filters.term}</a></li>
						</xf:if>						
						
						<xf:if is="$filters.rating_avg">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('rating_avg', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('xa_ams_avg_rating:') }}</span>
								<xf:if is="$filters.rating_avg == 5">
									{{ phrase('xa_ams_5_stars') }}
								<xf:elseif is="$filters.rating_avg == 4" />
									{{ phrase('xa_ams_4_stars_up') }}
								<xf:elseif is="$filters.rating_avg == 3" />
									{{ phrase('xa_ams_3_stars_up') }}
								<xf:elseif is="$filters.rating_avg == 2" />
									{{ phrase('xa_ams_2_stars_up') }}
								</xf:if>
							</a></li>
						</xf:if>						
						
						<xf:if is="$filters.prefix_id">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('prefix_id', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('prefix:') }}</span>
								{{ prefix_title('ams_article', $filters.prefix_id) }}</a></li>
						</xf:if>
						
						<xf:if is="$filters.last_days AND {$dateLimits.{$filters.last_days}}">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('last_days', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('last_updated:') }}</span>
								{$dateLimits.{$filters.last_days}}</a></li>
						</xf:if>
						
						<xf:if is="$filters.state">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('state', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('state:') }}</span>
								<xf:if is="$filters.state == 'visible'">
									{{ phrase('visible') }}
								<xf:elseif is="$filters.state == 'moderated'" />
									{{ phrase('moderated') }}
								<xf:elseif is="$filters.state == 'deleted'" />
									{{ phrase('deleted') }}
								</xf:if>
							</a></li>
						</xf:if>
						
						<xf:if is="$filters.order AND {$sortOrders.{$filters.order}}">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace({'order': null, 'direction': null})) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('return_to_default_order')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
								{$sortOrders.{$filters.order}}
								<xf:fa icon="{{ $filters.direction == 'asc' ? 'fa-angle-up' : 'fa-angle-down' }}" />
								<span class="u-srOnly"><xf:if is="$filters.direction == 'asc'">{{ phrase('ascending') }}<xf:else />{{ phrase('descending') }}</xf:if></span>
							</a></li>
						</xf:if>
					</xf:contentcheck>
				</ul>
			</xf:if>

			<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
			<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
				data-href="{{ link($baseLinkPath . '/filters', $linkData, $filters) }}"
				data-load-target=".js-filterMenuBody">
				<div class="menu-content">
					<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
					<div class="js-filterMenuBody">
						<div class="menu-row">{{ phrase('loading...') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_author_articles_awaiting_publishing" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:if is="$user.user_id == $xf.visitor.user_id">
	<xf:title page="{$page}">{{ phrase('xa_ams_your_articles_awaiting_publishing') }}</xf:title>
<xf:elseif is="$user.Profile.xa_ams_author_name" />
	<xf:title page="{$page}">{{ phrase('xa_ams_articles_awaiting_publishing_by_x', {'name': $user.Profile.xa_ams_author_name}) }}</xf:title>
<xf:else />
	<xf:title page="{$page}">{{ phrase('xa_ams_articles_awaiting_publishing_by_x', {'name': $user.username}) }}</xf:title>
</xf:if>

<xf:if is="$xf.options.xaAmsEnableAuthorList">
	<xf:breadcrumb href="{{ link('ams/authors') }}">{{ phrase('xa_ams_author_list') }}</xf:breadcrumb>
</xf:if>
	
<xf:page option="searchConstraints" value="{{ {phrase('xa_ams_articles'): {'search_type': 'ams_article'}} }}" />

<xf:css src="xa_ams.less" />

<xf:pageaction if="$user.user_id == $xf.visitor.user_id AND $xf.visitor.canAddAmsArticle()">
	<xf:button href="{{ link('ams/add') }}" class="button--cta" icon="write" overlay="true">{{ phrase('xa_ams_post_article...') }}</xf:button>
</xf:pageaction>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-type="ams_article">
	<div class="block-outer"><xf:trim>
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/authors/awaiting-publishing" data="{$user}" params="{$filters}"
			wrapperclass="block-outer-main" />
	</xf:trim></div>

	<div class="block-container">
		<div class="block-body">
			<xf:if is="$awaitingPublishing is not empty">
					<div class="structItemContainer structItemContainerAmsListView">
						<xf:foreach loop="$awaitingPublishing" value="$article">
							<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
								arg-article="{$article}"
								arg-allowInlineMod="{{ false }}" 
								arg-showWatched="{{ false }}" />
						</xf:foreach>
					</div>
			<xf:else />
				<div class="blockMessage">
					{{ phrase('xa_ams_you_do_not_have_any_articles_awaiting_publishing') }}
				</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/authors/awaiting-publishing" data="{$user}" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_author_drafts" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:if is="$user.user_id == $xf.visitor.user_id">
	<xf:title page="{$page}">{{ phrase('xa_ams_your_drafts') }}</xf:title>
<xf:elseif is="$user.Profile.xa_ams_author_name" />
	<xf:title page="{$page}">{{ phrase('xa_ams_drafts_by_x', {'name': $user.Profile.xa_ams_author_name}) }}</xf:title>
<xf:else />
	<xf:title page="{$page}">{{ phrase('xa_ams_drafts_by_x', {'name': $user.username}) }}</xf:title>
</xf:if>

<xf:if is="$xf.options.xaAmsEnableAuthorList">
	<xf:breadcrumb href="{{ link('ams/authors') }}">{{ phrase('xa_ams_author_list') }}</xf:breadcrumb>
</xf:if>

<xf:page option="searchConstraints" value="{{ {phrase('xa_ams_articles'): {'search_type': 'ams_article'}} }}" />

<xf:css src="xa_ams.less" />

<xf:pageaction if="$user.user_id == $xf.visitor.user_id AND $xf.visitor.canAddAmsArticle()">
	<xf:button href="{{ link('ams/add') }}" class="button--cta" icon="write" overlay="true">{{ phrase('xa_ams_post_article...') }}</xf:button>
</xf:pageaction>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-type="ams_article">
	<div class="block-outer"><xf:trim>
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/authors/drafts" data="{$user}" params="{$filters}"
			wrapperclass="block-outer-main" />
	</xf:trim></div>

	<div class="block-container">
		<div class="block-body">
			<xf:if is="$drafts is not empty">
					<div class="structItemContainer structItemContainerAmsListView">
						<xf:foreach loop="$drafts" value="$article">
							<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
								arg-article="{$article}"
								arg-allowInlineMod="{{ false }}" 
								arg-showWatched="{{ false }}" />
						</xf:foreach>
					</div>
			<xf:else />
				<div class="blockMessage">
					{{ phrase('xa_ams_you_do_not_have_any_saved_drafts') }}
				</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/authors/drafts" data="{$user}" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_author_filters" version_id="2022570" version_string="2.2.25"><![CDATA[<xf:form action="{{ link('ams/authors/filters', $user) }}">

	<!--[XF:above_misc_check_box]-->
	<div class="menu-row menu-row--separated">
		<xf:checkbox>
			<xf:option name="featured" selected="{$filters.featured}">{{ phrase('xa_ams_featured_articles') }}</xf:option>
			<xf:option name="is_rated" selected="{$filters.is_rated}">{{ phrase('xa_ams_articles_that_have_been_rated') }}</xf:option>
			<xf:option name="has_reviews" selected="{$filters.has_reviews}">{{ phrase('xa_ams_articles_with_reviews') }}</xf:option>
			<xf:option name="has_comments" selected="{$filters.has_comments}">{{ phrase('xa_ams_articles_with_comments') }}</xf:option>
		</xf:checkbox>
	</div>	
	
	<!--[XF:above_title]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('title:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="title" value="{$filters.title}" />
		</div>
	</div>
	
	<!--[XF:above_articles_that_mention]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('xa_ams_articles_that_mention:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="term" value="{$filters.term}" />
		</div>
	</div>	

	<!--[XF:above_rating]-->
	<xf:if is="$showRatingFilter">
		<div class="menu-row menu-row--separated">
			{{ phrase('xa_ams_avg_rating:') }}
			<div class="u-inputSpacer">
				<xf:select name="rating_avg" value="{$filters.rating_avg}">
					<xf:option value="">{{ phrase('any') }}</xf:option>
					<xf:option value="5">{{ phrase('xa_ams_5_stars') }}</xf:option>
					<xf:option value="4">{{ phrase('xa_ams_4_stars_up') }}</xf:option>
					<xf:option value="3">{{ phrase('xa_ams_3_stars_up') }}</xf:option>
					<xf:option value="2">{{ phrase('xa_ams_2_stars_up') }}</xf:option>
				</xf:select>
			</div>
		</div>
	</xf:if>

	<!--[XF:above_prefixes]-->
	<xf:if is="$prefixesGrouped is not empty">
		<div class="menu-row menu-row--separated">
			{{ phrase('prefix:') }}
			<div class="u-inputSpacer">
				<xf:macro template="prefix_macros" name="select"
					arg-prefixes="{$prefixesGrouped}"
					arg-type="ams_article"
					arg-selected="{{ $filters.prefix_id ?: 0 }}"
					arg-name="prefix_id"
					arg-noneLabel="{{ phrase('(any)') }}"
				/>
			</div>
		</div>
	</xf:if>

	<!--[XF:above_last_updated]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('last_updated:') }}
		<div class="u-inputSpacer">
			<xf:select name="last_days" value="{{ $filters.last_days ?: $forum.list_date_limit_days }}">
				<xf:option value="-1">{{ phrase('any_time') }}</xf:option>
				<xf:option value="7">{{ phrase('x_days', {'days': '7'}) }}</xf:option>
				<xf:option value="14">{{ phrase('x_days', {'days': '14'}) }}</xf:option>
				<xf:option value="30">{{ phrase('x_days', {'days': '30'}) }}</xf:option>
				<xf:option value="60">{{ phrase('x_months', {'months': '2'}) }}</xf:option>
				<xf:option value="90">{{ phrase('x_months', {'months': '3'}) }}</xf:option>
				<xf:option value="182">{{ phrase('x_months', {'months': '6'}) }}</xf:option>
				<xf:option value="365">{{ phrase('1_year') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<!--[XF:above_state]-->
	<xf:if is="{{ $xf.visitor.hasPermission('xa_ams', 'viewModerated') || $xf.visitor.hasPermission('xa_ams', 'viewDeleted') }}">
		<div class="menu-row menu-row--separated">
			{{ phrase('xa_ams_content_state:') }}
			<div class="u-inputSpacer">
				<xf:select name="state" value="{$filters.state}">
					<xf:option value="">{{ phrase('any') }}</xf:option>
					<xf:option value="visible">{{ phrase('visible') }}</xf:option>
					<xf:if is="{{ $xf.visitor.hasPermission('xa_ams', 'viewModerated') }}">
						<xf:option value="moderated">{{ phrase('moderated') }}</xf:option>
					</xf:if>
					<xf:if is="{{ $xf.visitor.hasPermission('xa_ams', 'viewDeleted') }}">
						<xf:option value="deleted">{{ phrase('deleted') }}</xf:option>
					</xf:if>
				</xf:select>
			</div>
		</div>
	</xf:if>
	
	<!--[XF:above_sort_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('sort_by:') }}
		<div class="inputGroup u-inputSpacer">
			<xf:select name="order" value="{{ $filters.order ?: $xf.options.xaAmsListDefaultOrder }}">
				<xf:option value="publish_date">{{ phrase('xa_ams_publish_date') }}</xf:option>
				<xf:option value="last_update">{{ phrase('xa_ams_last_update') }}</xf:option>
				<xf:option value="rating_weighted">{{ phrase('rating') }}</xf:option>
				<xf:option value="reaction_score">{{ phrase('reaction_score') }}</xf:option>
				<xf:option value="view_count">{{ phrase('views') }}</xf:option>
				<xf:option value="title">{{ phrase('title') }}</xf:option>
			</xf:select>
			<span class="inputGroup-splitter"></span>
			<xf:select name="direction" value="{{ $filters.direction ?: 'desc' }}">
				<xf:option value="desc">{{ phrase('descending') }}</xf:option>
				<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<div class="menu-footer">
		<span class="menu-footer-controls">
			<xf:button type="submit" class="button--primary">{{ phrase('filter') }}</xf:button>
		</span>
	</div>
	<xf:hiddenval name="apply">1</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="xa_ams_author_list" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:title page="{$page}">{{ phrase('xa_ams_author_list') }}</xf:title>

<xf:breadcrumb href="{{ link('ams/authors') }}">{{ phrase('xa_ams_author_list') }}</xf:breadcrumb>

<xf:css src="xa_ams.less" />

<xf:page option="searchConstraints" value="{{ {
	phrase('xa_ams_articles'): {'search_type': 'ams_article'}
} }}" />

<xf:head option="metaNoindex"><meta name="robots" content="noindex" /></xf:head>

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:ams/authors', null, {'page': $page > 1 ? $page : null}) }}" />

<xf:pageaction if="$xf.visitor.canAddAmsArticle()">
	<xf:button href="{{ link('ams/add') }}" class="button--cta" icon="write" overlay="true">{{ phrase('xa_ams_post_article...') }}</xf:button>
</xf:pageaction>

<div class="block">
	<div class="block-outer"><xf:trim>
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/authors" params="{$filters}"
			wrapperclass="block-outer-main" />
	</xf:trim></div>

	<div class="block-container">
		<div class="block-body">
			<xf:if is="$authors is not empty">
				<div class="structItemContainer">
					<div class="structItemContainer-group js-authorList">
						<xf:foreach loop="$authors" value="$author">
							<xf:macro name="author"
								arg-author="{$author}" />
						</xf:foreach>
					</div>
				</div>
			<xf:else />
				<div class="block-row">{{ phrase('xa_ams_there_are_no_authors_to_display') }}</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/authors" params="{$filters}"
			wrapperclass="block-outer-main" />
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>

<xf:macro name="author"
	arg-author="!"
	arg-extraInfo="">

	<xf:css src="structured_list.less" />

	<div class="structItem structItem--author js-authorListItem-{$author.user_id}" data-author="{$author.username}">
		<div class="structItem-cell structItem-cell--icon structItem-cell--iconExpanded">
			<div class="structItem-iconContainer">
				<xf:avatar user="$author" size="m" defaultname="{$author.username}" />
			</div>
		</div>
		<div class="structItem-cell structItem-cell--main structItem-cell--listViewLayout" data-xf-init="touch-proxy">
			<div class="structItem-title">
				<a href="{{ link('ams/authors', $author) }}" class="" data-tp-primary="on">
					<xf:if is="$author.Profile.xa_ams_author_name">
						{$author.Profile.xa_ams_author_name}
					<xf:else />
						{$author.username}
					</xf:if>
				</a>
			</div>

			<div class="structItem-minor">
				<xf:if contentcheck="true">
					<ul class="structItem-extraInfo">
					<xf:contentcheck>
					</xf:contentcheck>
					</ul>
				</xf:if>
			</div>

			<div class="structItem-authorDetails">
				{{ snippet($author.Profile.xa_ams_about_author, 300, {'stripQuote': true}) }}
			</div>

			<div class="structItem-listViewMeta">
				<xf:if is="$author.xa_ams_article_count">
					<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--articles">
						<dt><a href="{{ link('ams/authors', $author) }}" class="u-concealed">{{ phrase('xa_ams_articles') }}</a></dt>
						<dd><a href="{{ link('ams/authors', $author) }}" class="u-concealed">{$author.xa_ams_article_count|number}</a></dd>
					</dl>
				</xf:if>
				<xf:if is="$author.xa_ams_series_count">
					<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--series">
						<dt><a href="{{ link('ams/series', null, {'creator_id': $author.user_id}) }}" class="u-concealed">{{ phrase('xa_ams_series') }}</a></dt>
						<dd><a href="{{ link('ams/series', null, {'creator_id': $author.user_id}) }}" class="u-concealed">{$author.xa_ams_series_count|number}</a></dd>
					</dl>
				</xf:if>
				<xf:if is="$author.xa_ams_comment_count">
					<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--comments">
						<dt>{{ phrase('xa_ams_comments') }}</dt>
						<dd>{$author.xa_ams_comment_count|number}</dd>
					</dl>
				</xf:if>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_author_reviews" version_id="2022670" version_string="2.2.26"><![CDATA[<xf:if is="$user.user_id == $xf.visitor.user_id">
	<xf:title page="{$page}">{{ phrase('xa_ams_your_reviews') }}</xf:title>
<xf:else />	
	<xf:title page="{$page}">{{ phrase('xa_ams_reviews_by_x', {'name': $user.username}) }}</xf:title>
</xf:if>

<xf:if is="$xf.options.xaAmsEnableAuthorList">
	<xf:breadcrumb href="{{ link('ams/authors') }}">{{ phrase('xa_ams_author_list') }}</xf:breadcrumb>
</xf:if>

<xf:page option="searchConstraints" value="{{ {
	phrase('xa_ams_articles'): {'search_type': 'ams_article'}
} }}" />

<xf:if is="$canInlineModReviews">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<xf:set var="$sortOrders" value="{{ {
	'review_date': phrase('date'),
	'vote_score': phrase('xa_ams_most_helpful'),
	'rating': phrase('rating')
} }}" />

<div class="block block--messages"
	data-xf-init="{{ $canInlineModReviews ? 'inline-mod' : '' }}"
	data-type="ams_rating"
	data-href="{{ link('inline-mod') }}">

	<div class="block-outer"><xf:trim>
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/authors/reviews" data="{$user}" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
					<xf:contentcheck>
						<xf:if is="$canInlineModReviews">
							<xf:macro template="inline_mod_macros" name="button" />
						</xf:if>
					</xf:contentcheck>
				</div>
			</div>
		</xf:if>
	</xf:trim></div>

	<div class="block-container"
		data-xf-init="lightbox"
		data-lb-universal="{$xf.options.lightBoxUniversal}">

		<div class="block-tabHeader tabs">
			<div class="hScroller" data-xf-init="h-scroller">
				<span class="hScroller-scroll">
					<!--[XF:review_tabs:start]-->
					<a href="{{ link('ams/authors/reviews', $user, $reviewTabs.latest.filters) }}" class="tabs-tab {{ $reviewTabs.latest.selected ? 'is-active' : '' }}">{{ phrase('latest') }}</a>
					<a href="{{ link('ams/authors/reviews', $user, $reviewTabs.helpful.filters) }}" class="tabs-tab {{ $reviewTabs.helpful.selected ? 'is-active' : '' }}">{{ phrase('xa_ams_most_helpful') }}</a>
					<a href="{{ link('ams/authors/reviews',$user, $reviewTabs.rating.filters) }}" class="tabs-tab {{ $reviewTabs.rating.selected ? 'is-active' : '' }}">{{ phrase('rating') }}</a>
					<!--[XF:review_tabs:end]-->
				</span>
			</div>

			<div class="tabs-extra tabs-extra--minor">
				<a class="menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
				<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
					data-href="{{ link('ams/authors/reviews-filters', $user, $filters) }}"
					data-load-target=".js-filterMenuBody">
					<div class="menu-content">
						<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
						<div class="js-filterMenuBody">
							<div class="menu-row">{{ phrase('loading...') }}</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<xf:if contentcheck="true">
			<div class="block-filterBar">
				<div class="filterBar">
					<ul class="filterBar-filters">
					<xf:contentcheck>
						<xf:if is="$filters.rating">
							<li><a href="{{ link('ams/authors/reviews', $user, $filters|replace({'rating': null})) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('rating:') }}</span>
								{{ phrase('x_stars', {'rating': $filters.rating}) }}
							</a></li>
						</xf:if>						

						<xf:if is="$filters.term">
							<li><a href="{{ link('ams/authors/reviews', $user, $filters|replace('term', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('xa_ams_mentions:') }}</span>
								{$filters.term}</a></li>
						</xf:if>

						<xf:if is="$filters.order AND {$sortOrders.{$filters.order}}">
							<xf:if is="
								!$reviewTabs.latest.selected
								AND !$reviewTabs.helpful.selected
								AND !$reviewTabs.rating.selected
							">
								<li><a href="{{ link('ams/authors/reviews', $user, $filters|replace({'order': null, 'direction': null})) }}"
									class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('return_to_default_order')|for_attr }}">
									<span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
									{$sortOrders.{$filters.order}}
									<xf:fa icon="{{ $filters.direction == 'asc' ? 'fa-angle-up' : 'fa-angle-down' }}" />
									<span class="u-srOnly"><xf:if is="$filters.direction == 'asc'">{{ phrase('ascending') }}<xf:else />{{ phrase('descending') }}</xf:if></span>
								</a></li>
							</xf:if>
						</xf:if>
					</xf:contentcheck>
					</ul>
				</div>
			</div>
		</xf:if>

		<div class="block-body">
			<xf:if is="$reviews is not empty">
				<div class="structItemContainer">
					<xf:foreach loop="$reviews" value="$review">
						<xf:macro template="xa_ams_review_macros" name="review"
							arg-review="{$review}"
							arg-article="{$review.Article}"
							arg-showArticle="{{ true }}" 
							arg-showAttachments="{{ true }}" />
					</xf:foreach>
				</div>
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('xa_ams_there_no_reviews_matching_your_filters') }}</div>
			<xf:else />
				<div class="block-row">{{ phrase('xa_ams_no_reviews_have_been_left_recently') }}</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/authors/reviews" data="{$user}" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_author_view" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:if is="$user.user_id == $xf.visitor.user_id">
	<xf:title page="{$page}">{{ phrase('xa_ams_your_published_articles') }}</xf:title>
<xf:elseif is="$user.Profile.xa_ams_author_name" />
	<xf:title page="{$page}">{{ phrase('xa_ams_articles_by_x', {'name': $user.Profile.xa_ams_author_name}) }}</xf:title>
<xf:else />
	<xf:title page="{$page}">{{ phrase('xa_ams_articles_by_x', {'name': $user.username}) }}</xf:title>
</xf:if>

<xf:if is="$xf.options.xaAmsEnableAuthorList">
	<xf:breadcrumb href="{{ link('ams/authors') }}">{{ phrase('xa_ams_author_list') }}</xf:breadcrumb>
</xf:if>

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:ams/authors', $user, {'page': $page > 1 ? $page : null}) }}" />

<xf:page option="searchConstraints" value="{{ {phrase('xa_ams_articles'): {'search_type': 'ams_article'}} }}" />

<xf:css src="xa_ams.less" />

<xf:pageaction if="$user.user_id == $xf.visitor.user_id AND $xf.visitor.canAddAmsArticle()">
	<xf:button href="{{ link('ams/add') }}" class="button--cta" icon="write" overlay="true">{{ phrase('xa_ams_post_article...') }}</xf:button>
</xf:pageaction>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block {{ ($xf.options.xaAmsAuthorPageArticleListLayoutType == 'article_view' AND !$fromProfile) ? 'block--messages' : '' }}" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="ams_article" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/authors" data="{$user}" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
					<xf:contentcheck>
						<xf:if is="$canInlineMod">
							<xf:macro template="inline_mod_macros" name="button" />
						</xf:if>
						<xf:if is="$xf.visitor.user_id && $xf.visitor.user_id != $user.user_id">
							<xf:button href="{{ link('ams/authors/watch', $user) }}" class="button--link"
								data-xf-click="switch-overlay"
								data-sk-watch="{{ phrase('watch') }}"
								data-sk-unwatch="{{ phrase('unwatch') }}">
								<xf:if is="{$user.AMSAuthorWatch.{$user.user_id}}">{{ phrase('unwatch') }}<xf:else />{{ phrase('watch') }}</xf:if>
							</xf:button>
						</xf:if>						
					</xf:contentcheck>
				</div>
			</div>
		</xf:if>

	</xf:trim></div>

	<div class="block-container">
		<xf:macro template="xa_ams_author_article_list_macros" name="list_filter_bar"
			arg-filters="{$filters}"
			arg-baseLinkPath="ams/authors"
			arg-linkData="{$user}" />

		<div class="block-body">
			<xf:if is="$articles is not empty">
				<xf:if is="$xf.options.xaAmsAuthorPageArticleListLayoutType == 'article_view' && $xf.visitor.hasAmsArticlePermission('viewArticleAttach')">
					<xf:foreach loop="$articles" value="$article">
						<xf:macro template="xa_ams_article_list_macros" name="article_view_layout"
							arg-article="{$article}" />
					</xf:foreach>
				<xf:elseif is="$xf.options.xaAmsAuthorPageArticleListLayoutType == 'grid_view' && $xf.visitor.hasAmsArticlePermission('viewArticleAttach')" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_grid_view_layout.less" />

					<div class="gridContainerAmsGridView">		
						<ul class="ams-grid-view">
							<xf:foreach loop="$articles" value="$article">
								<xf:macro template="xa_ams_article_list_macros" name="grid_view_layout"
									arg-article="{$article}" />
							</xf:foreach>
						</ul>
					</div>
				<xf:elseif is="$xf.options.xaAmsAuthorPageArticleListLayoutType == 'tile_view' && $xf.visitor.hasAmsArticlePermission('viewArticleAttach')" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_tile_view_layout.less" />

					<div class="gridContainerAmsTileView">		
						<ul class="ams-tile-view">
							<xf:foreach loop="$articles" value="$article">
								<xf:macro template="xa_ams_article_list_macros" name="tile_view_layout"
									arg-article="{$article}" />
							</xf:foreach>
						</ul>
					</div>	
				<xf:else />
					<div class="structItemContainer structItemContainerAmsListView">
						<xf:foreach loop="$articles" value="$article">
							<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
								arg-article="{$article}" />
						</xf:foreach>
					</div>
				</xf:if>
			<xf:elseif is="$filters" />
				<div class="blockMessage">
					<xf:if is="$user.user_id == $xf.visitor.user_id">
						{{ phrase('xa_ams_you_have_not_added_any_articles_which_matches_your_filters', {'name': $user.username}) }}
					<xf:else />
						{{ phrase('xa_ams_x_has_not_added_any_articles_which_matches_your_filters', {'name': $user.username}) }}
					</xf:if>
				</div>
			<xf:else />
				<div class="blockMessage">
					<xf:if is="$user.user_id == $xf.visitor.user_id">
						{{ phrase('xa_ams_you_have_not_posted_any_articles_yet') }}
					<xf:else />
						{{ phrase('xa_ams_x_has_not_posted_any_articles_yet', {'name': $user.username}) }}
					</xf:if>
				</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/authors" data="{$user}" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_author_watch" version_id="2022070" version_string="2.2.20"><![CDATA[<xf:if is="$isWatched">
	<xf:title>{{ phrase('xa_ams_unwatch_author') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('xa_ams_watch_author') }}</xf:title>
</xf:if>

<xf:form action="{{ link('ams/authors/watch', $author) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$isWatched">
				<xf:inforow rowtype="confirm">
					{{ phrase('xa_ams_you_sure_you_want_to_unwatch_this_author') }}
				</xf:inforow>
				<xf:hiddenval name="stop">1</xf:hiddenval>
			<xf:else />
				<xf:radiorow name="notify_on" value="article"
					label="{{ phrase('send_notifications_for') }}">

					<xf:option value="article">{{ phrase('xa_ams_new_articles_only') }}</xf:option>
					<xf:option value="">{{ phrase('dont_send_notifications') }}</xf:option>
				</xf:radiorow>

				<xf:checkboxrow label="{{ phrase('send_notifications_via') }}">
					<xf:option name="send_alert" value="1" selected="true">{{ phrase('alerts') }}</xf:option>
					<xf:option name="send_email" value="1">{{ phrase('emails') }}</xf:option>
				</xf:checkboxrow>
			</xf:if>
		</div>
		<xf:if is="$isWatched">
			<xf:submitrow submit="{{ phrase('unwatch') }}" rowtype="simple" icon="notificationsOff" />
		<xf:else />
			<xf:submitrow submit="{{ phrase('watch') }}" icon="notificationsOn" />
		</xf:if>
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_category_add_article" version_id="2022870" version_string="2.2.28"><![CDATA[<xf:title>{{ $category.content_term ?  phrase('xa_ams_post_x', {'term': $category.content_term}) : phrase('xa_ams_post_article') }}</xf:title>

<xf:breadcrumb source="$category.getBreadcrumbs()" />

<xf:form action="{{ link('ams/categories/add', $category) }}" ajax="true" class="block"
	draft="{{ link('ams/categories/draft', $category) }}"
	data-preview-url="{{ link('ams/categories/preview', $category) }}">

	<div class="block-container">
		<div class="block-body">
			<xf:macro template="xa_ams_article_edit_macros" name="title_article_add"
				arg-article="{$article}"
				arg-prefixes="{$prefixes}" />

			<xf:macro template="xa_ams_article_edit_macros" name="message"
				arg-article="{$article}"					  
				arg-message="{$article.message_}"
				arg-attachmentData="{$attachmentData}"
				arg-showAttachmentRequired="{{ true }}"	/>

			<hr class="formRowSep" />

			<xf:if is="$category.canEditTags()">
				<xf:tokeninputrow name="tags" value="{$category.draft_article.tags}" 
					href="{{ link('misc/tag-auto-complete') }}"
					min-length="{$xf.options.tagLength.min}"
					max-length="{$xf.options.tagLength.max}"
					max-tokens="{$xf.options.maxContentTags}"
					label="{{ phrase('tags') }}">

					<xf:explain>
						{{ phrase('multiple_tags_may_be_separated_by_commas') }}
						<xf:if is="$category.min_tags">
							{{ phrase('this_content_must_have_at_least_x_tags', {'min': $category.min_tags}) }}
						</xf:if>
					</xf:explain>
				</xf:tokeninputrow>
			</xf:if>

			<hr class="formRowSep" />

			<xf:macro template="xa_ams_article_edit_macros" name="description" arg-article="{$article}" />

			<hr class="formRowSep" />

			<xf:if is="$category.allow_original_source">
				<xf:macro template="xa_ams_article_edit_macros" name="original_source_article_author" arg-article="{$article}" />
				<xf:dateinputrow name="os_article_date" value=""
					label="{{ phrase('xa_ams_original_source_article_date') }}" 
					hint="{{ $article.Category.require_original_source ? phrase('required') : phrase('optional') }}" />
				<xf:macro template="xa_ams_article_edit_macros" name="original_source_article_title" arg-article="{$article}" />
				<xf:macro template="xa_ams_article_edit_macros" name="original_source_name" arg-article="{$article}" />
				<xf:macro template="xa_ams_article_edit_macros" name="original_source_url" arg-article="{$article}" />

				<xf:formrow>
					<div>{{ phrase('xa_ams_original_source_explain') }}</div>
				</xf:formrow>

				<hr class="formRowSep" />
			</xf:if>
			
			<xf:if is="$category.allow_author_rating && ($xf.visitor->hasPermission('xa_ams', 'setAuthorRatingOwn') || $xf.visitor->hasPermission('xa_ams', 'editAny'))">
				<xf:selectrow name="author_rating" value="{$article.author_rating}" label="{{ phrase('xa_ams_author_rating') }}" hint="{{ phrase('optional') }}">
					<xf:option value="0" label="{{ phrase('xa_ams_no_rating') }}" />
					<xf:option value="5" label="5.00" />
					<xf:option value="4.75" label="4.75" />
					<xf:option value="4.5" label="4.50" />
					<xf:option value="4.25" label="4.25" />
					<xf:option value="4" label="4.00" />
					<xf:option value="3.75" label="3.75" />
					<xf:option value="3.5" label="3.50" />
					<xf:option value="3.25" label="3.25" />
					<xf:option value="3" label="3.00" />
					<xf:option value="2.75" label="2.75" />
					<xf:option value="2.5" label="2.50" />
					<xf:option value="2.25" label="2.25" />
					<xf:option value="2" label="2.00" />
					<xf:option value="1.75" label="1.75" />
					<xf:option value="1.5" label="1.50" />
					<xf:option value="1.25" label="1.25" />
					<xf:option value="1" label="1.00" />
				</xf:selectrow>

				<hr class="formRowSep" />
			</xf:if>
			
			<xf:if is="$category.allow_location">
				<xf:macro template="xa_ams_article_edit_macros" name="location" arg-article="{$article}" />
			</xf:if>

			<hr class="formRowSep" />

			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
						arg-type="ams_articles"
						arg-set="{$article.custom_fields}"
						arg-group="header"
						arg-editMode="{{ $article.getFieldEditMode() }}"
						arg-onlyInclude="{$category.field_cache}" />
				</xf:contentcheck>

				<hr class="formRowSep" />
			</xf:if>

			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
						arg-type="ams_articles"
						arg-set="{$article.custom_fields}"
						arg-group="above_article"
						arg-editMode="{{ $article.getFieldEditMode() }}"
						arg-onlyInclude="{$category.field_cache}" />
				</xf:contentcheck>

				<hr class="formRowSep" />
			</xf:if>

			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
						arg-type="ams_articles"
						arg-set="{$article.custom_fields}"
						arg-group="below_article"
						arg-editMode="{{ $article.getFieldEditMode() }}"
						arg-onlyInclude="{$category.field_cache}" />
				</xf:contentcheck>

				<hr class="formRowSep" />
			</xf:if>

			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit_groups"
						arg-type="ams_articles"
						arg-set="{$article.custom_fields}"
						arg-groups="{{ ['new_tab', 'sidebar', 'self_place'] }}"
						arg-editMode="{{ $article.getFieldEditMode() }}"
						arg-onlyInclude="{$category.field_cache}" />
				</xf:contentcheck>

				<hr class="formRowSep" />
			</xf:if>

			<xf:if is="$category.canUploadAndManageArticleAttachments()">
				<xf:formrow>
					<xf:checkbox>
						<xf:option name="cover_image_above_article"
							label="{{ phrase('xa_ams_display_cover_image_above_article') }}"
							hint="{{ phrase('xa_ams_article_create_display_cover_image_above_article_explain') }}"
							checked="{{ false }}">
						</xf:option>
					</xf:checkbox>
				</xf:formrow>

				<hr class="formRowSep" />
			</xf:if>

			<xf:formrow>
				<xf:checkbox>
					<xf:option name="about_author" 
						label="{{ phrase('xa_ams_display_about_author') }}"
						hint="{{ phrase('xa_ams_display_about_author_explain') }}"
						checked="{{ $article }}">
					</xf:option>
				</xf:checkbox>
			</xf:formrow>

			<hr class="formRowSep" />

			<xf:if is="$category.allow_comments && ($xf.visitor->hasPermission('xa_ams', 'lockUnlockCommentsOwn') || $xf.visitor->hasPermission('xa_ams', 'lockUnlockCommentsAny'))">
				<xf:formrow>
					<xf:checkbox>
						<xf:option name="comments_open" 
							label="{{ phrase('xa_ams_comments_open') }}"
							hint="{{ phrase('xa_ams_comments_open_explain') }}"
							checked="{{ $article }}">
						</xf:option>
					</xf:checkbox>
				</xf:formrow>
			<xf:else />
				<xf:hiddenval name="comments_open">1</xf:hiddenval>
			</xf:if>
			
			<xf:if is="$category.allow_ratings && ($xf.visitor->hasPermission('xa_ams', 'lockUnlockRatingsOwn') || $xf.visitor->hasPermission('xa_ams', 'lockUnlockRatingsAny'))">
				<xf:formrow>
					<xf:checkbox>
						<xf:option name="ratings_open" 
							label="{{ phrase('xa_ams_ratings_open') }}"
							hint="{{ phrase('xa_ams_ratings_open_explain') }}"
							checked="{{ $article }}">
						</xf:option>
					</xf:checkbox>
				</xf:formrow>
			<xf:else />
				<xf:hiddenval name="ratings_open">1</xf:hiddenval>
			</xf:if>			
		</div>
		
		<xf:if is="$category.canCreatePoll()">
			<h2 class="block-formSectionHeader">
				<span class="collapseTrigger collapseTrigger--block{{ $category.draft_article.poll ? ' is-active' : '' }}" data-xf-click="toggle" data-target="< :up :next">
					<span class="block-formSectionHeader-aligner">{{ phrase('post_poll') }}</span>
				</span>
			</h2>
			<div class="block-body block-body--collapsible{{ $category.draft_article.poll ? ' is-active' : '' }}">
				<xf:macro template="poll_macros" name="add_edit_inputs" arg-draft="{$category.draft_article.poll}" />
			</div>
		</xf:if>
		
		<h3 class="block-formSectionHeader">
			<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up:next">
				<span class="block-formSectionHeader-aligner">{{ phrase('xa_ams_multi_page_article_options') }}</span>
			</span>
		</h3>
		<div class="block-body block-body--collapsible">
			<xf:macro template="xa_ams_article_edit_macros" name="overview_page_title" arg-article="{$article}" />
		</div>			

		<xf:if is="$category.canManageSeoOptions()">		
			<h3 class="block-formSectionHeader">
				<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up:next">
					<span class="block-formSectionHeader-aligner">{{ phrase('xa_ams_search_engine_optimization_options') }}</span>
				</span>
			</h3>
			<div class="block-body block-body--collapsible">
				<xf:macro template="xa_ams_article_edit_macros" name="og_title_meta_title" arg-article="{$article}" />			
				<xf:macro template="xa_ams_article_edit_macros" name="meta_description" arg-article="{$article}" />
			</div>	
		</xf:if>
		
		<hr class="formRowSep" />

		<xf:radiorow name="save_type" value="publish_now"
			label="{{ phrase('xa_ams_publishing_options') }}"
			explain="{{ phrase('xa_ams_publishing_options_explain') }}">

			<xf:option value="publish_now"
				label="{{ phrase('xa_ams_submit_for_publishing_now') }}"
				hint="{{ phrase('xa_ams_submit_for_publishing_now_explain') }}">
			</xf:option>

			<xf:option value="publish_scheduled" 
				label="{{ phrase('xa_ams_schedule_for_publishing_on_a_set_date_time') }}"
				hint="{{ phrase('xa_ams_schedule_for_publishing_on_a_set_date_time_explain') }}"
 				data-hide="true">

				<xf:dependent>
					<xf:formrow label="{{ phrase('xa_ams_publish_date') }}">
						<div class="inputGroup">
							<xf:dateinput name="article_publish_date" value="{{ $xf.time ? date($xf.time, 'picker') : '' }}" />
							<span class="inputGroup-text">
								{{ phrase('criteria_time:') }}
							</span>
							<span class="inputGroup" dir="ltr">
								<xf:select name="article_publish_hour" value="" class="input--inline input--autoSize">
									<xf:foreach loop="$hours" value="$hour">
										<xf:option value="{$hour}" label="{$hour}" />
									</xf:foreach>
								</xf:select>
								<span class="inputGroup-text">:</span>
								<xf:select name="article_publish_minute" value="" class="input--inline input--autoSize">
									<xf:foreach loop="$minutes" value="$minute">
										<xf:option value="{$minute}" label="{$minute}" />
									</xf:foreach>
								</xf:select>
							</span>
						</div>
					</xf:formrow>

					<xf:selectrow name="article_timezone" value="{$xf.visitor.timezone}">
						<xf:options source="$timeZones" />
					</xf:selectrow>
				</xf:dependent>					
			</xf:option>

			<xf:option value="draft" 
				label="{{ phrase('xa_ams_save_as_draft') }}"
				hint="{{ phrase('xa_ams_save_as_draft_explain') }}"
				wrapperclass="amsSaveAsDraft">
			</xf:option>
		</xf:radiorow>

		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_category_list_macros" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:macro name="simple_category_list"
	arg-selected="0"
	arg-pathToSelected="{{ [] }}"
	arg-children="!"
	arg-extras="!"
	arg-isActive="{{ false }}"
>
	<ol class="categoryList toggleTarget{{ $isActive ? ' is-active' : '' }}">
		<xf:foreach loop="$children" key="$id" value="$child">
			<xf:macro name="simple_category_list_item"
				arg-selected="{$selected}"
				arg-pathToSelected="{$pathToSelected}"
				arg-category="{$child.record}"
				arg-extras="{$extras.{$id}}"
				arg-children="{$child}"
				arg-childExtras="{$extras}"
			/>
		</xf:foreach>
	</ol>
</xf:macro>

<xf:macro name="simple_category_list_item"
	arg-selected="!"
	arg-pathToSelected="{{ [] }}"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
>
	<xf:set var="$isSelected" value="{{ $category.category_id == $selected }}" />
	<xf:set var="$hasPathToSelected" value="{$pathToSelected.{$category.category_id}}" />
	<xf:set var="$isActive" value="{{ $isSelected OR $hasPathToSelected AND $children is not empty }}" />

	<xf:if is="$xf.options.xaAmsExpandCategoryNav || $category.expand_category_nav">
		<xf:set var="$isActive" value="{{ true }}" />
	</xf:if>
	
	<li class="categoryList-item">
		<div class="categoryList-itemRow">
			<xf:if is="$children is not empty">
				<a class="categoryList-toggler{{ $isActive ? ' is-active' : '' }}"
					data-xf-click="toggle" data-target="< :up :next"
					role="button" tabindex="0" aria-label="{{ phrase('toggle_expanded') }}"
				></a>
			<xf:else />
				<span class="categoryList-togglerSpacer"></span>
			</xf:if>
			<a href="{{ link('ams/categories', $category) }}" class="categoryList-link{{ $isSelected ? ' is-selected' : '' }}">
				{$category.title}
			</a>
			<span class="categoryList-label">
				<span class="label label--subtle label--smallest">{$extras.article_count|number_short}</span>
			</span>
		</div>
		<xf:if is="$children is not empty">
			<xf:macro name="simple_category_list"
				arg-selected="{$selected}"
				arg-pathToSelected="{$pathToSelected}"
				arg-children="{$children}"
				arg-extras="{$childExtras}"
				arg-isActive="{$isActive}"
			/>
		</xf:if>
	</li>
</xf:macro>

<xf:macro name="simple_list_block" 
	arg-categoryTree="!" 
	arg-categoryExtras="!" 
	arg-selected="{{ 0 }}" 
	arg-authorId="{{ 0 }}" 
	arg-seriesAuthorId="{{ 0 }}">
	
	<div class="block">
		<div class="block-container">
			<h3 class="block-header">{{ phrase('categories') }}</h3>
			<div class="block-body">
				<xf:if is="$categoryTree && $categoryTree.count()">
					<xf:macro name="simple_category_list"
						arg-selected="{$selected}"
						arg-pathToSelected="{{ $selected ? $categoryTree.getPathTo($selected) : [] }}"
						arg-children="{$categoryTree}"
						arg-extras="{$categoryExtras}"
						arg-isActive="{{ true }}" />

					<hr class="block-separator" />
				</xf:if>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="category"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-chooseName=""
	arg-bonusInfo="">
	
	<div class="node node--depth2 node--amsCategory node--amsCategory{$category.category_id}">
		<div class="node-body">
			<div class="node-main js-nodeMain">
				<xf:if is="$chooseName">
					<xf:checkbox standalone="true">
						<xf:option labelclass="u-pullRight" class="js-chooseItem" name="{$chooseName}[]" value="{$category.category_id}" />
					</xf:checkbox>
				</xf:if>

				<xf:set var="$descriptionDisplay" value="{{ property('nodeListDescriptionDisplay') }}" />
				<h3 class="node-title">
					<a href="{{ link('ams/categories', $category) }}" data-xf-init="{{ $descriptionDisplay == 'tooltip' ? 'element-tooltip' : '' }}" data-shortcut="node-description">{$category.title}</a>
				</h3>
				<xf:if is="$descriptionDisplay != 'none' && $category.description">
					<div class="node-description {{ $descriptionDisplay == 'tooltip' ? 'node-description--tooltip js-nodeDescTooltip' : '' }}">{$category.description|raw}</div>
				</xf:if>

				<div class="node-meta">
					<div class="node-statsMeta">
						<dl class="pairs pairs--inline">
							<dt>{{ phrase('xa_ams_articles') }}</dt>
							<dd>{$extras.article_count|number}</dd>
						</dl>
					</div>
				</div>

				<xf:if is="$bonusInfo is not empty">
					<div class="node-bonus">{$bonusInfo}</div>
				</xf:if>
			</div>

			<div class="node-stats node-stats--single">
				<dl class="pairs pairs--rows">
					<dt>{{ phrase('xa_ams_articles') }}</dt>
					<dd>{$extras.article_count|number}</dd>
				</dl>
			</div>

			<div class="node-extra">
				<xf:if is="{$extras.last_article_date}">
					<div class="node-extra-row"><a href="{{ link('ams', {'article_id': $extras.last_article_id}) }}" class="node-extra-title" title="{$extras.last_article_title}">{$extras.last_article_title}</a></div>
					<div class="node-extra-row">
						<xf:date time="{$extras.last_article_date}" class="node-extra-date" />
					</div>
				<xf:else />
					<span class="node-extra-placeholder">{{ phrase('none') }}</span>
				</xf:if>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_category_map_view" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:title>{$category.title} - {{ phrase('xa_ams_map') }}</xf:title>

<xf:css src="xa_ams.less" />

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:ams/categories/map', $category) }}" />

<xf:breadcrumb source="$category.getBreadcrumbs({{ true }})" />

<xf:macro template="xa_ams_article_page_macros" name="article_page_options"
	arg-category="{$category}" />

<div class="block">
	<div class="block-container">
		<xf:macro template="xa_ams_index_macros" name="list_filter_bar"
			arg-filters="{$filters}"
			arg-baseLinkPath="ams/categories/map"
			arg-category="{$category}"
			arg-creatorFilter="{$creatorFilter}" />

		<div class="block-header">	
			<div style="text-align: center;">
				<a href="{{ link('ams/categories/map-marker-legend', $category) }}" data-xf-click="overlay">{{ phrase('xa_ams_view_legend') }}</a>
			</div>
		</div>
		
		<div class="block-body">
			<xf:if is="$mapItems is not empty">
				<xf:macro template="xa_ams_map_macros" name="articles_map"
					arg-mapItems="{$mapItems}"
					arg-mapId="ams-cat-{$category.category_id}-full"
					arg-containerHeight="800" />	
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('xa_ams_there_no_articles_matching_your_filters') }}</div>
			<xf:else />
				<div class="block-row">{{ phrase('xa_ams_no_articles_have_been_added_yet') }}</div>
			</xf:if>
		</div>
		
		<div class="block-footer">	
			<div style="text-align: center;">
				<a href="{{ link('ams/categories/map-marker-legend', $category) }}" data-xf-click="overlay">{{ phrase('xa_ams_view_legend') }}</a>
			</div>
		</div>		
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_category_mark_read" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_mark_articles_read') }}</xf:title>

<xf:form action="{{ link('ams/categories/mark-read', $category, {'date': $date}) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('xa_ams_you_sure_you_want_to_mark_this_category_read') }}
				<strong><a href="{{ link('ams/categories', $category) }}">{$category.title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('xa_ams_mark_articles_read') }}" rowtype="simple" icon="confirm" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_category_prefixes" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:macro template="prefix_macros" name="select"
	arg-name="na"
	arg-prefixes="{$prefixes}"
	arg-type="ams_article" />]]></template>
  <template type="public" title="xa_ams_category_view" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:title page="{$page}">{{ $category.meta_title ? $category.meta_title : $category.title }}</xf:title>
<xf:h1>{$category.title}</xf:h1>
<xf:description>{$category.description|raw}</xf:description>

<xf:if is="$category.meta_description">
	<xf:set var="$descSnippet" value="{{ snippet($category.meta_description, 320, {'stripBbCode': true}) }}" />
<xf:else />
	<xf:set var="$descSnippet" value="{{ snippet($category.description, 256, {'stripBbCode': true}) }}" />
</xf:if>

<xf:css src="xa_ams.less" />

<xf:if is="!$category.isSearchEngineIndexable()">
	<xf:head option="metaNoindex"><meta name="robots" content="noindex" /></xf:head>
</xf:if>

<xf:macro template="metadata_macros" name="metadata"
	arg-title="{{ $category.og_title ? $category.og_title : ($category.meta_title ? $category.meta_title : $category.title) }}"	
	arg-description="{$descSnippet}"
	arg-shareUrl="{{ link('canonical:ams/categories', $category) }}"
	arg-canonicalUrl="{{ link('canonical:ams/categories', $category, {'page': $page > 1 ? $page : null}) }}" 
	arg-imageUrl="{{ $category.content_image_url ? base_url({$category.content_image_url}, true) : '' }}"
	arg-twitterCard="summary_large_image" />

<xf:macro template="xa_ams_article_page_macros" name="article_page_options" arg-category="{$category}" />
<xf:breadcrumb source="$category.getBreadcrumbs(false)" />

<xf:pageaction if="$category.canAddArticle()">
	<xf:button href="{{ link('ams/categories/add', $category) }}" class="button--cta" icon="write">{{ $category.content_term ?  phrase('xa_ams_post_x', {'term': $category.content_term}) : phrase('xa_ams_post_article') }}</xf:button>
</xf:pageaction>

<xf:if is="$pendingApproval">
	<div class="blockMessage blockMessage--important">{{ phrase('content_submitted_displayed_pending_approval') }}</div>
</xf:if>

<xf:if is="$xf.options.xaAmsFeaturedArticlesDisplayType == 'featured_grid' && $featuredArticlesCount > 1 && $xf.visitor.hasAmsArticleCategoryPermission($category.category_id, 'viewArticleAttach')">
	<xf:macro template="xa_ams_featured_macros" name="featured_grid"
		arg-featuredArticles="{$featuredArticles}"
		arg-featuredArticlesCount="{$featuredArticlesCount}"
		arg-category="{$category}"	  
		arg-viewAllLink="{{ link('ams/categories/featured', $category) }}" />
<xf:else />
	<xf:macro template="xa_ams_featured_macros" name="featured_carousel"
		arg-featuredArticles="{$featuredArticles}"
		arg-category="{$category}"			  
		arg-viewAllLink="{{ link('ams/categories/featured', $category) }}" />
</xf:if>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<xf:if is="$category.content_message != '' && $page < 2">
	<div class="block">
		<div class="block-container">
			<xf:if is="$category.content_title">
				<h3 class="block-header">{$category.content_title}</h3>
			</xf:if>
			<div class="block-body">
				<div class="block-row">
					{$category.content_message|raw}
				</div>
			</div>
		</div>
	</div>
</xf:if>

<xf:if is="$mapItems is not empty && $category.map_options.map_display_location == 'above_listing' && $category.canViewCategoryMap()">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<div class="block-row">			
					<xf:macro template="xa_ams_map_macros" name="articles_map"
						arg-mapItems="{$mapItems}"
						arg-mapId="ams-cat-{$category.category_id}"
						arg-containerHeight="{{ $category.map_options.container_height ?: 400 }}" />
				</div>
			</div>

			<div class="block-footer">	
				<div style="text-align: center;">
					<xf:if is="$category.map_options.enable_full_page_map">	
						<a href="{{ link('ams/categories/map', $category) }}">{{ phrase('xa_ams_view_full_map') }}</a> |
					</xf:if>

					<a href="{{ link('ams/categories/map-marker-legend', $category) }}" data-xf-click="overlay">{{ phrase('xa_ams_view_legend') }}</a>
				</div>
			</div>
		</div>
	</div>					
</xf:if>

<xf:widgetpos id="xa_ams_category_above_articles" context-category="{$category}" />

<div class="block {{ $layoutType == 'article_view' ? 'block--messages' : '' }}" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="ams_article" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/categories" data="{$category}" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
					<xf:contentcheck>
						<xf:if is="$canInlineMod">
							<xf:macro template="inline_mod_macros" name="button" />
						</xf:if>
						<xf:if is="$xf.visitor.user_id">
							<xf:button href="{{ link('ams/categories/mark-read', $category, {'date': $xf.time}) }}"
								class="button--link" overlay="true">
								{{ phrase('mark_read') }}
							</xf:button>
						</xf:if>
						<xf:if is="$category.canWatch()">
							<xf:button href="{{ link('ams/categories/watch', $category) }}" class="button--link"
								data-xf-click="switch-overlay"
								data-sk-watch="{{ phrase('watch') }}"
								data-sk-unwatch="{{ phrase('unwatch') }}">
								<xf:if is="{$category.Watch.{$xf.visitor.user_id}}">{{ phrase('unwatch') }}<xf:else />{{ phrase('watch') }}</xf:if>
							</xf:button>
						</xf:if>
					</xf:contentcheck>
				</div>
			</div>
		</xf:if>

	</xf:trim></div>

	<div class="block-container">
		<xf:macro template="xa_ams_index_macros" name="list_filter_bar"
			arg-filters="{$filters}"
			arg-baseLinkPath="ams/categories"
			arg-category="{$category}"
			arg-creatorFilter="{$creatorFilter}" />

		<div class="block-body">
			<xf:if is="$stickyArticles is not empty OR $articles is not empty">
				<xf:if is="$layoutType == 'article_view' && $xf.visitor.hasAmsArticleCategoryPermission($category.category_id, 'viewArticleAttach')">
					<xf:if is="$stickyArticles is not empty">
						<div class="structItemContainer-group structItemContainer-group--sticky">
							<xf:foreach loop="$stickyArticles" value="$stickyArticle">
								<xf:macro template="xa_ams_article_list_macros" name="article_view_layout"
									arg-article="{$stickyArticle}"
									arg-category="{$category}"
									arg-showSticky="{{ true }}" />
							</xf:foreach>
						</div>
					</xf:if>

					<xf:if is="$articles is not empty">
						<xf:foreach loop="$articles" value="$article">
							<xf:macro template="xa_ams_article_list_macros" name="article_view_layout"
								arg-article="{$article}"
								arg-category="{$category}" />
						</xf:foreach>
					</xf:if>
				<xf:elseif is="$layoutType == 'grid_view' && $xf.visitor.hasAmsArticleCategoryPermission($category.category_id, 'viewArticleAttach')" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_grid_view_layout.less" />

					<xf:if is="$stickyArticles is not empty">
						<div class="structItemContainer-group structItemContainer-group--sticky">
							<xf:foreach loop="$stickyArticles" value="$stickyArticle">
								<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
									arg-article="{$stickyArticle}"
									arg-category="{$category}"
									arg-showSticky="{{ true }}" />
							</xf:foreach>
						</div>
					</xf:if>

					<xf:if is="$articles is not empty">
						<div class="gridContainerAmsGridView">		
							<ul class="ams-grid-view">
								<xf:foreach loop="$articles" value="$article">
									<xf:macro template="xa_ams_article_list_macros" name="grid_view_layout"
										arg-article="{$article}"
										arg-category="{$category}" />
								</xf:foreach>
							</ul>
						</div>
					</xf:if>
				<xf:elseif is="$layoutType == 'tile_view' && $xf.visitor.hasAmsArticleCategoryPermission($category.category_id, 'viewArticleAttach')" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_tile_view_layout.less" />

					<xf:if is="$stickyArticles is not empty">
						<div class="structItemContainer-group structItemContainer-group--sticky">
							<xf:foreach loop="$stickyArticles" value="$stickyArticle">
								<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
									arg-article="{$stickyArticle}"
									arg-category="{$category}" 
									arg-showSticky="{{ true }}" />
							</xf:foreach>
						</div>
					</xf:if>

					<xf:if is="$articles is not empty">
						<div class="gridContainerAmsTileView">		
							<ul class="ams-tile-view">
								<xf:foreach loop="$articles" value="$article">
									<xf:macro template="xa_ams_article_list_macros" name="tile_view_layout"
										arg-article="{$article}"
										arg-category="{$category}" />
								</xf:foreach>
							</ul>
						</div>
					</xf:if>
				<xf:else />
					<div class="structItemContainer structItemContainerAmsListView">
						<xf:if is="$stickyArticles is not empty">
							<div class="structItemContainer-group structItemContainer-group--sticky">
								<xf:foreach loop="$stickyArticles" value="$stickyArticle">
									<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
										arg-article="{$stickyArticle}"
										arg-category="{$category}"
										arg-showSticky="{{ true }}" />
								</xf:foreach>
							</div>
						</xf:if>

						<xf:if is="$articles is not empty">
							<div class="structItemContainer-group js-articleList">
								<xf:foreach loop="$articles" value="$article">
									<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
										arg-article="{$article}"
										arg-category="{$category}" />
								</xf:foreach>
							</div>
						</xf:if>
					</div>
				</xf:if>
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('xa_ams_there_no_articles_matching_your_filters') }}</div>
			<xf:else />
				<div class="block-row">{{ phrase('xa_ams_no_articles_have_been_created_yet') }}</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/categories" data="{$category}" params="{$filters}"
			wrapperclass="block-outer-main" />
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>

<xf:widgetpos id="xa_ams_category_below_articles" context-category="{$category}" />

<xf:if is="$mapItems is not empty && $category.map_options.map_display_location == 'below_listing' && $category.canViewCategoryMap()">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<div class="block-row">			
					<xf:macro template="xa_ams_map_macros" name="articles_map"
						arg-mapItems="{$mapItems}"
						arg-mapId="ams-cat-{$category.category_id}"
						arg-containerHeight="{{ $category.map_options.container_height ?: 400 }}" />
				</div>
			</div>

			<div class="block-footer">	
				<div style="text-align: center;">
					<xf:if is="$category.map_options.enable_full_page_map">	
						<a href="{{ link('ams/categories/map', $category) }}">{{ phrase('xa_ams_view_full_map') }}</a> |
					</xf:if>

					<a href="{{ link('ams/categories/map-marker-legend', $category) }}" data-xf-click="overlay">{{ phrase('xa_ams_view_legend') }}</a>
				</div>
			</div>
		</div>
	</div>					
</xf:if>

<xf:page option="sideNavTitle">{{ phrase('categories') }}</xf:page>
<xf:sidenav>
	<xf:if is="$category.map_options.enable_full_page_map && $category.canViewCategoryMap()">
		<div class="block">
			<div class="block-container">
				<xf:button href="{{ link('ams/categories/map', $category) }}" class="button--fullWidth">{{ phrase('xa_ams_view_full_map') }}</xf:button>
			</div>
		</div>
	</xf:if>

	<xf:macro template="xa_ams_category_list_macros" name="simple_list_block"
		arg-categoryTree="{$categoryTree}"
		arg-categoryExtras="{$categoryExtras}"
		arg-selected="{$category.category_id}" />
</xf:sidenav>

<xf:widgetpos id="xa_ams_category_sidenav" position="sidenav" context-category="{$category}" />

<xf:widgetpos id="xa_ams_category_sidebar" position="sidebar" context-category="{$category}" />]]></template>
  <template type="public" title="xa_ams_category_watch" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:if is="$isWatched">
	<xf:title>{{ phrase('unwatch_category') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('watch_category') }}</xf:title>
</xf:if>

<xf:breadcrumb source="{$category.getBreadcrumbs()}" />

<xf:form action="{{ link('ams/categories/watch', $category) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$isWatched">
				<xf:inforow rowtype="confirm">
					{{ phrase('you_sure_you_want_to_unwatch_this_category') }}
				</xf:inforow>
				<xf:hiddenval name="stop">1</xf:hiddenval>
			<xf:else />
				<xf:radiorow name="notify_on" value="article"
					label="{{ phrase('send_notifications_for') }}">

					<xf:option value="article">{{ phrase('xa_ams_new_articles_only') }}</xf:option>
					<xf:option value="">{{ phrase('dont_send_notifications') }}</xf:option>
				</xf:radiorow>

				<xf:checkboxrow label="{{ phrase('send_notifications_via') }}">
					<xf:option name="send_alert" value="1" selected="true">{{ phrase('alerts') }}</xf:option>
					<xf:option name="send_email" value="1">{{ phrase('emails') }}</xf:option>
				</xf:checkboxrow>

				<xf:checkboxrow>
					<xf:option name="include_children" selected="true">{{ phrase('include_notifications_for_content_in_sub_categories') }}</xf:option>
				</xf:checkboxrow>
			</xf:if>
		</div>
		<xf:if is="$isWatched">
			<xf:submitrow submit="{{ phrase('unwatch') }}" rowtype="simple" icon="notificationsOff" />
		<xf:else />
			<xf:submitrow submit="{{ phrase('watch') }}" icon="notificationsOn" />
		</xf:if>
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_comment" version_id="2020270" version_string="2.2.2"><![CDATA[<xf:title>{{ phrase('xa_ams_comment') }}</xf:title>

<xf:breadcrumb source="$content.getBreadcrumbs()" />

<xf:form action="{{ link($linkPrefix . '/add-comment', $content) }}" class="block" ajax="true"
	draft="{{ link($linkPrefix . '/draft', $content) }}">

	<div class="block-container">
		<div class="block-body">
			<xf:editorrow name="message" value="{$defaultMessage}" rowtype="fullWidth noLabel"
				placeholder="{{ phrase('reply_placeholder') }}"
				label="{{ phrase('message') }}"
				data-preview-url="{{ link($linkPrefix . '/preview', $content) }}" />						  

			<xf:if is="!$xf.visitor.user_id">
				<xf:textboxrow name="_xfUsername" data-xf-init="guest-username"
					maxlength="{{ max_length($xf.visitor, 'username') }}"
					label="{{ phrase('name') }}" />
			</xf:if>
			
			<xf:captcharow label="{{ phrase('verification') }}" />
		</div>
		<xf:submitrow submit="{{ phrase('post_comment') }}" icon="reply" sticky="true" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_comment.less" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[.message-attribution
{
	.br-select
	{
		display: none;
	}

	.br-wrapper
	{
		display: inline-block;

		.br-wrapper.br-theme-fontawesome-stars
		{
			height: 20px;
		}
	}
}

{{ include('message.less') }}]]></template>
  <template type="public" title="xa_ams_comment_change_date" version_id="2010570" version_string="2.1.5"><![CDATA[<xf:title>{{ phrase('xa_ams_change_comment_date') }}</xf:title>

<xf:breadcrumb source="$content.getBreadcrumbs()" />

<xf:form action="{{ link('ams/comments/change-date', $comment) }}" ajax="true" class="block">

	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('xa_ams_comment_date') }}">
				<div class="inputGroup">
					<xf:dateinput name="comment_date" value="{{ $commentDate ? date($commentDate, 'picker') : '' }}" />
					<span class="inputGroup-text">
						{{ phrase('criteria_time:') }}
					</span>
					<span class="inputGroup" dir="ltr">
						<xf:select name="comment_hour" value="{$commentHour}" class="input--inline input--autoSize">
							<xf:foreach loop="$hours" value="$hour">
								<xf:option value="{$hour}" label="{$hour}" />
							</xf:foreach>
						</xf:select>
						<span class="inputGroup-text">:</span>
						<xf:select name="comment_minute" value="{$commentMinute}" class="input--inline input--autoSize">
							<xf:foreach loop="$minutes" value="$minute">
								<xf:option value="{$minute}" label="{$minute}" />
							</xf:foreach>
						</xf:select>
					</span>
				</div>
			</xf:formrow>

			<xf:selectrow name="comment_timezone" value="{$xf.visitor.timezone}">
				<xf:options source="$timeZones" />
			</xf:selectrow>
		</div>

		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_comment_delete" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_delete_comment') }}</xf:title>

<xf:breadcrumb source="$content.getBreadcrumbs()" />

<xf:form action="{{ link('ams/comments/delete', $comment) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$comment.canDelete('hard')}" />

			<xf:if is="$comment.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="delete" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_comment_edit" version_id="2020031" version_string="2.2.0 Beta 1"><![CDATA[<xf:title>{{ phrase('xa_ams_edit_comment') }}</xf:title>

<xf:breadcrumb source="$content.getBreadcrumbs()" />

<xf:form action="{{ link('ams/comments/edit', $comment) }}" ajax="true" class="block" 
	data-xf-init="attachment-manager"
	data-preview-url="{{ link('ams/comments/edit-preview', $comment) }}">

	<div class="block-container">
		<div class="block-body">
			<span class="u-anchorTarget js-editContainer"></span>

			<xf:editorrow name="message" value="{$comment.message}"
				attachments="{$attachmentData.attachments}"
				rowtype="{{ $quickEdit ? 'fullWidth noLabel' : '' }}"
				label="{{ phrase('message') }}" />

			<xf:formrow rowtype="{{ $quickEdit ? 'fullWidth noLabel' : '' }}">
				<xf:if is="$attachmentData">
					<xf:macro template="helper_attach_upload" name="upload_block" arg-attachmentData="{$attachmentData}" />
				</xf:if>
			</xf:formrow>

			<xf:formrow rowtype="{{ $quickEdit ? 'fullWidth noLabel' : '' }}">
				<xf:macro template="helper_action" name="edit_type" arg-canEditSilently="{$comment.canEditSilently()}" />
			</xf:formrow>

			<xf:if is="$comment.canSendModeratorActionAlert()">
				<xf:formrow rowtype="{{ $quickEdit ? 'fullWidth noLabel' : '' }}">
					<xf:macro template="helper_action" name="author_alert" arg-row="{{ false }}" />
				</xf:formrow>
			</xf:if>
		</div>

		<xf:submitrow icon="save" sticky="true" rowtype="{{ $quickEdit ? 'simple' : '' }}">
			<xf:html>
				<xf:if is="$quickEdit">
					<xf:button class="js-cancelButton" icon="cancel">{{ phrase('cancel') }}</xf:button>
				</xf:if>
			</xf:html>
		</xf:submitrow>
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_comment_edit_new_comment" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:macro template="xa_ams_comment_macros" name="comment"
	arg-comment="{$comment}"
	arg-content="{$content}"
	arg-linkPrefix="{{ ('ams/article-comments' ) }}" />]]></template>
  <template type="public" title="xa_ams_comment_macros" version_id="2022670" version_string="2.2.26"><![CDATA[<xf:macro name="comment_list" 
	arg-comments="!" 
	arg-attachmentData="!" 
	arg-content="!" 
	arg-linkPrefix="!" 
	arg-link="!" 
	arg-linkParams="{{ {} }}" 
	arg-page="!" 
	arg-perPage="!" 
	arg-totalItems="!" 
	arg-pageParam="page" 
	arg-pageNavHash="" 
	arg-canInlineMod="!">
	
	<xf:if is="$canInlineMod">
		<xf:js src="xf/inline_mod.js" min="1" />
	</xf:if>

	<div class="block block--messages"
		data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}"
		data-type="ams_comment"
		data-href="{{ link('inline-mod') }}">

		<xf:macro name="comments_status" 
			arg-content="{$content}" 
			arg-wrapperClass="block-outer" />

		<div class="block-outer"><xf:trim>

			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$totalItems}"
				link="{$link}" data="{$content}" params="{$linkParams}" hash="{$pageNavHash}"
				pageparam="{$pageParam}" wrapperclass="block-outer-main" />

			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
						<xf:contentcheck>
							<xf:if is="$canInlineMod">
								<xf:macro template="inline_mod_macros" name="button" />
							</xf:if>
						</xf:contentcheck>
					</div>
				</div>
			</xf:if>

		</xf:trim></div>
		
		<div class="block-container"
			data-xf-init="{{ $xf.options.selectQuotable ? 'select-to-quote' : '' }}"
			data-message-selector=".js-comment">
			
			<h3 class="block-header">{{ phrase('xa_ams_comments') }}</h3>
			<div class="block-body js-replyNewCommentContainer">
				<xf:if is="$comments is not empty">
					<span class="u-anchorTarget" id="comments"></span>
					<xf:foreach loop="$comments" value="$comment">
						<xf:if is="$comment.comment_state == 'deleted'">
							<xf:macro name="comment_deleted" 
								arg-comment="{$comment}" 
								arg-content="{$content}" 
								arg-linkPrefix="{$linkPrefix}" />
						<xf:else />
							<xf:macro name="comment" 
								arg-comment="{$comment}" 
								arg-content="{$content}" 
								arg-linkPrefix="{$linkPrefix}" />
						</xf:if>
					</xf:foreach>
				<xf:else />
					<div class="blockMessage js-replyNoMessages">{{ phrase('xa_ams_there_no_comments_to_display') }}</div>
				</xf:if>
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$totalItems}"
				link="{$link}" data="{$content}" params="{$linkParams}" hash="{$pageNavHash}"
				pageparam="{$pageParam}" wrapperclass="block-outer-main" />
			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>

		<xf:macro name="comments_status" 
			arg-content="{$content}" 
			arg-wrapperClass="block-outer block-outer--after" />
	</div>

	<xf:macro name="comment_add" 
		arg-comments="{$comments}" 
		arg-attachmentData="{$attachmentData}" 
		arg-content="{$content}" 
		arg-linkPrefix="{$linkPrefix}" />
</xf:macro>

<xf:macro name="comment" 
	arg-comment="!" 
	arg-content="!" 
	arg-linkPrefix="!">
	
	<xf:css src="xa_ams_comment.less" />

	<article class="message message--simple message--comment{{ $comment.isIgnored() ? ' is-ignored' : '' }} js-comment js-inlineModContainer"
		data-author="{{ $comment.User.username ?: $comment.username }}"
		data-content="ams-comment-{$comment.comment_id}"
		id="js-comment-{$comment.comment_id}">

		<span class="u-anchorTarget" id="ams-comment-{$comment.comment_id}"></span>

		<div class="message-inner">
			<div class="message-cell message-cell--user">
				<xf:macro template="message_macros" name="user_info_simple" 
					arg-user="{$comment.User}" 
					arg-fallbackName="{$comment.username}" />
			</div>
			<div class="message-cell message-cell--main">
				<div class="js-quickEditTarget">
					<div class="message-content js-messageContent">
						<header class="message-attribution message-attribution--plain">
							<ul class="listInline listInline--bullet">
								<li class="message-attribution-user">
									<xf:avatar user="$comment.User" size="xxs" />
									<h4 class="attribution"><xf:username user="$comment.User" rich="true" defaultname="{$comment.username}" /></h4>
								</li>
								<li>
									<a href="{{ link('ams/comments', $comment) }}" class="u-concealed"><xf:date time="$comment.comment_date" /></a>
								</li>
							</ul>
						</header>

						<xf:if is="$comment.comment_state == 'deleted'">
							<div class="messageNotice messageNotice--deleted">
								<xf:macro template="deletion_macros" name="notice" 
									arg-log="{$comment.DeletionLog}" />
							</div>
						<xf:elseif is="$comment.comment_state == 'moderated'" />
							<div class="messageNotice messageNotice--moderated">
								{{ phrase('this_message_is_awaiting_moderator_approval_and_is_invisible_to_normal') }}
							</div>
						</xf:if>
						<xf:if is="$comment.warning_message">
							<div class="messageNotice messageNotice--warning">
								{$comment.warning_message}
							</div>
						</xf:if>
						<xf:if is="$comment.isIgnored()">
							<div class="messageNotice messageNotice--ignored">
								{{ phrase('you_are_ignoring_content_by_this_member') }}
							</div>
						</xf:if>

						<div class="message-userContent lbContainer js-lbContainer"
							data-lb-id="ams_comment-{$comment.comment_id}"
							data-lb-caption-desc="{{ $comment.User ? $comment.User.username : $comment.username }} &middot; {{ date_time($comment.comment_date) }}">

							<article class="message-body js-selectToQuote">
								{{ bb_code($comment.message, 'ams_comment', $comment) }}
								<div class="js-selectToQuoteEnd">&nbsp;</div>
							</article>

							<xf:if is="$comment.attach_count">
								<xf:macro template="message_macros" name="attachments"
									arg-attachments="{$comment.Attachments}"
									arg-message="{$comment}"
									arg-canView="{{ $comment.canViewAttachments() }}" />
							</xf:if>
						</div>

						<xf:if is="$comment.last_edit_date">
							<div class="message-lastEdit">
								<xf:if is="$comment.user_id == $comment.last_edit_user_id">
									{{ phrase('last_edited:') }} <xf:date time="{$comment.last_edit_date}" />
								<xf:else />
									{{ phrase('last_edited_by_moderator:') }} <xf:date time="{$comment.last_edit_date}" />
								</xf:if>
							</div>
						</xf:if>

						<xf:if is="$xf.options.xaAmsSignatureOnComments">
							<xf:macro template="message_macros" name="signature" 
								arg-user="{$comment.User}" />
						</xf:if>
					</div>

					<footer class="message-footer">
						<xf:if contentcheck="true">
							<div class="message-actionBar actionBar">
								<xf:contentcheck>
									<xf:if contentcheck="true">
										<div class="actionBar-set actionBar-set--external">
											<xf:contentcheck>
												<xf:react content="{$comment}" link="ams/comments/react" list="< .js-comment | .js-reactionsList" />
												<xf:if is="$content.canReplyToComment()">
													<xf:set var="$quoteLink">{{ link($linkPrefix . '/comment', $content, {'quote': $comment.comment_id}) }}</xf:set>
													<xf:if is="$xf.options.multiQuote">
														<a href="{$quoteLink}"
															class="actionBar-action actionBar-action--mq u-jsOnly js-multiQuote"
															title="{{ phrase('toggle_multi_quote_tooltip')|for_attr }}"
															data-message-id="{$comment.comment_id}"
															data-mq-action="add">
															{{ phrase('quote') }}
														</a>
													</xf:if>
													<a href="{$quoteLink}"
														class="actionBar-action actionBar-action--reply"
														title="{{ phrase('reply_quoting_this_message')|for_attr }}"
														data-xf-click="quote"
														data-quote-href="{{ link('ams/comments/quote', $comment) }}">{{ phrase('reply') }}</a>
												</xf:if>
											</xf:contentcheck>
										</div>
									</xf:if>

									<xf:if contentcheck="true">
										<div class="actionBar-set actionBar-set--internal">
											<xf:contentcheck>
												<xf:if is="$comment.canUseInlineModeration()">
													<span class="actionBar-action actionBar-action--inlineMod">
														<xf:checkbox standalone="true">
															<xf:option value="{$comment.comment_id}"
																class="js-inlineModToggle"
																data-xf-init="tooltip"
																title="{{ phrase('select_for_moderation') }}"
																label="{{ phrase('select_for_moderation') }}"
																hiddenlabel="true" />
														</xf:checkbox>
													</span>
												</xf:if>
												<xf:if is="$comment.canReport()">
													<a href="{{ link('ams/comments/report', $comment) }}" 
														class="actionBar-action actionBar-action--report" 
														data-xf-click="overlay">{{ phrase('report_verb') }}</a>
												</xf:if>

												<xf:set var="$hasActionBarMenu" value="{{ false }}" />
												<xf:if is="$comment.canEdit()">
													<xf:js src="xf/message.js" min="1" />
													<a href="{{ link('ams/comments/edit', $comment) }}"
														class="actionBar-action actionBar-action--edit actionBar-action--menuItem"
														data-xf-click="quick-edit"
														data-editor-target="#js-comment-{$comment.comment_id} .js-quickEditTarget"
														data-menu-closer="true">{{ phrase('edit') }}</a>
													<xf:set var="$hasActionBarMenu" value="{{ true }}" />
												</xf:if>
												<xf:if is="$comment.edit_count AND $comment.canViewHistory()">
													<a href="{{ link('ams/comments/history', $comment) }}" 
														class="actionBar-action actionBar-action--history actionBar-action--menuItem"
														data-xf-click="toggle"
														data-target="#js-comment-{$comment.comment_id} .js-historyTarget"
														data-menu-closer="true">{{ phrase('history') }}</a>
													<xf:set var="$hasActionBarMenu" value="{{ true }}" />
												</xf:if>
												<xf:if is="$comment.canDelete()">
													<a href="{{ link('ams/comments/delete', $comment) }}" 
														class="actionBar-action actionBar-action--delete actionBar-action--menuItem" 
														data-xf-click="overlay">{{ phrase('delete') }}</a>
													<xf:set var="$hasActionBarMenu" value="{{ true }}" />
												</xf:if>
												<xf:if is="$comment.canReassign()">
													<a href="{{ link('ams/comments/reassign', $comment) }}" 
														class="actionBar-action actionBar-action--reassign actionBar-action--menuItem" 
														data-xf-click="overlay">{{ phrase('reassign') }}</a>
													<xf:set var="$hasActionBarMenu" value="{{ true }}" />
												</xf:if>
												<xf:if is="$comment.canChangeDate()">
													<a href="{{ link('ams/comments/change-date', $comment) }}" 
														class="actionBar-action actionBar-action--date actionBar-action--menuItem" 
														data-xf-click="overlay">{{ phrase('xa_ams_change_date') }}</a>
													<xf:set var="$hasActionBarMenu" value="{{ true }}" />
												</xf:if>												
												<xf:if is="$comment.canCleanSpam()">
													<a href="{{ link('spam-cleaner', $comment) }}" 
														class="actionBar-action actionBar-action--spam actionBar-action--menuItem" 
														data-xf-click="overlay">{{ phrase('spam') }}</a>
													<xf:set var="$hasActionBarMenu" value="{{ true }}" />
												</xf:if>
												<xf:if is="$xf.visitor.canViewIps() AND $comment.ip_id">
													<a href="{{ link('ams/comments/ip', $comment) }}" 
														class="actionBar-action actionBar-action--ip actionBar-action--menuItem" 
														data-xf-click="overlay">{{ phrase('ip') }}</a>
													<xf:set var="$hasActionBarMenu" value="{{ true }}" />
												</xf:if>
												<xf:if is="$comment.canWarn()">
													<a href="{{ link('ams/comments/warn', $comment) }}" 
														class="actionBar-action actionBar-action--warn actionBar-action--menuItem">{{ phrase('warn') }}</a>
													<xf:set var="$hasActionBarMenu" value="{{ true }}" />
												<xf:elseif is="$comment.warning_id AND $xf.visitor.canViewWarnings()" />
													<a href="{{ link('warnings', {'warning_id': $comment.warning_id}) }}" 
														class="actionBar-action actionBar-action--warn actionBar-action--menuItem" 
														data-xf-click="overlay">{{ phrase('view_warning') }}</a>
													<xf:set var="$hasActionBarMenu" value="{{ true }}" />
												</xf:if>

												<xf:if is="$hasActionBarMenu">
													<a class="actionBar-action actionBar-action--menuTrigger"
														data-xf-click="menu"
														title="{{ phrase('more_options') }}"
														role="button"
														tabindex="0"
														aria-expanded="false"
														aria-haspopup="true">&#8226;&#8226;&#8226;</a>

													<div class="menu" data-menu="menu" aria-hidden="true" data-menu-builder="actionBar">
														<div class="menu-content">
															<h4 class="menu-header">{{ phrase('more_options') }}</h4>
															<div class="js-menuBuilderTarget"></div>
														</div>
													</div>
												</xf:if>
											</xf:contentcheck>
										</div>
									</xf:if>
								</xf:contentcheck>
							</div>
						</xf:if>

						<div class="reactionsBar js-reactionsList {{ $comment.reactions ? 'is-active' : '' }}">
							<xf:reactions content="{$comment}" link="ams/comments/reactions" />
						</div>
					</footer>

					<div class="js-historyTarget toggleTarget" data-href="trigger-href"></div>
				</div>
			</div>
		</div>
	</article>
</xf:macro>

<xf:macro name="comment_simple"
	arg-comment="!"
	arg-content="!">

	<div class="contentRow">
		<div class="contentRow-figure">
			<xf:avatar user="$comment.User" size="xxs" defaultname="{$comment.username}" />
		</div>
		
		<div class="contentRow-main contentRow-main--close">
			<a href="{{ link('ams/comments', $comment) }}">{$content.title}</a>

			<div class="contentRow-snippet">
				{{ smilie(snippet($comment.message, 150, {'stripBbCode': true, 'stripQuote': true})) }}
			</div>
			
			<div class="contentRow-minor contentRow-minor--smaller">
				<ul class="listInline listInline--bullet">
					<li>
						{{ $comment.User.username ?: $comment.username }}
					</li>					
					<li><xf:date time="{$comment.comment_date}" /></li>
				</ul>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="comment_deleted" 
	arg-comment="!" 
	arg-content="!" 
	arg-linkPrefix="!">
	
	<xf:css src="xa_ams_comment.less" />

	<section class="message message--simple message--deleted message--comment{{ $comment.isIgnored() ? ' is-ignored' : '' }} js-comment js-inlineModContainer"
		data-author="{{ $comment.User.username ?: $comment.username }}"
		data-content="ams-comment-{$comment.comment_id}">

		<span class="u-anchorTarget" id="ams-comment-{$comment.comment_id}"></span>
		<div class="message-inner">
			<div class="message-cell message-cell--user">
				<xf:macro template="message_macros" name="user_info_simple" 
					arg-user="{$comment.User}" 
					arg-fallbackName="{$comment.username}" />
			</div>
			<div class="message-cell message-cell--main">
				<header class="message-attribution message-attribution--plain">
					<ul class="listInline listInline--bullet">
						<li class="message-attribution-user">
							<xf:avatar user="$comment.User" size="xxs" />
							<h4 class="attribution"><xf:username user="$comment.User" rich="true" defaultname="{$comment.username}" /></h4>
						</li>
						<li><xf:date time="$comment.comment_date" /></li>
					</ul>
				</header>

				<div class="messageNotice messageNotice--deleted">
					<xf:macro template="deletion_macros" name="notice" 
						arg-log="{$comment.DeletionLog}" />

					<a href="{{ link('ams/comments/show', $comment) }}" class="u-jsOnly" data-xf-click="inserter" data-replace="[data-content=ams-comment-{$comment.comment_id}]">{{ phrase('show...') }}</a>
				</div>
			</div>
		</div>
	</section>
</xf:macro>

<xf:macro name="comment_add" 
	arg-comments="!" 
	arg-attachmentData="!" 
	arg-content="!" 
	arg-linkPrefix="!">
	
	<xf:set var="$isPreRegComment" value="{{ $content.canAddCommentPreReg() }}" />
	<xf:if is="$content.canAddComment() OR $isPreRegComment">
		<xf:form action="{{ link($linkPrefix . '/add-comment', $content) }}"
			ajax="true"
			draft="{{ link($linkPrefix . '/draft', $content) }}"
			class="block js-quickReply"
			data-xf-init="attachment-manager quick-reply{{ ($xf.visitor.isShownCaptcha() AND !$isPreRegComment) ? ' guest-captcha' : '' }}"
			data-message-container="< :prev | .js-replyNewCommentContainer">

			<xf:js src="xf/message.js" min="1" />
			<xf:set var="$lastPost" value="{$comments|last}" />

			<div class="block-container">
				<div class="block-body">
					<xf:macro template="quick_reply_macros" name="body"
						arg-message="{$content.draft_comment.message}"
						arg-attachmentData="{$attachmentData}"
						arg-forceHash="{$content.draft_comment.attachment_hash}"
						arg-messageSelector=".js-comment"
						arg-supportsMultiQuote="{$xf.options.multiQuote}"
						arg-multiQuoteHref="{{ link($linkPrefix . '/multi-quote', $content) }}"
						arg-multiQuoteStorageKey="multiQuoteArticleItem"
						arg-simple="{{ true }}"
						arg-submitText="{{ phrase('post_comment') }}"
						arg-lastDate="{$lastPost.comment_date}"
						arg-showGuestControls="{{ !$isPreRegComment }}"
						arg-previewUrl="{{ link($linkPrefix . '/preview', $content, {'quick_reply': 1}) }}" />
				</div>
			</div>
		</xf:form>
	</xf:if>
</xf:macro>

<xf:macro name="comments_status" 
	arg-content="!"
	arg-wrapperClass="">
	
	<xf:if contentcheck="true">
		<div class="{$wrapperClass}">
			<dl class="blockStatus">
				<dt>{{ phrase('status') }}</dt>
				<xf:contentcheck>
					<xf:if is="!$content.comments_open">
						<dd class="blockStatus-message blockStatus-message--locked">
							{{ phrase('not_open_for_further_replies') }}
						</dd>
					</xf:if>
				</xf:contentcheck>
			</dl>
		</div>
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_comment_multi_quote" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:macro template="multi_quote_macros" name="block"
	arg-quotes="{$quotes}"
	arg-messages="{$comments}"
	arg-containerRelation="Content"
	arg-dateKey="comment_date"
	arg-bbCodeContext="ams_comment" />]]></template>
  <template type="public" title="xa_ams_comment_new_comments" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:if is="$firstUnshownComment">
	<div class="message">
		<div class="message-inner">
			<div class="message-cell message-cell--alert">
				{{ phrase('xa_ams_there_more_comments_to_display') }} <a href="{{ link('ams/comments', $firstUnshownComment) }}">{{ phrase('view_them') }}</a>
			</div>
		</div>
	</div>
</xf:if>

<xf:foreach loop="$comments" value="$comment">
	<xf:macro template="xa_ams_comment_macros" name="comment"
		arg-comment="{$comment}"
		arg-content="{$content}"
		arg-linkPrefix="{$linkPrefix}" />
</xf:foreach>]]></template>
  <template type="public" title="xa_ams_comment_reassign" version_id="2010570" version_string="2.1.5"><![CDATA[<xf:title>{{ phrase('xa_ams_reassign_comment') }}</xf:title>

<xf:breadcrumb source="$content.getBreadcrumbs()" />

<xf:form action="{{ link('ams/comments/reassign', $comment) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="username" ac="single" maxlength="{{ max_length($xf.visitor, 'username') }}"
				label="{{ phrase('xa_ams_new_owner') }}" />

			<xf:checkboxrow>
				<xf:option name="alert" selected="{{ true }}"
					label="{{ phrase('xa_ams_notify_current_and_new_owners_of_this_action') }} {{ phrase('reason:') }}">

					<xf:textbox name="alert_reason" placeholder="{{ phrase('optional') }}" maxlength="250" />
				</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_comment_show" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="ams_comment" data-href="{{ link('inline-mod') }}">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="xa_ams_comment_macros" name="comment"
				arg-comment="{$comment}"
				arg-content="{$content}"
				arg-linkPrefix="{{ 'ams/article-comments' }}" />
		</div>
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_convert_article_to_thread" version_id="2022170" version_string="2.2.21"><![CDATA[<xf:title>{{ phrase('xa_ams_convert_article_to_thread') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:js src="xf/prefix_menu.js" min="1" />

<xf:form action="{{ link('ams/convert-to-thread', $article) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body js-prefixListenContainer">
			<xf:inforow rowtype="confirm">
				{{ phrase('xa_ams_you_sure_you_want_to_convert_article_to_thread_warning') }}
			</xf:inforow>
			
			<xf:selectrow name="target_node_id" value="{{ $article.Discussion ? $article.Discussion.node_id : 0}}" class="js-nodeList"
				label="{{ phrase('destination_forum') }}">

				<xf:foreach loop="$nodeTree.getFlattened(0)" value="$treeEntry">
					<xf:option value="{$treeEntry.record.node_id}" disabled="{{ $treeEntry.record.node_type_id != 'Forum' ? 'disabled' : '' }}">{{ repeat_raw('&nbsp; ', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>
				</xf:foreach>
			</xf:selectrow>
			
			<xf:formrow label="{{ phrase('prefix') }}" rowtype="input">
				<xf:js src="xf/prefix_menu.js" min="1" />
				<xf:macro template="prefix_macros" name="select"
					arg-type="thread"
					arg-prefixes="{$threadPrefixes}"
					arg-href="{{ link('forums/prefixes') }}"
					arg-listenTo="< .js-prefixListenContainer | .js-nodeList" />
			</xf:formrow>	
			
			<xf:if is ="!$article.Discussion">
				<xf:macro template="tag_macros" name="edit_rows"
					arg-uneditableTags="{$uneditableTags}"
					arg-editableTags="{$editableTags}"
					arg-minTags="{$category.min_tags}" 
					arg-tagList="tagList--article-{$article.article_id}" />				
			</xf:if>

			<xf:checkboxrow>
				<xf:option name="notify_watchers" value="1" selected="{{ true }}">{{ phrase('notify_members_watching_destination_forum') }}</xf:option>
			</xf:checkboxrow>
			
			<xf:if is="$article.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" arg-selected="{{ true }}" />
			</xf:if>
			
			<xf:inforow rowtype="confirm">
				{{ phrase('xa_ams_you_sure_you_want_to_convert_article_to_thread') }}
			</xf:inforow>			
		</div>
		
		<xf:submitrow icon="confirm" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_convert_thread_to_article" version_id="2021970" version_string="2.2.19"><![CDATA[<xf:title>{{ phrase('xa_ams_convert_thread_to_article') }}</xf:title>

<xf:breadcrumb source="$thread.getBreadcrumbs()" />

<xf:js src="xf/prefix_menu.js" min="1" />

<xf:form action="{{ link('threads/convert-thread-to-ams-article', $thread) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body js-prefixListenContainer">
			<xf:inforow rowtype="confirm">
				{{ phrase('xa_ams_you_sure_you_want_to_convert_thread_to_article_warning') }}
			</xf:inforow>
			
			<xf:selectrow name="target_category_id" value="0" class="js-categoryList" id="js-categoryList"
				label="{{ phrase('xa_ams_destination_category') }}">

				<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
					<xf:option value="{$treeEntry.record.category_id}">{{ repeat_raw('&nbsp; ', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>
				</xf:foreach>
			</xf:selectrow>	

			<xf:formrow label="{{ phrase('xa_ams_new_article_prefix') }}" rowtype="input">
				<xf:js src="xf/prefix_menu.js" min="1" />
				<xf:macro template="public:prefix_macros" name="select"
					arg-type="ams_article"
					arg-prefixes="{$articlePrefixes}"
					arg-name="new_article_prefix_id"
					arg-href="{{ link('ams/prefixes') }}"
					arg-listenTo="#js-categoryList" />
			</xf:formrow>

			<xf:macro template="tag_macros" name="edit_rows"
				arg-uneditableTags="{$uneditableTags}"
				arg-editableTags="{$editableTags}"
				arg-minTags="{$forum.min_tags}" 
				arg-tagList="tagList--thread-{$thread.thread_id}" />	

			<xf:radiorow name="new_article_state" value="visible"
				label="{{ phrase('xa_ams_new_article_state') }}"
				explain="{{ phrase('xa_ams_new_article_state_explain') }}">

				<xf:option lable="{{ phrase('visible') }}" value="visible" data-hide="true">
					<xf:label>{{ phrase('visible') }}</xf:label>
					<xf:dependent>
						<xf:checkbox>
							<xf:option name="notify_watchers" value="1" selected="{{ true }}">{{ phrase('xa_ams_notify_members_watching_destination_category') }}</xf:option>
						</xf:checkbox>
					</xf:dependent>					
				</xf:option>
				<xf:option value="moderated">{{ phrase('moderated') }}</xf:option>
				<xf:option value="draft">{{ phrase('xa_ams_draft') }}</xf:option>
			</xf:radiorow>
			
			<xf:if is="$thread.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" arg-selected="{{ true }}" />
			</xf:if>
			
			<xf:inforow rowtype="confirm">
				{{ phrase('xa_ams_you_sure_you_want_to_convert_thread_to_article') }}
			</xf:inforow>			
		</div>
		
		<xf:submitrow icon="confirm" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_dialog_browse_articles" version_id="2010670" version_string="2.1.6"><![CDATA[<xf:macro template="xa_ams_editor_dialog_ams" name="article_list"
	arg-page="{$page}"
	arg-articles="{$articles}"
	arg-listClass="js-browseArticlesList"
	arg-link="ams/dialog/browse"
	arg-hasMore="{$hasMore}" />]]></template>
  <template type="public" title="xa_ams_dialog_browse_pages" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:macro template="xa_ams_editor_dialog_ams" name="page_list"
	arg-page="{$page}"
	arg-articlePages="{$articlePages}"
	arg-listClass="js-browsePagesList"
	arg-link="ams/dialog/browse-pages"
	arg-hasMore="{$hasMore}" />]]></template>
  <template type="public" title="xa_ams_dialog_browse_series" version_id="2010670" version_string="2.1.6"><![CDATA[<xf:macro template="xa_ams_editor_dialog_ams" name="series_list"
	arg-page="{$page}"
	arg-series="{$series}"
	arg-listClass="js-browseSeriesList"
	arg-link="ams/series/dialog/browse"
	arg-hasMore="{$hasMore}" />]]></template>
  <template type="public" title="xa_ams_dialog_wrapper" version_id="2010670" version_string="2.1.6"><![CDATA[<xf:if contentcheck="true">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:contentcheck>{$innerContent|raw}</xf:contentcheck>
			</div>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="xa_ams_dialog_your_articles" version_id="2010670" version_string="2.1.6"><![CDATA[<xf:macro template="xa_ams_editor_dialog_ams" name="article_list"
	arg-page="{$page}"
	arg-articles="{$articles}"
	arg-listClass="js-yourArticlesList"
	arg-link="ams/dialog/yours"
	arg-hasMore="{$hasMore}" />]]></template>
  <template type="public" title="xa_ams_dialog_your_pages" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:macro template="xa_ams_editor_dialog_ams" name="page_list"
	arg-page="{$page}"
	arg-articlePages="{$articlePages}"
	arg-listClass="js-yourPagesList"
	arg-link="ams/dialog/your-pages"
	arg-hasMore="{$hasMore}" />]]></template>
  <template type="public" title="xa_ams_dialog_your_series" version_id="2010670" version_string="2.1.6"><![CDATA[<xf:macro template="xa_ams_editor_dialog_ams" name="series_list"
	arg-page="{$page}"
	arg-series="{$series}"
	arg-listClass="js-yourSeriesList"
	arg-link="ams/series/dialog/yours"
	arg-hasMore="{$hasMore}" />]]></template>
  <template type="public" title="xa_ams_editor_dialog.less" version_id="2010670" version_string="2.1.6"><![CDATA[.amsEmbedTabs
{
	.amsEmbedTabs-tab
	{
		position: relative;

		.badge
		{
			display: none;
		}

		&.has-selected
		{
			.badge
			{
				display: inline;

				&.badge--highlighted
				{
					color: @xf-paletteColor1;
					background: @xf-paletteColor3;
				}
			}
		}
	}
}

.amsArticleList
{
	&.amsArticleList--picker
	{
		.amsArticleList-item
		{
			-webkit-touch-callout: none;
			-webkit-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;

			margin: 5px;
			padding: 5px;

			border-top: @xf-borderSize solid @xf-borderColorLight;

			&:first-child
			{
				border-top: none;
			}

			&.is-selected
			{
				border: 4px solid @xf-borderColorFeature;
			}

			label
			{
				cursor: pointer;
				color: @xf-linkColor;
			}

			img
			{
				-webkit-user-drag: none;
				pointer-events: none; // for IE11
			}
		}

		.amsArticleList-checkbox
		{
			display: none;
		}

		.amsArticleList-footer
		{
			flex-basis: 100%;
			margin: @xf-paddingMedium @xf-paddingSmall;

			.button
			{
				float: right;
			}
		}
	}
}

{{ include('xa_ams.less') }}]]></template>
  <template type="public" title="xa_ams_editor_dialog_ams" version_id="2021970" version_string="2.2.19"><![CDATA[<xf:title>{{ phrase('xa_ams_embed_articles_pages_series') }}</xf:title>

<xf:js src="xenaddons/ams/editor.js" min="1" />
<xf:css src="xa_ams_editor_dialog.less" />

<form class="block" id="xa_ams_editor_dialog_form">
	<div class="block-container">
		<h2 class="block-minorTabHeader tabs amsEmbedTabs hScroller"
			data-xf-init="tabs h-scroller"
			data-panes=".js-embedAmsPanes"
			role="tablist">

			<span class="hScroller-scroll">
				<a class="tabs-tab amsEmbedTabs-tab is-active js-yourArticlesTab" role="tab" id="yourArticles">
					<span class="amsEmbedTabs-tabLabel">{{ phrase('xa_ams_your_articles') }}</span>
					<span class="badge badge--highlighted js-tabCounter">0</span>
				</a>
				<a class="tabs-tab amsEmbedTabs-tab is-active js-yourPagesTab" role="tab" id="yourPages">
					<span class="amsEmbedTabs-tabLabel">{{ phrase('xa_ams_your_pages') }}</span>
					<span class="badge badge--highlighted js-tabCounter">0</span>
				</a>
				<xf:if is="$xf.visitor.xa_ams_series_count">
					<a class="tabs-tab amsEmbedTabs-tab js-yourSeriesTab" role="tab" id="yourSeries">
						<span class="amsEmbedTabs-tabLabel">{{ phrase('xa_ams_your_series') }}</span>
						<span class="badge badge--highlighted js-tabCounter">0</span>
					</a>
				</xf:if>
				<a class="tabs-tab amsEmbedTabs-tab js-browseArticlesTab" role="tab" id="browseArticles">
					<span class="amsEmbedTabs-tabLabel">{{ phrase('xa_ams_others_articles') }}</span>
					<span class="badge badge--highlighted js-tabCounter">0</span>
				</a>
				<a class="tabs-tab amsEmbedTabs-tab js-browsePagesTab" role="tab" id="browsePages">
					<span class="amsEmbedTabs-tabLabel">{{ phrase('xa_ams_others_pages') }}</span>
					<span class="badge badge--highlighted js-tabCounter">0</span>
				</a>
				<a class="tabs-tab amsEmbedTabs-tab js-browseSeriesTab" role="tab" id="browseSeries">
					<span class="amsEmbedTabs-tabLabel">{{ phrase('xa_ams_others_series') }}</span>
					<span class="badge badge--highlighted js-tabCounter">0</span>
				</a>
			</span>
		</h2>

		<ul class="tabPanes js-embedAmsPanes">
			<li data-href="{{ link('ams/dialog/yours') }}" role="tabpanel" aria-labelledby="yourArticles" data-tab=".js-yourArticlesTab">
				<div class="blockMessage">{{ phrase('loading...') }}</div>
			</li>

			<li data-href="{{ link('ams/dialog/your-pages') }}" role="tabpanel" aria-labelledby="yourPages" data-tab=".js-yourPagesTab">
				<div class="blockMessage">{{ phrase('loading...') }}</div>
			</li>

			<xf:if is="$xf.visitor.xa_ams_series_count">
				<li data-href="{{ link('ams/series/dialog-yours') }}" role="tabpanel" aria-labelledby="yourSeries" data-tab=".js-yourSeriesTab">
					<div class="blockMessage">{{ phrase('loading...') }}</div>
				</li>
			</xf:if>

			<li data-href="{{ link('ams/dialog/browse') }}" role="tabpanel" aria-labelledby="browseArticles" data-tab=".js-browseArticlesTab">
				<div class="blockMessage">{{ phrase('loading...') }}</div>
			</li>

			<li data-href="{{ link('ams/dialog/browse-pages') }}" role="tabpanel" aria-labelledby="browsePages" data-tab=".js-browsePagesTab">
				<div class="blockMessage">{{ phrase('loading...') }}</div>
			</li>

			<li data-href="{{ link('ams/series/dialog-browse') }}" role="tabpanel" aria-labelledby="browseSeries" data-tab=".js-browseSeriesTab">
				<div class="blockMessage">{{ phrase('loading...') }}</div>
			</li>
		</ul>
		<xf:hiddenval name="" value="{}" class="js-embedValue" />
		<xf:submitrow submit="{{ phrase('continue') }}" rowtype="simple" sticky="true" id="xa_ams_editor_dialog_ams" />
	</div>
</form>

<xf:macro name="article_list"
	arg-page="!"
	arg-articles="!"
	arg-listClass="!"
	arg-link="!"
	arg-hasMore="!">

	<xf:if is="$page == 1">
		<xf:wrap template="xa_ams_dialog_wrapper" />
	</xf:if>

	<xf:if is="$articles is not empty">
		<div class="{$listClass} amsArticleList amsArticleList--picker">
			<xf:foreach loop="$articles" value="$article">
				<div data-type="article" data-id="{$article.article_id}" class="amsArticleList-item">
					<xf:macro name="item_display" arg-item="{$article}" />

					<div class="contentRow-minor contentRow-minor--hideLinks">
						<ul class="listInline listInline--bullet">
							<li><xf:username user="{$article.User}" defaultname="{$article.username}" /></li>
							<li><xf:date time="{$article.publish_date}" /></li>
							<xf:if is="$article.comment_count"><li>{{ phrase('comments:') }} {$article.comment_count|number}</li></xf:if>
							<li>{{ phrase('category:') }} <a href="{{ link('ams/categories', $article.Category) }}">{$article.Category.title}</a></li>
						</ul>
					</div>
				</div>
			</xf:foreach>

			<xf:macro template="xa_ams_editor_dialog_ams" name="footer" arg-link="{$link}" arg-append=".{$listClass}" arg-page="{$page}" arg-hasMore="{$hasMore}" />
		</div>
	<xf:else />
		<div class="blockMessage">{{ phrase('xa_ams_no_articles_have_been_added_yet') }}</div>
	</xf:if>
</xf:macro>

<xf:macro name="page_list"
	arg-page="!"
	arg-articlePages="!"
	arg-listClass="!"
	arg-link="!"
	arg-hasMore="!">

	<xf:if is="$page == 1">
		<xf:wrap template="xa_ams_dialog_wrapper" />
	</xf:if>

	<xf:if is="$articlePages is not empty">
		<div class="{$listClass} amsArticleList amsArticleList--picker">
			<xf:foreach loop="$articlePages" value="$articlePage">
				<div data-type="page" data-id="{$articlePage.page_id}" class="amsArticleList-item">
					<xf:macro name="item_display" arg-item="{$articlePage}" />

					<div class="contentRow-minor contentRow-minor--hideLinks">
						<ul class="listInline listInline--bullet">
							<li><xf:username user="{$articlePage.User}" defaultname="{$articlePage.username}" /></li>
							<li><xf:date time="{$articlePage.create_date}" /></li>
							<xf:if is="$articlePage.Article">
								<li>
									{{ phrase('xa_ams_article') }}: <a href="{{ link('ams', $articlePage.Article) }}" class="">{$articlePage.Article.title}</a>
								</li>
							</xf:if>
						</ul>
					</div>
				</div>
			</xf:foreach>

			<xf:macro template="xa_ams_editor_dialog_ams" name="footer" arg-link="{$link}" arg-append=".{$listClass}" arg-page="{$page}" arg-hasMore="{$hasMore}" />
		</div>
	<xf:else />
		<div class="blockMessage">{{ phrase('xa_ams_no_article_pages_have_been_added_yet') }}</div>
	</xf:if>
</xf:macro>

<xf:macro name="series_list"
	arg-page="!"
	arg-series="!"
	arg-listClass="!"
	arg-link="!"
	arg-hasMore="!">

	<xf:if is="$page == 1">
		<xf:wrap template="xa_ams_dialog_wrapper" />
	</xf:if>

	<xf:if is="$series is not empty">
		<div class="{$listClass} amsArticleList amsArticleList--picker">
			<xf:foreach loop="$series" value="$seriesItem">
				<div data-type="series" data-id="{$seriesItem.series_id}" class="amsArticleList-item">
					<xf:macro name="item_display" name="item_display" arg-item="{$seriesItem}" />

					<div class="contentRow-minor contentRow-minor--hideLinks">
						<ul class="listInline listInline--bullet">
							<li><xf:username user="{$seriesItem.User}" defaultname="{$seriesItem.User.username}" /></li>
							<li><xf:date time="{$seriesItem.create_date}" /></li>
							<xf:if is="$seriesItem.last_part_date AND $seriesItem.last_part_date > $seriesItem.create_date">
								<li>{{ phrase('updated') }} <xf:date time="{$seriesItem.last_part_date}" /></li>
							</xf:if>
							<xf:if is="$seriesItem.article_count"><li>{{ phrase('xa_ams_articles:') }} {$seriesItem.article_count|number}</li></xf:if>
							<xf:if is="$seriesItem.LastArticle">
								<li>
									{{ phrase('xa_ams_latest_article') }}: <a href="{{ link('ams', $seriesItem.LastArticle) }}" class="">{$seriesItem.LastArticle.title}</a>
								</li>
							</xf:if>
						</ul>
					</div>
				</div>
			</xf:foreach>

			<xf:macro template="xa_ams_editor_dialog_ams" name="footer" arg-link="{$link}" arg-append=".{$listClass}" arg-page="{$page}" arg-hasMore="{$hasMore}" />
		</div>
	<xf:else />
		<div class="blockMessage">{{ phrase('xa_ams_no_series_have_been_added_yet') }}</div>
	</xf:if>
</xf:macro>

<xf:macro name="item_display" arg-item="!">
	<xf:set var="$id" value="{{ unique_id() }}" />
	<input type="checkbox" class="amsArticleList-checkbox js-articlesPicker" id="{$id}" value="1" />
	<label for="{$id}">{$item.title}</label>
</xf:macro>

<xf:macro name="footer" arg-link="!" arg-append="!" arg-page="1" arg-hasMore="{{ false }}">
	<xf:if is="$hasMore">
		<div class="amsArticleList-footer js-paneLoadMore">
			<xf:button data-xf-click="inserter"
				data-inserter-href="{{ link($link, null, {'page': $page + 1}) }}"
				data-append="{$append}"
				data-replace=".js-paneLoadMore"
				data-animate-replace="0">
				{{ phrase('more...') }}
			</xf:button>
		</div>
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_featured" version_id="2021970" version_string="2.2.19"><![CDATA[<xf:if is="$category">
	<xf:title>{{ phrase('xa_ams_featured_articles') }} - {$category.title}</xf:title>
	<xf:h1>{{ phrase('xa_ams_featured_articles') }}</xf:h1>
	<xf:breadcrumb source="{$category.getBreadcrumbs()}" />
	
	<xf:macro template="xa_ams_article_page_macros" name="article_page_options" arg-category="{$category}" />
<xf:else />
	<xf:title>{{ phrase('xa_ams_featured_articles') }}</xf:title>
	
	<xf:page option="searchConstraints" value="{{ {
		phrase('xa_ams_articles'): {'search_type': 'ams_article'}
	} }}" />
</xf:if>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="ams_article" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
					<xf:contentcheck>
						<xf:if is="$canInlineMod">
							<xf:macro template="inline_mod_macros" name="button" />
						</xf:if>
					</xf:contentcheck>
				</div>
			</div>
		</xf:if>

	</xf:trim></div>

	<div class="block-container">
		<div class="block-body">
			<xf:if is="$articles is not empty">
				<div class="structItemContainer structItemContainerAmsListView">
					<xf:foreach loop="$articles" value="$article">
						<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
							arg-article="{$article}" />
					</xf:foreach>
				</div>
			<xf:else />
				<div class="block-row">{{ phrase('xa_ams_no_articles_have_been_featured_yet') }}</div>
			</xf:if>
		</div>
	</div>
	<div class="block-outer block-outer--after">
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_featured_grid.less" version_id="2022670" version_string="2.2.26"><![CDATA[.ams-featured-grid
{
	.m-listPlain();
	.m-clearFix();
	.first
	{
		float: left;
		width: 50%;
		padding-right: 10px;
	}
	.second
	{
		float: left;
		width: 50%;
	}
	.item
	{
		position: relative;
		overflow: hidden;
		&.large-item
		{
			.image-link:after
			{
				height: 60%;
			}
		}
		&.medium-item
		{
			margin-bottom: 10px;
			.image-link
			{
				height: 233px;
				min-height: 233px;
			}
			.item-heading
			{
				font-size: @xf-fontSizeLarger;
   				line-height: 1.4;
			}
		}
		&.medium-item-2
		{
			margin-bottom: 10px;
			.image-link
			{
				min-height: 216px;
			}
			.item-heading
			{
				font-size: @xf-fontSizeLarger;
   				line-height: 1.4;
			}
		}
		&.small-item
		{
			float: left;
			width: 50%;
			.image-link
			{
				min-height: 216px;
			}
			.item-heading
			{
				font-size: @xf-fontSizeNormal;
   				line-height: 1.4;
			}
			&.first-small-item
			{
				padding-right: 5px;
			}
			&.second-small-item
			{
				padding-left: 5px;
			}
		}			
		&.is-unread
		{
			.caption .item-heading
			{
				font-weight: @xf-fontWeightHeavy;
			}
		}			
	}
	.caption
	{
		max-width: 100%;
		position: absolute;
		padding: 16px 16px;
		bottom: 0px;
		display: block;
		&.caption-small
		{
			max-width: initial;
		}
		.item-heading
		{
			display: inline-block;
			padding-bottom: @xf-paddingMedium;
			font-size: @xf-fontSizeLarger;
			font-weight: @xf-fontWeightNormal;
			line-height: 1.4;
			color: #fff;
			text-shadow: 0 1px 1px rgba(0,0,0,.35);
		}
		.item-heading a
		{
			color: #fff;
			text-shadow: 0 1px 1px rgba(0,0,0,.35);
		}		
		h3
		{
			padding: 0;
			margin: 0;
		}
		.item-rating
		{
			font-size: @xf-fontSizeSmallest;
			padding-bottom: @xf-paddingSmall;			
		}		
		.item-location
		{
			color: #bbb;
			font-size: @xf-fontSizeSmallest;
			padding-bottom: @xf-paddingSmall;
			
			.item-location-icon 
			{
				font-size: @xf-fontSizeSmallest;
				padding-left: @xf-paddingSmall;
			}
		}
		.item-location a
		{
			color: #fff;
		}		
		.listInline.listInline--bullet
		{
			color: #bbb;
			font-size: @xf-fontSizeSmallest;
		}
		.publish-date,
		.category-title,
		.article-share
		{
			color: #bbb;
			font-size: @xf-fontSizeSmallest;
		}
	}
	.image-link
	{
		display: block;
		position: relative;
		overflow: hidden;
		background: #ccc;
		min-height: 460px;
		transition: all .5s;
		&:hover
		{
			transform: scale(1.1);
		}
		&:after
		{
			content: "";
			position: absolute;
			bottom: 0;
			width: 100%;
			height: 80%;
			background: linear-gradient(to bottom,rgba(0,0,0,0) 0,rgba(0,0,0,0.62) 50%,rgba(0,0,0,0.88) 100%);
			opacity: .92;
		}
	}
}

@media (max-width:800px)
{
	.ams-featured-grid .image-link
	{
		min-height: 240px;
	}
	
	.ams-featured-grid .item.medium-item .image-link 
	{
		height: 115px;
	}

	.ams-featured-grid .item.medium-item .image-link,
	.ams-featured-grid .item.medium-item-2 .image-link,
	.ams-featured-grid .item.small-item .image-link 
	{
		min-height: 115px;
	}

	.ams-featured-grid .caption
	{
		padding: 8px;
		max-width: 100%;
		bottom: 0;
	}

	.ams-featured-grid .caption .item-heading,
	.ams-featured-grid .item.medium-item .caption .item-heading,
	.ams-featured-grid .item.medium-item-2 .caption .item-heading  
	{
		padding-bottom: @xf-paddingSmall;
		font-size: @xf-fontSizeLarge;
	}
}

@media (max-width:650px)
{
	.ams-featured-grid .first, 
	.ams-featured-grid .second
	{
		float: none;
		width: auto;
		padding: 0;
		margin-bottom: 10px;
	}
	
	.ams-featured-grid .item.medium-item .image-link 
	{
		height: 240px;
	}

	.ams-featured-grid .item.medium-item .image-link,
	.ams-featured-grid .item.medium-item-2 .image-link,
	.ams-featured-grid .item.small-item .image-link 
	{
		min-height: 240px;
	}
	
	.ams-featured-grid .caption .item-heading,
	.ams-featured-grid .item.medium-item .caption .item-heading,
	.ams-featured-grid .item.medium-item-2 .caption .item-heading  
	{
		padding-bottom: @xf-paddingSmall;
		font-size: @xf-fontSizeLarge;
	}	
}

@media (max-width:450px)
{
	.ams-featured-grid .item.small-item
	{
		float: none;
		width: auto;
		margin: 0 0 10px;
		padding: 0 !important;
	}
}]]></template>
  <template type="public" title="xa_ams_featured_macros" version_id="2022670" version_string="2.2.26"><![CDATA[<xf:macro name="featured_grid" 
	arg-featuredArticles="!" 
	arg-featuredArticlesCount="!" 
	arg-category="{{ null }}" 
	arg-viewAllLink="!">

	<xf:if is="$featuredArticles is not empty">
		<xf:css src="carousel.less" />
		<xf:css src="xa_ams.less" />
		<xf:css src="xa_ams_featured_grid.less" />

		<xf:set var="$extras" value="{{ property('xaAmsFeaturedArticlesGridBlockElements') }}" />

		<div class="carousel carousel--withFooter carousel--amsFeaturedArticles">		
			<ul class="ams-featured-grid">
				<xf:foreach loop="$featuredArticles" value="$article" i="$i">
					<xf:if is="{$i} == 1">
						<li class="first">
							<xf:if is="{$featuredArticlesCount} < 3">
								<div class="item medium-item {{ ($article.isUnread() AND !$forceRead) ? ' is-unread' : '' }}">
									<xf:macro name="article_cover_image" 
										arg-article="{$article}" 
										arg-extras="{$extras}" 
										arg-blockType="featured_grid" />

									<xf:macro name="article_caption" 
										arg-article="{$article}" 
										arg-extras="{$extras}" 
										arg-extraHeadingClass="" 
										arg-blockType="featured_grid" />
								</div>
							<xf:else />
								<div class="item large-item {{ ($article.isUnread() AND !$forceRead) ? ' is-unread' : '' }}">
									<xf:macro name="article_cover_image" 
										arg-article="{$article}" 
										arg-extras="{$extras}" 
										arg-blockType="featured_grid" />

									<xf:macro name="article_caption" 
										arg-article="{$article}" 
										arg-extras="{$extras}" 
										arg-extraHeadingClass="" 
										arg-blockType="featured_grid" />
								</div>
							</xf:if>
						</li>
					</xf:if>

					<xf:if is="{$i} == 2">
						<li class="second">
							<div class="item medium-item {{ ($article.isUnread() AND !$forceRead) ? ' is-unread' : '' }}">
								<xf:macro name="article_cover_image" 
									arg-article="{$article}" 
									arg-extras="{$extras}" 
									arg-blockType="featured_grid" />

								<xf:macro name="article_caption" 
									arg-article="{$article}" 
									arg-extras="{$extras}" 
									arg-extraHeadingClass="heading-small" 
									arg-blockType="featured_grid" />
							</div>
						</li>
					</xf:if>

					<xf:if is="{$i} == 3">
						<li class="second">
							<div class="item medium-item-2 {{ ($article.isUnread() AND !$forceRead) ? ' is-unread' : '' }}">
								<xf:macro name="article_cover_image" 
									arg-article="{$article}" 
									arg-extras="{$extras}" 
									arg-blockType="featured_grid" />

								<xf:macro name="article_caption" 
									arg-article="{$article}" 
									arg-extras="{$extras}" 
									arg-extraHeadingClass="heading-small" 
									arg-blockType="featured_grid" />
							</div>
						</li>
					</xf:if>
				</xf:foreach>
			</ul>

			<xf:macro name="featured_footer" arg-viewAllLink="{$viewAllLink}" />
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="featured_carousel" 
	arg-featuredArticles="!" 
	arg-category="{{ null }}" 
	arg-viewAllLink="!">

	<xf:if is="$featuredArticles is not empty">
		<xf:css src="carousel.less" />
		<xf:css src="lightslider.less" />
		<xf:css src="xa_ams.less" />
		
		<xf:js prod="xf/carousel-compiled.js" dev="vendor/lightslider/lightslider.min.js, xf/carousel.js" />

		<xf:set var="$extras" value="{{ property('xaAmsFeaturedCarouselElements') }}" />
		<xf:set var="$showType" value="{{ property('xaAmsFeaturedCarouselShowType') }}" />

		<div class="carousel carousel--withFooter carousel--amsFeaturedArticles">
			<ul class="carousel-body {{ $showType == 'show2' ? 'carousel-body--show2' : 'carousel-body--show1' }}" data-xf-init="carousel">
				<xf:foreach loop="$featuredArticles" value="$article">
					<li>
						<div class="carousel-item {{ ($article.isUnread() AND !$forceRead) ? ' is-unread' : '' }}">
							<div class="contentRow">
								<div class="contentRow-main">
									<xf:if is="(!$category OR $category.hasChildren()) && $extras.category">
										<div class="contentRow-amsCategory">
											<a href="{{ link('ams/categories', $article.Category) }}">{$article.Category.title}</a>
										</div>
									</xf:if>

									<xf:macro name="article_cover_image" 
										arg-article="{$article}" 
										arg-extras="{$extras}" 
										arg-blockType="featured_carousel" />
									
									<h4 class="contentRow-title"><a href="{{ link('ams', $article) }}">{{ prefix('ams_article', $article) }}{$article.title}</a></h4>

									<xf:macro name="article_location" 
										arg-article="{$article}" 
										arg-extras="{$extras}" 
										arg-blockType="featured_carousel" />

									<xf:if is="$extras.preview_snippet">
										<div class="contentRow-lesser">
											{{ snippet($article.message, $xf.options.xaAmsSnippetLengthFC, {'stripQuote': true}) }}
										</div>
									</xf:if>

									<xf:if is="$extras.custom_fields">
										<xf:set var="$amsCustomFieldGroupNames" value="{{ ['header','above_article','below_article','new_tab','sidebar','self_place'] }}" />
										<xf:if contentcheck="true">
											<div class="contentRow-lesser contentRow-articleCustomFields">
												<xf:contentcheck>
													<xf:foreach loop="$amsCustomFieldGroupNames" value="$amsCustomFieldGroupName">
														<xf:macro template="custom_fields_macros" name="custom_fields_view"
															arg-type="ams_articles"
															arg-group="{$amsCustomFieldGroupName}"
															arg-set="{$article.custom_fields}"
															arg-onlyInclude="{$article.Category.field_cache}"
															arg-additionalFilters="{{ ['display_on_list'] }}"
															arg-wrapperClass="carouselLayout-fields carouselLayout-fields--before" 
															arg-valueClass="pairs pairs--columns pairs--fixedSmall" />
													</xf:foreach>
												</xf:contentcheck>
											</div>
										</xf:if>
									</xf:if>

									<div class="contentRow-minor contentRow-minor--smaller">
										<ul class="listInline listInline--bullet">
											<xf:if is="$article.User.Profile.xa_ams_author_name">
												<li>{$article.User.Profile.xa_ams_author_name}</li>
											<xf:else />
												<li>{{ $article.User.username ?: $article.username }}</li>
											</xf:if>
											<li><a href="{{ link('ams', $article) }}" rel="nofollow" class="u-concealed"><xf:date time="{$article.publish_date}" /></a></li>
											<xf:if is="$article.last_update && $article.last_update > $article.publish_date">
												<li>{{ phrase('updated:') }} <xf:date time="{$article.last_update}" /></li>
											</xf:if>
											<xf:if is="$article.article_read_time && $extras.article_read_time">
												<li>{{ phrase('xa_ams_x_min_read', {'minutes': $article.article_read_time}) }}</li>
											</xf:if>
											<xf:if is="$article.author_rating && $article.Category.allow_author_rating && $extras.author_rating">
												<li>
													<xf:macro template="rating_macros" name="stars"
														arg-rating="{$article.author_rating}" 
														arg-class="ratingStars--amsAuthorRating" />
												</li>
											</xf:if>
											<xf:if is="$article.rating_avg && $article.rating_count && $article.Category.allow_ratings && $extras.rating_avg">
												<li>
													<xf:macro template="rating_macros" name="stars"
														arg-rating="{$article.rating_avg}" />
												</li>
											</xf:if>
											<xf:if is="$article.view_count && $extras.view_count">
												<li>{{ phrase('views') }}: {$article.view_count|number_short}</li>
											</xf:if>
											<xf:if is="$article.reaction_score && $extras.reaction_score">
												<li>{{ phrase('reaction_score') }}: {$article.reaction_score|number_short}</li>
											</xf:if>
											<xf:if is="$article.comment_count && $extras.comment_count">
												<li><a href="{{ link('ams', $article) }}#comments" class="u-concealed">{{ phrase('comments') }}: {$article.comment_count|number_short}</a></li>
											</xf:if>
											<xf:if is="$article.review_count && $extras.review_count">
												<li><a href="{{ link('ams/reviews', $article) }}" class="u-concealed">{{ phrase('xa_ams_reviews') }}: {$article.review_count|number_short}</a></li>
											</xf:if>
											<xf:if is="$extras.share_this_article">
												<li class="u-flexStretch"><a href="{{ link('ams', $article) }}"
													class="u-muted"
													data-xf-init="share-tooltip"
													data-href="{{ link('ams/share', $article) }}"
													aria-label="{{ phrase('share')|for_attr }}"
													rel="nofollow">
													<xf:fa icon="fa-share-alt"/>
												</a></li>
											</xf:if>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</li>
				</xf:foreach>
			</ul>

			<xf:macro name="featured_footer" arg-viewAllLink="{$viewAllLink}" />
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="article_cover_image" 
	arg-article="!" 
	arg-extras="" 
	arg-blockType="!">

	<xf:if is="$blockType == 'featured_grid'">
		<xf:if is="$article.CoverImage">
			<a class="image-link" style="background: url({{ link('ams/cover-image', $article) }}) no-repeat center center transparent; background-size: cover;" href="{{ link('ams', $article) }}"></a>
		<xf:elseif is="$article.Category.content_image_url" />
			<a class="image-link" style="background: url({{ base_url({$article.Category.content_image_url}) }}) no-repeat center center transparent; background-size: cover;" href="{{ link('ams', $article) }}"></a>
		<xf:else />
			<a class="image-link" style="background: #185886; background-size: cover;" href="{{ link('ams', $article) }}"></a>
		</xf:if>
	<xf:elseif is="$blockType == 'featured_carousel'" />
		<xf:if is="$article.CoverImage">
			<div class="contentRow-figure">
				<a href="{{ link('ams', $article) }}">
					{{ ams_article_thumbnail($article) }}
				</a>
			</div>
		<xf:elseif is="$article.SeriesPart.Series && $article.SeriesPart.Series.icon_date" />
			<div class="contentRow-figure">
				{{ ams_series_icon($article.SeriesPart.Series, 's', link('ams', $article)) }}
			</div>
		<xf:elseif is="$article.Category.content_image_url" />
			<div class="contentRow-figure">
				<a href="{{ link('ams', $article) }}">
					{{ ams_category_icon($article) }}
				</a>
			</div>
		</xf:if>
	</xf:if>
</xf:macro>

<xf:macro name="article_caption" 
	arg-article="!" 
	arg-extras="!" 
	arg-extraHeadingClass="" 
	arg-blockType="!">

	<div class="caption">
		<xf:macro name="article_heading" 
			arg-article="{$article}" 
			arg-extras="{$extras}" 
			arg-extraHeadingClass="{$extraHeadingClass}" />

		<xf:macro name="article_ratings" 
			arg-article="{$article}" 
			arg-extras="{$extras}" />

		<xf:macro name="article_location" 
			arg-article="{$article}" 
			arg-extras="{$extras}" 
			arg-blockType="{$blockType}" />

		<xf:macro name="article_meta" 
			arg-article="{$article}" 
			arg-extras="{$extras}" />
	</div>
</xf:macro>

<xf:macro name="article_heading" 
	arg-article="!" 
	arg-extras="" 
	arg-extraHeadingClass="">

	<h3>
		<span class="item-heading {{ $extraHeadingClass ?: '' }}">
			<a href="{{ link('ams', $article) }}">{{ prefix('ams_article', $article) }}{$article.title}</a>
		</span>		
	</h3>
</xf:macro>

<xf:macro name="article_ratings" 
	arg-article="!" 
	arg-extras="!">

 	<xf:if is="$extras.author_rating || $extras.rating_avg"> 
		<ul class="listInline listInline--bullet item-rating">
			<xf:if is="$extras.author_rating && $article.author_rating && $article.Category.allow_author_rating">
				<li>
					<xf:macro template="rating_macros" name="stars"
						arg-rating="{$article.author_rating}"
						arg-class="ratingStars--smaller ratingStars--amsAuthorRating" />
				</li>
			</xf:if>

			<xf:if is="$extras.rating_avg && $article.rating_avg AND $article.review_count">
				<li>
					<xf:macro template="rating_macros" name="stars"
						arg-rating="{$article.rating_avg}"
						arg-class="ratingStars--smaller" />
				</li>
			</xf:if>
		</ul>
	</xf:if>
</xf:macro>

<xf:macro name="article_location" 
	arg-article="!" 
	arg-extras="" 
	arg-blockType="!">

	<xf:if contentcheck="true">
		<div class="{{ $blockType == 'featured_grid' ? 'item-location' : 'contentRow-minor contentRow-minor--smaller contentRow-articleLocation' }}">
			<xf:contentcheck>{$article.getArticleLocationForList()}</xf:contentcheck>

			<xf:if is="$article.canViewArticleMap()">
				<a href="{{ link('ams/map-overlay', $article) }}" rel="nofollow" 
					class="{{ $blockType == 'featured_grid' ? 'item-location-icon' : 'contentRow-articleLocationIcon' }}" 
					data-xf-click="overlay"><xf:fa icon="fa-map-marker-alt" /></a>
			</xf:if>
		</div>	
	</xf:if>
</xf:macro>

<xf:macro name="article_meta" 
	arg-article="!" 
	arg-extras="">

	<xf:if contentcheck="true">										
		<ul class="listInline listInline--bullet">
		<xf:contentcheck>
			<xf:if is="$extras.username">
				<li>
					<xf:if is="$article.User.Profile.xa_ams_author_name">
						<xf:username user="{'user_id':{$article.User.user_id}, 'username':{$article.User.Profile.xa_ams_author_name}}" defaultname="{$article.User.Profile.xa_ams_author_name}" class="category-title" />
					<xf:else />
						<xf:username user="{$article.User}" defaultname="{{ $article.username ?: phrase('deleted_member') }}" class="category-title" />
					</xf:if>
				</li> 
			</xf:if>
			<xf:if is="$extras.publish_date">
				<li><time class="publish-date"><xf:date time="{$article.publish_date}" /></time></li> 
				<xf:if is="$article.last_update AND $article.last_update > $article.publish_date">								
					<li>
						<time class="publish-date"><span>{{ phrase('updated') }}
						<xf:date time="{$article.last_update}" /></span></time>
					</li>
				</xf:if>
			</xf:if>
			<xf:if is="$article.article_read_time && $extras.article_read_time">
				<li>{{ phrase('xa_ams_x_min_read', {'minutes': $article.article_read_time}) }}</li>
			</xf:if>
			<xf:if is="$extras.category_title">
				<li><a class="category-title category-{$article.category_id}" href="{{ link('ams/categories', $article) }}">{$article.Category.title}</a></li>
			</xf:if>
			<xf:if is="$extras.share_this_article">
				<li class="u-flexStretch"><a href="{{ link('ams', $article) }}"
					class="article-share"
					data-xf-init="share-tooltip"
					data-href="{{ link('ams/share', $article) }}"
					aria-label="{{ phrase('share')|for_attr }}"
					rel="nofollow">
					<xf:fa icon="fa-share-alt"/>
				</a></li>
			</xf:if>
		</xf:contentcheck>
		</ul>
	</xf:if>
</xf:macro>

<xf:macro name="featured_footer" 
	arg-viewAllLink="!">

	<div class="carousel-footer">
		<a href="{$viewAllLink}">
			{{ phrase('xa_ams_view_all_featured_articles') }}	
		</a>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_filters" version_id="2022570" version_string="2.2.25"><![CDATA[<xf:form action="{{ link($category ? 'ams/categories/filters' : 'ams/filters', $category) }}">

	<!--[XF:above_misc_check_box]-->
	<div class="menu-row menu-row--separated">
		<xf:checkbox>
			<xf:option name="featured" selected="{$filters.featured}">{{ phrase('xa_ams_featured_articles') }}</xf:option>
			<xf:option name="is_rated" selected="{$filters.is_rated}">{{ phrase('xa_ams_articles_that_have_been_rated') }}</xf:option>
			<xf:option name="has_reviews" selected="{$filters.has_reviews}">{{ phrase('xa_ams_articles_with_reviews') }}</xf:option>
			<xf:option name="has_comments" selected="{$filters.has_comments}">{{ phrase('xa_ams_articles_with_comments') }}</xf:option>
		</xf:checkbox>
	</div>

	<!--[XF:above_title]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('title:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="title" value="{$filters.title}" />
		</div>
	</div>
	
	<!--[XF:above_articles_that_mention]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('xa_ams_articles_that_mention:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="term" value="{$filters.term}" />
		</div>
	</div>		

	<!--[XF:above_rating]-->
	<xf:if is="$showRatingFilter">
		<div class="menu-row menu-row--separated">
			{{ phrase('xa_ams_avg_rating:') }}
			<div class="u-inputSpacer">
				<xf:select name="rating_avg" value="{$filters.rating_avg}">
					<xf:option value="">{{ phrase('any') }}</xf:option>
					<xf:option value="5">{{ phrase('xa_ams_5_stars') }}</xf:option>
					<xf:option value="4">{{ phrase('xa_ams_4_stars_up') }}</xf:option>
					<xf:option value="3">{{ phrase('xa_ams_3_stars_up') }}</xf:option>
					<xf:option value="2">{{ phrase('xa_ams_2_stars_up') }}</xf:option>
				</xf:select>
			</div>
		</div>
	</xf:if>
	
	<!--[XF:above_prefixes]-->
	<xf:if is="$prefixesGrouped is not empty">
		<div class="menu-row menu-row--separated">
			{{ phrase('prefix:') }}
			<div class="u-inputSpacer">
				<xf:macro template="prefix_macros" name="select"
					arg-prefixes="{$prefixesGrouped}"
					arg-type="ams_article"
					arg-selected="{{ $filters.prefix_id ?: 0 }}"
					arg-name="prefix_id"
					arg-noneLabel="{{ phrase('(any)') }}"
				/>
			</div>
		</div>
	</xf:if>

	<!--[XF:above_created_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('created_by:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="creator" value="{{ $creatorFilter ? $creatorFilter.username : '' }}" ac="single" />
		</div>
	</div>

	<!--[XF:above_last_updated]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('last_updated:') }}
		<div class="u-inputSpacer">
			<xf:select name="last_days" value="{{ $filters.last_days ?: $forum.list_date_limit_days }}">
				<xf:option value="-1">{{ phrase('any_time') }}</xf:option>
				<xf:option value="7">{{ phrase('x_days', {'days': '7'}) }}</xf:option>
				<xf:option value="14">{{ phrase('x_days', {'days': '14'}) }}</xf:option>
				<xf:option value="30">{{ phrase('x_days', {'days': '30'}) }}</xf:option>
				<xf:option value="60">{{ phrase('x_months', {'months': '2'}) }}</xf:option>
				<xf:option value="90">{{ phrase('x_months', {'months': '3'}) }}</xf:option>
				<xf:option value="182">{{ phrase('x_months', {'months': '6'}) }}</xf:option>
				<xf:option value="365">{{ phrase('1_year') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<!--[XF:above_state]-->
	<xf:if is="{{ $xf.visitor.hasPermission('xa_ams', 'viewModerated') || $xf.visitor.hasPermission('xa_ams', 'viewDeleted') }}">
		<div class="menu-row menu-row--separated">
			{{ phrase('xa_ams_content_state:') }}
			<div class="u-inputSpacer">
				<xf:select name="state" value="{$filters.state}">
					<xf:option value="">{{ phrase('any') }}</xf:option>
					<xf:option value="visible">{{ phrase('visible') }}</xf:option>
					<xf:if is="{{ $xf.visitor.hasPermission('xa_ams', 'viewModerated') }}">
						<xf:option value="moderated">{{ phrase('moderated') }}</xf:option>
					</xf:if>
					<xf:if is="{{ $xf.visitor.hasPermission('xa_ams', 'viewDeleted') }}">
						<xf:option value="deleted">{{ phrase('deleted') }}</xf:option>
					</xf:if>
				</xf:select>
			</div>
		</div>
	</xf:if>
	
	<!--[XF:above_sort_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('sort_by:') }}
		<div class="inputGroup u-inputSpacer">
			<xf:select name="order" value="{{ $filters.order ?: $xf.options.xaAmsListDefaultOrder }}">
				<xf:option value="publish_date">{{ phrase('xa_ams_publish_date') }}</xf:option>
				<xf:option value="last_update">{{ phrase('xa_ams_last_update') }}</xf:option>
				<xf:option value="rating_weighted">{{ phrase('rating') }}</xf:option>
				<xf:option value="reaction_score">{{ phrase('reaction_score') }}</xf:option>
				<xf:option value="view_count">{{ phrase('views') }}</xf:option>
				<xf:option value="title">{{ phrase('title') }}</xf:option>
			</xf:select>
			<span class="inputGroup-splitter"></span>
			<xf:select name="direction" value="{{ $filters.direction ?: 'desc' }}">
				<xf:option value="desc">{{ phrase('descending') }}</xf:option>
				<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<div class="menu-footer">
		<span class="menu-footer-controls">
			<xf:button type="submit" class="button--primary">{{ phrase('filter') }}</xf:button>
		</span>
	</div>
	<xf:hiddenval name="apply">1</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="xa_ams_grid_view_layout.less" version_id="2022670" version_string="2.2.26"><![CDATA[.gridContainerAmsGridView .ams-grid-view
{
	.m-listPlain();
	.m-clearFix();
	display: flex;
	flex-wrap: wrap;
	margin: 3px;

	.grid-image-link
	{
		display: block;
		position: relative;
		overflow: hidden;
		background: #ccc;
		min-height: 260px;
		transition: all .5s;
		&:hover
		{
			transform: scale(1.07);
		}
	}

	.grid-container
	{
		flex: 1 1 33%;
		max-width: 33%;
		padding: 5px;

		@media (max-width: 1850px) { flex: 1 1 50%; max-width: 50%;}
		@media (max-width: @xf-responsiveWide) { flex: 1 1 50%; max-width: 50%;}
		@media (max-width: @xf-responsiveMedium) { flex: 1 1 100%; max-width: 100%;}
		@media (max-width: @xf-responsiveNarrow) { flex: 1 1 100%; max-width: 100%;}		
		
		&.is-unread
		{
			.grid-caption .grid-item-heading
			{
				font-weight: @xf-fontWeightHeavy;
			}
		}		
		&.is-mod-selected
		{
			background: @xf-inlineModHighlightColor !important;
			opacity: 1;
		}
		&.is-moderated
		{
			background: @xf-contentHighlightBg;
			
			.grid-caption .grid-item-heading
			{
				font-style: italic;
			}
		}
		&.is-deleted
		{
			opacity: .7;

			.grid-caption .grid-item-heading
			{
				text-decoration: line-through;
			}
		}
	}

	.grid-item
	{
		position: relative;
		overflow: hidden;
		&.large-grid-item
		{
			.grid-image-link:after
			{
				height: 60%;
			}
		}
	}

	.grid-caption
	{
		max-width: 100%;
		position: relative;
		padding: 10px 0px;
		bottom: 0px;
		display: block;
		pointer-events: auto;
		&.grid-caption-small
		{
			max-width: initial;
		}
		.grid-item-category-title-header
		{
			padding-bottom: @xf-paddingSmall;
			font-size: @xf-fontSizeSmaller;
			font-style: italic;
			color: @xf-textColorMuted;
		}			
		.grid-item-heading
		{
			display: block;
			padding-bottom: 5px;
			font-size: @xf-fontSizeLarger;
			font-weight: @xf-fontWeightNormal;
			line-height: 1.4;
			color: @xf-linkColor;
			
			.label 
			{
    			font-weight: @xf-fontWeightNormal;
			}
		}
		h3
		{
			padding: 0;
			margin: 0;
		}
		.grid-item-location
		{
			font-size: @xf-fontSizeSmaller;
			color: @xf-textColorDimmed;
			padding-bottom: @xf-paddingSmall;

			.grid-item-location-icon
			{
				font-size: @xf-fontSizeSmaller;
				padding-left: @xf-paddingSmall;
			}
		}			
		.grid-description
		{
			padding-top: @xf-paddingSmall;
			padding-bottom: @xf-paddingMedium;	
		}	
		.listInline.listInline--bullet
		{
			color: @xf-textColorDimmed;
			font-size: @xf-fontSizeSmaller;
			padding-bottom: @xf-paddingSmall;
		}
		.publish-date,
		.category-title	
		{
			color: @xf-textColorDimmed;
			font-size: @xf-fontSizeSmaller;
		}
		.grid-item-minor
		{
			font-size: @xf-fontSizeSmaller;
			color: @xf-textColorMuted;

			.m-hiddenLinks();
		}
		.grid-item-extraInfo
		{
			.m-listPlain();
			float: right;

			> li
			{
				float: left;
				margin-left: 8px;
			}

			input[type=checkbox]
			{
				.m-checkboxAligner();
			}
		}
		.grid-item-articleCustomFieldsOnList
		{
			font-size: @xf-fontSizeSmaller;
			margin-top: @xf-paddingSmall;
			margin-bottom: @xf-paddingSmall;
		}		
	}
}

@media (max-width:800px)
{
	.gridContainerAmsGridView .ams-grid-view .grid-image-link
	{
		min-height: 240px;
	}

	.gridContainerAmsGridView .ams-grid-view .grid-caption
	{
		padding: 8px;
		max-width: 100%;
		bottom: 0;
	}

	.gridContainerAmsGridView .ams-grid-view .grid-caption .grid-item-heading
	{
		font-size: @xf-fontSizeLarge;
	}
}

@media (max-width:650px)
{
	.gridContainerAmsGridView .ams-grid-view .grid-container
	{
		float: none;
		width: auto;
		padding: 0;
		margin-bottom: @xf-paddingLarge;
	}
}]]></template>
  <template type="public" title="xa_ams_index" version_id="2022670" version_string="2.2.26"><![CDATA[<xf:title page="{$page}">{{ phrase('xa_ams_index_page_title') }}</xf:title>

<xf:css src="xa_ams.less" />

<xf:macro template="metadata_macros" name="metadata"
	arg-description="{$xf.options.xaAmsMetaDescription}"
	arg-canonicalUrl="{{ link('canonical:ams', null, {'page': $page > 1 ? $page : null}) }}" />

<xf:page option="searchConstraints" value="{{ {
	phrase('xa_ams_articles'): {'search_type': 'ams_article'}
} }}" />

<xf:pageaction if="$xf.visitor.canAddAmsArticle()">
	<xf:button href="{{ link('ams/add') }}" class="button--cta" icon="write" overlay="true">{{ phrase('xa_ams_post_article...') }}</xf:button>
</xf:pageaction>

<xf:if is="$xf.options.xaAmsFeaturedArticlesDisplayType == 'featured_grid' && $featuredArticlesCount > 1 && $xf.visitor.hasAmsArticlePermission('viewArticleAttach')">
	<xf:macro template="xa_ams_featured_macros" name="featured_grid"
		arg-featuredArticles="{$featuredArticles}"
		arg-featuredArticlesCount="{$featuredArticlesCount}"
		arg-viewAllLink="{{ link('ams/featured') }}" />
<xf:else />
	<xf:macro template="xa_ams_featured_macros" name="featured_carousel"
		arg-featuredArticles="{$featuredArticles}"
		arg-viewAllLink="{{ link('ams/featured') }}" />
</xf:if>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<xf:widgetpos id="xa_ams_index_above_articles" />

<div class="block {{ $xf.options.xaAmsArticleListLayoutType == 'article_view' ? 'block--messages' : '' }}" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="ams_article" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
				<xf:contentcheck>
					<xf:if is="$canInlineMod">
						<xf:macro template="inline_mod_macros" name="button" />
					</xf:if>
				</xf:contentcheck>
				</div>
			</div>
		</xf:if>

	</xf:trim></div>

	<div class="block-container">
		<xf:macro template="xa_ams_index_macros" name="list_filter_bar"
			arg-filters="{$filters}"
			arg-baseLinkPath="ams"
			arg-creatorFilter="{$creatorFilter}" />

		<div class="block-body">
			<xf:if is="$articles is not empty">
				<xf:if is="$xf.options.xaAmsArticleListLayoutType == 'article_view' && $xf.visitor.hasAmsArticlePermission('viewArticleAttach')">
					<xf:foreach loop="$articles" value="$article">
						<xf:macro template="xa_ams_article_list_macros" name="article_view_layout"
							arg-filterPrefix="{{ true }}"								  
							arg-article="{$article}" />
					</xf:foreach>
				<xf:elseif is="$xf.options.xaAmsArticleListLayoutType == 'grid_view' && $xf.visitor.hasAmsArticlePermission('viewArticleAttach')" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_grid_view_layout.less" />

					<div class="gridContainerAmsGridView">		
						<ul class="ams-grid-view">
							<xf:foreach loop="$articles" value="$article">
								<xf:macro template="xa_ams_article_list_macros" name="grid_view_layout"
									arg-filterPrefix="{{ true }}"									  
									arg-article="{$article}" />
							</xf:foreach>
						</ul>
					</div>
				<xf:elseif is="$xf.options.xaAmsArticleListLayoutType == 'tile_view' && $xf.visitor.hasAmsArticlePermission('viewArticleAttach')" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_tile_view_layout.less" />

					<div class="gridContainerAmsTileView">		
						<ul class="ams-tile-view">
							<xf:foreach loop="$articles" value="$article">
								<xf:macro template="xa_ams_article_list_macros" name="tile_view_layout"
									arg-filterPrefix="{{ true }}"									  
									arg-article="{$article}" />
							</xf:foreach>
						</ul>
					</div>
				<xf:else />
					<div class="structItemContainer structItemContainerAmsListView">
						<xf:foreach loop="$articles" value="$article">
							<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
								arg-filterPrefix="{{ true }}"									  
								arg-article="{$article}" />
						</xf:foreach>
					</div>
				</xf:if>
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('xa_ams_there_no_articles_matching_your_filters') }}</div>
			<xf:else />
				<div class="block-row">{{ phrase('xa_ams_no_articles_have_been_created_yet') }}</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams" params="{$filters}"
			wrapperclass="block-outer-main" />
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>

<xf:widgetpos id="xa_ams_index_below_articles" />

<xf:page option="sideNavTitle">{{ phrase('categories') }}</xf:page>
<xf:sidenav>
	<xf:macro template="xa_ams_category_list_macros" name="simple_list_block"
		arg-categoryTree="{$categoryTree}"
		arg-categoryExtras="{$categoryExtras}"
		arg-selected="" />			  
</xf:sidenav>

<xf:widgetpos id="xa_ams_index_sidenav" position="sidenav" />

<xf:widgetpos id="xa_ams_index_sidebar" position="sidebar" />]]></template>
  <template type="public" title="xa_ams_index_macros" version_id="2022570" version_string="2.2.25"><![CDATA[<xf:macro name="list_filter_bar" 
	arg-filters="!" 
	arg-baseLinkPath="!" 
	arg-category="{{ null }}" 
	arg-creatorFilter="{{ null }}" 
	arg-linkData="{{ null }}">
	
	<xf:set var="$dateLimits" value="{{ {
		'-1': phrase('any_time'),
		'7': phrase('x_days', {'days': '7'}),
		'14': phrase('x_days', {'days': '14'}),
		'30': phrase('x_days', {'days': '30'}),
		'60': phrase('x_months', {'months': '2'}),
		'90': phrase('x_months', {'months': '3'}),
		'182': phrase('x_months', {'months': '6'}),
		'365': phrase('1_year')
	} }}" />
	<xf:set var="$sortOrders" value="{{ {
		'last_update': phrase('xa_ams_last_update'),
		'publish_date': phrase('xa_ams_publish_date'),
		'rating_weighted': phrase('rating'),
		'reaction_score': phrase('reaction_score'),
		'view_count': phrase('views'),
		'title': phrase('title')
	} }}" />

	<div class="block-filterBar">
		<div class="filterBar">
			<xf:if contentcheck="true">
				<ul class="filterBar-filters">
					<xf:contentcheck>
						<xf:if is="$filters.featured">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('featured', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
								{{ phrase('xa_ams_featured') }}
							</a></li>
						</xf:if>

						<xf:if is="$filters.is_rated">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('is_rated', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
								{{ phrase('xa_ams_is_rated') }}
							</a></li>
						</xf:if>

						<xf:if is="$filters.has_reviews">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('has_reviews', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
								{{ phrase('xa_ams_has_reviews') }}
							</a></li>
						</xf:if>

						<xf:if is="$filters.has_comments">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('has_comments', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
								{{ phrase('xa_ams_has_comments') }}
							</a></li>
						</xf:if>

						<xf:if is="$filters.title">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('title', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('title:') }}</span>
								{$filters.title}</a></li>
						</xf:if>
						
						<xf:if is="$filters.term">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('term', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('xa_ams_mentions:') }}</span>
								{$filters.term}</a></li>
						</xf:if>						

						<xf:if is="$filters.rating_avg">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('rating_avg', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('xa_ams_avg_rating:') }}</span>
								<xf:if is="$filters.rating_avg == 5">
									{{ phrase('xa_ams_5_stars') }}
								<xf:elseif is="$filters.rating_avg == 4" />
									{{ phrase('xa_ams_4_stars_up') }}
								<xf:elseif is="$filters.rating_avg == 3" />
									{{ phrase('xa_ams_3_stars_up') }}
								<xf:elseif is="$filters.rating_avg == 2" />
									{{ phrase('xa_ams_2_stars_up') }}
								</xf:if>
							</a></li>
						</xf:if>

						<xf:if is="$filters.prefix_id">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('prefix_id', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('prefix:') }}</span>
								{{ prefix_title('ams_article', $filters.prefix_id) }}</a></li>
						</xf:if>

						<xf:if is="$filters.creator_id AND $creatorFilter">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('creator_id', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('created_by:') }}</span>
								{$creatorFilter.username}</a></li>
						</xf:if>

						<xf:if is="$filters.last_days AND {$dateLimits.{$filters.last_days}}">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('last_days', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('last_updated:') }}</span>
								{$dateLimits.{$filters.last_days}}</a></li>
						</xf:if>

						<xf:if is="$filters.state">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('state', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('state:') }}</span>
								<xf:if is="$filters.state == 'visible'">
									{{ phrase('visible') }}
								<xf:elseif is="$filters.state == 'moderated'" />
									{{ phrase('moderated') }}
								<xf:elseif is="$filters.state == 'deleted'" />
									{{ phrase('deleted') }}
								</xf:if>
							</a></li>
						</xf:if>
						
						<xf:if is="$filters.order AND {$sortOrders.{$filters.order}}">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace({'order': null, 'direction': null})) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('return_to_default_order')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
								{$sortOrders.{$filters.order}}
								<xf:fa icon="{{ $filters.direction == 'asc' ? 'fa-angle-up' : 'fa-angle-down' }}" />
								<span class="u-srOnly"><xf:if is="$filters.direction == 'asc'">{{ phrase('ascending') }}<xf:else />{{ phrase('descending') }}</xf:if></span>
							</a></li>
						</xf:if>
					</xf:contentcheck>
				</ul>
			</xf:if>

			<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
			<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
				data-href="{{ link($baseLinkPath . '/filters', $category, $filters) }}"
				data-load-target=".js-filterMenuBody">
				<div class="menu-content">
					<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
					<div class="js-filterMenuBody">
						<div class="menu-row">{{ phrase('loading...') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_index_modular" version_id="2022670" version_string="2.2.26"><![CDATA[<xf:title>{{ phrase('xa_ams_index_page_title') }}</xf:title>
<xf:h1> </xf:h1>

<xf:css src="xa_ams.less" />

<xf:macro template="metadata_macros" name="metadata"
	arg-description="{$xf.options.xaAmsMetaDescription}"
	arg-canonicalUrl="{{ link('canonical:ams', null, {'page': $page > 1 ? $page : null}) }}" />

<xf:page option="searchConstraints" value="{{ {
	phrase('xa_ams_articles'): {'search_type': 'ams_article'}
} }}" />

<xf:pageaction if="$xf.visitor.canAddAmsArticle()">
	<xf:button href="{{ link('ams/add') }}" class="button--cta" icon="write" overlay="true">{{ phrase('xa_ams_post_article...') }}</xf:button>
</xf:pageaction>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<xf:widgetpos id="xa_ams_modular_index_sidenav" position="sidenav" />

<xf:widgetpos id="xa_ams_modular_index_main" />

<xf:widgetpos id="xa_ams_modular_index_sidebar" position="sidebar" />]]></template>
  <template type="public" title="xa_ams_inline_mod_article_apply_prefix" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('apply_prefix') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('xa_ams_you_sure_you_want_to_apply_prefix_to_x_articles', {'total': $total}) }}</xf:inforow>

			<xf:macro template="prefix_macros" name="row"
				arg-type="ams_article"
				arg-prefixes="{$prefixes}"
				arg-selected="{$selectedPrefix}"
				arg-explain="{{ ($categoryCount > 1) ? phrase('xa_ams_apply_article_prefix_to_multiple_categories') : '' }}" />
		</div>
		<xf:submitrow icon="confirm" />
	</div>

	<xf:foreach loop="$articles" value="$article">
		<xf:hiddenval name="ids[]">{$article.article_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">ams_article</xf:hiddenval>
	<xf:hiddenval name="action">apply_prefix</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xa_ams_inline_mod_article_delete" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_delete_articles') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('xa_ams_you_sure_you_want_to_delete_x_articles', {'total': $total}) }}</xf:inforow>

			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$canHardDelete}" />

			<xf:macro template="helper_action" name="author_alert" />
		</div>
		<xf:submitrow icon="delete" />
	</div>

	<xf:foreach loop="$articles" value="$article">
		<xf:hiddenval name="ids[]">{$article.article_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">ams_article</xf:hiddenval>
	<xf:hiddenval name="action">delete</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xa_ams_inline_mod_article_merge" version_id="2010570" version_string="2.1.5"><![CDATA[<xf:title>{{ phrase('xa_ams_inline_moderation_merge_articles') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('xa_ams_you_sure_you_want_to_merge_x_articles', {'count': $total}) }}</xf:inforow>

			<xf:selectrow name="target_article_id" value="{$first.article_id}"
				label="{{ phrase('xa_ams_destination_article') }}"
				explain="{{ phrase('xa_ams_all_comments_reviews_from_other_articles_will_be_merged_into_this_article') }}">

				<xf:foreach loop="$articles" value="$article">
					<xf:option value="{$article.article_id}">{{ prefix('ams_article', $article, 'escaped') }}{$article.title}</xf:option>
				</xf:foreach>
			</xf:selectrow>

			<xf:macro name="item_alert" arg-selected="{{ $total == 1 }}" />
		</div>
		<xf:submitrow icon="merge" />
	</div>

	<xf:foreach loop="$articles" value="$article">
		<xf:hiddenval name="ids[]">{$article.article_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">ams_article</xf:hiddenval>
	<xf:hiddenval name="action">merge</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>

<xf:macro name="item_alert" arg-selected="{{ false }}" arg-alertName="starter_alert" arg-reasonName="starter_alert_reason">
	<xf:checkboxrow>
		<xf:option name="{$alertName}" selected="{$selected}"
			label="{{ phrase('xa_ams_notify_article_author_of_this_action') }} {{ phrase('reason:') }}">

			<xf:textbox name="{$reasonName}" placeholder="{{ phrase('optional') }}" />
			<xf:afterhint>{{ phrase('xa_ams_note_article_author_see_alert_even_no_longer_view_article') }}</xf:afterhint>
		</xf:option>
	</xf:checkboxrow>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_inline_mod_article_move" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:js src="xf/prefix_menu.js" min="1" />

<xf:title>{{ phrase('xa_ams_move_articles') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body js-prefixListenContainer">
			<xf:inforow rowtype="confirm">{{ phrase('xa_ams_you_sure_you_want_to_move_x_articles', {'total': $total}) }}</xf:inforow>
			<xf:selectrow name="target_category_id" value="{$first.category_id}" class="js-categoryList"
				label="{{ phrase('xa_ams_destination_category') }}">

				<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
					<xf:option value="{$treeEntry.record.category_id}">{{ repeat_raw('&nbsp; ', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>
				</xf:foreach>
			</xf:selectrow>

			<xf:checkboxrow>
				<xf:option name="apply_prefix"
					label="{{ phrase('xa_ams_apply_prefix_to_selected_articles') }}">

					<xf:dependent>
						<xf:macro template="prefix_macros" name="select"
							arg-type="ams_article"
							arg-prefixes="{$prefixes}"
							arg-href="{{ link('ams/prefixes') }}"
							arg-listenTo="< .js-prefixListenContainer | .js-categoryList" />
					</xf:dependent>
				</xf:option>
			</xf:checkboxrow>

			<xf:checkboxrow>
				<xf:option name="notify_watchers" value="1" selected="{{ true }}">{{ phrase('xa_ams_notify_members_watching_destination_category') }}</xf:option>
			</xf:checkboxrow>

			<xf:macro template="helper_action" name="author_alert" arg-selected="{{ true }}" />
		</div>
		<xf:submitrow icon="move" />
	</div>

	<xf:foreach loop="$articles" value="$article">
		<xf:hiddenval name="ids[]">{$article.article_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">ams_article</xf:hiddenval>
	<xf:hiddenval name="action">move</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xa_ams_inline_mod_article_reassign" version_id="2022870" version_string="2.2.28"><![CDATA[<xf:title>{{ phrase('xa_ams_reassign_articles') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body js-prefixListenContainer">
			<xf:inforow rowtype="confirm">{{ phrase('xa_ams_you_sure_you_want_to_reassign_x_articles', {'total': $total}) }}</xf:inforow>

			<xf:textboxrow name="username" ac="single" maxlength="{{ max_length($xf.visitor, 'username') }}"
				label="{{ phrase('xa_ams_new_owner') }}" />

			<xf:checkboxrow>
				<xf:option name="reassign_pages" selected="{{ true }}"
					label="{{ phrase('xa_ams_reassign_pages') }}">
				</xf:option>
			</xf:checkboxrow>
			
			<xf:checkboxrow>
				<xf:option name="alert" selected="{{ true }}"
					label="{{ phrase('xa_ams_notify_current_and_new_owners_of_this_action') }} {{ phrase('reason:') }}">

					<xf:textbox name="alert_reason" placeholder="{{ phrase('optional') }}" maxlength="250" />
				</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow icon="confirm" />
	</div>

	<xf:foreach loop="$articles" value="$article">
		<xf:hiddenval name="ids[]">{$article.article_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">ams_article</xf:hiddenval>
	<xf:hiddenval name="action">reassign</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xa_ams_inline_mod_comment_delete" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_inline_moderation_delete_comments') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('xa_ams_you_sure_you_want_to_delete_x_comments', {'total': $total}) }}</xf:inforow>

			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$canHardDelete}" />

			<xf:macro template="helper_action" name="author_alert" />
		</div>
		<xf:submitrow icon="delete" />
	</div>

	<xf:foreach loop="$comments" value="$comment">
		<xf:hiddenval name="ids[]">{$comment.comment_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">ams_comment</xf:hiddenval>
	<xf:hiddenval name="action">delete</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xa_ams_inline_mod_comment_merge" version_id="2010670" version_string="2.1.6"><![CDATA[<xf:title>{{ phrase('xa_ams_inline_moderation_merge_comments') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('xa_ams_you_sure_you_want_to_merge_x_comments_together', {'count': $total}) }}</xf:inforow>

			<xf:selectrow name="target_comment_id" value="{$first.comment_id}"
				label="{{ phrase('xa_ams_merge_into_comment') }}">

				<xf:foreach loop="$comments" key="$commentId" value="$comment">
					<xf:option value="{$commentId}">{{ $comment.User.username ?: $comment.username }} &middot; {{ date_time($comment.comment_date) }}</xf:option>
				</xf:foreach>
			</xf:selectrow>

			<xf:textarearow name="message" value="{$message}" rows="5" autosize="true"
				label="{{ phrase('preview') }}"
				maxlength="{$xf.options.messageMaxLength}" />

			<xf:macro template="helper_action" name="author_alert" arg-selected="{{ $total == 1 }}" />
		</div>
		<xf:submitrow icon="merge" />
	</div>

	<xf:foreach loop="$comments" value="$comment">
		<xf:hiddenval name="ids[]">{$comment.comment_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">ams_comment</xf:hiddenval>
	<xf:hiddenval name="action">merge</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xa_ams_inline_mod_review_delete" version_id="2000170" version_string="2.0.1"><![CDATA[<xf:title>{{ phrase('xa_ams_inline_moderation_delete_reviews') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('xa_ams_you_sure_you_want_to_delete_x_reviews', {'total': $total}) }}</xf:inforow>

			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$canHardDelete}" />

			<xf:macro template="helper_action" name="author_alert" />
		</div>
		<xf:submitrow icon="delete" />
	</div>

	<xf:foreach loop="$reviews" value="$review">
		<xf:hiddenval name="ids[]">{$review.rating_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">ams_rating</xf:hiddenval>
	<xf:hiddenval name="action">delete</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xa_ams_inline_mod_series_delete" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:title>{{ phrase('xa_ams_delete_series') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('xa_ams_you_sure_you_want_to_delete_x_series', {'total': $total}) }}</xf:inforow>

			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$canHardDelete}" />

			<xf:macro template="helper_action" name="author_alert" />
		</div>
		<xf:submitrow icon="delete" />
	</div>

	<xf:foreach loop="$seriesItems" value="$seriesItem">
		<xf:hiddenval name="ids[]">{$seriesItem.series_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">ams_series</xf:hiddenval>
	<xf:hiddenval name="action">delete</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xa_ams_inline_mod_series_reassign" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:title>{{ phrase('xa_ams_reassign_series') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body js-prefixListenContainer">
			<xf:inforow rowtype="confirm">{{ phrase('xa_ams_you_sure_you_want_to_reassign_x_series', {'total': $total}) }}</xf:inforow>

			<xf:textboxrow name="username" ac="single" maxlength="{{ max_length($xf.visitor, 'username') }}"
				label="{{ phrase('xa_ams_new_owner') }}" />

			<xf:checkboxrow>
				<xf:option name="alert" selected="{{ true }}"
					label="{{ phrase('xa_ams_notify_current_and_new_owners_of_this_action') }} {{ phrase('reason:') }}">

					<xf:textbox name="alert_reason" placeholder="{{ phrase('optional') }}" maxlength="250" />
				</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow icon="confirm" />
	</div>

	<xf:foreach loop="$seriesItems" value="$series">
		<xf:hiddenval name="ids[]">{$series.series_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">ams_series</xf:hiddenval>
	<xf:hiddenval name="action">reassign</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xa_ams_latest_reviews" version_id="2022570" version_string="2.2.25"><![CDATA[<xf:title page="{$page}">{{ phrase('xa_ams_latest_reviews') }}</xf:title>

<xf:page option="searchConstraints" value="{{ {
	phrase('xa_ams_articles'): {'search_type': 'ams_article'}
} }}" />

<xf:css src="xa_ams.less" />

<xf:if is="$canInlineModReviews">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<xf:set var="$sortOrders" value="{{ {
	'review_date': phrase('date'),
	'vote_score': phrase('xa_ams_most_helpful'),
	'rating': phrase('rating')
} }}" />

<div class="block block--messages"
	data-xf-init="{{ $canInlineModReviews ? 'inline-mod' : '' }}"
	data-type="ams_rating"
	data-href="{{ link('inline-mod') }}">

	<div class="block-outer"><xf:trim>
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/latest-reviews" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
					<xf:contentcheck>
						<xf:if is="$canInlineModReviews">
							<xf:macro template="inline_mod_macros" name="button" />
						</xf:if>
					</xf:contentcheck>
				</div>
			</div>
		</xf:if>
	</xf:trim></div>

	<div class="block-container"
		data-xf-init="lightbox"
		data-lb-universal="{$xf.options.lightBoxUniversal}">
	
		<div class="block-tabHeader tabs">
			<div class="hScroller" data-xf-init="h-scroller">
				<span class="hScroller-scroll">
					<!--[XF:review_tabs:start]-->
					<a href="{{ link('ams/latest-reviews', null, $reviewTabs.latest.filters) }}" class="tabs-tab {{ $reviewTabs.latest.selected ? 'is-active' : '' }}">{{ phrase('latest') }}</a>
					<a href="{{ link('ams/latest-reviews', null, $reviewTabs.helpful.filters) }}" class="tabs-tab {{ $reviewTabs.helpful.selected ? 'is-active' : '' }}">{{ phrase('xa_ams_most_helpful') }}</a>
					<a href="{{ link('ams/latest-reviews',null, $reviewTabs.rating.filters) }}" class="tabs-tab {{ $reviewTabs.rating.selected ? 'is-active' : '' }}">{{ phrase('rating') }}</a>
					<!--[XF:review_tabs:end]-->
				</span>
			</div>

			<div class="tabs-extra tabs-extra--minor">
				<a class="menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
				<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
					data-href="{{ link('ams/latest-reviews/filters', null, $filters) }}"
					data-load-target=".js-filterMenuBody">
					<div class="menu-content">
						<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
						<div class="js-filterMenuBody">
							<div class="menu-row">{{ phrase('loading...') }}</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<xf:if contentcheck="true">
			<div class="block-filterBar">
				<div class="filterBar">
					<ul class="filterBar-filters">
					<xf:contentcheck>
						<xf:if is="$filters.rating">
							<li><a href="{{ link('ams/latest-reviews', null, $filters|replace({'rating': null})) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('rating:') }}</span>
								{{ phrase('x_stars', {'rating': $filters.rating}) }}
							</a></li>
						</xf:if>
						
						<xf:if is="$filters.term">
							<li><a href="{{ link('ams/latest-reviews', null, $filters|replace('term', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('xa_ams_mentions:') }}</span>
								{$filters.term}</a></li>
						</xf:if>						

						<xf:if is="$filters.order AND {$sortOrders.{$filters.order}}">
							<xf:if is="
								!$reviewTabs.latest.selected
								AND !$reviewTabs.helpful.selected
								AND !$reviewTabs.rating.selected
							">
								<li><a href="{{ link('ams/latest-reviews', null, $filters|replace({'order': null, 'direction': null})) }}"
									class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('return_to_default_order')|for_attr }}">
									<span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
									{$sortOrders.{$filters.order}}
									<xf:fa icon="{{ $filters.direction == 'asc' ? 'fa-angle-up' : 'fa-angle-down' }}" />
									<span class="u-srOnly"><xf:if is="$filters.direction == 'asc'">{{ phrase('ascending') }}<xf:else />{{ phrase('descending') }}</xf:if></span>
								</a></li>
							</xf:if>
						</xf:if>
					</xf:contentcheck>
					</ul>
				</div>
			</div>
		</xf:if>
	
		<div class="block-body">
			<xf:if is="$reviews is not empty">
				<div class="structItemContainer">
					<xf:foreach loop="$reviews" value="$review">
						<xf:macro template="xa_ams_review_macros" name="review"
							arg-review="{$review}"
							arg-article="{$review.Article}"
							arg-showArticle="{{ true }}" />
					</xf:foreach>
				</div>
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('xa_ams_there_no_reviews_matching_your_filters') }}</div>				
			<xf:else />
				<div class="block-row">{{ phrase('xa_ams_no_reviews_have_been_left_recently') }}</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/latest-reviews" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_map_macros" version_id="2022770" version_string="2.2.27"><![CDATA[<xf:macro name="articles_map"
	arg-mapItems="!"
	arg-mapId="!"
	arg-containerHeight="{{ null }}">
	
	<xf:css src="xa_ims.less" />

	<script src="https://cdnjs.cloudflare.com/ajax/libs/OverlappingMarkerSpiderfier/1.0.3/oms.min.js"></script>			
	<xf:if is="$xf.options.xaAmsMarkerClustering">
		<script src="https://unpkg.com/@googlemaps/markerclustererplus/dist/index.min.js"></script>
	</xf:if>
	
	<div id="map-{$mapId}" style="height:{{ $containerHeight ?: 400 }}px; width:100%;"></div>

	<script type="text/javascript">
		function initMap(){
			var options = {
				zoom: 2,
				center: {lat:42.877742, lng:-97.380979}
			};

			var map = new google.maps.Map(document.getElementById('map-{$mapId}'), options);

			<xf:if is="!$xf.options.xaAmsShowPointsOfInterest">
				var noPoi = [
				{
					featureType: "poi",
					stylers: [
				  		{ visibility: "off" }
					]  
				}
				];

				map.setOptions({styles: noPoi});
			</xf:if>

			var data = [
				<xf:foreach loop="$mapItems" value="$mapItem" i="$i">
					<xf:if is="$mapItem.location_data && $mapItem.location_data.latitude && $mapItem.location_data.longitude">	
						{
							coords:{lat:{$mapItem.location_data.latitude},lng:{$mapItem.location_data.longitude}},
							<xf:if is="$mapItem.Featured">
								<xf:if is="$mapItem.Category.map_options.custom_featured_map_marker_url">	
									iconUrl:{url: "{{ base_url({$mapItem.Category.map_options.custom_featured_map_marker_url}) }}"},
								<xf:else />
									iconUrl:{url: "{{ base_url({$xf.options.xaAmsDefaultFeaturedMapMarkerIconUrl}) }}"},
								</xf:if>
								title: '{{ phrase('xa_ams_featured') }}',
							<xf:else />
								<xf:if is="$mapItem.Category.map_options.custom_map_marker_url">	
									iconUrl:{url: "{{ base_url({$mapItem.Category.map_options.custom_map_marker_url}) }}"},
								<xf:else />
									iconUrl:{url: "{{ base_url({$xf.options.xaAmsDefaultMapMarkerIconUrl}) }}"},
								</xf:if>
								title: '',
							</xf:if>	
							content:'<div class="amsMapInfoWindow">'+
								'<div class="amsArticle amsMapInfoWindowItem">'+
								<xf:if is="$mapItem.CoverImage && $mapItem.CoverImage.thumbnail_url">
									'<div class="listBlock articleCoverImage left">'+
									'<div class="listBlockInnerImage"><a href="{{ link('ams', $mapItem)|escape('js') }}"> <img src="{$mapItem.CoverImage.thumbnail_url}" style="max-width:100px;" class="thumbImage" /> </a></div>'+
									'</div>'+
								</xf:if>
								'<div class="title"><a href="{{ link('ams', $mapItem)|escape('js') }}" title="">{$mapItem.title|escape('js')}</a></div>'+
								'<div class="address ams-muted">{$mapItem.location_data.formatted_address}</div>'+
								<xf:if is="$mapItem.author_rating">
									<xf:if is="$mapItem.author_rating >= 5">
										'<div class="authorRating"><span style="color: #176093"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></span> <span class="ams-muted">{{ phrase('xa_ams_author_rating') }}</span></div>'+
									<xf:elseif is="$mapItem.author_rating >= 4.5" />
										'<div class="authorRating"><span style="color: #176093"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i></span> <span class="ams-muted">{{ phrase('xa_ams_author_rating') }}</span></div>'+
									<xf:elseif is="$mapItem.author_rating >= 4" />
										'<div class="authorRating"><span style="color: #176093"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i></span> <span class="ams-muted">{{ phrase('xa_ams_author_rating') }}</span></div>'+
									<xf:elseif is="$mapItem.author_rating >= 3.5" />
										'<div class="authorRating"><span style="color: #176093"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i><i class="far fa-star"></i></span> <span class="ams-muted">{{ phrase('xa_ams_author_rating') }}</span></div>'+
									<xf:elseif is="$mapItem.author_rating >= 3" />
										'<div class="authorRating"><span style="color: #176093"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i></span> <span class="ams-muted">{{ phrase('xa_ams_author_rating') }}</span></div>'+
									<xf:elseif is="$mapItem.author_rating >= 2.5" />
										'<div class="authorRating"><span style="color: #176093"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i><i class="far fa-star"></i><i class="far fa-star"></i></span> <span class="ams-muted">{{ phrase('xa_ams_author_rating') }}</span></div>'+
									<xf:elseif is="$mapItem.author_rating >= 2" />
										'<div class="authorRating"><span style="color: #176093"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i></span> <span class="ams-muted">{{ phrase('xa_ams_author_rating') }}</span></div>'+
									<xf:elseif is="$mapItem.author_rating >= 1.5" />
										'<div class="authorRating"><span style="color: #176093"><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i></span> <span class="ams-muted">{{ phrase('xa_ams_author_rating') }}</span></div>'+
									<xf:elseif is="$mapItem.author_rating >= 1" />
										'<div class="authorRating"><span style="color: #176093"><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i></span> <span class="ams-muted">{{ phrase('xa_ams_author_rating') }}</span></div>'+
									</xf:if>
								</xf:if>
								<xf:if is="$mapItem.rating_avg AND $mapItem.review_count">
									<xf:if is="$mapItem.rating_avg >= '5'">
										'<div class="userRating"><span style="color: #f9c479"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></span> <a href="{{ link('ams/reviews', $mapItem)|escape('js') }}">{$mapItem.rating_avg|number(2)} - {$mapItem.review_count|number} {{ phrase('xa_ams_reviews') }}</a> </div>'+
									<xf:elseif is="$mapItem.rating_avg >= 4.5" />
										'<div class="userRating"><span style="color: #f9c479"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i></span> <a href="{{ link('ams/reviews', $mapItem)|escape('js') }}">{$mapItem.rating_avg|number(2)} - {$mapItem.review_count|number} {{ phrase('xa_ams_reviews') }}</a> </div>'+
									<xf:elseif is="$mapItem.rating_avg >= 4" />
										'<div class="userRating"><span style="color: #f9c479"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i></span> <a href="{{ link('ams/reviews', $mapItem)|escape('js') }}">{$mapItem.rating_avg|number(2)} - {$mapItem.review_count|number} {{ phrase('xa_ams_reviews') }}</a> </div>'+
									<xf:elseif is="$mapItem.rating_avg >= 3.5" />
										'<div class="userRating"><span style="color: #f9c479"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i><i class="far fa-star"></i></span> <a href="{{ link('ams/reviews', $mapItem)|escape('js') }}">{$mapItem.rating_avg|number(2)} - {$mapItem.review_count|number} {{ phrase('xa_ams_reviews') }}</a> </div>'+
									<xf:elseif is="$mapItem.rating_avg >= 3" />
										'<div class="userRating"><span style="color: #f9c479"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i></span> <a href="{{ link('ams/reviews', $mapItem)|escape('js') }}">{$mapItem.rating_avg|number(2)} - {$mapItem.review_count|number} {{ phrase('xa_ams_reviews') }}</a> </div>'+
									<xf:elseif is="$mapItem.rating_avg >= 2.5" />
										'<div class="userRating"><span style="color: #f9c479"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i><i class="far fa-star"></i><i class="far fa-star"></i></span> <a href="{{ link('ams/reviews', $mapItem)|escape('js') }}">{$mapItem.rating_avg|number(2)} - {$mapItem.review_count|number} {{ phrase('xa_ams_reviews') }}</a> </div>'+
									<xf:elseif is="$mapItem.rating_avg >= 2" />
										'<div class="userRating"><span style="color: #f9c479"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i></span> <a href="{{ link('ams/reviews', $mapItem)|escape('js') }}">{$mapItem.rating_avg|number(2)} - {$mapItem.review_count|number} {{ phrase('xa_ams_reviews') }}</a> </div>'+
									<xf:elseif is="$mapItem.rating_avg >= 1.5" />
										'<div class="userRating"><span style="color: #f9c479"><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i></span> <a href="{{ link('ams/reviews', $mapItem)|escape('js') }}">{$mapItem.rating_avg|number(2)} - {$mapItem.review_count|number} {{ phrase('xa_ams_reviews') }}</a> </div>'+
									<xf:elseif is="$mapItem.rating_avg >= 1" />
										'<div class="userRating"><span style="color: #f9c479"><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i></span> <a href="{{ link('ams/reviews', $mapItem)|escape('js') }}">{$mapItem.rating_avg|number(2)} - {$mapItem.review_count|number} {{ phrase('xa_ams_reviews') }}</a> </div>'+
									</xf:if>
								</xf:if>

								'</div>'+	
								'</div>'	
						},
					</xf:if> 
				</xf:foreach>
			];

			var markers = [];

			// Initialize the spiderfier library
			var oms = new OverlappingMarkerSpiderfier(map, {markersWontMove: true, markersWontHide: true, keepSpiderfied: true});
		
			var bounds = new google.maps.LatLngBounds();

			var infoWindow = new google.maps.InfoWindow({
				maxWidth: 450
			});

			for(var i = 0;i < data.length;i++){
				addMarker(data[i]);
			}

			function addMarker(props){
				var marker = new google.maps.Marker({
					position: props.coords,
					map: map,
					icon: props.iconUrl,
					title: props.title,
				});

				// add the marker to the spiderfier _before_ adding it to the map
				oms.addMarker(marker);
				
				var loc = new google.maps.LatLng(props.coords);
				bounds.extend(loc);

				(function (marker, props) {
					google.maps.event.addListener(marker, "click", function (e) {
						map.panTo(marker.getPosition())
						infoWindow.setContent(props.content);
						infoWindow.open(map, marker);
					});
				})(marker, props);

				markers.push(marker);
			};

			<xf:if is="$xf.options.xaAmsMarkerClustering">
				new MarkerClusterer(map, markers, {
					imagePath:
					"{{ base_url('data/assets/xa_ams_map_markers/m') }}",
					// Prevent clustering in zoom levels
					// lower than 14 so spiderfier can work
                    maxZoom: 14,				
				});
			</xf:if>			

			if (bounds.getNorthEast().equals(bounds.getSouthWest())) {
				var extendPoint1 = new google.maps.LatLng(bounds.getNorthEast().lat() + 0.01, bounds.getNorthEast().lng() + 0.01);
				var extendPoint2 = new google.maps.LatLng(bounds.getNorthEast().lat() - 0.01, bounds.getNorthEast().lng() - 0.01);
				bounds.extend(extendPoint1);
				bounds.extend(extendPoint2);
			}

			map.fitBounds(bounds);       
			map.panToBounds(bounds); 
		}
	</script>

	<script async defer
		src="https://maps.googleapis.com/maps/api/js?key={$xf.options.xaAmsGoogleMapsJavaScriptApiKey}&callback=initMap{{ $xf.options.xaAmsLocalizeGoogleMaps ? '&language=' . {$xf.language.language_code|substr} : '' }}&libraries=">
	</script>
	
</xf:macro>]]></template>
  <template type="public" title="xa_ams_map_marker_legend" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:title>{$category.title} - {{ phrase('xa_ams_map_marker_legend') }}</xf:title>

<xf:css src="xa_ams_map_marker_legend.less" />

<xf:breadcrumb source="$category.getBreadcrumbs({{ true }})" />

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:datalist data-xf-init="responsive-data-list">
				<xf:datarow rowtype="header">
					<xf:cell class="dataList-cell--min">{{ phrase('xa_ams_marker') }}</xf:cell>
					<xf:cell>{{ phrase('title') }}</xf:cell>
					<xf:cell class="categoryTitle">{{ phrase('category') }}</xf:cell>
				</xf:datarow>

				<xf:datarow rowclass="dataList-row--noHover">
					<xf:cell class="dataList-cell--min dataList-cell--alt">
						<xf:if is="$category.map_options.custom_featured_map_marker_url">	
							<img src="{{ base_url({$category.map_options.custom_featured_map_marker_url}) }}" />
						<xf:else />
							<img src="{{ base_url({$xf.options.xaAmsDefaultFeaturedMapMarkerIconUrl}) }}" />
						</xf:if>
					</xf:cell>

					<xf:main label="{{ phrase('xa_ams_featured') }} {{ $category.content_term ?: $category.title }}" />

					<xf:cell class="categoryTitle">
						<span>
							<span class="categoryTitleText">{$category.title}</span>
						</span>
					</xf:cell>
				</xf:datarow>

				<xf:datarow rowclass="dataList-row--noHover">
					<xf:cell class="dataList-cell--min dataList-cell--alt">
						<xf:if is="$category.map_options.custom_map_marker_url">	
							<img src="{{ base_url({$category.map_options.custom_map_marker_url}) }}" />
						<xf:else />
							<img src="{{ base_url({$xf.options.xaAmsDefaultMapMarkerIconUrl}) }}" />
						</xf:if>
					</xf:cell>

					<xf:main label="{{ $category.content_term ?: $category.title }}" />

					<xf:cell class="categoryTitle">
						<span>
							<span class="categoryTitleText">{$category.title}</span>
						</span>
					</xf:cell>
				</xf:datarow>

				<xf:foreach loop="$descendants" value="$descendant_category">
					<xf:datarow rowclass="dataList-row--noHover">
						<xf:cell class="dataList-cell--min dataList-cell--alt">
							<xf:if is="$descendant_category.map_options.custom_featured_map_marker_url">	
								<img src="{{ base_url({$descendant_category.map_options.custom_featured_map_marker_url}) }}" />
							<xf:else />
								<img src="{{ base_url({$xf.options.xaAmsDefaultFeaturedMapMarkerIconUrl}) }}" />
							</xf:if>
						</xf:cell>

						<xf:main label="{{ phrase('xa_ams_featured') }} {{ $descendant_category.content_term ?: $descendant_category.title }}" />

						<xf:cell class="categoryTitle">
							<span>
								<span class="categoryTitleText">{$descendant_category.title}</span>
							</span>
						</xf:cell>
					</xf:datarow>

					<xf:datarow rowclass="dataList-row--noHover">
						<xf:cell class="dataList-cell--min dataList-cell--alt">
							<xf:if is="$descendant_category.map_options.custom_map_marker_url">	
								<img src="{{ base_url({$descendant_category.map_options.custom_map_marker_url}) }}" />
							<xf:else />
								<img src="{{ base_url({$xf.options.xaAmsDefaultMapMarkerIconUrl}) }}" />
							</xf:if>
						</xf:cell>

						<xf:main label="{{ $descendant_category.content_term ?: $descendant_category.title }}" />

						<xf:cell class="categoryTitle">
							<span>
								<span class="categoryTitleText">{$descendant_category.title}</span>
							</span>
						</xf:cell>
					</xf:datarow>
				</xf:foreach>
			</xf:datalist>
		</div>	
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_map_marker_legend.less" version_id="2022470" version_string="2.2.24"><![CDATA[.categoryTitleText
{
	font-size: @xf-fontSizeNormal;
}

@media (max-width: @xf-responsiveNarrow)
{
	.categoryTitle
	{
		display: none !important;
	}
}]]></template>
  <template type="public" title="xa_ams_map_view_filters" version_id="2022570" version_string="2.2.25"><![CDATA[<xf:form action="{{ link('ams/categories/map-filters', $category) }}">

	<!--[XF:above_misc_check_box]-->
	<div class="menu-row menu-row--separated">
		<xf:checkbox>
			<xf:option name="featured" selected="{$filters.featured}">{{ phrase('xa_ams_featured_articles') }}</xf:option>
			<xf:option name="has_comments" selected="{$filters.has_comments}">{{ phrase('xa_ams_articles_with_comments') }}</xf:option>
			<xf:option name="is_rated" selected="{$filters.is_rated}">{{ phrase('xa_ams_articles_that_have_been_rated') }}</xf:option>
			<xf:option name="has_reviews" selected="{$filters.has_reviews}">{{ phrase('xa_ams_articles_with_reviews') }}</xf:option>
		</xf:checkbox>
	</div>

	<!--[XF:above_title]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('title:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="title" value="{$filters.title}" />
		</div>
	</div>
	
	<!--[XF:above_articles_that_mention]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('xa_ams_articles_that_mention:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="term" value="{$filters.term}" />
		</div>
	</div>	
	
	<!--[XF:above_location]-->
	<xf:if is="$showLocationFilter">	
		<div class="menu-row menu-row--separated">
			{{ phrase('xa_ams_location_city_state_country:') }}
			<div class="u-inputSpacer">
				<xf:textbox name="location" value="{$filters.location}" />
			</div>
		</div>	
	</xf:if>	
					
	<!--[XF:above_rating]-->
	<xf:if is="$showRatingFilter">
		<div class="menu-row menu-row--separated">
			{{ phrase('xa_ams_avg_rating:') }}
			<div class="u-inputSpacer">
				<xf:select name="rating_avg" value="{$filters.rating_avg}">
					<xf:option value="">{{ phrase('any') }}</xf:option>
					<xf:option value="5">{{ phrase('xa_ams_5_stars') }}</xf:option>
					<xf:option value="4">{{ phrase('xa_ams_4_stars_up') }}</xf:option>
					<xf:option value="3">{{ phrase('xa_ams_3_stars_up') }}</xf:option>
					<xf:option value="2">{{ phrase('xa_ams_2_stars_up') }}</xf:option>
				</xf:select>
			</div>
		</div>
	</xf:if>

	<!--[XF:above_prefixes]-->
	<xf:if is="$prefixesGrouped is not empty">
		<div class="menu-row menu-row--separated">
			{{ phrase('prefix:') }}
			<div class="u-inputSpacer">
				<xf:macro template="prefix_macros" name="select"
					arg-prefixes="{$prefixesGrouped}"
					arg-type="ams_article"
					arg-selected="{{ $filters.prefix_id ?: 0 }}"
					arg-name="prefix_id"
					arg-noneLabel="{{ phrase('(any)') }}"
				/>
			</div>
		</div>
	</xf:if>

	<!--[XF:above_created_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('created_by:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="creator" value="{{ $creatorFilter ? $creatorFilter.username : '' }}" ac="single" />
		</div>
	</div>

	<!--[XF:above_last_updated]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('last_updated:') }}
		<div class="u-inputSpacer">
			<xf:select name="last_days" value="{{ $filters.last_days ?: $forum.list_date_limit_days }}">
				<xf:option value="-1">{{ phrase('any_time') }}</xf:option>
				<xf:option value="7">{{ phrase('x_days', {'days': '7'}) }}</xf:option>
				<xf:option value="14">{{ phrase('x_days', {'days': '14'}) }}</xf:option>
				<xf:option value="30">{{ phrase('x_days', {'days': '30'}) }}</xf:option>
				<xf:option value="60">{{ phrase('x_months', {'months': '2'}) }}</xf:option>
				<xf:option value="90">{{ phrase('x_months', {'months': '3'}) }}</xf:option>
				<xf:option value="182">{{ phrase('x_months', {'months': '6'}) }}</xf:option>
				<xf:option value="365">{{ phrase('1_year') }}</xf:option>
			</xf:select>
		</div>
	</div>
	
	<!--[XF:above_state]-->
	<xf:if is="{{ $xf.visitor.hasPermission('xa_ams', 'viewModerated') || $xf.visitor.hasPermission('xa_ams', 'viewDeleted') }}">
		<div class="menu-row menu-row--separated">
			{{ phrase('xa_ams_content_state:') }}
			<div class="u-inputSpacer">
				<xf:select name="state" value="{$filters.state}">
					<xf:option value="">{{ phrase('any') }}</xf:option>
					<xf:option value="visible">{{ phrase('visible') }}</xf:option>
					<xf:if is="{{ $xf.visitor.hasPermission('xa_ams', 'viewModerated') }}">
						<xf:option value="moderated">{{ phrase('moderated') }}</xf:option>
					</xf:if>
					<xf:if is="{{ $xf.visitor.hasPermission('xa_ams', 'viewDeleted') }}">
						<xf:option value="deleted">{{ phrase('deleted') }}</xf:option>
					</xf:if>
				</xf:select>
			</div>
		</div>
	</xf:if>	

	<!--[XF:above_sort_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('sort_by:') }}
		<div class="inputGroup u-inputSpacer">
			<xf:select name="order" value="{{ $filters.order ?: $xf.options.xaAmsListDefaultOrder }}">
				<xf:option value="publish_date">{{ phrase('xa_ams_publish_date') }}</xf:option>
				<xf:option value="last_update">{{ phrase('xa_ams_last_update') }}</xf:option>
				<xf:option value="rating_weighted">{{ phrase('rating') }}</xf:option>
				<xf:option value="reaction_score">{{ phrase('reaction_score') }}</xf:option>
				<xf:option value="view_count">{{ phrase('views') }}</xf:option>
			</xf:select>
			<span class="inputGroup-splitter"></span>
			<xf:select name="direction" value="{{ $filters.direction ?: 'desc' }}">
				<xf:option value="desc">{{ phrase('descending') }}</xf:option>
				<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<div class="menu-footer">
		<span class="menu-footer-controls">
			<xf:button type="submit" class="button--primary">{{ phrase('filter') }}</xf:button>
		</span>
	</div>
	<xf:hiddenval name="apply">1</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="xa_ams_page_delete" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:title>{{ phrase('xa_ams_delete_page') }}</xf:title>

<xf:breadcrumb source="$page.getBreadcrumbs()" />

<xf:form action="{{ link('ams/page/delete', $page) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$page.canDelete('hard')}" />

			<xf:if is="$page.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
			
			<xf:if is="{$from_page_management}">
				<xf:hiddenval name="mp">{{ true }}</xf:hiddenval>
			</xf:if>
		</div>
		<xf:submitrow icon="delete" sticky="true" />
	</div>
	<xf:redirect />
</xf:form>]]></template>
  <template type="public" title="xa_ams_page_edit" version_id="2022870" version_string="2.2.28"><![CDATA[<xf:title>{{ phrase('xa_ams_edit_page') }}</xf:title>

<xf:breadcrumb source="$page.getBreadcrumbs()" />
<xf:breadcrumb href="{{ link('ams/pages', $article) }}">{{ phrase('xa_ams_manage_pages') }}</xf:breadcrumb>

<xf:form action="{{ link('ams/page/edit', $page) }}" ajax="true" class="block"
	data-preview-url="{{ link('ams/page/preview', $page) }}">

	<div class="block-container">
		<div class="block-body">
			<xf:macro template="xa_ams_page_edit_macros" name="title" arg-page="{$page}" />

			<xf:macro template="xa_ams_page_edit_macros" name="message"
				arg-page="{$page}"					  
				arg-message="{$page.message_}"
				arg-attachmentData="{$attachmentData}" />

			<hr class="formRowSep" />

			<xf:macro template="xa_ams_page_edit_macros" name="description" arg-page="{$page}" />

			<hr class="formRowSep" />

			<xf:numberboxrow name="display_order" value="{$page.display_order}" min="1" pattern="\d*"
				label="{{ phrase('display_order') }}" />

			<xf:numberboxrow name="depth" value="{$page.depth}" min="0" pattern="\d*"
				label="{{ phrase('xa_ams_depth') }}" 
				explain="{{ phrase('xa_ams_page_depth_explain') }}" />

			<hr class="formRowSep" />

			<xf:formrow label="{{ phrase('options') }}" >
				<xf:if is="$category.canUploadAndManagePageAttachments()">
					<xf:checkbox>
						<xf:option name="cover_image_above_page" data-hide="true" 
							label="{{ phrase('xa_ams_display_cover_image_above_article_page') }}"
							hint="{{ phrase('xa_ams_display_cover_image_above_article_page_explain') }}"
							checked="{{ $page.cover_image_above_page }}">
							
							<xf:dependent>
								<xf:textarearow name="cover_image_caption" value="{$page.cover_image_caption_}"
									maxlength="{{ max_length($page, 'cover_image_caption') }}"
									label="{{ phrase('xa_ams_cover_image_caption') }}"
									rowtype="fullWidth"
									hint="{{ phrase('optional') }}"
									explain="{{ phrase('xa_ams_cover_image_caption_above_article_page_explain') }}" />
							</xf:dependent>							
						</xf:option>
					</xf:checkbox>
				</xf:if>
				<xf:checkbox>
					<xf:option name="display_byline" 
						label="{{ phrase('xa_ams_display_page_byline') }}"
						hint="{{ phrase('xa_ams_display_page_byline_explain') }}"
						checked="{{ $page.display_byline }}">
					</xf:option>
				</xf:checkbox>
			</xf:formrow>

			<hr class="formRowSep" />

			<xf:if is="{$page.page_state} == 'deleted'">
				<xf:radiorow name="page_state" value="{$page.page_state}" label="{{ phrase('status') }}">
					<xf:option value="deleted">{{ phrase('deleted') }}</xf:option>
				</xf:radiorow>
			<xf:else />
				<xf:radiorow name="page_state" value="{$page.page_state}" label="{{ phrase('status') }}">
					<xf:option value="visible">{{ phrase('visible') }}</xf:option>
					<xf:option value="draft">{{ phrase('xa_ams_draft') }}</xf:option>
				</xf:radiorow>
			</xf:if>

			<xf:if is="{$from_page_management}">
				<xf:hiddenval name="mp">{{ true }}</xf:hiddenval>
			</xf:if>	
		</div>
		
		<xf:if is="$page.canManageSeoOptions()">		
			<h3 class="block-formSectionHeader">
				<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up:next">
					<span class="block-formSectionHeader-aligner">{{ phrase('xa_ams_search_engine_optimization_options') }}</span>
				</span>
			</h3>
			<div class="block-body block-body--collapsible">
				<xf:macro template="xa_ams_page_edit_macros" name="og_title_meta_title" arg-page="{$page}" />			
				<xf:macro template="xa_ams_page_edit_macros" name="meta_description" arg-page="{$page}" />
			</div>
		</xf:if>
		
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_page_edit_macros" version_id="2022570" version_string="2.2.25"><![CDATA[<xf:macro name="title" arg-page="!">
	<xf:textboxrow name="title" value="{$page.title}" rowtype="fullWidth noLabel" 
		maxlength="{{ max_length($page, 'title') }}"
		placeholder="{{ phrase('title...') }}"	
		label="{{ phrase('title') }}" />
</xf:macro>

<xf:macro name="message" arg-page="!" arg-message="" arg-attachmentData="{{ [] }}" arg-showAttachmentRequired="{{ false }}">
	<div data-xf-init="attachment-manager">
		<xf:editorrow name="message" value="{$page.message_}" data-min-height="250"
			attachments="{$attachmentData.attachments}"
			rowtype="fullWidth noLabel"
			label="{{ phrase('xa_ams_page') }}" />
		
		<xf:if is="$attachmentData">
			<xf:formrow>				
				<xf:macro template="helper_attach_upload" name="upload_block" arg-attachmentData="{$attachmentData}" />
			</xf:formrow>
		</xf:if>
	</div>
</xf:macro>

<xf:macro name="description" arg-page="!">
	<xf:textarearow name="description" value="{$page.description_}"
		maxlength="{{ max_length($page, 'description') }}"
		label="{{ phrase('description') }}"
		hint="{{ phrase('optional') }}"
		explain="{{ phrase('xa_ams_provide_very_brief_description_of_your_article_page') }}" />
</xf:macro>

<xf:macro name="og_title_meta_title" arg-page="!">
	<xf:textboxrow name="og_title" value="{$page.og_title}"
		maxlength="{{ max_length($page, 'og_title') }}"
		label="{{ phrase('xa_ams_og_title') }}"
		hint="{{ phrase('optional') }}"
		explain="{{ phrase('xa_ams_og_title_explain') }}" />

	<xf:textboxrow name="meta_title" value="{$page.meta_title}"
		maxlength="{{ max_length($page, 'meta_title') }}"
		label="{{ phrase('xa_ams_meta_title') }}"
		hint="{{ phrase('optional') }}"
		explain="{{ phrase('xa_ams_meta_title_explain') }}" />
</xf:macro>

<xf:macro name="meta_description" arg-page="!">
	<xf:textarearow name="meta_description" value="{$page.meta_description_}"
		maxlength="{{ max_length($page, 'meta_description') }}"
		label="{{ phrase('xa_ams_meta_description') }}"
		hint="{{ phrase('optional') }}"
		explain="{{ phrase('xa_ams_provide_brief_summary_of_your_article_page_for_search_engines') }}" />
</xf:macro>]]></template>
  <template type="public" title="xa_ams_page_reassign" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:title>{{ phrase('xa_ams_reassign_page') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/page/reassign', $page) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="username" ac="single" maxlength="{{ max_length($xf.visitor, 'username') }}"
				label="{{ phrase('xa_ams_new_owner') }}" />

			<xf:checkboxrow>
				<xf:option name="alert" selected="{{ true }}"
					label="{{ phrase('xa_ams_notify_current_and_new_owners_of_this_action') }} {{ phrase('reason:') }}">

					<xf:textbox name="alert_reason" placeholder="{{ phrase('optional') }}" maxlength="250" />
				</xf:option>
			</xf:checkboxrow>
			
			<xf:if is="{$from_page_management}">
				<xf:hiddenval name="mp">{{ true }}</xf:hiddenval>
			</xf:if>			
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_rating_delete" version_id="2010370" version_string="2.1.3"><![CDATA[<xf:title>{{ phrase('xa_ams_delete_rating') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs({{ true }})" />

<xf:form action="{{ link('ams/review/delete-rating', $rating) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('xa_ams_you_sure_you_want_to_delete_this_rating') }}
				<strong>{{ phrase('selecting_this_option_will_permanently_and_irreversibly_delete_item') }}</strong>
			</xf:inforow>

			<xf:if is="$rating.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="delete" sticky="true" />
	</div>
	<xf:redirect />
</xf:form>]]></template>
  <template type="public" title="xa_ams_review.less" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[.ams-review .ams-review-fields
{
	&.ams-review-fields--top
	{
		padding-top: @xf-paddingMedium;
		padding-bottom: @xf-paddingMedium;
	}

	&.ams-review-fields--middle
	{
		margin-bottom: @xf-paddingLarge;
		padding-bottom: @xf-paddingMedium;
	}

	&.ams-review-fields--bottom
	{
		margin-top: @xf-paddingLarge;
		padding-top: @xf-paddingMedium;
	}
}

.ams-review .message-body.ams-pros-container,
.ams-review .message-body.ams-cons-container
{
	margin-bottom: 10px;
}

.ams-review .ams-pros-container
{
    color: green;
}

.ams-review .ams-cons-container
{
    color: #B40000;	
}

.ams-review .pros-header,
.ams-review .cons-header
{
	font-weight: bold;
}

{{ include('message.less') }}]]></template>
  <template type="public" title="xa_ams_review_change_date" version_id="2010570" version_string="2.1.5"><![CDATA[<xf:title>{{ phrase('xa_ams_change_review_date') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/review/change-date', $review) }}" ajax="true" class="block">

	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('xa_ams_review_date') }}">
				<div class="inputGroup">
					<xf:dateinput name="review_date" value="{{ $reviewDate ? date($reviewDate, 'picker') : '' }}" />
					<span class="inputGroup-text">
						{{ phrase('criteria_time:') }}
					</span>
					<span class="inputGroup" dir="ltr">
						<xf:select name="review_hour" value="{$reviewHour}" class="input--inline input--autoSize">
							<xf:foreach loop="$hours" value="$hour">
								<xf:option value="{$hour}" label="{$hour}" />
							</xf:foreach>
						</xf:select>
						<span class="inputGroup-text">:</span>
						<xf:select name="review_minute" value="{$reviewMinute}" class="input--inline input--autoSize">
							<xf:foreach loop="$minutes" value="$minute">
								<xf:option value="{$minute}" label="{$minute}" />
							</xf:foreach>
						</xf:select>
					</span>
				</div>
			</xf:formrow>

			<xf:selectrow name="review_timezone" value="{$xf.visitor.timezone}">
				<xf:options source="$timeZones" />
			</xf:selectrow>
		</div>

		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_review_delete" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_delete_review') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/review/delete', $review) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$review.canDelete('hard')}" />

			<xf:if is="$review.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="delete" sticky="true" />
	</div>
	<xf:redirect />
</xf:form>]]></template>
  <template type="public" title="xa_ams_review_edit" version_id="2021070" version_string="2.2.10"><![CDATA[<xf:title>{{ phrase('xa_ams_edit_review') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/review/edit', $review) }}" class="block" ajax="true"
	data-xf-init="attachment-manager">
	
	<div class="block-container">
		<div class="block-body">
			<span class="u-anchorTarget js-editContainer"></span>
			
			<xf:macro template="rating_macros" name="rating" 
				arg-currentRating="{$review.rating}" 
				arg-rowType="{{ $quickEdit ? 'fullWidth noLabel' : '' }}" />

			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
						arg-type="ams_reviews"
						arg-set="{$review.custom_fields}"
						arg-group="top"
						arg-editMode="{{ $review.getFieldEditMode() }}"
						arg-onlyInclude="{$category.review_field_cache}" 
						arg-rowType="{{ $quickEdit ? 'fullWidth' : '' }}" />
				</xf:contentcheck>
			</xf:if>
			
			<xf:if is="$category.allow_pros_cons">
				<xf:textarearow name="pros" value="{$review.pros}" rows="2" autosize="true"
					rowtype="input {{ $quickEdit ? 'fullWidth' : '' }}"
					data-xf-init="min-length"
					data-min-length="{$xf.options.xa_amsMinProsLength}"
					data-allow-empty="true"
					data-toggle-target="#js-articleProsLength"
					maxlength="{$xf.options.xa_amsMaxProsLength}"
					label="{{ phrase('xa_ams_pros') }}">
				</xf:textarearow>

				<xf:textarearow name="cons" value="{$review.cons}" rows="2" autosize="true"
					rowtype="input {{ $quickEdit ? 'fullWidth' : '' }}"
					data-xf-init="min-length"
					data-min-length="{$xf.options.xaAmsMinConsLength}"
					data-allow-empty="true"
					data-toggle-target="#js-articleConsLength"
					maxlength="{$xf.options.xaAmsMaxConsLength}"
					label="{{ phrase('xa_ams_cons') }}">
				</xf:textarearow>
			</xf:if>
			
			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
						arg-type="ams_reviews"
						arg-set="{$review.custom_fields}"
						arg-group="middle"
						arg-editMode="{{ $review.getFieldEditMode() }}"
						arg-onlyInclude="{$category.review_field_cache}" 
						arg-rowType="{{ $quickEdit ? 'fullWidth' : '' }}" />
				</xf:contentcheck>
			</xf:if>

			<xf:editorrow name="message" value="{$review.message}" data-min-height="100"
				rowtype="{{ $quickEdit ? 'fullWidth' : '' }}"
				attachments="{$attachmentData.attachments}"
				label="{{ phrase('review') }}"
				hint="{{ $category.require_review ? phrase('required') : '' }}"
				explain="{{ phrase('xa_ams_explain_why_youre_giving_this_rating') }}" 
				data-preview-url="{{ link('ams/review/preview', $review) }}" />

			<xf:formrow rowtype="{{ $quickEdit ? 'fullWidth noLabel' : '' }}">
				<xf:if is="$attachmentData">
					<xf:macro template="helper_attach_upload" name="upload_block" arg-attachmentData="{$attachmentData}" />
				</xf:if>
			</xf:formrow>

			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
						arg-type="ams_reviews"
						arg-set="{$review.custom_fields}"
						arg-group="bottom"
						arg-editMode="{{ $review.getFieldEditMode() }}"
						arg-onlyInclude="{$category.review_field_cache}" 
						arg-rowType="{{ $quickEdit ? 'fullWidth' : '' }}" />
				</xf:contentcheck>
			</xf:if>

			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
						arg-type="ams_reviews"
						arg-set="{$review.custom_fields}"
						arg-group="self_place"
						arg-editMode="{{ $review.getFieldEditMode() }}"
						arg-onlyInclude="{$category.review_field_cache}" 
						arg-rowType="{{ $quickEdit ? 'fullWidth' : '' }}" />
				</xf:contentcheck>
			</xf:if>

			<xf:formrow rowtype="{{ $quickEdit ? 'fullWidth noLabel' : '' }}">
				<xf:macro template="helper_action" name="edit_type" arg-canEditSilently="{$review.canEditSilently()}" />
			</xf:formrow>

			<xf:if is="$review.canSendModeratorActionAlert()">
				<xf:formrow rowtype="{{ $quickEdit ? 'fullWidth noLabel' : '' }}">
					<xf:macro template="helper_action" name="author_alert" arg-row="{{ false }}" />
				</xf:formrow>
			</xf:if>
		</div>

		<xf:submitrow icon="save" sticky="true" rowtype="{{ $quickEdit ? 'simple' : '' }}">
			<xf:html>
				<xf:if is="$quickEdit">
					<xf:button class="js-cancelButton" icon="cancel">{{ phrase('cancel') }}</xf:button>
				</xf:if>
			</xf:html>
		</xf:submitrow>	
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_review_edit_new_review" version_id="2020270" version_string="2.2.2"><![CDATA[<xf:macro template="xa_ams_review_macros" name="review"
	arg-review="{$review}"
	arg-article="{$article}" />]]></template>
  <template type="public" title="xa_ams_review_list_filters" version_id="2022570" version_string="2.2.25"><![CDATA[<xf:form action="{$actionLink}">
	<xf:extension name="start"></xf:extension>

	<!--[XF:above_rating]-->
	<div class="menu-row menu-row--separated">
		<label for="ctrl_rating">{{ phrase('rating:') }}</label>
		<div class="u-inputSpacer">
			<xf:select name="rating" value="{$filters.rating}" id="ctrl_rating">
				<xf:option value="-1">{{ phrase('any') }}</xf:option>
				<xf:foreach loop="{{ range(5, 1) }}" value="$rating">
					<xf:option value="{{ $rating }}">{{ phrase('x_stars', {'rating': $rating}) }}</xf:option>
				</xf:foreach>
			</xf:select>
		</div>
	</div>
	
	<!--[XF:above_reviews_that_mention]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('xa_ams_reviews_that_mention:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="term" value="{$filters.term}" />
		</div>
	</div>		

	<xf:extension name="before_sort"></xf:extension>

	<!--[XF:above_sort_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('sort_by:') }}
		<div class="inputGroup u-inputSpacer">
			<span class="u-srOnly" id="ctrl_sort_by">{{ phrase('sort_order') }}</span>
			<xf:select name="order" value="{{ $filters.order ?: 'rating_date' }}">
				<xf:option value="rating_date">{{ phrase('date') }}</xf:option>
				<xf:option value="vote_score">{{ phrase('xa_ams_most_helpful') }}</xf:option>
				<xf:option value="rating">{{ phrase('rating') }}</xf:option>
			</xf:select>
			<span class="inputGroup-splitter"></span>
			<span class="u-srOnly" id="ctrl_sort_direction">{{ phrase('sort_direction') }}</span>
			<xf:select name="direction" value="{{ $filters.direction ?: 'desc' }}">
				<xf:option value="desc">{{ phrase('descending') }}</xf:option>
				<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<xf:extension name="end"></xf:extension>

	<div class="menu-footer">
		<span class="menu-footer-controls">
			<xf:button type="submit" class="button--primary">{{ phrase('filter') }}</xf:button>
		</span>
	</div>
	<xf:hiddenval name="apply">1</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="xa_ams_review_macros" version_id="2022670" version_string="2.2.26"><![CDATA[<xf:macro name="review"	
	arg-review="!" 
	arg-article="!" 
	arg-showArticle="{{ false }}" 
	arg-showAttachments="{{ true }}">

	<xf:css src="xa_ams_review.less" />
	<xf:js src="xf/comment.js" min="1" />

	<div class="ams-review message message--simple{{ $review.isIgnored() ? ' is-ignored' : '' }} js-review js-inlineModContainer"
		data-author="{{ $review.is_anonymous ? phrase('anonymous') : $review.User.username ?: $review.username }}"
		data-content="review-{$review.rating_id}"
		id="js-review-{$review.rating_id}">

		<span class="u-anchorTarget" id="review-{$review.rating_id}"></span>
		<div class="message-inner">
			<span class="message-cell message-cell--user">
				<xf:if is="$review.is_anonymous">
					<xf:macro template="message_macros" name="user_info_simple"
						arg-user="{{ null }}"
						arg-fallbackName="" />
				<xf:else />
					<xf:macro template="message_macros" name="user_info_simple"
						arg-user="{$review.User}"
						arg-fallbackName="{{ phrase('deleted_member') }}" />
				</xf:if>
			</span>
			<div class="message-cell message-cell--main">
				<div class="js-quickEditTarget">
					<div class="message-content js-messageContent">
						<div class="message-attribution message-attribution--plain">
							<xf:if is="$showArticle">
								<div class="message-attribution-source">
									{{ phrase('xa_ams_for_article_x_in_category_y', {
										'article': '<a href="' . link('ams', $article) . '">' . prefix('ams_article', $article) . $article.title . '</a>',
										'category': '<a href="' . link('ams/categories', $article.Category) . '">' . $article.Category.title . '</a>'
									}) }}
								</div>
							</xf:if>

							<ul class="listInline listInline--bullet">
								<li class="message-attribution-user">
									<xf:if is="$review.is_anonymous">
										<xf:username user="{{ null }}" defaultname="{{ phrase('anonymous') }}" />
										<xf:if is="$review.canViewAnonymousAuthor()">
											(<xf:username user="{$review.User}" defaultname="{{ phrase('deleted_member') }}" />)
										</xf:if>
									<xf:else />
										<xf:username user="{$review.User}" defaultname="{{ phrase('deleted_member') }}" />
									</xf:if>
								</li>
								<li>
									<xf:macro template="rating_macros" name="stars"
										arg-rating="{$review.rating}"
										arg-class="ratingStars--smaller" />
								</li>
								<li><a href="{{ link('ams/review', $review) }}" class="u-concealed"><xf:date time="$review.rating_date" /></a></li>
							</ul>
						</div>

						<xf:if is="$review.rating_state == 'deleted'">
							<div class="messageNotice messageNotice--deleted">
								<xf:macro template="deletion_macros" name="notice" 
									arg-log="{$review.DeletionLog}" />
							</div>
						<xf:elseif is="$review.rating_state == 'moderated'" />
							<div class="messageNotice messageNotice--moderated">
								{{ phrase('this_message_is_awaiting_moderator_approval_and_is_invisible_to_normal') }}
							</div>
						</xf:if>
						<xf:if is="$review.warning_message">
							<div class="messageNotice messageNotice--warning">
								{$review.warning_message}
							</div>
						</xf:if>
						<xf:if is="$review.isIgnored()">
							<div class="messageNotice messageNotice--ignored">
								{{ phrase('you_are_ignoring_content_by_this_member') }}
							</div>
						</xf:if>

						<div class="message-userContent lbContainer js-lbContainer"
							data-lb-id="review-{$review.rating_id}"
							data-lb-caption-desc="{{ $review.is_anonymous ? phrase('anonymous') : $review.User.username ?: $review.username }} &middot; {{ date_time($review.rating_date) }}">

							<xf:macro template="custom_fields_macros" name="custom_fields_view"
								arg-type="ams_reviews"
								arg-group="top"
								arg-onlyInclude="{$category.review_field_cache}"
								arg-set="{$review.custom_fields}"
								arg-wrapperClass="ams-review-fields ams-review-fields--top" />

							<xf:if is="$review.pros">
								<div class="message-body ams-pros-container">
									<span class="pros-header">{{ phrase('xa_ams_pros') }}</span>: <span class="pros-text">{{ structured_text($review.pros) }}</span>
								</div>
							</xf:if>

							<xf:if is="$review.cons">
								<div class="message-body ams-cons-container">
									<span class="cons-header">{{ phrase('xa_ams_cons') }}</span>: <span class="cons-text">{{ structured_text($review.cons) }}</span>
								</div>
							</xf:if>

							<xf:macro template="custom_fields_macros" name="custom_fields_view"
								arg-type="ams_reviews"
								arg-group="middle"
								arg-onlyInclude="{$category.review_field_cache}"
								arg-set="{$review.custom_fields}"
								arg-wrapperClass="ams-review-fields ams-review-fields--middle" />

							<article class="message-body">
								{{ bb_code($review.message, 'ams_rating', $review) }}
							</article>

							<xf:macro template="custom_fields_macros" name="custom_fields_view"
								arg-type="ams_reviews"
								arg-group="bottom"
								arg-onlyInclude="{$category.review_field_cache}"
								arg-set="{$review.custom_fields}"
								arg-wrapperClass="ams-review-fields ams-review-fields--bottom" />

							<xf:if is="$review.attach_count && $showAttachments">
								<xf:macro template="message_macros" name="attachments"
									arg-attachments="{$review.Attachments}"
									arg-message="{$review}"
									arg-canView="{{ $review.canViewAttachments() }}" />
							</xf:if>
						</div>

						<xf:if is="$review.last_edit_date">
							<div class="message-lastEdit">
								<xf:if is="$review.user_id == $review.last_edit_user_id">
									{{ phrase('last_edited:') }} <xf:date time="{$review.last_edit_date}" />
								<xf:else />
									{{ phrase('last_edited_by_moderator:') }} <xf:date time="{$review.last_edit_date}" />
								</xf:if>
							</div>
						</xf:if>
					</div>

					<xf:if contentcheck="true">
						<div class="message-actionBar actionBar">
							<xf:contentcheck>
								<xf:if contentcheck="true">
									<div class="actionBar-set actionBar-set--external">
									<xf:contentcheck>
										<xf:react content="{$review}" link="ams/review/react" list="< .js-review | .js-reactionsList" />
										<xf:if is="$review.canReply()">
											<a class="actionBar-action actionBar-action--reply js-replyTrigger-{$review.rating_id}"
												data-xf-click="toggle"
												data-target=".js-commentsTarget-{$review.rating_id}"
												role="button"
												tabindex="0">
												{{ phrase('reply') }}
											</a>
										</xf:if>
									</xf:contentcheck>
									</div>
								</xf:if>

								<xf:if contentcheck="true">
									<div class="actionBar-set actionBar-set--internal">
									<xf:contentcheck>
										<xf:if is="$review.canUseInlineModeration()">
											<span class="actionBar-action actionBar-action--inlineMod">
												<xf:checkbox standalone="true">
													<xf:option value="{$review.rating_id}"
														class="js-inlineModToggle"
														data-xf-init="tooltip"
														title="{{ phrase('select_for_moderation') }}"
														label="{{ phrase('select_for_moderation') }}"
														hiddenlabel="true" />
												</xf:checkbox>
											</span>
										</xf:if>
										<xf:if is="$review.canReport()">
											<a href="{{ link('ams/review/report', $review) }}" 
												class="actionBar-action actionBar-action--report" 
												data-xf-click="overlay">{{ phrase('report_verb') }}</a>
										</xf:if>

										<xf:set var="$hasActionBarMenu" value="{{ false }}" />
										<xf:if is="$review.canEdit()">
											<xf:js src="xf/message.js" min="1" />
											<a href="{{ link('ams/review/edit', $review) }}"
												class="actionBar-action actionBar-action--edit actionBar-action--menuItem"
												data-xf-click="quick-edit"
												data-editor-target="#js-review-{$review.rating_id} .js-quickEditTarget"
												data-menu-closer="true">{{ phrase('edit') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>
										<xf:if is="$review.edit_count AND $review.canViewHistory()">
											<a href="{{ link('ams/review/history', $review) }}" 
												class="actionBar-action actionBar-action--history actionBar-action--menuItem"
												data-xf-click="toggle"
												data-target="#js-review-{$review.rating_id} .js-historyTarget"
												data-menu-closer="true">{{ phrase('history') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>
										<xf:if is="$review.canDelete('soft')">
											<a href="{{ link('ams/review/delete', $review) }}" 
												class="actionBar-action actionBar-action--delete actionBar-action--menuItem" 
												data-xf-click="overlay">{{ phrase('delete') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>
										<xf:if is="$review.rating_state == 'deleted' AND $review.canUndelete()"> 
											<a href="{{ link('ams/review/undelete', $review, {'t': csrf_token()}) }}" 
												class="actionBar-action actionBar-action--undelete actionBar-action--menuItem">{{ phrase('undelete') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>
										<xf:if is="$review.canReassign()">
											<a href="{{ link('ams/review/reassign', $review) }}" 
												class="actionBar-action actionBar-action--reassign actionBar-action--menuItem" 
												data-xf-click="overlay">{{ phrase('reassign') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>
										<xf:if is="$review.canChangeDate()">
											<a href="{{ link('ams/review/change-date', $review) }}" 
												class="actionBar-action actionBar-action--date actionBar-action--menuItem" 
												data-xf-click="overlay">{{ phrase('xa_ams_change_date') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>									
										<xf:if is="$review.canCleanSpam()">
											<a href="{{ link('spam-cleaner', $review) }}" 
												class="actionBar-action actionBar-action--spam actionBar-action--menuItem" 
												data-xf-click="overlay">{{ phrase('spam') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>
										<xf:if is="$xf.visitor.canViewIps() AND $review.ip_id">
											<a href="{{ link('ams/review/ip', $review) }}" 
												class="actionBar-action actionBar-action--ip actionBar-action--menuItem" 
												data-xf-click="overlay">{{ phrase('ip') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>
										<xf:if is="$review.canWarn()">
											<a href="{{ link('ams/review/warn', $review) }}" 
												class="actionBar-action actionBar-action--warn actionBar-action--menuItem">{{ phrase('warn') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										<xf:elseif is="$review.warning_id && $xf.visitor.canViewWarnings()" /> 
											<a href="{{ link('warnings', {'warning_id': $review.warning_id}) }}" 
												class="actionBar-action actionBar-action--warn actionBar-action--menuItem" 
												data-xf-click="overlay">{{ phrase('view_warning') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />							
										</xf:if>

										<xf:if is="$hasActionBarMenu">
											<a class="actionBar-action actionBar-action--menuTrigger"
												data-xf-click="menu"
												title="{{ phrase('more_options') }}"
												role="button"
												tabindex="0"
												aria-expanded="false"
												aria-haspopup="true">&#8226;&#8226;&#8226;</a>

											<div class="menu" data-menu="menu" aria-hidden="true" data-menu-builder="actionBar">
												<div class="menu-content">
													<h4 class="menu-header">{{ phrase('more_options') }}</h4>
													<div class="js-menuBuilderTarget"></div>
												</div>
											</div>
										</xf:if>
									</xf:contentcheck>
									</div>
								</xf:if>
							</xf:contentcheck>
						</div>
					</xf:if>

					<div class="reactionsBar js-reactionsList {{ $review.reactions ? 'is-active' : '' }}">
						<xf:reactions content="{$review}" link="ams/review/reactions" />
					</div>

					<div class="js-historyTarget toggleTarget" data-href="trigger-href"></div>

					<xf:if contentcheck="true">
						<div class="message-responses js-messageResponses">
						<xf:contentcheck>

							<xf:if is="$review.author_response">
								<xf:macro name="author_reply_row" 
									arg-review="{$review}" 
									arg-article="{$article}" />
							<xf:elseif is="$review.canReply()" />
								<div class="js-replyNewMessageContainer"></div>
							</xf:if>

							<xf:if is="$review.canReply()">
								<xf:js src="xf/message.js" min="1" />
								<div class="message-responseRow js-commentsTarget-{$review.rating_id} toggleTarget">
									<xf:form action="{{ link('ams/review/reply', $review) }}" ajax="true" class="comment"
										data-xf-init="quick-reply"
										data-message-container="< .js-messageResponses | .js-replyNewMessageContainer"
										data-submit-hide=".js-commentsTarget-{$review.rating_id}, .js-replyTrigger-{$review.rating_id}">

										<div class="comment-inner">
											<span class="comment-avatar">
												<xf:avatar user="{$xf.visitor}" size="xxs" />
											</span>
											<div class="comment-main">
												<xf:textarea name="message" rows="1" autosize="true"
													maxlength="{$xf.options.messageMaxLength}"
													data-toggle-autofocus="1"
													class="comment-input js-editor"  />
												<div>
													<xf:button type="submit" class="button--primary button--small" icon="reply">{{ phrase('post_reply') }}</xf:button>
												</div>
											</div>
										</div>
									</xf:form>
								</div>
							</xf:if>

						</xf:contentcheck>
						</div>
					</xf:if>
				</div>
			</div>

			<xf:if contentcheck="true">
				<div class="message-cell message-cell--vote">
					<div class="message-column">
						<xf:contentcheck>
							<xf:if is="$review.isContentVotingSupported()">
								<xf:macro template="content_vote_macros" name="vote_control"
									arg-link="ams/review/vote"
									arg-content="{$review}" />
							</xf:if>
						</xf:contentcheck>
					</div>
				</div>
			</xf:if>
		</div>
	</div>
</xf:macro>

<xf:macro name="author_reply_row" 
	arg-review="!" 
	arg-article="!">
	
	<div class="message-responseRow">
		<div class="comment">
			<div class="comment-inner">
				<span class="comment-avatar">
					<xf:avatar user="$article.User" size="xxs" defaultname="{$article.username}" />
				</span>
				<div class="comment-main">
					<div class="comment-content">
						<div class="comment-contentWrapper">
							<xf:username user="$article.User" rich="true" defaultname="{$article.username}" class="comment-user" />
							<div class="comment-body">{{ structured_text($review.author_response) }}</div>
							<xf:if is="$article.canViewContributors() AND $review.author_response_contributor_user_id AND $review.author_response_contributor_user_id != $article.user_id">
								<div class="comment-note">({{ phrase('xa_ams_response_by:') }} <xf:username user="$review.AuthorResponseContributorUser" defaultname="{$review.author_response_contributor_username}" />)</div>
							</xf:if>
						</div>
					</div>

					<div class="comment-actionBar actionBar">
						<div class="actionBar-set actionBar-set--internal">
							<xf:if is="$review.canDeleteAuthorResponse()">
								<a href="{{ link('ams/review/reply-delete', $review) }}"
									class="actionBar-action actionBar-action--delete actionBar-action--menuItem"
									data-xf-click="overlay">
									{{ phrase('delete') }}
								</a>
							</xf:if>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="review_simple" 
	arg-review="!">
	
	<div class="contentRow">
		<div class="contentRow-figure">
			<xf:avatar user="{{ $review.is_anonymous ? null : $review.User }}" size="xxs" />
		</div>
		
		<div class="contentRow-main contentRow-main--close">
			<a href="{{ link('ams/review', $review) }}">{{ prefix('ams_article', $review.Article) }}{$review.Article.title}</a>

			<div class="contentRow-snippet contentRow-lesser">
				<xf:macro template="rating_macros" name="stars" 
					arg-rating="{$review.rating}" />
			</div>
			
			<div class="contentRow-snippet">
				{{ smilie(snippet($review.message, 150, {'stripBbCode': true, 'stripQuote': true})) }}
			</div>			

			<div class="contentRow-minor contentRow-minor--smaller">
				<ul class="listInline listInline--bullet">
					<li>
						<xf:if is="$review.is_anonymous">
							{{ phrase('anonymous') }}
						<xf:else />
							{{ $review.User.username ?: $review.username }}
						</xf:if>
					</li>
					<li><xf:date time="{$review.rating_date}" /></li>
				</ul>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="rating" 
	arg-rating="!" 
	arg-article="!">

	<xf:css src="xa_ams_review.less" />

	<div class="ams-review message message--simple{{ $rating.isIgnored() ? ' is-ignored' : '' }}"
		data-author="{{ $rating.User.username ?: $rating.username }}"
		data-content="review-{$rating.rating_id}"
		id="js-review-{$rating.rating_id}">

		<span class="u-anchorTarget" id="review-{$rating.rating_id}"></span>

		<div class="message-inner">
			<span class="message-cell message-cell--user">
				<xf:macro template="message_macros" name="user_info_simple"
					arg-user="{$rating.User}"
					arg-fallbackName="{{ phrase('deleted_member') }}" />
			</span>
			<div class="message-cell message-cell--main">
				<div class="message-content js-messageContent">
					<div class="message-attribution message-attribution--plain">
						<ul class="listInline listInline--bullet">
							<li class="message-attribution-user">
								<xf:username user="{$rating.User}" defaultname="{{ phrase('deleted_member') }}" />
							</li>
							<li>
								<xf:macro template="rating_macros" name="stars"
									arg-rating="{$rating.rating}"
									arg-class="ratingStars--smaller" />
							</li>
							<li><a href="" class="u-concealed"><xf:date time="$rating.rating_date" /></a></li>
						</ul>
					</div>
				</div>

				<xf:if contentcheck="true">
					<div class="message-actionBar actionBar">
						<xf:contentcheck>
							<xf:if contentcheck="true">
								<div class="actionBar-set actionBar-set--internal">
								<xf:contentcheck>
									<xf:if is="$rating.canDelete('hard')">
										<a href="{{ link('ams/review/delete-rating', $rating) }}" 
											class="actionBar-action actionBar-action--delete" 
											data-xf-click="overlay">{{ phrase('delete') }}</a>
									</xf:if>
								</xf:contentcheck>
								</div>
							</xf:if>
						</xf:contentcheck>
					</div>
				</xf:if>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_review_reassign" version_id="2010570" version_string="2.1.5"><![CDATA[<xf:title>{{ phrase('xa_ams_reassign_review') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/review/reassign', $review) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="username" ac="single" maxlength="{{ max_length($xf.visitor, 'username') }}"
				label="{{ phrase('xa_ams_new_owner') }}" />

			<xf:checkboxrow>
				<xf:option name="alert" selected="{{ true }}"
					label="{{ phrase('xa_ams_notify_current_and_new_owners_of_this_action') }} {{ phrase('reason:') }}">

					<xf:textbox name="alert_reason" placeholder="{{ phrase('optional') }}" maxlength="250" />
				</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_review_reply_added" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:macro template="xa_ams_review_macros" name="author_reply_row"
	arg-review="{$review}"
	arg-article="{$article}" />]]></template>
  <template type="public" title="xa_ams_review_reply_delete" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_delete_review_response') }}</xf:title>

<xf:breadcrumb source="$article.getBreadcrumbs()" />

<xf:form action="{{ link('ams/review/reply-delete', $review) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('xa_ams_you_sure_you_want_to_delete_this_review_response') }}
			</xf:inforow>
		</div>
		<xf:submitrow icon="delete" rowtype="simple" />
	</div>
	<xf:redirect />
</xf:form>]]></template>
  <template type="public" title="xa_ams_series_add_article" version_id="2022070" version_string="2.2.20"><![CDATA[<xf:title>{{ phrase('xa_ams_add_article_to_series') }}</xf:title>

<xf:breadcrumb source="$series.getBreadcrumbs()" />

<xf:form action="{{ link('ams/series/add-article', $series) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:radiorow name="article_input_type" value="article_list" listclass="_listColumns"
				label="{{ phrase('xa_ams_select_or_set_article') }}">

				<xf:option value="article_list" data-hide="true"
					label="{{ phrase('xa_ams_select_recent_article') }}">

					<xf:dependent>
						<xf:if is="$articles is not empty">
							<xf:select name="article_id" value="0" class="input--inline" style="max-width:99%;">
								<xf:option value="0"></xf:option>
								<xf:foreach loop="$articles" value="$article">
									<xf:option value="{$article.article_id}">{$article.title}</xf:option>
								</xf:foreach>
							</xf:select>
							<p class="formRow-explain">{{ phrase('xa_ams_select_article_explain') }}</p>
						<xf:else />
							<p class="formRow-explain">{{ phrase('xa_ams_you_do_not_have_any_existing_recent_articles_able_to_be_associated_with_series') }}</p>
						</xf:if>	
					</xf:dependent>
				</xf:option>
				
				<xf:option value="input_article_url" data-hide="true"
					label="{{ phrase('xa_ams_set_article_by_url') }}">
					<xf:dependent>
						<xf:textbox name="article_url" type="url" label="{{ phrase('xa_ams_article_url') }}" />
						<p class="formRow-explain">{{ phrase('xa_ams_set_article_by_url_explain') }}</p>
					</xf:dependent>
				</xf:option>
			</xf:radiorow>

			<xf:numberboxrow name="display_order" value="1" min="1" pattern="\d*"
				label="{{ phrase('display_order') }}"
				explain="{{ phrase('xa_ams_series_part_display_order_explain') }}" />
		</div>

		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_series_bookmark_custom_icon" version_id="2000270" version_string="2.0.2"><![CDATA[<div class="contentRow-figure contentRow-figure--fixedBookmarkIcon">
	<xf:if is="$content.icon_date">
		<div class="contentRow-figureContainer">
			{{ ams_series_icon($content, 's', link('ams/series', $content)) }} 
		</div>
	<xf:else />
		<xf:avatar user="$content.User" size="s" defaultname="{$content.User.username}" />
	</xf:if>
</div>]]></template>
  <template type="public" title="xa_ams_series_create" version_id="2021770" version_string="2.2.17"><![CDATA[<xf:title>{{ phrase('xa_ams_create_series') }}</xf:title>

<xf:breadcrumb source="$series.getBreadcrumbs(false)" />

<xf:form action="{{ link('ams/series/create-series') }}" ajax="true" class="block"
	data-preview-url="{{ link('ams/series/preview', $series) }}">
	
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="title" value="{$series.title_}" rowtype="fullWidth noLabel" class="input--title"
				maxlength="{{ max_length($series, 'title') }}"
				placeholder="{{ phrase('title...') }}"
				label="{{ phrase('title') }}" />

			<xf:macro template="xa_ams_series_edit_macros" name="message"
				arg-message="{$series.message_}"
				arg-attachmentData="{$attachmentData}" />

			<hr class="formRowSep" />

			<xf:macro template="xa_ams_series_edit_macros" name="description" arg-series="{$series}" />

			<hr class="formRowSep" />
		
			<xf:checkboxrow>
				<xf:option name="community_series" selected="{$series.isCommunitySeries()}"
					label="{{ phrase('xa_ams_community_series') }}">
					<xf:afterhint>{{ phrase('xa_ams_community_series_explain') }}</xf:afterhint>
				</xf:option>
			</xf:checkboxrow>			
		</div>
		
		<h3 class="block-formSectionHeader">
			<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up:next">
				<span class="block-formSectionHeader-aligner">{{ phrase('xa_ams_search_engine_optimization_options') }}</span>
			</span>
		</h3>
		<div class="block-body block-body--collapsible">
			<xf:macro template="xa_ams_series_edit_macros" name="og_title_meta_title" arg-series="{$series}" />			
			<xf:macro template="xa_ams_series_edit_macros" name="meta_description" arg-series="{$series}" />
		</div>		
		
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_series_delete" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:title>{{ phrase('xa_ams_delete_series') }}</xf:title>

<xf:breadcrumb source="$series.getBreadcrumbs()" />

<xf:form action="{{ link('ams/series/delete', $series) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$series.canDelete('hard')}" />

			<xf:if is="$series.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="delete" sticky="true" />
	</div>
	<xf:redirect />
</xf:form>]]></template>
  <template type="public" title="xa_ams_series_details" version_id="2021970" version_string="2.2.19"><![CDATA[<xf:title>{{ $series.meta_title ? $series.meta_title : $series.title }} - {{ phrase('xa_ams_series_details') }}</xf:title>

<xf:wrap template="xa_ams_series_wrapper">
	<xf:set var="$pageSelected" value="details" />
</xf:wrap>

<div class="block">
	<xf:if contentcheck="true">
		<div class="block-outer">
			<div class="block-outer-opposite">
			<xf:contentcheck>
				<xf:macro template="xa_ams_series_wrapper_macros" name="action_buttons" arg-series="{$series}" arg-showAddArticleButton="true" />
			</xf:contentcheck>
			</div>
		</div>
	</xf:if>

	<xf:if is="$poll">
		<xf:macro template="poll_macros" name="poll_block" arg-poll="{$poll}" />
	</xf:if>
	
	<div class="block-container">
		<div class="block-body lbContainer js-seriesBody"
			data-xf-init="lightbox"
			data-lb-id="series-{$series.series_id}"
			data-lb-caption-desc="{{ $series.User ? $series.User.username : $series.username }} &middot; {{ date_time($series.create_date) }}"
			id="js-seriesBody-{$series.series_id}">

			<div class="seriesBody">
				<article class="seriesBody-main js-lbContainer">
					{{ bb_code($series.message, 'ams_series', $series) }}

					<xf:if contentcheck="true">
						<xf:css src="attachments.less" />
						<ul class="attachmentList seriesBody-attachments">
							<xf:contentcheck>
								<xf:foreach loop="$series.Attachments" value="$attachment" if="$attachment.has_thumbnail AND !$series.isAttachmentEmbedded($attachment)">
									<xf:macro template="attachment_macros" name="attachment_list_item"
										arg-attachment="{$attachment}"
										arg-canView="{{ $series.canViewSeriesAttachments() }}" />
								</xf:foreach>
							</xf:contentcheck>
						</ul>
					</xf:if>

					<xf:if contentcheck="true">
						<div class="actionBar">
							<xf:contentcheck>
								<xf:if contentcheck="true">
									<div class="actionBar-set actionBar-set--external">
									<xf:contentcheck>
										<xf:react content="{$series}" link="ams/series/react" list="< .js-seriesBody | .js-reactionsList" />
									</xf:contentcheck>
									</div>
								</xf:if>

								<xf:if contentcheck="true">
									<div class="actionBar-set actionBar-set--internal">
									<xf:contentcheck>
										<xf:if is="$series.canReport()">
											<a href="{{ link('ams/series/report', $series) }}"
												class="actionBar-action actionBar-action--report" data-xf-click="overlay">{{ phrase('report_verb') }}</a>
										</xf:if>

										<xf:set var="$hasActionBarMenu" value="{{ false }}" />
										<xf:if is="$series.canEdit()">
											<a href="{{ link('ams/series/edit', $series) }}"
												class="actionBar-action actionBar-action--edit actionBar-action--menuItem">{{ phrase('edit') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$series.edit_count AND $series.canViewHistory()">
											<a href="{{ link('ams/series/history', $series) }}" 
												class="actionBar-action actionBar-action--history actionBar-action--menuItem"
												data-xf-click="toggle"
												data-target="#js-seriesBody-{$series.series_id} .js-historyTarget"
												data-menu-closer="true">{{ phrase('history') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$series.canDelete('soft')">
											<a href="{{ link('ams/series/delete', $series) }}"
												class="actionBar-action actionBar-action--delete actionBar-action--menuItem"
												data-xf-click="overlay">{{ phrase('delete') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$xf.visitor.canViewIps() && $series.ip_id">
											<a href="{{ link('ams/series/ip', $series) }}"
												class="actionBar-action actionBar-action--ip actionBar-action--menuItem"
												data-xf-click="overlay">{{ phrase('ip') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$series.canWarn()">
											<a href="{{ link('ams/series/warn', $series) }}"
												class="actionBar-action actionBar-action--warn actionBar-action--menuItem">{{ phrase('warn') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										<xf:elseif is="$series.warning_id && $xf.visitor.canViewWarnings()" />
											<a href="{{ link('warnings', {'warning_id': $series.warning_id}) }}"
												class="actionBar-action actionBar-action--warn actionBar-action--menuItem"
												data-xf-click="overlay">{{ phrase('view_warning') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$series.canApproveUnapprove()">
											<xf:if is="$series.series_state == 'moderated'">
												<a href="{{ link('ams/series/approve', $series, {'t': csrf_token()}) }}"
													class="actionBar-action actionBar-action--approve actionBar-action--menuItem">{{ phrase('approve') }}</a>
												<xf:set var="$hasActionBarMenu" value="{{ true }}" />
											<xf:elseif is="$series.series_state == 'visible'" />
												<a href="{{ link('ams/series/unapprove', $series, {'t': csrf_token()}) }}"
													class="actionBar-action actionBar-action--unapprove actionBar-action--menuItem">{{ phrase('unapprove') }}</a>
												<xf:set var="$hasActionBarMenu" value="{{ true }}" />
											</xf:if>
										</xf:if>

										<xf:if is="$hasActionBarMenu">
											<a class="actionBar-action actionBar-action--menuTrigger"
												data-xf-click="menu"
												title="{{ phrase('more_options') }}"
												role="button"
												tabindex="0"
												aria-expanded="false"
												aria-haspopup="true">&#8226;&#8226;&#8226;</a>

											<div class="menu" data-menu="menu" aria-hidden="true" data-menu-builder="actionBar">
												<div class="menu-content">
													<h4 class="menu-header">{{ phrase('more_options') }}</h4>
													<div class="js-menuBuilderTarget"></div>
												</div>
											</div>
										</xf:if>
									</xf:contentcheck>
									</div>
								</xf:if>
							</xf:contentcheck>
						</div>
					</xf:if>

					<div class="reactionsBar js-reactionsList {{ $series.reactions ? 'is-active' : '' }}">
						<xf:reactions content="{$series}" link="ams/series/reactions" />
					</div>

					<div class="js-historyTarget toggleTarget" data-href="trigger-href"></div>
				</article>
			</div>
		</div>
	</div>
</div>

<xf:if is="!$series.community_series">
	<xf:if contentcheck="true">
		<div class="block">
			<div class="block-container">	
				<div class="block-header">{{ phrase('xa_ams_about_author') }}</div>

				<div class="block-body ">
					<div class="block-row block-row--separated ">
						<div class="contentRow">
							<span class="contentRow-figure">
								<xf:avatar user="{$series.User}" size="s" />
							</span>

							<div class="contentRow-main">
								<div class="contentRow-title"><xf:username user="$series.User" rich="true" /></div>

								<xf:contentcheck>
									<xf:if is="$series.User.Profile.xa_ams_about_author">
										<div class="articleBody">
											<article class="articleBody-aboutAuthor">
												{{ bb_code($series.User.Profile.xa_ams_about_author, 'user:xa_ams_about_author', $series.User) }}
											</article>
										</div>
									<xf:elseif is="$series.User.Profile.about && {$xf.options.xaAmsDisplayUserProfileAboutMe}"/>
										<div class="articleBody">
											<article class="articleBody-aboutAuthor">
												{{ bb_code($series.User.Profile.about, 'user:about', $series.User) }}
											</article>
										</div>
									</xf:if>
								</xf:contentcheck>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</xf:if>
</xf:if>

<xf:sidebar key="infoSidebar">
	<div class="block">
		<div class="block-container">
			<xf:if is="$series.community_series">
				<h3 class="block-minorHeader">{{ phrase('xa_ams_community_series_information') }}</h3>
			<xf:else />
				<h3 class="block-minorHeader">{{ phrase('xa_ams_series_information') }}</h3>
			</xf:if>
			<div class="block-body block-row block-row--minor">
				<dl class="pairs pairs--justified">
					<xf:if is="$series.community_series">
						<dt>{{ phrase('xa_ams_manager') }}</dt>
					<xf:else />
						<dt>{{ phrase('author') }}</dt>
					</xf:if>

					<xf:if is="$series.User.Profile.xa_ams_author_name">
						<dd><xf:username user="{'user_id':{$series.User.user_id}, 'username':{$series.User.Profile.xa_ams_author_name}}" defaultname="{$series.User.Profile.xa_ams_author_name}" /></dd>
					<xf:else />
						<dd><xf:username user="{$series.User}" defaultname="{$series.User.username}" /></dd>
					</xf:if>
				</dl>
				<xf:if is="$series.community_series">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xa_ams_contributors') }}</dt>
						<dd>{$totalContributors|number}</dd>
					</dl>
				</xf:if>
				<xf:if is="$series.article_count">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xa_ams_articles') }}</dt>
						<dd>{$series.article_count|number}</dd>
					</dl>
				</xf:if>
				<xf:if is="$series.last_part_date">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xa_ams_last_update') }}</dt>
						<dd><xf:date time="{$series.last_part_date}" /></dd>
					</dl>
				</xf:if>
			</div>
		</div>
	</div>
</xf:sidebar>

<xf:if is="$communityContributors is not empty">
	<xf:sidebar key="communityBloggersSidebar">
		<div class="block">
			<div class="block-container">
				<h3 class="block-minorHeader">{{ phrase('xa_ams_contributors') }}</h3>
				<ul class="block-body">
					<xf:foreach loop="$communityContributors" value="$communityContributor">
						<li class="block-row">
							<div class="contentRow">
								<div class="contentRow-figure">
									<xf:avatar user="$communityContributor" size="xs" />
								</div>
								<div class="contentRow-main contentRow-main--close">
									<xf:if is="$communityContributor.Profile.xa_ams_author_name">
										<xf:username user="{'user_id':{$communityContributor.user_id}, 'username':{$communityContributor.Profile.xa_ams_author_name}}" defaultname="{$communityContributor.Profile.xa_ams_author_name}" />
									<xf:else />
										<xf:username user="$communityContributor" rich="true" />
									</xf:if>
									<div class="contentRow-minor">
										<xf:usertitle user="$communityContributor" />
									</div>
								</div>
							</div>
						</li>
					</xf:foreach>
				</ul>
			</div>
		</div>
	</xf:sidebar>
</xf:if>

<xf:sidebar key="shareSidebar">
	<xf:if contentcheck="true">
		<div class="block">
			<div class="block-container">
				<xf:contentcheck>
					<h3 class="block-minorHeader">{{ phrase('xa_ams_share_this_series') }}</h3>
					<xf:if contentcheck="true">
						<div class="block-body block-row block-row--separated">
							<xf:contentcheck>
								<xf:macro template="share_page_macros" name="buttons" 
									arg-iconic="{{ true }}" 
									arg-pageUrl="{{ link('canonical:ams/series', $series) }}" 
									arg-pageTitle="{$series.title}"	
									arg-pageDesc="{{ snippet($series.description, 250, {'stripBbCode': true}) }}" />
							</xf:contentcheck>
						</div>
					</xf:if>
					<xf:if contentcheck="true">
						<div class="block-body block-row block-row--separated">
							<xf:contentcheck>
								<xf:macro template="share_page_macros" name="share_clipboard_input"
									arg-label="{{ phrase('xa_ams_copy_url_bb_code') }}"
									arg-text="[URL=&quot;{{ link('canonical:ams/series', $series) }}&quot;]{$series.title}[/URL]" />

								<xf:macro template="share_page_macros" name="share_clipboard_input"
									arg-label="{{ phrase('xa_ams_copy_ams_bb_code') }}"
									arg-text="[AMS=series, {$series.series_id}][/AMS]" />
							</xf:contentcheck>
						</div>
					</xf:if>
				</xf:contentcheck>
			</div>
		</div>
	</xf:if>
</xf:sidebar>]]></template>
  <template type="public" title="xa_ams_series_edit" version_id="2021770" version_string="2.2.17"><![CDATA[<xf:title>{{ phrase('xa_ams_edit_series') }}</xf:title>

<xf:breadcrumb source="$series.getBreadcrumbs()" />

<xf:form action="{{ link('ams/series/edit', $series) }}" ajax="true" class="block"
	data-preview-url="{{ link('ams/series/preview', $series) }}">

	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="title" value="{$series.title_}" rowtype="fullWidth noLabel" class="input--title"
				maxlength="{{ max_length($series, 'title') }}"
				placeholder="{{ phrase('title...') }}"
				label="{{ phrase('title') }}" />

			<xf:macro template="xa_ams_series_edit_macros" name="message"
				arg-message="{$series.message_}"
				arg-attachmentData="{$attachmentData}" />

			<hr class="formRowSep" />

			<xf:macro template="xa_ams_series_edit_macros" name="description" arg-series="{$series}" />

			<hr class="formRowSep" />

			<xf:checkboxrow>
				<xf:option name="community_series" selected="{$series.isCommunitySeries()}"
					label="{{ phrase('xa_ams_community_series') }}">
					<xf:afterhint>{{ phrase('xa_ams_community_series_explain') }}</xf:afterhint>
				</xf:option>
			</xf:checkboxrow>

			<xf:if is="$series.canSendModeratorActionAlert()">
				<hr class="formRowSep" />

				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		
		<h3 class="block-formSectionHeader">
			<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up:next">
				<span class="block-formSectionHeader-aligner">{{ phrase('xa_ams_search_engine_optimization_options') }}</span>
			</span>
		</h3>
		<div class="block-body block-body--collapsible">
			<xf:macro template="xa_ams_series_edit_macros" name="og_title_meta_title" arg-series="{$series}" />			
			<xf:macro template="xa_ams_series_edit_macros" name="meta_description" arg-series="{$series}" />
		</div>			

		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_series_edit_icon" version_id="2021770" version_string="2.2.17"><![CDATA[<xf:title>{{ phrase('xa_ams_series_icon') }}</xf:title>

<xf:breadcrumb source="$series.getBreadcrumbs()" />

<xf:form action="{{ link('ams/series/edit-icon', $series) }}" upload="true" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body block-row">
			<xf:macro name="icon_edit" arg-series="{$series}" />
		</div>
		<xf:submitrow icon="save" rowtype="simple" />
	</div>
</xf:form>

<xf:macro name="icon_edit" arg-series="!">
	<div class="contentRow">
		<div class="contentRow-figure">
			<span class="contentRow-figureIcon">{{ ams_series_icon($series, 'm') }}</span>
		</div>
		<div class="contentRow-main">
			<xf:if is="$series.icon_date">
				<xf:radio name="icon_action" value="custom">
					<xf:option value="custom" label="{{ phrase('xa_ams_upload_custom_icon:') }}">
						<xf:macro name="custom_dependent" />
					</xf:option>

					<xf:if is="$series.icon_date">
						<xf:option value="delete">{{ phrase('xa_ams_delete_current_icon') }}</xf:option>
					</xf:if>
				</xf:radio>
			<xf:else />
				<xf:set var="$uploadId" value="{{ unique_id() }}" />
				<label for="{$uploadId}">{{ phrase('xa_ams_upload_new_icon:') }}</label>
				<xf:macro name="custom_dependent" arg-id="{$uploadId}"/>
				<xf:hiddenval name="icon_action">custom</xf:hiddenval>
			</xf:if>
		</div>
	</div>
</xf:macro>

<xf:macro name="custom_dependent" arg-id="">
	<xf:upload name="upload" accept=".gif,.jpeg,.jpg,.jpe,.png" id="{$id}" />
	<dfn class="inputChoices-explain">
		{{ phrase('it_is_recommended_that_you_use_image_that_is_at_least_x_pixels', {
			'width': 200,
			'height': 200
		}) }}
	</dfn>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_series_edit_macros" version_id="2021770" version_string="2.2.17"><![CDATA[<xf:macro name="message" arg-message="" arg-attachmentData="{{ [] }}" arg-showAttachmentRequired="{{ false }}">
	<div data-xf-init="attachment-manager">
		<xf:editorrow name="message" value="{$message}" data-min-height="250"
			attachments="{$attachmentData.attachments}"
			rowtype="fullWidth"
			label="{{ phrase('xa_ams_series_details') }}" />

		<xf:if is="$attachmentData">
			<xf:formrow>
				<xf:macro template="helper_attach_upload" name="upload_block" arg-attachmentData="{$attachmentData}" />
			</xf:formrow>
		</xf:if>
	</div>
</xf:macro>

<xf:macro name="description" arg-series="!">
	<xf:textarearow name="description" value="{$series.description_}" autosize="true"
		maxlength="{{ max_length($series, 'description') }}"
		label="{{ phrase('description') }}" 
		hint="{{ phrase('optional') }}"	/>
</xf:macro>

<xf:macro name="og_title_meta_title" arg-series="!">
	<xf:textboxrow name="og_title" value="{$series.og_title}"
		maxlength="{{ max_length($series, 'og_title') }}"
		label="{{ phrase('xa_ams_og_title') }}"
		hint="{{ phrase('optional') }}"
		explain="{{ phrase('xa_ams_og_title_explain') }}" />

	<xf:textboxrow name="meta_title" value="{$series.meta_title}"
		maxlength="{{ max_length($series, 'meta_title') }}"
		label="{{ phrase('xa_ams_meta_title') }}"
		hint="{{ phrase('optional') }}"
		explain="{{ phrase('xa_ams_meta_title_explain') }}" />
</xf:macro>

<xf:macro name="meta_description" arg-series="!">
	<xf:textarearow name="meta_description" value="{$series.meta_description_}" autosize="true"
		maxlength="{{ max_length($series, 'meta_description') }}"
		label="{{ phrase('xa_ams_meta_description') }}"
		hint="{{ phrase('optional') }}"
		explain="{{ phrase('xa_ams_provide_brief_summary_of_your_series_for_search_engines') }}" />
</xf:macro>]]></template>
  <template type="public" title="xa_ams_series_list" version_id="2022670" version_string="2.2.26"><![CDATA[<xf:title page="{$page}">{{ phrase('xa_ams_series_list') }}</xf:title>

<xf:css src="xa_ams.less" />

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:ams/series', null, {'page': $page > 1 ? $page : null}) }}" />

<xf:page option="searchConstraints" value="{{ {
	phrase('xa_ams_articles'): {'search_type': 'ams_article'}
} }}" />

<xf:pageaction if="$xf.visitor.canCreateAmsSeries()">
	<xf:button href="{{ link('ams/series/create-series') }}" class="button--cta" icon="add">{{ phrase('xa_ams_create_series') }}</xf:button>
</xf:pageaction>

<xf:macro template="xa_ams_series_list_macros" name="featured_carousel"
	arg-featuredSeries="{$featuredSeries}"
	arg-viewAllLink="{{ link('ams/series/featured') }}" />

<xf:widgetpos id="xa_ams_series_list_above_series_list" />

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="ams_series" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/series" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
				<xf:contentcheck>
					<xf:if is="$canInlineMod">
						<xf:macro template="inline_mod_macros" name="button" />
					</xf:if>
				</xf:contentcheck>
				</div>
			</div>
		</xf:if>

	</xf:trim></div>

	<div class="block-container">
		<xf:macro template="xa_ams_series_list_macros" name="list_filter_bar"
			arg-filters="{$filters}"
			arg-baseLinkPath="ams/series"
			arg-creatorFilter="{$creatorFilter}" />

		<div class="block-body">
			<xf:if is="$series is not empty">
				<div class="structItemContainer">
					<xf:foreach loop="$series" value="$seriesItem">
						<xf:macro template="xa_ams_series_list_macros" name="series"
							arg-series="{$seriesItem}" />
					</xf:foreach>
				</div>
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('xa_ams_there_no_series_matching_your_filters') }}</div>
			<xf:else />
				<div class="block-row">{{ phrase('xa_ams_no_series_have_been_created_yet') }}</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/series" params="{$filters}"
			wrapperclass="block-outer-main" />
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>

<xf:widgetpos id="xa_ams_series_list_below_series" />

<xf:widgetpos id="xa_ams_series_list_sidebar" position="sidebar" />]]></template>
  <template type="public" title="xa_ams_series_list_featured" version_id="2022870" version_string="2.2.28"><![CDATA[<xf:title>{{ phrase('xa_ams_featured_series') }}</xf:title>

<xf:breadcrumb href="{{ link('ams/series') }}">{{ phrase('xa_ams_series_list') }}</xf:breadcrumb>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="ams_series" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>
		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
					<xf:contentcheck>
						<xf:if is="$canInlineMod">
							<xf:macro template="inline_mod_macros" name="button" />
						</xf:if>
					</xf:contentcheck>
				</div>
			</div>
		</xf:if>
	</xf:trim></div>

	<div class="block-container">
		<div class="block-body">
			<xf:if is="$series is not empty">
				<div class="structItemContainer">
					<xf:foreach loop="$series" value="$seriesItem">
						<xf:macro template="xa_ams_series_list_macros" name="series"
							arg-series="{$seriesItem}" />
					</xf:foreach>
				</div>
			<xf:else />
				<div class="block-row">{{ phrase('xa_ams_no_series_have_been_featured_yet') }}</div>
			</xf:if>
		</div>
	</div>
	<div class="block-outer block-outer--after">
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_series_list_filters" version_id="2022670" version_string="2.2.26"><![CDATA[<xf:form action="{{ link('ams/series/filters', null) }}">

	<!--[XF:above_misc_check_box]-->
	<div class="menu-row menu-row--separated">
		<xf:checkbox>
			<xf:option name="featured" selected="{$filters.featured}">{{ phrase('xa_ams_featured_series') }}</xf:option>
			<xf:option name="community" selected="{$filters.community}">{{ phrase('xa_ams_community_series') }}</xf:option>
			<xf:option name="has_articles" selected="{$filters.has_articles}">{{ phrase('xa_ams_series_with_articles') }}</xf:option>
		</xf:checkbox>
	</div>

	<!--[XF:above_title]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('title:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="title" value="{$filters.title}" />
		</div>
	</div>
	
	<!--[XF:above_series_that_mention]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('xa_ams_series_that_mention:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="term" value="{$filters.term}" />
		</div>
	</div>		

	<!--[XF:above_created_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('created_by:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="creator" value="{{ $creatorFilter ? $creatorFilter.username : '' }}" ac="single" />
		</div>
	</div>

	<!--[XF:above_sort_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('sort_by:') }}
		<div class="inputGroup u-inputSpacer">
			<xf:select name="order" value="{{ $filters.order ?: 'last_part_date' }}">
				<xf:option value="last_part_date">{{ phrase('xa_ams_latest_article') }}</xf:option>
				<xf:option value="create_date">{{ phrase('xa_ams_create_date') }}</xf:option>
				<xf:option value="article_count">{{ phrase('xa_ams_articles') }}</xf:option>
				<xf:option value="title">{{ phrase('title') }}</xf:option>
			</xf:select>
			<span class="inputGroup-splitter"></span>
			<xf:select name="direction" value="{{ $filters.direction ?: 'desc' }}">
				<xf:option value="desc">{{ phrase('descending') }}</xf:option>
				<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<div class="menu-footer">
		<span class="menu-footer-controls">
			<xf:button type="submit" class="button--primary">{{ phrase('filter') }}</xf:button>
		</span>
	</div>
	<xf:hiddenval name="apply">1</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="xa_ams_series_list_macros" version_id="2022670" version_string="2.2.26"><![CDATA[<xf:macro name="list_filter_bar" 
	arg-filters="!" 
	arg-baseLinkPath="!" 
	arg-creatorFilter="{{ null }}" 
	arg-linkData="{{ null }}">
	
	<xf:set var="$sortOrders" value="{{ {
		'last_part_date': phrase('xa_ams_latest_article'),
		'create_date': phrase('xa_ams_create_date'),
		'article_count': phrase('xa_ams_articles'),
		'title': phrase('title')
	} }}" />

	<div class="block-filterBar">
		<div class="filterBar">
			<xf:if contentcheck="true">
				<ul class="filterBar-filters">
					<xf:contentcheck>
						<xf:if is="$filters.featured">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('featured', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
								{{ phrase('xa_ams_featured') }}
							</a></li>
						</xf:if>

						<xf:if is="$filters.has_articles">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('has_articles', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
								{{ phrase('xa_ams_has_articles') }}
							</a></li>
						</xf:if>

						<xf:if is="$filters.community">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('community', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
								{{ phrase('xa_ams_community_series') }}
							</a></li>
						</xf:if>
						
						<xf:if is="$filters.title">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('title', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('title:') }}</span>
								{$filters.title}</a></li>
						</xf:if>
						
						<xf:if is="$filters.term">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('term', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('xa_ams_mentions:') }}</span>
								{$filters.term}</a></li>
						</xf:if>							
						
						<xf:if is="$filters.creator_id AND $creatorFilter">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('creator_id', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('created_by:') }}</span>
								{$creatorFilter.username}</a></li>
						</xf:if>
						
						<xf:if is="$filters.order AND {$sortOrders.{$filters.order}}">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace({'order': null, 'direction': null})) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('return_to_default_order')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
								{$sortOrders.{$filters.order}}
								<xf:fa icon="{{ $filters.direction == 'asc' ? 'fa-angle-up' : 'fa-angle-down' }}" />
								<span class="u-srOnly"><xf:if is="$filters.direction == 'asc'">{{ phrase('ascending') }}<xf:else />{{ phrase('descending') }}</xf:if></span>
							</a></li>
						</xf:if>
					</xf:contentcheck>
				</ul>
			</xf:if>

			<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
			<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
				data-href="{{ link($baseLinkPath . '/filters', $linkData, $filters) }}"
				data-load-target=".js-filterMenuBody">
				<div class="menu-content">
					<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
					<div class="js-filterMenuBody">
						<div class="menu-row">{{ phrase('loading...') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="featured_carousel" 
	arg-featuredSeries="!" 
	arg-viewAllLink="!" 
	arg-isWidget="{{ false }}">
	
	<xf:if is="$featuredSeries is not empty">
		<xf:css src="carousel.less" />
		<xf:css src="lightslider.less" />

		<xf:js prod="xf/carousel-compiled.js" dev="vendor/lightslider/lightslider.min.js, xf/carousel.js" />

		<div class="carousel carousel--withFooter carousel--amsFeaturedSeries">
			<ul class="carousel-body carousel-body--show1" data-xf-init="carousel">
				<xf:foreach loop="$featuredSeries" value="$series">
					<li>
						<div class="carousel-item">
							<div class="contentRow">
								<div class="contentRow-main">
									<xf:if is="$series.icon_date">
										<div class="contentRow-figure">
											{{ ams_series_icon($series, 's', link('ams/series', $series)) }}
										</div>
									</xf:if>

									<xf:if is="$isWidget">
										<div class="contentRow-amsSeries">{{ phrase('xa_ams_series') }}</div>
									</xf:if>

									<h4 class="contentRow-title"><a href="{{ link('ams/series', $series) }}">{$series.title}</a></h4>

									<div class="contentRow-lesser">
										<xf:if is="$series.description !='' ">
											{{ snippet($series.description, 300, {'stripQuote': true}) }}
										<xf:else />
											{{ snippet($series.message, 300, {'stripQuote': true}) }}
										</xf:if>
									</div>

									<div class="contentRow-minor contentRow-minor--smaller">
										<ul class="listInline listInline--bullet">
											<xf:if is="$series.User.Profile.xa_ams_author_name">
												<li>{$series.User.Profile.xa_ams_author_name}</li>
											<xf:else />
												<li>{{ $series.User.username ?: $series.username }}</li>
											</xf:if>
											<li><a href="{{ link('ams/series', $series) }}" rel="nofollow" class="u-concealed"><xf:date time="{$series.create_date}" /></a></li>
											<xf:if is="$series.last_part_date AND $series.last_part_date > $series.create_date">
												<li>{{ phrase('updated') }} <xf:date time="{$series.last_part_date}" /></li>
											</xf:if>
											<li>{{ phrase('xa_ams_articles') }}: {$series.article_count|number}</li>
										</ul>
									</div>

									<xf:if is="$series.LastArticle">
										<div class="contentRow-amsLatestArticle">
											{{ phrase('xa_ams_latest_article') }}: <a href="{{ link('ams', $series.LastArticle) }}" class="">{$series.LastArticle.title}</a>
										</div>
									</xf:if>
								</div>
							</div>
						</div>
					</li>
				</xf:foreach>
			</ul>
			<div class="carousel-footer">
				<a href="{$viewAllLink}">{{ phrase('xa_ams_view_all_featured_series') }}</a>
			</div>
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="series_carousel" 
	arg-series="!" 
	arg-viewAllLink="!" 
	arg-isWidget="{{ false }}">
	
	<xf:if is="$series is not empty">
		<xf:css src="carousel.less" />
		<xf:css src="lightslider.less" />

		<xf:js prod="xf/carousel-compiled.js" dev="vendor/lightslider/lightslider.min.js, xf/carousel.js" />

		<div class="carousel carousel--withFooter carousel--amsFeaturedSeries">
			<ul class="carousel-body carousel-body--show1" data-xf-init="carousel">
				<xf:foreach loop="$series" value="$seriesItem">
					<li>
						<div class="carousel-item">
							<div class="contentRow">
								<div class="contentRow-main">
									<xf:if is="$seriesItem.icon_date">
										<div class="contentRow-figure">
											{{ ams_series_icon($seriesItem, 's', link('ams/series', $seriesItem)) }}
										</div>
									</xf:if>

									<xf:if is="$isWidget">
										<div class="contentRow-amsSeries">{{ phrase('xa_ams_series') }}</div>
									</xf:if>

									<h4 class="contentRow-title"><a href="{{ link('ams/series', $seriesItem) }}">{$seriesItem.title}</a></h4>

									<div class="contentRow-lesser">
										<xf:if is="$seriesItem.description !='' ">
											{{ snippet($seriesItem.description, 300, {'stripQuote': true}) }}
										<xf:else />
											{{ snippet($seriesItem.message, 300, {'stripQuote': true}) }}
										</xf:if>
									</div>

									<div class="contentRow-minor contentRow-minor--smaller">
										<ul class="listInline listInline--bullet">
											<xf:if is="$seriesItem.User.Profile.xa_ams_author_name">
												<li>{$seriesItem.User.Profile.xa_ams_author_name}</li>
											<xf:else />
												<li>{{ $seriesItem.User.username ?: $seriesItem.username }}</li>
											</xf:if>

											<li><a href="{{ link('ams/series', $seriesItem) }}" rel="nofollow" class="u-concealed"><xf:date time="{$seriesItem.create_date}" /></a></li>
											<xf:if is="$seriesItem.last_part_date AND $seriesItem.last_part_date > $seriesItem.create_date">
												<li>{{ phrase('updated') }} <a href="{{ link('ams/series', $seriesItem) }}" rel="nofollow" class="u-concealed"><xf:date time="{$seriesItem.last_part_date}" /></a></li>
											</xf:if>
											<li>{{ phrase('xa_ams_articles') }}: {$seriesItem.article_count|number}</li>
										</ul>
									</div>

									<xf:if is="$seriesItem.LastArticle">
										<div class="contentRow-amsLatestArticle">
											{{ phrase('xa_ams_latest_article') }}: <a href="{{ link('ams', $seriesItem.LastArticle) }}" class="">{$seriesItem.LastArticle.title}</a>
										</div>
									</xf:if>
								</div>
							</div>
						</div>
					</li>
				</xf:foreach>
			</ul>
			<div class="carousel-footer">
				<a href="{$viewAllLink}">{{ phrase('xa_ams_view_all_series') }}</a>
			</div>
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="series"
	arg-series="!"
	arg-showWatched="{{ true }}"
	arg-allowInlineMod="{{ true }}"
	arg-chooseName=""
	arg-extraInfo="">

	<xf:css src="structured_list.less" />
	<xf:css src="xa_ams.less" />

	<div class="structItem structItem--series {{ $series.isIgnored() ? 'is-ignored' : '' }}{{ $series.series_state == 'moderated' ? ' is-moderated' : '' }}{{ $series.series_state == 'deleted' ? ' is-deleted' : '' }}  js-seriesListItem-{$series.series_id}" data-author="{$series.User.username}">
		<div class="structItem-cell structItem-cell--icon structItem-cell--iconExpanded structItem-cell--iconAmsSeriesCoverImage">
			<div class="structItem-iconContainer">
				<xf:if is="$series.icon_date">
					{{ ams_series_icon($series, 's', link('ams/series', $series)) }}
				<xf:else />
					<xf:avatar user="$series.User" size="m" defaultname="{$series.User.username}" />
				</xf:if>
			</div>
		</div>
		<div class="structItem-cell structItem-cell--main structItem-cell--listViewLayout" data-xf-init="touch-proxy">
			<xf:if contentcheck="true">
				<ul class="structItem-statuses">
				<xf:contentcheck>
					<xf:if is="$series.Featured">
						<li>
							<i class="structItem-status structItem-status--attention" aria-hidden="true" title="{{ phrase('xa_ams_featured')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('xa_ams_featured') }}</span>
						</li>
					</xf:if>
					<xf:if is="$series.has_poll">
						<li>
							<i class="structItem-status structItem-status--poll" aria-hidden="true" title="{{ phrase('poll')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('poll') }}</span>
						</li>
					</xf:if>
					<xf:if is="$series.series_state == 'moderated'">
						<li>
							<i class="structItem-status structItem-status--moderated" aria-hidden="true" title="{{ phrase('awaiting_approval')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('awaiting_approval') }}</span>
						</li>
					</xf:if>
					<xf:if is="$series.series_state == 'deleted'">
						<li>
							<i class="structItem-status structItem-status--deleted" aria-hidden="true" title="{{ phrase('deleted')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('deleted') }}</span>
						</li>
					</xf:if>
					<xf:if is="{$showWatched} AND {$xf.visitor.user_id}">
						<xf:if is="{$series.Watch.{$xf.visitor.user_id}}">
							<li>
								<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('xa_ams_series_watched')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('xa_ams_series_watched') }}</span>
							</li>
						</xf:if>
					</xf:if>
					<xf:if is="$series.community_series">
						<li>
							<i class="structItem-status structItem-status--community" aria-hidden="true" title="{{ phrase('xa_ams_community_series')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('xa_ams_community_series') }}</span>
						</li>
					</xf:if>
				</xf:contentcheck>
				</ul>
			</xf:if>

			<div class="structItem-title">
				<a href="{{ link('ams/series', $series) }}" class="" data-tp-primary="on">{$series.title}</a>
			</div>

			<div class="structItem-minor">
				<xf:if contentcheck="true">
					<ul class="structItem-extraInfo">
					<xf:contentcheck>
						<xf:if is="{$extraInfo}">
							<li>{$extraInfo}</li>
						</xf:if>
						<xf:if is="$chooseName">
							<li><xf:checkbox standalone="true">
								<xf:option name="{$chooseName}[]" value="{$series.article_id}" class="js-chooseItem" />
							</xf:checkbox></li>
						<xf:elseif is="$allowInlineMod AND $series.canUseInlineModeration()" />
							<li><xf:checkbox standalone="true"><xf:option value="{$series.series_id}"
								class="js-inlineModToggle"
								data-xf-init="tooltip" title="{{ phrase('select_for_moderation')|for_attr }}" /></xf:checkbox></li>
						</xf:if>
					</xf:contentcheck>
					</ul>
				</xf:if>
			</div>

			<div class="structItem-articleDescription">
				<xf:if is="$series.description !='' ">
					{{ snippet($series.description, 300, {'stripQuote': true}) }}
				<xf:else />
					{{ snippet($series.message, 300, {'stripQuote': true}) }}
				</xf:if>
			</div>

			<div class="structItem-listViewMeta">
				<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--author">
					<dt></dt>
					<xf:if is="$series.User.Profile.xa_ams_author_name">
						<dd><xf:username user="{'user_id':{$series.User.user_id}, 'username':{$series.User.Profile.xa_ams_author_name}}" defaultname="{$series.User.Profile.xa_ams_author_name}" /></dd>
					<xf:else />
						<dd><xf:username user="$series.User" defaultname="{$series.User.username}" /></dd>
					</xf:if>
				</dl>
				<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--publishdate">
					<dt></dt>
					<dd><a href="{{ link('ams', $series) }}" rel="nofollow" class="u-concealed"><xf:date time="{$series.create_date}" /></a></dd>
				</dl>
				<xf:if is="$series.last_part_date AND $series.last_part_date > $series.create_date">
					<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--lastUpdate">
						<dt>{{ phrase('updated') }}</dt>
						<dd><xf:date time="{$series.last_part_date}" /></dd>
					</dl>
				</xf:if>
				<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--views">
					<dt>{{ phrase('xa_ams_articles') }}</dt>
					<dd>{$series.article_count|number}</dd>
				</dl>
			</div>

			<xf:if is="$series.LastArticle">
				<div class="structItem-LatestArticleTitleFooter">
					{{ phrase('xa_ams_latest_article') }}: <a href="{{ link('ams', $series.LastArticle) }}" class="">{$series.LastArticle.title}</a>
				</div>
			</xf:if>
		</div>
	</div>
</xf:macro>

<xf:macro name="series_simple" 
	arg-series="!" 
	arg-withMeta="{{ true }}">
	
	<div class="contentRow">
		<div class="contentRow-figure">
			<xf:avatar user="$series.User" size="xxs" />
		</div>
		<div class="contentRow-main contentRow-main--close">
			<a href="{{ link('ams/series', $series) }}">{$series.title}</a>
			
			<div class="contentRow-snippet">
				<xf:if is="$series.description !='' ">
					{{ snippet($series.description, 75, {'stripQuote': true}) }}
				<xf:else />
					{{ snippet($series.message, 75, {'stripQuote': true}) }}
				</xf:if>
			</div>
			
			<xf:if is="$withMeta">
				<div class="contentRow-minor contentRow-minor--smaller">
					<ul class="listInline listInline--bullet">
						<xf:if is="$series.User.Profile.xa_ams_author_name">
							<li>{$series.User.Profile.xa_ams_author_name}</li>
						<xf:else />
							<li>{{ $series.User.username ?: $series.username }}</li>
						</xf:if>
						
						<li><xf:date time="{$series.create_date}" /></li>
						
						<xf:if is="$series.LastArticle">
							<li>{{ phrase('updated:') }} <xf:date time="{$series.last_part_date}" /></li>
							<li>
								{{ phrase('xa_ams_latest_article') }}: <a href="{{ link('ams', $series.LastArticle) }}" class="">{$series.LastArticle.title}</a>
							</li>
						</xf:if>
					</ul>
				</div>
			</xf:if>
		</div>
	</div>
</xf:macro>

<xf:macro name="series_list_item_struct_item" 
	arg-item="!" 
	arg-chooseName="" 
	arg-extraInfo="">
	
	<xf:css src="structured_list.less" />

	<xf:if is="$item.LastComment AND $item.LastComment.isUnread()">
		<xf:set var="$link">{{ link('ams/article-comments/unread', $item) }}</xf:set>
	<xf:else />
		<xf:set var="$link">{{ link('ams', $item) }}</xf:set>
	</xf:if>
	
	<div class="structItem structItem--middle{{ ($item.LastComment AND $item.LastComment.isUnread()) ? ' is-unread' : '' }}" data-author="{{ $item.User.username ?: $item.username }}">
		<div class="structItem-cell structItem-cell--icon structItem-cell--iconFixedSmall">
			<div class="structItem-iconContainer">
				<xf:if is="$item.CoverImage">
					<a href="{$link}">
						{{ ams_article_thumbnail($item) }}
					</a>
					<xf:avatar user="$item.User" size="s"
						href="" class="avatar--separated structItem-secondaryIcon" />
				<xf:elseif is="$item.SeriesPart.Series && $item.SeriesPart.Series.icon_date" />
					{{ ams_series_icon($item.SeriesPart.Series, 's', link('ams', $item)) }}
					<xf:avatar user="$item.User" size="s"
						href="" class="avatar--separated structItem-secondaryIcon" />
				<xf:elseif is="$item.Category.content_image_url" />
					<a href="{$link}">
						{{ ams_category_icon($item) }}
					</a>
					<xf:avatar user="$item.User" size="s"
						href="" class="avatar--separated structItem-secondaryIcon" />
				<xf:else />
					<xf:avatar user="$item.User" size="m" defaultname="{{ $item.username ?: phrase('deleted_member') }}" />
				</xf:if>
			</div>
		</div>
		<div class="structItem-cell structItem-cell--main" data-xf-init="touch-proxy">
			<div class="structItem-title">
				<a href="{$link}" class="" data-tp-primary="on">{$item.title}</a>
			</div>

			<div class="structItem-minor">
				<xf:if contentcheck="true">
					<ul class="structItem-extraInfo">
						<xf:contentcheck>
							<xf:if is="{$extraInfo}">
								<li>{$extraInfo}</li>
							</xf:if>
							<xf:if is="$chooseName">
								<li><xf:checkbox standalone="true">
									<xf:option name="{$chooseName}[]" value="{$item.article_id}" class="js-chooseItem" />
								</xf:checkbox></li>
							</xf:if>
						</xf:contentcheck>
					</ul>
				</xf:if>
				<ul class="structItem-parts">
					<li><xf:username user="{$item.User}" defaultname="{$item.username}" /></li>

					<xf:if is="$series.User.Profile.xa_ams_author_name">
						<li><xf:username user="{'user_id':{$article.User.user_id}, 'username':{$article.User.Profile.xa_ams_author_name}}" defaultname="{$article.User.Profile.xa_ams_author_name}" /></li>
					<xf:else />
						<li><xf:username user="{$item.User}" defaultname="{$item.username}" /></li>
					</xf:if>

					<li>{{ phrase('xa_ams_article') }}</li>
					<li><xf:date time="{$item.publish_date}" /></li>
					<xf:if is="$item.category_id AND $item.Category">
						<li>{{ phrase('category:') }} {$item.Category.title}</li>
					</xf:if>
				</ul>
			</div>
		</div>
		<div class="structItem-cell structItem-cell--meta">
			<dl class="pairs pairs--justified">
				<dt>{{ phrase('comments') }}</dt>
				<dd>{$item.comment_count|number}</dd>
			</dl>
		</div>
		<div class="structItem-cell structItem-cell--latest">
			<xf:if is="$item.LastComment">
				<a href="{{ link('ams/comments', $item.LastComment) }}" rel="nofollow"><xf:date time="{$item.last_comment_date}" class="structItem-latestDate" /></a>
				<div class="structItem-minor">
					<xf:username user="{$item.LastCommenter}" />
				</div>
			<xf:else />
				-
			</xf:if>
		</div>
	</div>
</xf:macro>

<xf:macro name="series_watch_item"
	arg-series="!"
	arg-chooseName=""
	arg-bonusInfo="">
	
	<div class="node node--depth2 node--amsSeries node--amsSeries{$series.series_id}">
		<div class="node-body">
			<div class="node-main js-nodeMain">
				<xf:if is="$chooseName">
					<xf:checkbox standalone="true">
						<xf:option labelclass="u-pullRight" class="js-chooseItem" name="{$chooseName}[]" value="{$series.series_id}" />
					</xf:checkbox>
				</xf:if>

				<xf:set var="$descriptionDisplay" value="{{ property('nodeListDescriptionDisplay') }}" />
				<h3 class="node-title">
					<a href="{{ link('ams/series', $series) }}" data-xf-init="{{ $descriptionDisplay == 'tooltip' ? 'element-tooltip' : '' }}" data-shortcut="node-description">{$series.title}</a>
				</h3>
				<xf:if is="$descriptionDisplay != 'none' && $series.description">
					<div class="node-description {{ $descriptionDisplay == 'tooltip' ? 'node-description--tooltip js-nodeDescTooltip' : '' }}">{$series.description|raw}</div>
				</xf:if>

				<div class="node-meta">
					<div class="node-statsMeta">
						<dl class="pairs pairs--inline">
							<dt>{{ phrase('xa_ams_articles') }}</dt>
							<dd>{$series.article_count|number}</dd>
						</dl>
					</div>
				</div>

				<xf:if is="$bonusInfo is not empty">
					<div class="node-bonus">{$bonusInfo}</div>
				</xf:if>
			</div>

			<div class="node-stats node-stats--single">
				<dl class="pairs pairs--rows">
					<dt>{{ phrase('xa_ams_articles') }}</dt>
					<dd>{$series.article_count|number}</dd>
				</dl>
			</div>

			<div class="node-extra">
				<xf:if is="{$series.last_part_date}">
					<div class="node-extra-row"><a href="{{ link('ams', $series.LastArticle) }}" class="node-extra-title" title="{$series.LastArticle.title}">{$series.LastArticle.title}</a></div>
					<div class="node-extra-row">
						<xf:date time="{$series.LastArticle.publish_date}" class="node-extra-date" />
					</div>
				<xf:else />
					<span class="node-extra-placeholder">{{ phrase('none') }}</span>
				</xf:if>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_series_page_macros" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:macro name="series_page_options" arg-series="!">
	<xf:page option="searchConstraints" value="{{ {
		phrase('xa_ams_articles'): {'search_type': 'ams_article'},
		phrase('xa_ams_this_series'): {'search_type': 'ams_article', 'c': {'series': [$series.series_id]}}
	} }}" />
</xf:macro>]]></template>
  <template type="public" title="xa_ams_series_part_edit" version_id="2021970" version_string="2.2.19"><![CDATA[<xf:title>{{ phrase('xa_ams_edit_series_part') }}</xf:title>

<xf:breadcrumb source="$series.getBreadcrumbs()" />

<xf:form action="{{ link('ams/series-part/edit', $seriesPart) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:numberboxrow name="display_order" value="{$seriesPart.display_order}" min="0" pattern="\d*"
				label="{{ phrase('display_order') }}" 
				explain="{{ phrase('xa_ams_series_part_display_order_explain') }}" />
		</div>
		<xf:submitrow icon="save" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_series_part_list_macros" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:macro name="series_part_list"
	arg-seriesPart="!"
	arg-series="!"
	arg-article="!"
	arg-category="{{ null }}"
	arg-showWatched="{{ true }}"
	arg-allowInlineMod="{{ false }}"
	arg-chooseName=""
	arg-extraInfo="">

	<xf:css src="structured_list.less" />
	<xf:css src="xa_ams.less" />

	<div class="structItem structItem--article {{ $article.prefix_id ? 'is-prefix' . $article.prefix_id : '' }} {{ $article.isIgnored() ? 'is-ignored' : '' }}{{ ($article.isUnread() AND !$forceRead) ? ' is-unread' : '' }}{{ $article.article_state == 'moderated' ? ' is-moderated' : '' }}{{ $article.article_state == 'deleted' ? ' is-deleted' : '' }} js-inlineModContainer js-articleListItem-{$article.article_id}" data-author="{{ $article.User.username ?: $article.username }}">
		<div class="structItem-cell structItem-cell--icon structItem-cell--iconExpanded structItem-cell--iconAmsCoverImage">
			<div class="structItem-iconContainer">
				<xf:if is="$article.CoverImage">
					<a href="{{ link('ams', $article) }}">
						{{ ams_article_thumbnail($article) }}
					</a>
				<xf:elseif is="$series.icon_date" />
					{{ ams_series_icon($series, 's', link('ams', $article)) }}
				<xf:elseif is="$article.Category.content_image_url" />
					<a href="{{ link('ams', $article) }}">
						{{ ams_category_icon($article) }}
					</a>
				<xf:else />
					<xf:avatar user="$article.User" size="m" defaultname="{{ $article.username ?: phrase('deleted_member') }}" />
				</xf:if>
			</div>
		</div>
		<div class="structItem-cell structItem-cell--main structItem-cell--listViewLayout" data-xf-init="touch-proxy">
			<xf:if contentcheck="true">
				<ul class="structItem-statuses">
				<xf:contentcheck>
					<xf:if is="$article.Featured">
						<li>
							<i class="structItem-status structItem-status--attention" aria-hidden="true" title="{{ phrase('xa_ams_featured')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('xa_ams_featured') }}</span>
						</li>
					</xf:if>
					<xf:if is="{$showWatched} AND {$xf.visitor.user_id}">
						<xf:if is="{$article.Watch.{$xf.visitor.user_id}}">
							<li>
								<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('xa_ams_article_watched')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('xa_ams_article_watched') }}</span>
							</li>
						<xf:elseif is="!$category AND {$article.Category.Watch.{$xf.visitor.user_id}}" />
							<li>
								<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('xa_ams_category_watched')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('xa_ams_category_watched') }}</span>
							</li>
						</xf:if>
					</xf:if>
				</xf:contentcheck>
				</ul>
			</xf:if>

			<div class="structItem-articleCategoryTitleHeader">
				<ul class="structItem-parts">
					<li><a href="{{ link('ams/categories', $article.Category) }}">{$article.Category.title}</a></li>
				</ul>
			</div>

			<div class="structItem-title">
				<xf:if is="$article.prefix_id">
					<xf:if is="$category">
						<a href="{{ link('ams/categories', $category, {'prefix_id': $article.prefix_id}) }}" class="labelLink">{{ prefix('ams_article', $article, 'html', '') }}</a>
					<xf:else />
						{{ prefix('ams_article', $article, 'html', '') }}
					</xf:if>
				</xf:if>
				<a href="{{ link('ams', $article) }}" class="" data-tp-primary="on">{$article.title}</a>
			</div>

			<div class="structItem-articleDescription">
				{{ snippet($article.message, 300, {'stripQuote': true}) }}
			</div>

			<div class="structItem-listViewMeta">
				<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--author">
					<dt></dt>
					<xf:if is="$article.User.Profile.xa_ams_author_name">
						<dd><xf:username user="{'user_id':{$article.User.user_id}, 'username':{$article.User.Profile.xa_ams_author_name}}" defaultname="{$article.User.Profile.xa_ams_author_name}" /></dd>
					<xf:else />
						<dd><xf:username user="{$article.User}" defaultname="{$article.username}" /></dd>
					</xf:if>
				</dl>

				<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--publishdate">
					<dt></dt>
					<dd><a href="{{ link('ams', $article) }}" rel="nofollow" class="u-concealed"><xf:date time="{$article.publish_date}" /></a></dd>
				</dl>

				<xf:if is="$article.author_rating && $article.Category.allow_author_rating">
					<div class="structItem-metaItem  structItem-metaItem--rating">
						<xf:macro template="rating_macros" name="stars_text"
							arg-rating="{$article.author_rating}"
							arg-text="Author rating"
							arg-rowClass="ratingStarsRow--justified"
							arg-starsClass="ratingStars--smaller ratingStars--amsAuthorRating" />
					</div>
				</xf:if>
				<xf:if is="$article.rating_avg AND $article.rating_count">
					<div class="structItem-metaItem  structItem-metaItem--rating">
						<xf:macro template="rating_macros" name="stars_text"
							arg-rating="{$article.rating_avg}"
							arg-count="{$article.rating_count}"
							arg-rowClass="ratingStarsRow--justified"
							arg-starsClass="ratingStars--smaller" />
					</div>
				</xf:if>
				<xf:if is="$article.view_count">
					<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--views">
						<dt>{{ phrase('views') }}</dt>
						<dd>{$article.view_count|number}</dd>
					</dl>
				</xf:if>
				<xf:if is="$article.reaction_score">
					<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--reaction_score">
						<dt>{{ phrase('reaction_score') }}</dt>
						<dd>{$article.reaction_score|number}</dd>
					</dl>
				</xf:if>
				<xf:if is="$article.comment_count">
					<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--comments">
						<dt>{{ phrase('comments') }}</dt>
						<dd><a href="{{ link('ams', $article) }}#comments" class="u-concealed">{$article.comment_count|number}</a></dd>
					</dl>
				</xf:if>
				<xf:if is="$article.review_count">
					<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--reviews">
						<dt>{{ phrase('xa_ams_reviews') }}</dt>
						<dd><a href="{{ link('ams/reviews', $article) }}" class="u-concealed">{$article.review_count|number}</a></dd>
					</dl>
				</xf:if>
				<xf:if is="$article.last_update AND $article.last_update > $article.publish_date">
					<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--lastUpdate">
						<dt>{{ phrase('updated') }}</dt>
						<dd><a href="{{ link('ams', $article) }}" class="u-concealed"><xf:date time="{$article.last_update}" /></a></dd>
					</dl>
				</xf:if>
			</div>

			<div class="actionBar actionBarSeries">
				<div class="actionBar-set actionBar-set--internal">
					<xf:if is="$seriesPart.canEdit()">
						<a href="{{ link('ams/series-part/edit', $seriesPart) }}" 
							class="actionBar-action actionBar-action--edit" 
							data-xf-click="overlay">{{ phrase('edit') }}</a>
					</xf:if>
					<xf:if is="$seriesPart.canRemove()">
						<a href="{{ link('ams/series-part/remove', $seriesPart) }}" 
							class="actionBar-action actionBar-action--remove" 
							data-xf-click="overlay">{{ phrase('remove') }}</a>
					</xf:if>
				</div>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_series_part_remove" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title>{{ phrase('xa_ams_remove_article_from_series') }}</xf:title>

<xf:breadcrumb source="$series.getBreadcrumbs()" />

<xf:form action="{{ link('ams/series-part/remove', $seriesPart) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('xa_ams_you_sure_you_want_to_remove_article_from_series') }}
				<strong><a href="{{ link('ams', $article) }}">{$article.title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('xa_ams_remove_article_from_series') }}" rowtype="simple" />
	</div>
	<xf:redirect />
</xf:form>]]></template>
  <template type="public" title="xa_ams_series_reassign" version_id="2010670" version_string="2.1.6"><![CDATA[<xf:title>{{ phrase('xa_ams_reassign_series') }}</xf:title>

<xf:breadcrumb source="$series.getBreadcrumbs()" />

<xf:form action="{{ link('ams/series/reassign', $series) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="username" ac="single" maxlength="{{ max_length($xf.visitor, 'username') }}"
				label="{{ phrase('xa_ams_new_owner') }}" />

			<xf:checkboxrow>
				<xf:option name="alert" selected="{{ true }}"
					label="{{ phrase('xa_ams_notify_current_and_new_owners_of_this_action') }} {{ phrase('reason:') }}">

					<xf:textbox name="alert_reason" placeholder="{{ phrase('optional') }}" maxlength="250" />
				</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_series_tags" version_id="2010870" version_string="2.1.8"><![CDATA[<xf:title>{{ phrase('edit_tags') }}</xf:title>

<xf:breadcrumb source="$series.getBreadcrumbs()" />

<xf:macro template="tag_macros" name="edit_form"
	arg-action="{{ link('ams/series/tags', $series) }}"
	arg-uneditableTags="{$uneditableTags}"
	arg-editableTags="{$editableTags}"
	arg-minTags="{$xf.options.xaAmsSeriesMinTags}"
	arg-tagList="tagList--series-{$series.series_id}" />]]></template>
  <template type="public" title="xa_ams_series_tags_list" version_id="2010870" version_string="2.1.8"><![CDATA[<xf:macro template="tag_macros" name="list"
	arg-tags="{$series.tags}"
	arg-tagList="tagList--series-{$series.series_id}"
	arg-editLink="{{ $series.canEditTags() ? link('ams/series/tags', $series) : '' }}" />]]></template>
  <template type="public" title="xa_ams_series_undelete" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:title>{{ phrase('xa_ams_undelete_series') }}</xf:title>

<xf:breadcrumb source="$series.getBreadcrumbs()" />

<xf:form action="{{ link('ams/series/undelete', $series) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('please_confirm_that_you_want_to_undelete_following:') }}
				<strong><a href="{{ link('ams/series', $series) }}">{$series.title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('undelete') }}" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_series_view" version_id="2022870" version_string="2.2.28"><![CDATA[<xf:title page="{$page}">{{ $series.meta_title ? $series.meta_title : $series.title }}</xf:title>

<xf:if is="!$series.isSearchEngineIndexable()">
	<xf:head option="metaNoindex"><meta name="robots" content="noindex" /></xf:head>
</xf:if>

<xf:if is="$series.meta_description">
	<xf:set var="$descSnippet" value="{{ snippet($series.meta_description, 320, {'stripBbCode': true}) }}" />
<xf:elseif is="$series.description" />
	<xf:set var="$descSnippet" value="{{ snippet($series.description, 250, {'stripBbCode': true}) }}" />
<xf:else />
	<xf:set var="$descSnippet" value="{{ snippet($series.message, 250, {'stripBbCode': true}) }}" />
</xf:if>

<xf:macro template="metadata_macros" name="metadata"
	arg-title="{{ $series.og_title ? $series.og_title : ($series.meta_title ? $series.meta_title : $series.title) }}"	
	arg-description="{$descSnippet}"
	arg-shareUrl="{{ link('canonical:ams/series', $series) }}"
	arg-canonicalUrl="{{ link('canonical:ams/series', $series, {'page': $page > 1 ? $page : null}) }}" />

<xf:page option="ldJsonHtml">
    <xf:extension name="structured_data_extra_params" value="{{ [] }}" />
    <xf:extension name="structured_data">
        <xf:set var="$ldJson"
            value="{{ $series.getLdStructuredData($page, extension_value('structured_data_extra_params')) }}"
        />
        <xf:if is="$ldJson">
            <script type="application/ld+json">
                {$ldJson|json(true)|raw}
            </script>
        </xf:if>
    </xf:extension>
</xf:page>

<xf:wrap template="xa_ams_series_wrapper">
	<xf:set var="$pageSelected" value="overview" />
</xf:wrap>

<div class="block">
	<div class="block-outer"><xf:trim>
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/series" data="{$series}" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
			<xf:contentcheck>
				<xf:macro template="xa_ams_series_wrapper_macros" name="action_buttons" 
					arg-series="{$series}" 
					arg-canInlineMod="{$canInlineMod}" 
					arg-showAddArticleButton="true" />
			</xf:contentcheck>
			</div>
		</xf:if>
	</xf:trim></div>
	
	<xf:if is="$poll">
		<xf:macro template="poll_macros" name="poll_block" arg-poll="{$poll}" />
	</xf:if>

	<xf:widgetpos id="xa_ams_series_view_above_article_list" context-series="{$series}" />	
	
	<xf:ad position="ams_series_view_above_article_list" arg-series="{$series}" />
	
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$seriesParts is not empty">
				<div class="structItemContainer">
					<xf:foreach loop="$seriesParts" value="$seriesPart">
						<xf:macro template="xa_ams_series_part_list_macros" name="series_part_list"
							arg-seriesPart="{$seriesPart}"
							arg-series="{$seriesPart.Series}"
							arg-article="{$seriesPart.Article}"
							arg-category="{$seriesPart.Article.Category}" />
					</xf:foreach>
				</div>
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('xa_ams_there_no_articles_matching_your_filters') }}</div>
			<xf:else />
				<div class="block-row">{{ phrase('xa_ams_no_articles_have_been_added_to_series') }}</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="ams/series" data="{$series}" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
	
	<xf:widgetpos id="xa_ams_series_view_below_article_list" context-series="{$series}" />	
	
	<xf:ad position="ams_series_view_below_article_list" arg-series="{$series}" />	
</div>

<xf:sidebar key="infoSidebar">
	<div class="block">
		<div class="block-container">
			<xf:if is="$series.community_series">
				<h3 class="block-minorHeader">{{ phrase('xa_ams_community_series_information') }}</h3>
			<xf:else />
				<h3 class="block-minorHeader">{{ phrase('xa_ams_series_information') }}</h3>
			</xf:if>
			<div class="block-body block-row block-row--minor">
				<dl class="pairs pairs--justified">
					<xf:if is="$series.community_series">
						<dt>{{ phrase('xa_ams_manager') }}</dt>
					<xf:else />
						<dt>{{ phrase('author') }}</dt>
					</xf:if>

					<xf:if is="$series.User.Profile.xa_ams_author_name">
						<dd><xf:username user="{'user_id':{$series.User.user_id}, 'username':{$series.User.Profile.xa_ams_author_name}}" defaultname="{$series.User.Profile.xa_ams_author_name}" /></dd>
					<xf:else />
						<dd><xf:username user="{$series.User}" defaultname="{$series.User.username}" /></dd>
					</xf:if>
				</dl>
				<xf:if is="$series.community_series">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xa_ams_contributors') }}</dt>
						<dd>{$totalContributors|number}</dd>
					</dl>
				</xf:if>
				<xf:if is="$series.article_count">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xa_ams_articles') }}</dt>
						<dd>{$series.article_count|number}</dd>
					</dl>
				</xf:if>
				<xf:if is="$series.last_part_date">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xa_ams_last_update') }}</dt>
						<dd><xf:date time="{$series.last_part_date}" /></dd>
					</dl>
				</xf:if>
			</div>
		</div>
	</div>
</xf:sidebar>

<xf:if is="$communityContributors is not empty">
	<xf:sidebar key="communityBloggersSidebar">
		<div class="block">
			<div class="block-container">
				<h3 class="block-minorHeader">{{ phrase('xa_ams_contributors') }}</h3>
				<ul class="block-body">
					<xf:foreach loop="$communityContributors" value="$communityContributor">
						<li class="block-row">
							<div class="contentRow">
								<div class="contentRow-figure">
									<xf:avatar user="$communityContributor" size="xs" />
								</div>
								<div class="contentRow-main contentRow-main--close">
									<xf:if is="$communityContributor.Profile.xa_ams_author_name">
										<xf:username user="{'user_id':{$communityContributor.user_id}, 'username':{$communityContributor.Profile.xa_ams_author_name}}" defaultname="{$communityContributor.Profile.xa_ams_author_name}" />
									<xf:else />
										<xf:username user="$communityContributor" rich="true" />
									</xf:if>
									<div class="contentRow-minor">
										<xf:usertitle user="$communityContributor" />
									</div>
								</div>
							</div>
						</li>
					</xf:foreach>
				</ul>
			</div>
		</div>
	</xf:sidebar>
</xf:if>

<xf:sidebar key="shareSidebar">
	<xf:if contentcheck="true">
		<div class="block">
			<div class="block-container">
				<xf:contentcheck>
					<h3 class="block-minorHeader">{{ phrase('xa_ams_share_this_series') }}</h3>
					<xf:if contentcheck="true">
						<div class="block-body block-row block-row--separated">
							<xf:contentcheck>
								<xf:macro template="share_page_macros" name="buttons" arg-iconic="{{ true }}" />
							</xf:contentcheck>
						</div>
					</xf:if>
					<xf:if contentcheck="true">
						<div class="block-body block-row block-row--separated">
							<xf:contentcheck>
								<xf:macro template="share_page_macros" name="share_clipboard_input"
									arg-label="{{ phrase('xa_ams_copy_url_bb_code') }}"
									arg-text="[URL=&quot;{{ link('canonical:ams/series', $series) }}&quot;]{$series.title}[/URL]" />

								<xf:macro template="share_page_macros" name="share_clipboard_input"
									arg-label="{{ phrase('xa_ams_copy_ams_bb_code') }}"
									arg-text="[AMS=series, {$series.series_id}][/AMS]" />
							</xf:contentcheck>
						</div>
					</xf:if>
				</xf:contentcheck>
			</div>
		</div>
	</xf:if>
</xf:sidebar>]]></template>
  <template type="public" title="xa_ams_series_watch" version_id="2021970" version_string="2.2.19"><![CDATA[<xf:if is="$isWatched">
	<xf:title>{{ phrase('xa_ams_unwatch_series') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('xa_ams_watch_series') }}</xf:title>
</xf:if>

<xf:breadcrumb source="{$series.getBreadcrumbs()}" />

<xf:form action="{{ link('ams/series/watch', $series) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$isWatched">
				<xf:inforow rowtype="confirm">
					{{ phrase('xa_ams_you_sure_you_want_to_unwatch_this_series') }}
				</xf:inforow>
				<xf:hiddenval name="stop">1</xf:hiddenval>
			<xf:else />
				<xf:radiorow name="notify_on" value="series_part"
					label="{{ phrase('send_notifications_for') }}">

					<xf:option value="series_part">{{ phrase('xa_ams_new_articles_only') }}</xf:option>
					<xf:option value="">{{ phrase('dont_send_notifications') }}</xf:option>
				</xf:radiorow>

				<xf:checkboxrow label="{{ phrase('send_notifications_via') }}">
					<xf:option name="send_alert" value="1" selected="true">{{ phrase('alerts') }}</xf:option>
					<xf:option name="send_email" value="1">{{ phrase('emails') }}</xf:option>
				</xf:checkboxrow>
			</xf:if>
		</div>
		<xf:if is="$isWatched">
			<xf:submitrow submit="{{ phrase('unwatch') }}" rowtype="simple" icon="notificationsOff" />
		<xf:else />
			<xf:submitrow submit="{{ phrase('watch') }}" icon="notificationsOn" />
		</xf:if>
	</div>
</xf:form>]]></template>
  <template type="public" title="xa_ams_series_wrapper" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:h1 hidden="true" />

<xf:breadcrumb source="$series.getBreadcrumbs({{ false }})" />

<xf:css src="xa_ams.less" />

<xf:macro template="xa_ams_series_wrapper_macros" name="status"
	arg-series="{$series}" />

<xf:macro template="xa_ams_series_page_macros" name="series_page_options"
	arg-series="{$series}" />

<xf:macro template="xa_ams_series_wrapper_macros" name="header"
	arg-series="{$series}" />

<xf:macro template="xa_ams_series_wrapper_macros" name="tabs"
	arg-series="{$series}"
	arg-selected="{$pageSelected}" />

{$innerContent|raw}]]></template>
  <template type="public" title="xa_ams_series_wrapper_macros" version_id="2021970" version_string="2.2.19"><![CDATA[<xf:macro name="header"
	arg-series="!"
	arg-titleHtml="{{ null }}"
	arg-showMeta="{{ true }}"
	arg-metaHtml="{{ null }}">

	<xf:page option="headerHtml">
		<div class="contentRow contentRow--hideFigureNarrow">
			<xf:if is="!$series.community_series || ($series.community_series && $series.icon_date)">
				<span class="contentRow-figure">
					<xf:if is="$series.icon_date">
						<span class="contentRow-figureIcon">{{ ams_series_icon($series, 'm') }}</span>
					<xf:else />
						<xf:avatar user="{$series.User}" size="s" />
					</xf:if>
				</span>
			</xf:if>
			<div class="contentRow-main">
				<div class="p-title">
					<h1 class="p-title-value">
						{$series.title}
					</h1>
				</div>

				<div class="p-description">
					<ul class="listInline listInline--bullet">
						<li>
							<xf:if is="$series.community_series">
								<xf:fa icon="fa-users" title="{{ phrase('xa_ams_community_series')|for_attr }}" />
								<span class="u-srOnly">{{ phrase('xa_ams_community_series') }}</span>

								{{ phrase('xa_ams_community_series') }}
							<xf:else />
								<xf:fa icon="fa-user" title="{{ phrase('author')|for_attr }}" />
								<span class="u-srOnly">{{ phrase('author') }}</span>

								<xf:if is="$series.User.Profile.xa_ams_author_name">
									<xf:username user="{'user_id':{$series.User.user_id}, 'username':{$series.User.Profile.xa_ams_author_name}}" defaultname="{$series.User.Profile.xa_ams_author_name}" class="u-concealed" />
								<xf:else />
									<xf:username user="{$series.User}" defaultname="{$series.User.username}" class="u-concealed" />
								</xf:if>
							</xf:if>
						</li>
						<li>
							<xf:fa icon="fa-clock" title="{{ phrase('xa_ams_create_date')|for_attr }}" />
							<span class="u-srOnly">{{ phrase('xa_ams_create_date') }}</span>

							<a href="{{ link('ams/series', $series) }}" class="u-concealed"><xf:date time="{$series.create_date}" /></a>
						</li>
						<xf:if is="$series.last_part_date AND $series.last_part_date > $series.create_date">								
							<li>
								<xf:fa icon="fa-clock" title="{{ phrase('xa_ams_last_update')|for_attr }}" />
								<span class="u-concealed">{{ phrase('updated') }}</span>

								<a href="{{ link('ams/series', $series) }}" class="u-concealed"><xf:date time="{$series.last_part_date}" /></a>
							</li>
						</xf:if>
						<xf:if is="$series.article_count">
							<li>{{ phrase('xa_ams_articles') }}: {$series.article_count|number}</li>
						</xf:if>
						<xf:if is="$xf.options.enableTagging AND ($series.canEditTags() OR $series.tags)">
							<li>

								<xf:macro template="tag_macros" name="list"
									arg-tags="{$series.tags}"
									arg-tagList="tagList--series-{$series.series_id}"
									arg-editLink="{{ $series.canEditTags() ? link('ams/series/tags', $series) : '' }}" />
							</li>
						</xf:if>					
						<xf:if is="$series.Featured">
							<li><span class="label label--accent">{{ phrase('xa_ams_featured') }}</span></li>
						</xf:if>
					</ul>
				</div>
			</div>
		</div>
	</xf:page>
</xf:macro>

<xf:macro name="status" arg-series="!">
	<xf:if contentcheck="true">
		<dl class="blockStatus blockStatus--standalone">
			<dt>{{ phrase('status') }}</dt>
			<xf:contentcheck>
				<xf:if is="$series.series_state == 'deleted'">
					<dd class="blockStatus-message blockStatus-message--deleted">
						<xf:macro template="deletion_macros" name="notice" arg-log="{$series.DeletionLog}" />
					</dd>
				<xf:elseif is="$series.series_state == 'moderated'" />
					<dd class="blockStatus-message blockStatus-message--moderated">
						{{ phrase('awaiting_approval_before_being_displayed_publicly') }}
					</dd>
				</xf:if>
				<xf:if is="$series.warning_message">
					<dd class="blockStatus-message blockStatus-message--warning">
						{$series.warning_message}
					</dd>
				</xf:if>
				<xf:if is="$series.isIgnored()">
					<dd class="blockStatus-message blockStatus-message--ignored">
						{{ phrase('you_are_ignoring_content_by_this_member') }}
					</dd>
				</xf:if>
			</xf:contentcheck>
		</dl>
	</xf:if>
</xf:macro>

<xf:macro name="tabs" arg-series="!" arg-selected="!">
	<div class="tabs tabs--standalone">
		<div class="hScroller" data-xf-init="h-scroller">
			<span class="hScroller-scroll">
				<a class="tabs-tab {{ $selected == 'overview' ? 'is-active' : '' }}" href="{{ link('ams/series', $series) }}">{{ phrase('xa_ams_articles') }}</a>
				<a class="tabs-tab {{ $selected == 'details' ? 'is-active' : '' }}" href="{{ link('ams/series/details', $series) }}">{{ phrase('xa_ams_series_details') }}</a>
			</span>
		</div>
	</div>
</xf:macro>

<xf:macro name="action_buttons" 
	arg-series="!" 
	arg-showAddArticleButton="{{ false }}"
	arg-canInlineMod="{{ false }}">

	<xf:if is="$series.canAddArticleToSeries() && $showAddArticleButton">
		<xf:button href="{{ link('ams/series/add-article', $series) }}" overlay="true">
			{{ phrase('xa_ams_add_article_to_series') }}
		</xf:button>
	</xf:if>

	<xf:if contentcheck="true">
		<div class="buttonGroup">
		<xf:contentcheck>
			<xf:if is="$canInlineMod">
				<xf:macro template="inline_mod_macros" name="button" />
			</xf:if>

			<xf:if is="$series.canUndelete() AND $series.series_state == 'deleted'">
				<xf:button href="{{ link('ams/series/undelete', $series) }}" class="button--link" overlay="true">
					{{ phrase('undelete') }}
				</xf:button>
			</xf:if>
			<xf:if is="$series.canApproveUnapprove() AND $series.series_state == 'moderated'">
				<xf:button href="{{ link('ams/series/approve', $series, {'t': csrf_token()}) }}" class="button--link">
					{{ phrase('approve') }}
				</xf:button>
			</xf:if>

			<xf:if is="$series.canWatch()">
				<xf:button href="{{ link('ams/series/watch', $series) }}" class="button--link"
					data-xf-click="switch-overlay"
					data-sk-watch="{{ phrase('watch') }}"
					data-sk-unwatch="{{ phrase('unwatch') }}">
					<xf:if is="{$series.Watch.{$xf.visitor.user_id}}">{{ phrase('unwatch') }}<xf:else />{{ phrase('watch') }}</xf:if>
				</xf:button>
			</xf:if>
			<xf:macro template="bookmark_macros" name="button"
				arg-content="{$series}"
				arg-confirmUrl="{{ link('ams/series/bookmark', $series) }}" />
			
			<xf:if contentcheck="true">
				<div class="buttonGroup-buttonWrapper">
					<xf:button class="button--link menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true" title="{{ phrase('more_options')|for_attr }}">&#8226;&#8226;&#8226;</xf:button>
					<div class="menu" data-menu="menu" aria-hidden="true">
						<div class="menu-content">
							<h4 class="menu-header">{{ phrase('more_options') }}</h4>
							<xf:contentcheck>
								<!--[XF:series_tools_menu:top]-->
								<xf:if is="$series.canFeatureUnfeature()">
									<a href="{{ link('ams/series/quick-feature', $series) }}"
										class="menu-linkRow"
										data-xf-click="switch"
										data-menu-closer="true">

										<xf:if is="$series.Featured">
											{{ phrase('xa_ams_series_quick_unfeature') }}
										<xf:else />
											{{ phrase('xa_ams_series_quick_feature') }}
										</xf:if>
									</a>
								</xf:if>
								<xf:if is="$series.canEdit()">
									<a href="{{ link('ams/series/edit', $series) }}" class="menu-linkRow">{{ phrase('xa_ams_edit_series') }}</a>
								</xf:if>
								<xf:if is="$series.canEditIcon()">
									<a href="{{ link('ams/series/editIcon', $series) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xa_ams_edit_series_icon') }}</a>
								</xf:if>
								<xf:if is="$series.canDelete('soft')">
									<a href="{{ link('ams/series/delete', $series) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xa_ams_delete_series') }}</a>
								</xf:if>
								<xf:if is="$series.canReassign()">
									<a href="{{ link('ams/series/reassign', $series) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xa_ams_reassign_series') }}</a>
								</xf:if>
								<xf:if is="$series.canCreatePoll()">
									<a href="{{ link('ams/series/poll/create', $series) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('create_poll') }}</a>
								</xf:if>
								<xf:if is="$series.canViewModeratorLogs()">
									<a href="{{ link('ams/series/moderator-actions', $series) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('moderator_actions') }}</a>
								</xf:if>											
								<!--[XF:series_tools_menu:before_footer]-->
								<xf:if is="$series.canUseInlineModeration()">
									<div class="menu-footer"
										data-xf-init="inline-mod"
										data-type="ams_series"
										data-href="{{ link('inline-mod') }}"
										data-toggle=".js-seriesInlineModToggle">
										<xf:checkbox>
											<xf:option class="js-seriesInlineModToggle" value="{$series.series_id}">{{ phrase('select_for_moderation') }}</xf:option>
										</xf:checkbox>
									</div>
									<xf:js src="xf/inline_mod.js" min="1" />
								</xf:if>
								<!--[XF:series_tools_menu:bottom]-->
							</xf:contentcheck>
						</div>
					</div>
				</div>
			</xf:if>
		</xf:contentcheck>
		</div>
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_thread_view_type_article" version_id="2022570" version_string="2.2.25"><![CDATA[<xf:extends template="thread_view" />

<xf:extension name="content_top">
	<xf:if is="$amsArticle">
		<xf:set var="$originalH1"><xf:h1 /></xf:set>
		<xf:set var="$originalDescription"><xf:description /></xf:set>

		<xf:h1 hidden="true" />
		<xf:description></xf:description>

		<xf:css src="xa_ams.less" />
		
		<xf:macro template="xa_ams_article_wrapper_macros" name="header"
			arg-article="{$amsArticle}"
			arg-titleHtml="{$originalH1}"
			arg-metaHtml="{$originalDescription}" />
		
		<xf:macro template="xa_ams_article_wrapper_macros" name="status"
			arg-article="{$amsArticle}" />		

		<xf:macro template="xa_ams_article_wrapper_macros" name="tabs"
			arg-article="{$amsArticle}"
			arg-selected="discussion" />
	</xf:if>	
</xf:extension>]]></template>
  <template type="public" title="xa_ams_tile_view_layout.less" version_id="2022670" version_string="2.2.26"><![CDATA[.gridContainerAmsTileView .ams-tile-view
{
	.m-listPlain();
	.m-clearFix();
	display: flex;
	flex-wrap: wrap;
	margin: 3px;

	.tile-image-link
	{
		display: block;
		position: relative;
		overflow: hidden;
		background: #ccc;
		min-height: 260px;
		transition: all .5s;
		&:hover
		{
			transform: scale(1.1);
		}
		&:after
		{
			content: "";
			position: absolute;
			bottom: 0;
			width: 100%;
			height: 80%;
			background: linear-gradient(to bottom,rgba(0,0,0,0) 0,rgba(0,0,0,0.62) 50%,rgba(0,0,0,0.88) 100%);
			opacity: .92;
		}
	}

	.tile-container
	{
		flex: 1 1 33%;
		max-width: 33%;
		padding: 5px;

		@media (max-width: 1200px) { flex: 1 1 50%; max-width: 50%;}
		@media (max-width: @xf-responsiveWide) { flex: 1 1 50%; max-width: 50%;}
		@media (max-width: @xf-responsiveMedium) { flex: 1 1 100%; max-width: 100%;}
		@media (max-width: @xf-responsiveNarrow) { flex: 1 1 100%; max-width: 100%;}
		
		&.is-unread
		{
			.tile-caption .tile-item-heading
			{
				font-weight: @xf-fontWeightHeavy;
			}
		}
		&.is-mod-selected
		{
			.tile-caption
			{
				background: @xf-inlineModHighlightColor !important;
				border: 1px solid @xf-textColorMuted;

				.tile-item-heading,
				.tile-item-heading a
				{
					color: @xf-linkColor;
					text-shadow: none;		
				}
				.tile-item-location
				{
					color: @xf-textColorDimmed;
				}
				.tile-item-location a
				{
					color: @xf-linkColor;
				}				
				.listInline.listInline--bullet 
				{
					.publish-date
					{
						color: @xf-textColorMuted;
					}
					.category-title,
					.tile-username
					{
						color: @xf-linkColor;	
					}
				}
			}
		}
		&.is-moderated
		{
			.tile-caption
			{
				background: @xf-contentHighlightBg;
				border: 1px solid @xf-textColorMuted;

				.tile-item-heading,
				.tile-item-heading a
				{
					color: @xf-linkColor;
					font-style: italic;
					text-shadow: none;		
				}
				.tile-item-location
				{
					color: @xf-textColorDimmed;
				}
				.tile-item-location a
				{
					color: @xf-linkColor;
				}				
				.listInline.listInline--bullet 
				{
					.publish-date
					{
						color: @xf-textColorMuted;
					}
					.category-title,
					.tile-username
					{
						color: @xf-linkColor;	
					}
				}
			}
		}
		&.is-deleted
		{
			opacity: .7;

			.tile-caption .tile-item-heading
			{
				text-decoration: line-through;
			}
		}
	}

	.tile-item
	{
		position: relative;
		overflow: hidden;
		&.large--tile-item
		{
			.tile-image-link:after
			{
				height: 60%;
			}
		}
	}

	.tile-caption
	{
		width: 100%;
		max-width: 100%;
		position: absolute;
		padding: 16px 16px;
		bottom: 0px;
		display: block;
		&.tile-caption-small
		{
			max-width: initial;
		}
		.tile-item-heading
		{
			display: inline-block;
			padding-bottom: @xf-paddingMedium;
			font-size: @xf-fontSizeLarger;
			font-weight: @xf-fontWeightNormal;
			line-height: 1.4;
			color: #fff;
			text-shadow: 0 1px 1px rgba(0,0,0,.35);
			
			.label 
			{
    			font-weight: @xf-fontWeightNormal;
			}			
		}
		.tile-item-heading a
		{
			color: #fff;
			text-shadow: 0 1px 1px rgba(0,0,0,.35);
		}		
		h3
		{
			padding: 0;
			margin: 0;
		}
		.tile-item-rating
		{
			font-size: @xf-fontSizeSmallest;
			padding-bottom: @xf-paddingSmall;			
		}		
		.tile-item-location
		{
			color: #bbb;
			font-size: @xf-fontSizeSmallest;
			padding-bottom: @xf-paddingSmall;
			
			.tile-item-location-icon 
			{
				font-size: @xf-fontSizeSmallest;
				padding-left: @xf-paddingSmall;
			}
		}		
		.tile-item-location a
		{
			color: #fff;
		}		
		.listInline.listInline--bullet
		{
			color: #bbb;
			font-size: @xf-fontSizeSmallest;
		}
		.publish-date,
		.category-title,
		.tile-username	
		{
			color: #bbb;
			font-size: @xf-fontSizeSmallest;
		}
		.tile-item-minor
		{
			font-size: @xf-fontSizeSmallest;
			color: @xf-textColorMuted;

			.m-hiddenLinks();
		}
		.tile-item-extraInfo
		{
			.m-listPlain();
			float: right;

			> li
			{
				float: left;
				margin-left: 8px;
			}

			input[type=checkbox]
			{
				.m-checkboxAligner();
			}
		}
	}
}

@media (max-width:800px)
{
	.gridContainerAmsTileView .ams-tile-view .tile-image-link
	{
		min-height: 240px;
	}

	.gridContainerAmsTileView .ams-tile-view .tile-caption
	{
		padding: 8px;
		max-width: 100%;
		bottom: 0;
	}

	.gridContainerAmsTileView .ams-tile-view .tile-caption .tile-item-heading
	{
		font-size: @xf-fontSizeLarge;
		padding-bottom: @xf-paddingSmall;
	}
}

@media (max-width:650px)
{
	.gridContainerAmsTileView .ams-tile-view .tile_container
	{
		float: none;
		width: auto;
		padding: 0;
		margin-bottom: @xf-paddingLarge;
	}
}]]></template>
  <template type="public" title="xa_ams_watched_articles" version_id="2021770" version_string="2.2.17"><![CDATA[<xf:title page="{$page}">{{ phrase('xa_ams_watched_articles') }}</xf:title>

<xf:page option="searchConstraints" value="{{ {
	phrase('xa_ams_articles'): {'search_type': 'ams_article'}
} }}" />

<xf:if is="$articles is not empty">
	<xf:form action="{{ link('watched/ams-articles/update') }}" ajax="true" class="block" autocomplete="off">
		<div class="block-outer">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$total}"
				link="watched/ams-articles"
				wrapperclass="block-outer-main" />

			<div class="block-outer-opposite">
				<xf:button class="button--link menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true">{{ phrase('xa_ams_manage_watched_articles') }}</xf:button>
				<div class="menu" data-menu="menu" aria-hidden="true">
					<div class="menu-content">
						<h3 class="menu-header">{{ phrase('xa_ams_manage_watched_articles') }}</h3>
						<!--[XF:manage_menu:top]-->
						<a href="{{ link('watched/ams-articles/manage', null, {'state': 'email_subscribe:off'}) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('disable_email_notification') }}</a>
						<a href="{{ link('watched/ams-articles/manage', null, {'state': 'delete'}) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xa_ams_stop_watching_articles') }}</a>
						<!--[XF:manage_menu:bottom]-->
					</div>
				</div>
			</div>
		</div>

		<div class="block-container">
			<div class="block-body">
				<div class="structItemContainer structItemContainerAmsListView">
					<xf:foreach loop="$articles" value="$article">
						<xf:set var="$extra" value="{{ {$article.Watch.{$xf.visitor.user_id}.email_subscribe} ? phrase('email') : '' }}" />
						<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
							arg-article="{$article}"
							arg-chooseName="ids"
							arg-showWatched="{{ false }}"
							arg-extraInfo="{$extra}" />
					</xf:foreach>
				</div>
			</div>
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter"></span>
				<span class="block-footer-select"><xf:checkbox standalone="true"><xf:option check-all="< .block-container" label="{{ phrase('select_all') }}" /></xf:checkbox></span>
				<span class="block-footer-controls">
					<xf:select name="watch_action" class="input--inline">
						<xf:option>{{ phrase('with_selected...') }}</xf:option>
						<!--[XF:action_menu:top]-->
						<xf:option value="email_subscribe:on">{{ phrase('enable_email_notification') }}</xf:option>
						<xf:option value="email_subscribe:off">{{ phrase('disable_email_notification') }}</xf:option>
						<xf:option value="delete">{{ phrase('stop_watching') }}</xf:option>
						<!--[XF:action_menu:bottom]-->
					</xf:select>
					<xf:button type="submit">{{ phrase('go') }}</xf:button>
				</span>
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:pagenav link="watched/ams-articles" page="{$page}" perpage="{$perPage}" total="{$total}" />
		</div>
	</xf:form>
<xf:else />
	<div class="blockMessage">
		<xf:if is="$page > 1">
			{{ phrase('xa_ams_no_articles_to_display') }}
		<xf:else />
			{{ phrase('xa_ams_you_not_watching_any_articles') }}
		</xf:if>
	</div>
</xf:if>]]></template>
  <template type="public" title="xa_ams_watched_authors" version_id="2022070" version_string="2.2.20"><![CDATA[<xf:title>{{ phrase('xa_ams_watched_authors') }}</xf:title>

<xf:css src="node_list.less" />

<xf:page option="searchConstraints" value="{{ {phrase('xa_ams_articles'): {'search_type': 'ams_article'}} }}" />

<xf:if is="$watchedAuthors is not empty">
	<xf:form action="{{ link('watched/ams-authors/update') }}" ajax="true" class="block" autocomplete="off">

		<div class="block-outer"><xf:trim>
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$total}"
				link="watched/ams-authors"
				wrapperclass="block-outer-main" />
		</xf:trim></div>

		<div class="block-container">
			<div class="block-body">
				<xf:foreach loop="$watchedAuthors" key="$id" value="$author">
					<xf:set var="$authorWatch" value="{$watchedAuthors.{$author.author_id}}" />

					<xf:if is="$authorWatch">
						<xf:set var="$bonusInfo">
							<ul class="listInline listInline--bullet">
								<xf:if is="$authorWatch.notify_on == 'article'"><li>{{ phrase('xa_ams_new_articles') }}</li></xf:if>
								<xf:if is="$authorWatch.send_email"><li>{{ phrase('emails') }}</li></xf:if>
								<xf:if is="$authorWatch.send_alert"><li>{{ phrase('alerts') }}</li></xf:if>
							</ul>
						</xf:set>

						<xf:macro name="ams_author_watch_item"
							arg-author="{$author}"
							arg-chooseName="ids"
							arg-bonusInfo="{$bonusInfo}" />
					</xf:if>
				</xf:foreach>
			</div>
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter"></span>
				<span class="block-footer-select"><xf:checkbox standalone="true"><xf:option check-all="< .block-container" label="{{ phrase('select_all') }}" /></xf:checkbox></span>
				<span class="block-footer-controls">
					<xf:select name="watch_action" class="input--inline">
						<xf:option>{{ phrase('with_selected...') }}</xf:option>
						<!--[XF:action_menu:top]-->
						<xf:option value="send_email:on">{{ phrase('enable_email_notification') }}</xf:option>
						<xf:option value="send_email:off">{{ phrase('disable_email_notification') }}</xf:option>
						<xf:option value="send_alert:on">{{ phrase('enable_alerts') }}</xf:option>
						<xf:option value="send_alert:off">{{ phrase('disable_alerts') }}</xf:option>
						<xf:option value="delete">{{ phrase('stop_watching') }}</xf:option>
						<!--[XF:action_menu:bottom]-->
					</xf:select>
					<xf:button type="submit">{{ phrase('go') }}</xf:button>
				</span>
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:pagenav link="watched/ams-authors" page="{$page}" perpage="{$perPage}" total="{$total}" />
		</div>
	</xf:form>
<xf:else />
	<div class="blockMessage">{{ phrase('xa_ams_you_not_watching_any_authors') }}</div>
</xf:if>


<xf:macro name="ams_author_watch_item"
	arg-author="!"
	arg-chooseName=""
	arg-bonusInfo="">
	
	<div class="node node--depth2 node--amsAuthor node--amsAuthor{$author.author_id}">
		<div class="node-body">
			<div class="node-main js-nodeMain">
				<xf:if is="$chooseName">
					<xf:checkbox standalone="true">
						<xf:option labelclass="u-pullRight" class="js-chooseItem" name="{$chooseName}[]" value="{$author.author_id}" />
					</xf:checkbox>
				</xf:if>

				<xf:set var="$descriptionDisplay" value="{{ property('nodeListDescriptionDisplay') }}" />

				<h3 class="node-title">
					<a href="{{ link('ams/authors', $author.Author) }}" data-xf-init="{{ $descriptionDisplay == 'tooltip' ? 'element-tooltip' : '' }}" data-shortcut="node-description">{$author.Author.username}</a>
				</h3>

				<div class="node-meta">
					<div class="node-statsMeta">
						<dl class="pairs pairs--inline">
							<dt>{{ phrase('xa_ams_published_articles') }}</dt>
							<dd>{$author.Author.xa_ams_article_count|number}</dd>
						</dl>
					</div>
				</div>

				<xf:if is="$bonusInfo is not empty">
					<div class="node-bonus">{$bonusInfo}</div>
				</xf:if>
			</div>

			<div class="node-stats node-stats--single">
				<dl class="pairs pairs--rows">
					<dt>{{ phrase('xa_ams_published_articles') }}</dt>
					<dd>{$author.Author.xa_ams_article_count|number}</dd>
				</dl>
			</div>

			<div class="node-extra">
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_watched_categories" version_id="2021770" version_string="2.2.17"><![CDATA[<xf:title>{{ phrase('watched_categories') }}</xf:title>

<xf:page option="searchConstraints" value="{{ {
	phrase('xa_ams_articles'): {'search_type': 'ams_article'}
} }}" />

<xf:css src="node_list.less" />

<xf:if is="$watchedCategories is not empty">
	<xf:form action="{{ link('watched/ams-categories/update') }}" ajax="true" class="block" autocomplete="off">
		<div class="block-container">
			<div class="block-body">
				<xf:foreach loop="$categoryTree.getFlattened()" key="$id" value="$treeEntry">
					<xf:set var="$category" value="{$treeEntry.record}" />
					<xf:set var="$categoryWatch" value="{$watchedCategories.{$category.category_id}}" />
					<xf:if is="$categoryWatch">
						<xf:set var="$bonusInfo">
							<ul class="listInline listInline--bullet">
								<xf:if is="$categoryWatch.notify_on == 'article'"><li>{{ phrase('xa_ams_new_articles') }}</li></xf:if>
								<xf:if is="$categoryWatch.send_email"><li>{{ phrase('emails') }}</li></xf:if>
								<xf:if is="$categoryWatch.send_alert"><li>{{ phrase('alerts') }}</li></xf:if>
								<xf:if is="$categoryWatch.include_children"><li>{{ phrase('sub_categories') }}</li></xf:if>
							</ul>
						</xf:set>
						<xf:macro template="xa_ams_category_list_macros" name="category"
							arg-category="{$category}"
							arg-extras="{$categoryExtras.{$category.category_id}}"
							arg-children="{$categoryTree.{$id}.children}"
							arg-childExtras="{$categoryExtras}"
							arg-chooseName="ids"
							arg-bonusInfo="{$bonusInfo}" />
					</xf:if>
				</xf:foreach>
			</div>
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter"></span>
				<span class="block-footer-select"><xf:checkbox standalone="true"><xf:option check-all="< .block-container" label="{{ phrase('select_all') }}" /></xf:checkbox></span>
				<span class="block-footer-controls">
					<xf:select name="watch_action" class="input--inline">
						<xf:option>{{ phrase('with_selected...') }}</xf:option>
						<!--[XF:action_menu:top]-->
						<xf:option value="send_email:on">{{ phrase('enable_email_notification') }}</xf:option>
						<xf:option value="send_email:off">{{ phrase('disable_email_notification') }}</xf:option>
						<xf:option value="send_alert:on">{{ phrase('enable_alerts') }}</xf:option>
						<xf:option value="send_alert:off">{{ phrase('disable_alerts') }}</xf:option>
						<xf:option value="include_children:on">{{ phrase('enable_sub_category_notifications') }}</xf:option>
						<xf:option value="include_children:off">{{ phrase('disable_sub_category_notifications') }}</xf:option>
						<xf:option value="delete">{{ phrase('stop_watching') }}</xf:option>
						<!--[XF:action_menu:bottom]-->
					</xf:select>
					<xf:button type="submit">{{ phrase('go') }}</xf:button>
				</span>
			</div>
		</div>
	</xf:form>
<xf:else />
	<div class="blockMessage">{{ phrase('you_not_watching_any_categories') }}</div>
</xf:if>]]></template>
  <template type="public" title="xa_ams_watched_series" version_id="2021970" version_string="2.2.19"><![CDATA[<xf:title>{{ phrase('xa_ams_watched_series') }}</xf:title>

<xf:page option="searchConstraints" value="{{ {
	phrase('xa_ams_articles'): {'search_type': 'ams_article'}
} }}" />

<xf:css src="node_list.less" />

<xf:if is="$watchedSeries is not empty">
	<xf:form action="{{ link('watched/ams-series/update') }}" ajax="true" class="block" autocomplete="off">
		<div class="block-outer"><xf:trim>
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$total}"
				link="watched/ams-series"
				wrapperclass="block-outer-main" />
		</xf:trim></div>

		<div class="block-container">
			<div class="block-body">
				<xf:foreach loop="$series" key="$id" value="$seriesItem">

					<xf:set var="$seriesWatch" value="{$watchedSeries.{$seriesItem.series_id}}" />

					<xf:set var="$bonusInfo">
						<ul class="listInline listInline--bullet">
							<xf:if is="$seriesWatch.notify_on == 'series_part'"><li>{{ phrase('xa_ams_new_articles') }}</li></xf:if>
							<xf:if is="$seriesWatch.send_email"><li>{{ phrase('emails') }}</li></xf:if>
							<xf:if is="$seriesWatch.send_alert"><li>{{ phrase('alerts') }}</li></xf:if>
						</ul>
					</xf:set>
					<xf:macro template="xa_ams_series_list_macros" name="series_watch_item"
						arg-series="{$seriesItem}"
						arg-chooseName="ids"
						arg-bonusInfo="{$bonusInfo}" />

				</xf:foreach>
			</div>
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter"></span>
				<span class="block-footer-select"><xf:checkbox standalone="true"><xf:option check-all="< .block-container" label="{{ phrase('select_all') }}" /></xf:checkbox></span>
				<span class="block-footer-controls">
					<xf:select name="watch_action" class="input--inline">
						<xf:option>{{ phrase('with_selected...') }}</xf:option>
						<!--[XF:action_menu:top]-->
						<xf:option value="send_email:on">{{ phrase('enable_email_notification') }}</xf:option>
						<xf:option value="send_email:off">{{ phrase('disable_email_notification') }}</xf:option>
						<xf:option value="send_alert:on">{{ phrase('enable_alerts') }}</xf:option>
						<xf:option value="send_alert:off">{{ phrase('disable_alerts') }}</xf:option>
						<xf:option value="delete">{{ phrase('stop_watching') }}</xf:option>
						<!--[XF:action_menu:bottom]-->
					</xf:select>
					<xf:button type="submit">{{ phrase('go') }}</xf:button>
				</span>
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:pagenav link="watched/ams-series" page="{$page}" perpage="{$perPage}" total="{$total}" />
		</div>
	</xf:form>
<xf:else />
	<div class="blockMessage">{{ phrase('xa_ams_you_not_watching_any_series') }}</div>
</xf:if>]]></template>
  <template type="public" title="xa_ams_whats_new_article_comments" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:title page="{$page}">{{ phrase('xa_ams_new_article_comments') }}</xf:title>

<xf:wrap template="whats_new_wrapper">
	<xf:set var="$pageSelected">ams_new_comment</xf:set>
</xf:wrap>

<div class="block">
	<xf:if is="$findNew.result_count">
		<div class="block-outer"><xf:trim>

			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$findNew.result_count}"
				link="whats-new/ams-comments" data="{$findNew}"
				wrapperclass="block-outer-main" />

			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
						<xf:contentcheck>
							<xf:macro name="buttons"
								arg-findNew="{$findNew}"
								arg-canInlineMod="{$canInlineMod}" />
						</xf:contentcheck>
					</div>
				</div>
			</xf:if>

		</xf:trim></div>
	</xf:if>

	<div class="block-container">
		<xf:macro name="filter_bar"
			arg-findNew="{$findNew}"
			arg-rerunRoute="whats-new/ams-comments"
			arg-rerunData="{$findNew}"
			arg-filterRoute="whats-new/ams-comments" />

		<xf:macro name="results"
			arg-findNew="{$findNew}"
			arg-items="{$items}"
			arg-latestRoute="whats-new/ams-comments" />
	</div>

	<xf:if is="$findNew.result_count">
		<div class="block-outer block-outer--after">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$findNew.result_count}"
				link="whats-new/ams-comments" data="{$findNew}"
				wrapperclass="block-outer-main" />
			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
	</xf:if>
</div>

<xf:macro name="buttons"
	arg-findNew="!"
	arg-canInlineMod="{{ false }}">

	<xf:if is="$canInlineMod">
		<xf:macro template="inline_mod_macros" name="button" />
	</xf:if>
</xf:macro>

<xf:macro name="results" arg-findNew="!" arg-items="!" arg-latestRoute="!">
	<xf:if is="$findNew.result_count">
		<div class="structItemContainer">
			<xf:foreach loop="$items" value="$item">
				<xf:macro template="xa_ams_article_list_macros" name="article_list_item_struct_item"
					arg-item="{$item}" />
			</xf:foreach>
		</div>
	<xf:else />
		<div class="block-row">
			<xf:if is="$xf.visitor.user_id AND ($findNew.filters.unread AND count($findNew.filters) == 1)">
				{{ phrase('xa_ams_you_have_no_unread_comments', {'link': link($latestRoute, null, {'skip': 1})}) }}
			<xf:else />
				{{ phrase('no_results_found') }}
			</xf:if>
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="filter_bar"
	arg-findNew="!"
	arg-rerunRoute="!"
	arg-rerunData="{{ null }}"
	arg-rerunQuery="{{ [] }}"
	arg-filterRoute="!">

	<xf:if is="$xf.visitor.user_id">
		<div class="block-filterBar">
			<div class="filterBar">
				<xf:if contentcheck="true">
					<ul class="filterBar-filters">
						<xf:contentcheck>
							<!--[XF:filters:top]-->
							<xf:if is="$findNew.filters.unread">
								<li><a href="{{ link($rerunRoute, $rerunData, $rerunQuery + {'remove': 'unread'}) }}"
									class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
									<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
									{{ phrase('filter_unread') }}</a></li>
							</xf:if>
							<!--[XF:filters:bottom]-->
						</xf:contentcheck>
					</ul>
				</xf:if>

				<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
				<xf:macro name="filter_menu" arg-findNew="{$findNew}" arg-submitRoute="{$filterRoute}" />
			</div>
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="filter_menu" arg-findNew="!" arg-submitRoute="!">
	<div class="menu" data-menu="menu" aria-hidden="true">
		<div class="menu-content">
			<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
			<xf:form action="{{ link($submitRoute) }}">
				<div class="menu-row">
					<xf:checkbox>
						<xf:option name="unread" selected="{$findNew.filters.unread}">{{ phrase('xa_ams_unread_comments') }}</xf:option>
						<!--[XF:filter_menu:filters_extra]-->
					</xf:checkbox>
				</div>
				<!--[XF:filter_menu:below_filters]-->

				<xf:macro template="filter_macros" name="find_new_filter_footer" />
			</xf:form>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_whats_new_articles" version_id="2020770" version_string="2.2.7"><![CDATA[<xf:title page="{$page}">{{ phrase('xa_ams_new_articles') }}</xf:title>

<xf:wrap template="whats_new_wrapper">
	<xf:set var="$pageSelected">ams_new_article</xf:set>
</xf:wrap>

<xf:pageaction if="$xf.visitor.canAddAmsArticle()">
	<xf:button href="{{ link('ams/add') }}" class="button--cta" icon="write" overlay="true">{{ phrase('xa_ams_post_article...') }}</xf:button>
</xf:pageaction>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="ams_article" data-href="{{ link('inline-mod') }}">
	<xf:if is="$findNew.result_count">
		<div class="block-outer">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$findNew.result_count}"
				link="whats-new/ams-articles" data="{$findNew}"
				wrapperclass="block-outer-main" />

			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
						<xf:contentcheck>
							<xf:macro name="buttons"
								arg-findNew="{$findNew}"
								arg-canInlineMod="{$canInlineMod}" />
						</xf:contentcheck>
					</div>
				</div>
			</xf:if>
		</div>
	</xf:if>

	<div class="block-container">
		<xf:macro name="filter_bar"
			arg-findNew="{$findNew}"
			arg-rerunRoute="whats-new/ams-articles"
			arg-rerunData="{$findNew}"
			arg-filterRoute="whats-new/ams-articles" />

		<xf:macro name="results"
			arg-findNew="{$findNew}"
			arg-articleItems="{$articles}"
			arg-latestRoute="whats-new/ams-articles" />
	</div>

	<xf:if is="$findNew.result_count">
		<div class="block-outer block-outer--after">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$findNew.result_count}"
				link="whats-new/ams-articles" data="{$findNew}"
				wrapperclass="block-outer-main" />
			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
	</xf:if>
</div>

<xf:macro name="buttons"
	arg-findNew="!"
	arg-canInlineMod="{{ false }}">

	<xf:if is="$canInlineMod">
		<xf:macro template="inline_mod_macros" name="button" />
	</xf:if>
	<xf:if is="$xf.visitor.user_id">
		<xf:button href="{{ link('ams/mark-read', null, {'date': $findNew.cache_date}) }}"
			class="button--link" overlay="true">
			{{ phrase('xa_ams_mark_articles_read') }}
		</xf:button>
	</xf:if>
</xf:macro>

<xf:macro name="results" arg-findNew="!" arg-articleItems="!" arg-latestRoute="!">
	<xf:if is="$findNew.result_count">
		<div class="structItemContainer structItemContainerAmsListView">
			<xf:foreach loop="$articleItems" value="$article">
				<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
					arg-article="{$article}" />
			</xf:foreach>
		</div>
	<xf:else />
		<div class="block-row">
			<xf:if is="$xf.visitor.user_id AND ($findNew.filters.unread AND count($findNew.filters) == 1)">
				{{ phrase('xa_ams_you_have_no_unread_articles', {'link': link($latestRoute, null, {'skip': 1})}) }}
			<xf:else />
				{{ phrase('no_results_found') }}
			</xf:if>
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="filter_bar"
	arg-findNew="!"
	arg-rerunRoute="!"
	arg-rerunData="{{ null }}"
	arg-rerunQuery="{{ [] }}"
	arg-filterRoute="!">

	<xf:if is="$xf.visitor.user_id">
		<div class="block-filterBar">
			<div class="filterBar">
				<xf:if contentcheck="true">
					<ul class="filterBar-filters">
						<xf:contentcheck>
							<!--[XF:filters:top]-->
							<xf:if is="$findNew.filters.unread">
								<li><a href="{{ link($rerunRoute, $rerunData, $rerunQuery + {'remove': 'unread'}) }}"
									class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
									<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
									{{ phrase('filter_unread') }}</a></li>
							</xf:if>
							<xf:if is="$findNew.filters.watched">
								<li><a href="{{ link($rerunRoute, $rerunData, $rerunQuery + {'remove': 'watched'}) }}"
									class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
									<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
									{{ phrase('filter_watched') }}</a></li>
							</xf:if>
							<xf:if is="$findNew.filters.own">
								<li><a href="{{ link($rerunRoute, $rerunData, $rerunQuery + {'remove': 'own'}) }}"
									class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
									<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
									{{ phrase('xa_ams_filter_own') }}</a></li>
							</xf:if>
							<!--[XF:filters:bottom]-->
						</xf:contentcheck>
					</ul>
				</xf:if>

				<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
				<xf:macro name="filter_menu" arg-findNew="{$findNew}" arg-submitRoute="{$filterRoute}" />
			</div>
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="filter_menu" arg-findNew="!" arg-submitRoute="!">
	<div class="menu" data-menu="menu" aria-hidden="true">
		<div class="menu-content">
			<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
			<xf:form action="{{ link($submitRoute) }}">
				<div class="menu-row">
					<xf:checkbox>
						<xf:option name="unread" selected="{$findNew.filters.unread}">{{ phrase('xa_ams_unread_articles') }}</xf:option>
						<xf:option name="watched" selected="{$findNew.filters.watched}">{{ phrase('watched_content') }}</xf:option>
						<xf:option name="own" selected="{$findNew.filters.own}">{{ phrase('xa_ams_your_articles') }}</xf:option>
						<!--[XF:filter_menu:filters_extra]-->
					</xf:checkbox>
				</div>
				<!--[XF:filter_menu:below_filters]-->

				<xf:macro template="filter_macros" name="find_new_filter_footer" />
			</xf:form>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_widget_article_page_poll" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:macro template="poll_macros" name="poll_block" arg-poll="{$poll}" arg-simpleDisplay="{{ true }}" arg-forceTitle="{$title}" />]]></template>
  <template type="public" title="xa_ams_widget_article_poll" version_id="2000170" version_string="2.0.1"><![CDATA[<xf:macro template="poll_macros" name="poll_block" arg-poll="{$poll}" arg-simpleDisplay="{{ true }}" arg-forceTitle="{$title}" />]]></template>
  <template type="public" title="xa_ams_widget_articles_macros" version_id="2022670" version_string="2.2.26"><![CDATA[// THESE ARE ONLY USED FOR WIDGETS //

<xf:macro name="articles_grid" 
	arg-articles="!" 
	arg-articlesCount="!" 
	arg-viewAllLink="!">

	<xf:if is="$articles is not empty">
		<xf:css src="carousel.less" />
		<xf:css src="xa_ams.less" />
		<xf:css src="xa_ams_featured_grid.less" />

		<xf:set var="$extras" value="{{ property('xaAmsArticlesGridBlockElements') }}" />

		<div class="carousel carousel--withFooter carousel--amsFeaturedArticles">		
			<ul class="ams-featured-grid">
				<xf:foreach loop="$articles" value="$article" i="$i">
					<xf:if is="{$i} == 1">
						<li class="first">
							<xf:if is="{$articlesCount} < 3">
								<div class="item medium-item {{ ($article.isUnread() AND !$forceRead) ? ' is-unread' : '' }}">
									<xf:macro name="article_cover_image" 
										arg-article="{$article}" 
										arg-extras="{$extras}" 
										arg-blockType="articles_grid" />

									<xf:macro name="article_caption" 
										arg-article="{$article}" 
										arg-extras="{$extras}" 
										arg-extraHeadingClass="" 
										arg-blockType="articles_grid" />
								</div>
							<xf:else />
								<div class="item large-item {{ ($article.isUnread() AND !$forceRead) ? ' is-unread' : '' }}">
									<xf:macro name="article_cover_image" 
										arg-article="{$article}" 
										arg-extras="{$extras}" 
										arg-blockType="articles_grid" />

									<xf:macro name="article_caption" 
										arg-article="{$article}" 
										arg-extras="{$extras}" 
										arg-extraHeadingClass="" 
										arg-blockType="articles_grid" />
								</div>
							</xf:if>
						</li>
					</xf:if>

					<xf:if is="{$i} == 2">
						<li class="second">
							<div class="item medium-item {{ ($article.isUnread() AND !$forceRead) ? ' is-unread' : '' }}">
								<xf:macro name="article_cover_image" 
									arg-article="{$article}" 
									arg-extras="{$extras}" 
									arg-blockType="articles_grid" />

								<xf:macro name="article_caption" 
									arg-article="{$article}" 
									arg-extras="{$extras}" 
									arg-extraHeadingClass="heading-small" 
									arg-blockType="articles_grid" />
							</div>
						</li>
					</xf:if>

					<xf:if is="{$i} == 3">
						<li class="second">
							<div class="item medium-item-2 {{ ($article.isUnread() AND !$forceRead) ? ' is-unread' : '' }}">
								<xf:macro name="article_cover_image" 
									arg-article="{$article}" 
									arg-extras="{$extras}" 
									arg-blockType="articles_grid" />

								<xf:macro name="article_caption" 
									arg-article="{$article}" 
									arg-extras="{$extras}" 
									arg-extraHeadingClass="heading-small" 
									arg-blockType="articles_grid" />
							</div>
						</li>
					</xf:if>

				</xf:foreach>
			</ul>

			<xf:macro name="footer" 
				arg-viewAllLink="{$viewAllLink}" />
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="articles_carousel" 
	arg-articles="!" 
	arg-viewAllLink="!">

	<xf:if is="$articles is not empty">
		<xf:css src="carousel.less" />
		<xf:css src="lightslider.less" />
		<xf:css src="xa_ams.less" />
		
		<xf:js prod="xf/carousel-compiled.js" dev="vendor/lightslider/lightslider.min.js, xf/carousel.js" />

		<xf:set var="$extras" value="{{ property('xaAmsArticlesCarouselElements') }}" />
		<xf:set var="$showType" value="{{ property('xaAmsArticlesCarouselShowType') }}" />

		<div class="carousel carousel--withFooter carousel--amsFeaturedArticles">
			<ul class="carousel-body {{ $showType == 'show2' ? 'carousel-body--show2' : 'carousel-body--show1' }}" data-xf-init="carousel">
				<xf:foreach loop="$articles" value="$article">
					<li>
						<div class="carousel-item">
							<div class="contentRow">
								<div class="contentRow-main">
									<xf:if is="(!$category OR $category.hasChildren()) && $extras.category">
										<div class="contentRow-amsCategory">
											<a href="{{ link('ams/categories', $article.Category) }}">{$article.Category.title}</a>
										</div>
									</xf:if>

									<xf:macro name="article_cover_image" 
										arg-article="{$article}" 
										arg-extras="{$extras}" 
										arg-blockType="articles_carousel" />
									
									<h4 class="contentRow-title"><a href="{{ link('ams', $article) }}">{{ prefix('ams_article', $article) }}{$article.title}</a></h4>

									<xf:macro name="article_location" 
										arg-article="{$article}" 
										arg-extras="{$extras}" 
										arg-blockType="articles_carousel" />

									<xf:if is="$extras.preview_snippet">
										<div class="contentRow-lesser">
											{{ snippet($article.message, 300, {'stripQuote': true}) }}
										</div>
									</xf:if>

									<xf:if is="$extras.custom_fields">
										<xf:set var="$amsCustomFieldGroupNames" value="{{ ['header','above_article','below_article','new_tab','sidebar','self_place'] }}" />
										<xf:if contentcheck="true">
											<div class="contentRow-lesser contentRow-articleCustomFields">
												<xf:contentcheck>
													<xf:foreach loop="$amsCustomFieldGroupNames" value="$amsCustomFieldGroupName">
														<xf:macro template="custom_fields_macros" name="custom_fields_view"
															arg-type="ams_articles"
															arg-group="{$amsCustomFieldGroupName}"
															arg-set="{$article.custom_fields}"
															arg-onlyInclude="{$article.Category.field_cache}"
															arg-additionalFilters="{{ ['display_on_list'] }}"
															arg-wrapperClass="carouselLayout-fields carouselLayout-fields--before" 
															arg-valueClass="pairs pairs--columns pairs--fixedSmall" />
													</xf:foreach>
												</xf:contentcheck>
											</div>
										</xf:if>
									</xf:if>

									<div class="contentRow-minor contentRow-minor--smaller">
										<ul class="listInline listInline--bullet">
											<xf:if is="$article.User.Profile.xa_ams_author_name">
												<li>{$article.User.Profile.xa_ams_author_name}</li>
											<xf:else />
												<li>{{ $article.User.username ?: $article.username }}</li>
											</xf:if>
											<li><a href="{{ link('ams', $article) }}" rel="nofollow" class="u-concealed"><xf:date time="{$article.publish_date}" /></a></li>
											<xf:if is="$article.last_update && $article.last_update > $article.publish_date">
												<li>{{ phrase('updated:') }} <xf:date time="{$article.last_update}" /></li>
											</xf:if>
											<xf:if is="$article.article_read_time && $extras.article_read_time">
												<li>{{ phrase('xa_ams_x_min_read', {'minutes': $article.article_read_time}) }}</li>
											</xf:if>
											<xf:if is="$article.author_rating && $article.Category.allow_author_rating && $extras.author_rating">
												<li>
													<xf:macro template="rating_macros" name="stars"
														arg-rating="{$article.author_rating}" 
														arg-class="ratingStars--amsAuthorRating" />
												</li>
											</xf:if>
											<xf:if is="$article.rating_avg && $article.rating_count && $article.Category.allow_ratings && $extras.rating_avg">
												<li>
													<xf:macro template="rating_macros" name="stars"
														arg-rating="{$article.rating_avg}" />
												</li>
											</xf:if>
											<xf:if is="$article.view_count && $extras.view_count">
												<li>{{ phrase('views') }}: {$article.view_count|number_short}</li>
											</xf:if>
											<xf:if is="$article.reaction_score && $extras.reaction_score">
												<li>{{ phrase('reaction_score') }}: {$article.reaction_score|number_short}</li>
											</xf:if>
											<xf:if is="$article.comment_count && $extras.comment_count">
												<li><a href="{{ link('ams', $article) }}#comments" class="u-concealed">{{ phrase('comments') }}: {$article.comment_count|number_short}</a></li>
											</xf:if>
											<xf:if is="$article.review_count && $extras.review_count">
												<li><a href="{{ link('ams/reviews', $article) }}" class="u-concealed">{{ phrase('xa_ams_reviews') }}: {$article.review_count|number_short}</a></li>
											</xf:if>
											<xf:if is="$extras.share_this_article">
												<li class="u-flexStretch"><a href="{{ link('ams', $article) }}"
													class="u-muted"
													data-xf-init="share-tooltip"
													data-href="{{ link('ams/share', $article) }}"
													aria-label="{{ phrase('share')|for_attr }}"
													rel="nofollow">
													<xf:fa icon="fa-share-alt"/>
												</a></li>
											</xf:if>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</li>
				</xf:foreach>
			</ul>

			<xf:macro name="footer" 
				arg-viewAllLink="{$viewAllLink}" />
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="articles_carousel_simple" 
	arg-articles="!" 
	arg-viewAllLink="!" 
	arg-isFeaturedArticles="{{ false }}">

	<xf:if is="$articles is not empty">
		<xf:css src="carousel.less" />
		<xf:css src="lightslider.less" />
		<xf:css src="xa_ams.less" />

		<xf:js prod="xf/carousel-compiled.js" dev="vendor/lightslider/lightslider.min.js, xf/carousel.js" />

		<xf:set var="$extras" value="{{ property('xaAmsArticlesCarouselSimpleElements') }}" />

		<div class="carousel carousel--withFooter carousel--amsFeaturedArticles carousel--amsFeaturedArticlesSimple">
			<ul class="carousel-body carousel-body--show1" data-xf-init="carousel">
				<xf:foreach loop="$articles" value="$article">
					<li>
						<div class="carousel-item">
							<div class="contentRow">
								<div class="contentRow-main">
									<xf:if is="$extras.cover_image">
										<xf:if is="$article.CoverImage && $xf.visitor.hasAmsArticlePermission('viewArticleAttach')">
											<div class="contentRow-figure">
												<a href="{{ link('ams', $article) }}">
													<img src="{{ link('canonical:ams/cover-image', $article) }}" />
												</a>                                            
											</div>
										<xf:elseif is="$article.Category.content_image_url" />
											<div class="contentRow-figure">
												<a href="{{ link('ams', $article) }}">
													{{ ams_category_icon($article) }}
												</a>                                            
											</div>
										</xf:if>
									</xf:if>

									<xf:if is="(!$category OR $category.hasChildren()) && $extras.category">
										<div class="contentRow-amsCategory">
											<a href="{{ link('ams/categories', $article.Category) }}">{$article.Category.title}</a>
										</div>
									</xf:if>

									<xf:if is="$extras.title">
										<h4 class="contentRow-title">
											<xf:if is="$article.prefix_id">
												{{ prefix('ams_article', $article, 'html', '') }}
											</xf:if>
											<a href="{{ link('ams', $article) }}">{$article.title}</a>
										</h4>
									</xf:if>

									<xf:macro name="article_location" 
										arg-article="{$article}" 
										arg-extras="{$extras}" 
										arg-blockType="articles_carousel" />


									<xf:if is="$article.author_rating && $article.Category.allow_author_rating && $extras.author_rating">
										<div class="contentRow-lesser contentRow-minor contentRow-minor--smaller">
											<xf:macro template="rating_macros" name="stars"
												arg-rating="{$article.author_rating}" 
												arg-class="ratingStars--amsAuthorRating" />
										</div>
									</xf:if>

									<xf:if is="$article.rating_avg && $article.rating_count && $article.Category.allow_ratings && $extras.rating_avg">
										<div class="contentRow-lesser contentRow-minor contentRow-minor--smaller">
											<xf:macro template="rating_macros" name="stars"
												arg-rating="{$article.rating_avg}" />
										</div>
									</xf:if>

									<xf:if is="$extras.preview_snippet">
										<div class="contentRow-lesser">
											<xf:if is="$article.description">
												{{ snippet($article.description, 75, {'stripQuote': true}) }}
											<xf:else />
												{{ snippet($article.message, 75, {'stripQuote': true}) }}
											</xf:if>
										</div>
									</xf:if>

									<xf:if contentcheck="true">
										<div class="contentRow-minor contentRow-minor--smaller">
											<ul class="listInline listInline--bullet">
												<xf:contentcheck>
													<xf:if is="$extras.author">
														<xf:if is="$article.User.Profile.xa_ams_author_name">
															<li>{$article.User.Profile.xa_ams_author_name}</li>
														<xf:else />
															<li>{{ $article.User.username ?: $article.username }}</li>
														</xf:if>
													</xf:if>
													<xf:if is="$extras.publish_date">
														<li><a href="{{ link('ams', $article) }}" rel="nofollow" class="u-concealed"><xf:date time="{$article.publish_date}" /></a></li>

														<xf:if is="$article.last_update && $article.last_update > $article.publish_date">
															<li>{{ phrase('updated:') }} <xf:date time="{$article.last_update}" /></li>
														</xf:if>
													</xf:if>
													<xf:if is="$article.article_read_time && $extras.article_read_time">
														<li>{{ phrase('xa_ams_x_min_read', {'minutes': $article.article_read_time}) }}</li>
													</xf:if>
													<xf:if is="$article.view_count && $extras.view_count">
														<li>{{ phrase('views') }}: {$article.view_count|number_short}</li>
													</xf:if>
													<xf:if is="$article.reaction_score && $extras.reaction_score">
														<li>{{ phrase('reaction_score') }}: {$article.reaction_score|number_short}</li>
													</xf:if>
													<xf:if is="$article.comment_count && $extras.comment_count">
														<li><a href="{{ link('ams', $article) }}#comments" class="u-concealed">{{ phrase('comments') }}: {$article.comment_count|number_short}</a></li>
													</xf:if>
													<xf:if is="$article.review_count && $extras.review_count">
														<li><a href="{{ link('ams/reviews', $article) }}" class="u-concealed">{{ phrase('xa_ams_reviews') }}: {$article.review_count|number_short}</a></li>
													</xf:if>
													<xf:if is="$extras.share_this_article">
														<li class="u-flexStretch"><a href="{{ link('ams', $article) }}"
															class="u-muted"
															data-xf-init="share-tooltip"
															data-href="{{ link('ams/share', $article) }}"
															aria-label="{{ phrase('share')|for_attr }}"
															rel="nofollow">
															<xf:fa icon="fa-share-alt"/>
														</a></li>
													</xf:if>
												</xf:contentcheck>
											</ul>
										</div>
									</xf:if>
								</div>
							</div>
						</div>
					</li>
				</xf:foreach>
			</ul>

			<div class="carousel-footer">
				<xf:if is="$isFeaturedArticles">
					<a href="{$viewAllLink}">{{ phrase('xa_ams_view_all_featured_articles') }}</a>
				<xf:else />
					<a href="{$viewAllLink}">{{ phrase('xa_ams_view_more_articles') }}</a>
				</xf:if>
			</div>
		</div>
	</xf:if>
</xf:macro>


<xf:macro name="article_cover_image" 
	arg-article="!" 
	arg-extras="" 
	arg-blockType="!">

	<xf:if is="$blockType == 'articles_grid'">
		<xf:if is="$article.CoverImage">
			<a class="image-link" style="background: url({{ link('ams/cover-image', $article) }}) no-repeat center center transparent; background-size: cover;" href="{{ link('ams', $article) }}"></a>
		<xf:elseif is="$article.Category.content_image_url" />
			<a class="image-link" style="background: url({{ base_url({$article.Category.content_image_url}) }}) no-repeat center center transparent; background-size: cover;" href="{{ link('ams', $article) }}"></a>
		<xf:else />
			<a class="image-link" style="background: #185886; background-size: cover;" href="{{ link('ams', $article) }}"></a>
		</xf:if>
	<xf:elseif is="$blockType == 'articles_carousel'" />
		<xf:if is="$article.CoverImage">
			<div class="contentRow-figure">
				<a href="{{ link('ams', $article) }}">
					{{ ams_article_thumbnail($article) }}
				</a>
			</div>
		<xf:elseif is="$article.SeriesPart.Series && $article.SeriesPart.Series.icon_date" />
			<div class="contentRow-figure">
				{{ ams_series_icon($article.SeriesPart.Series, 's', link('ams', $article)) }}
			</div>
		<xf:elseif is="$article.Category.content_image_url" />
			<div class="contentRow-figure">
				<a href="{{ link('ams', $article) }}">
					{{ ams_category_icon($article) }}
				</a>
			</div>
		</xf:if>
	</xf:if>
</xf:macro>

<xf:macro name="article_caption" 
	arg-article="!" 
	arg-extras="!" 
	arg-extraHeadingClass="" 
	arg-blockType="!">

	<div class="caption">
		<xf:macro name="article_heading" 
			arg-article="{$article}" 
			arg-extras="{$extras}" 
			arg-extraHeadingClass="{$extraHeadingClass}" />

		<xf:macro name="article_ratings" 
			arg-article="{$article}" 
			arg-extras="{$extras}" />

		<xf:macro name="article_location" 
			arg-article="{$article}" 
			arg-extras="{$extras}" 
			arg-blockType="{$blockType}" />

		<xf:macro name="article_meta" 
			arg-article="{$article}" 
			arg-extras="{$extras}" />
	</div>
</xf:macro>

<xf:macro name="article_heading" 
	arg-article="!" 
	arg-extras="" 
	arg-extraHeadingClass="">

	<h3>
		<span class="item-heading {{ $extraHeadingClass ?: '' }}">
			<a href="{{ link('ams', $article) }}">{{ prefix('ams_article', $article) }}{$article.title}</a>
		</span>		
	</h3>
</xf:macro>

<xf:macro name="article_ratings" 
	arg-article="!" 
	arg-extras="!">

 	<xf:if is="$extras.author_rating || $extras.rating_avg"> 
		<ul class="listInline listInline--bullet item-rating">
			<xf:if is="$extras.author_rating && $article.author_rating && $article.Category.allow_author_rating">
				<li>
					<xf:macro template="rating_macros" name="stars"
						arg-rating="{$article.author_rating}"
						arg-class="ratingStars--smaller ratingStars--amsAuthorRating" />
				</li>
			</xf:if>

			<xf:if is="$extras.rating_avg && $article.rating_avg AND $article.review_count">
				<li>
					<xf:macro template="rating_macros" name="stars"
						arg-rating="{$article.rating_avg}"
						arg-class="ratingStars--smaller" />
				</li>
			</xf:if>
		</ul>
	</xf:if>
</xf:macro>

<xf:macro name="article_location" 
	arg-article="!" 
	arg-extras="" 
	arg-blockType="!">

	<xf:if contentcheck="true">
		<div class="{{ $blockType == 'articles_grid' ? 'item-location' : 'contentRow-minor contentRow-minor--smaller contentRow-articleLocation' }}">
			<xf:contentcheck>{$article.getArticleLocationForList()}</xf:contentcheck>

			<xf:if is="$article.canViewArticleMap()">
				<a href="{{ link('ams/map-overlay', $article) }}" rel="nofollow" class="{{ $blockType == 'articles_grid' ? 'item-location-icon' : 'contentRow-articleLocationIcon' }}" data-xf-click="overlay"><xf:fa icon="fa-map-marker-alt" /></a>
			</xf:if>
		</div>	
	</xf:if>
</xf:macro>

<xf:macro name="article_meta" 
	arg-article="!" 
	arg-extras="">

	<xf:if contentcheck="true">										
		<ul class="listInline listInline--bullet">
		<xf:contentcheck>
			<xf:if is="$extras.username">
				<li>
					<xf:if is="$article.User.Profile.xa_ams_author_name">
						<xf:username user="{'user_id':{$article.User.user_id}, 'username':{$article.User.Profile.xa_ams_author_name}}" defaultname="{$article.User.Profile.xa_ams_author_name}" class="category-title" />
					<xf:else />
						<xf:username user="{$article.User}" defaultname="{{ $article.username ?: phrase('deleted_member') }}" class="category-title" />
					</xf:if>
				</li> 
			</xf:if>
			<xf:if is="$extras.publish_date">
				<li><time class="publish-date"><xf:date time="{$article.publish_date}" /></time></li> 

				<xf:if is="$article.last_update && $article.last_update > $article.publish_date">
					<li><time class="publish-date">{{ phrase('updated:') }} <xf:date time="{$article.last_update}" /></time></li>
				</xf:if>
			</xf:if>
			<xf:if is="$article.article_read_time && $extras.article_read_time">
				<li>{{ phrase('xa_ams_x_min_read', {'minutes': $article.article_read_time}) }}</li>
			</xf:if>
			<xf:if is="$extras.category_title">
				<li><a class="category-title category-{$article.category_id}" href="{{ link('ams/categories', $article) }}">{$article.Category.title}</a></li>
			</xf:if>
			<xf:if is="$extras.share_this_article">
				<li class="u-flexStretch"><a href="{{ link('ams', $article) }}"
					class="article-share"
					data-xf-init="share-tooltip"
					data-href="{{ link('ams/share', $article) }}"
					aria-label="{{ phrase('share')|for_attr }}"
					rel="nofollow">
					<xf:fa icon="fa-share-alt"/>
				</a></li>
			</xf:if>
		</xf:contentcheck>
		</ul>
	</xf:if>
</xf:macro>

<xf:macro name="footer" 
	arg-viewAllLink="!">

	<div class="carousel-footer">
		<a href="{$viewAllLink}">{{ phrase('xa_ams_view_more_articles') }}</a>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xa_ams_widget_articles_map" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:if is="$mapItems is not empty">
	<xf:css src="xa_ams.less" />

	<div class="block"{{ widget_data($widget) }} data-type="ams_article">
		<div class="block-container">
			<h3 class="block-header">
				<a href="{$link}" rel="nofollow">{{ $title ?: phrase('xa_ams_map') }}</a>
			</h3>
			<div class="block-body">
				<div class="block-row">			
					<xf:macro template="xa_ams_map_macros" name="articles_map"
						arg-mapItems="{$mapItems}"
						arg-mapId="ams-map-widget-{$widget.id}"
						arg-containerHeight="{{ $container_height ?: 400 }}" />					
				</div>
			</div>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="xa_ams_widget_articles_statistics" version_id="2000014" version_string="2.0.0 Alpha 4"><![CDATA[<div class="block"{{ widget_data($widget) }}>
	<div class="block-container">
		<h3 class="block-minorHeader">
			<a href="{{ link('ams') }}" rel="nofollow">{{ phrase('xa_ams_articles_statistics') }}</a>
		</h3>
		<div class="block-body block-row block-row--minor">
			<dl class="pairs pairs--justified">
				<dt>{{ phrase('categories') }}</dt>
				<dd>{$statsCache.category_count|number}</dd>
			</dl>
			<dl class="pairs pairs--justified">
				<dt>{{ phrase('xa_ams_articles') }}</dt>
				<dd>{$statsCache.article_count|number}</dd>
			</dl>
			<dl class="pairs pairs--justified">
				<dt>{{ phrase('xa_ams_series') }}</dt>
				<dd>{$statsCache.series_count|number}</dd>
			</dl>
			<dl class="pairs pairs--justified">
				<dt>{{ phrase('views') }}</dt>
				<dd>{$statsCache.view_count|number}</dd>
			</dl>
			<dl class="pairs pairs--justified">
				<dt>{{ phrase('comments') }}</dt>
				<dd>{$statsCache.comment_count|number}</dd>
			</dl>
			<dl class="pairs pairs--justified">
				<dt>{{ phrase('xa_ams_ratings') }}</dt>
				<dd>{$statsCache.rating_count|number}</dd>
			</dl>
			<dl class="pairs pairs--justified">
				<dt>{{ phrase('xa_ams_reviews') }}</dt>
				<dd>{$statsCache.review_count|number}</dd>
			</dl>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_widget_category_nav" version_id="2010370" version_string="2.1.3"><![CDATA[<div class="block"{{ widget_data($widget) }}>
	<div class="block-container">
		<h3 class="block-header">{{ $title ?: phrase('categories') }}</h3>		
		<div class="block-body">
			<xf:if is="$categoryTree.count()">
				<xf:macro template="xa_ams_category_list_macros" name="simple_category_list"
						  arg-children="{$categoryTree}"
						  arg-extras="{$categoryExtras}"
						  arg-isActive="{{ true }}"
						  arg-selected="{$selected}"
						  arg-pathToSelected="{{ $selected ? $categoryTree.getPathTo($selected) : [] }}" />
				<xf:else />
				<div class="block-row">{{ phrase('n_a') }}</div>
			</xf:if>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="xa_ams_widget_featured_articles" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:if is="$articles is not empty">

	<xf:set var="$headerLink" value="{{ link('ams/featured') }}" />

	<div class="block"{{ widget_data($widget) }} data-type="ams_article">
		<xf:if is="$style == 'featured_grid' && $articlesCount > 1  && $xf.visitor.hasAmsArticlePermission('viewArticleAttach')">
			<xf:css src="xa_ams.less" />
			<h3 class="block-header">
				<a href="{$headerLink}" rel="nofollow">{{ $title ?: phrase('xa_ams_featured_articles') }}</a>
			</h3>			
			<xf:macro template="xa_ams_featured_macros" name="featured_grid"
				arg-featuredArticles="{$articles}"
				arg-featuredArticlesCount="{$articlesCount}"
				arg-viewAllLink="{{ link('ams/featured') }}" />
		<xf:elseif is="$style == 'carousel' || $style == 'simple_carousel' || ($style == 'featured_grid' && ($articlesCount < 2 || !$xf.visitor.hasAmsArticlePermission('viewArticleAttach')))" />
			<xf:css src="xa_ams.less" />
			<h3 class="block-header">
				<a href="{$headerLink}" rel="nofollow">{{ $title ?: phrase('xa_ams_featured_articles') }}</a>
			</h3>
			<xf:if is="$style == 'simple_carousel'">
				<xf:macro template="xa_ams_widget_articles_macros" name="articles_carousel_simple"
					arg-articles="{$articles}"
					arg-viewAllLink="{{ link('ams/featured') }}" 
					arg-isFeaturedArticles="{{ true }}" />	
			<xf:else />			
				<xf:macro template="xa_ams_featured_macros" name="featured_carousel"
					arg-featuredArticles="{$articles}"
					arg-viewAllLink="{{ link('ams/featured') }}" />
			</xf:if>
		<xf:else />
			<div class="block-container">
				<xf:if is="$style == 'simple'">
					<h3 class="block-minorHeader">
						<a href="{$headerLink}" rel="nofollow">{{ $title ?: phrase('xa_ams_featured_articles') }}</a>
					</h3>
					<ul class="block-body">
						<xf:foreach loop="$articles" value="$article">
							<li class="block-row">
								<xf:macro template="xa_ams_article_list_macros" name="article_simple"
									arg-article="{$article}" />
							</li>
						</xf:foreach>
					</ul>
				<xf:elseif is="$style == 'article_view' && $xf.visitor.hasAmsArticlePermission('viewArticleAttach')" />
					<h3 class="block-header">
						<a href="{$headerLink}" rel="nofollow">{{ $title ?: phrase('xa_ams_featured_articles') }}</a>
					</h3>
					<div class="block-body">
						<xf:foreach loop="$articles" value="$article">
							<xf:macro template="xa_ams_article_list_macros" name="article_view_layout"
								arg-allowInlineMod="{{ false }}"
								arg-article="{$article}" />
						</xf:foreach>
					</div>
				<xf:elseif is="$style == 'grid_view' && $xf.visitor.hasAmsArticlePermission('viewArticleAttach')" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_grid_view_layout.less" />
					<h3 class="block-header">
						<a href="{$headerLink}" rel="nofollow">{{ $title ?: phrase('xa_ams_featured_articles') }}</a>
					</h3>
					<div class="block-body">
						<div class="gridContainerAmsGridView">		
							<ul class="ams-grid-view">
								<xf:foreach loop="$articles" value="$article">
									<xf:macro template="xa_ams_article_list_macros" name="grid_view_layout"
										arg-allowInlineMod="{{ false }}"									  
										arg-article="{$article}" />
								</xf:foreach>
							</ul>
						</div>
					</div>
				<xf:elseif is="$style == 'tile_view' && $xf.visitor.hasAmsArticlePermission('viewArticleAttach')" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_tile_view_layout.less" />

					<h3 class="block-header">
						<a href="{$headerLink}" rel="nofollow">{{ $title ?: phrase('xa_ams_featured_articles') }}</a>
					</h3>
					<div class="block-body">
						<div class="gridContainerAmsTileView">		
							<ul class="ams-tile-view">
								<xf:foreach loop="$articles" value="$article">
									<xf:macro template="xa_ams_article_list_macros" name="tile_view_layout"
										arg-allowInlineMod="{{ false }}"									  
										arg-article="{$article}" />
								</xf:foreach>
							</ul>
						</div>
					</div>
				<xf:else />
					<h3 class="block-header">
						<a href="{$headerLink}" rel="nofollow">{{ $title ?: phrase('xa_ams_featured_articles') }}</a>
					</h3>
					<div class="block-body">
						<div class="structItemContainer structItemContainerAmsListView">
							<xf:foreach loop="$articles" value="$article">
								<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
									arg-allowInlineMod="{{ false }}"
									arg-article="{$article}" />
							</xf:foreach>
						</div>
					</div>
				</xf:if>
			</div>
		</xf:if>
	</div>
</xf:if>]]></template>
  <template type="public" title="xa_ams_widget_featured_series" version_id="2011170" version_string="2.1.11"><![CDATA[<xf:if is="$series is not empty">
	<xf:css src="xa_ams.less" />
	<xf:set var="$headerLink" value="{{ link('ams/series/featured') }}" />

	<div class="block"{{ widget_data($widget) }} data-type="ams_series">
		<xf:if is="$style == 'carousel'" >
			<h3 class="block-header">
				<a href="{$headerLink}" rel="nofollow">{{ $title ?: phrase('xa_ams_featured_series') }}</a>
			</h3>			
			<xf:macro template="xa_ams_series_index_macros" name="featured_carousel"
				arg-featuredSeries="{$series}"
				arg-viewAllLink="{{ link('ams/series/featured') }}" 
				arg-isWidget="{{ true }}" />
		<xf:else />
			<div class="block-container">
				<xf:if is="$style == 'list_view'">
					<h3 class="block-header">
						<a href="{$headerLink}" rel="nofollow">{{ $title ?: phrase('xa_ams_featured_series') }}</a>
					</h3>
					<div class="block-body">
						<div class="structItemContainer">
							<xf:foreach loop="$series" value="$seriesItem">
								<xf:macro template="xa_ams_series_list_macros" name="series_list"
									arg-allowInlineMod="{{ false }}"
									arg-series="{$seriesItem}" />
							</xf:foreach>
						</div>
					</div>
				<xf:else />
					<h3 class="block-minorHeader">
						<a href="{$headerLink}" rel="nofollow">{{ $title ?: phrase('xa_ams_featured_series') }}</a>
					</h3>
					<ul class="block-body">
						<xf:foreach loop="$series" value="$seriesItem">
							<li class="block-row">
								<xf:macro template="xa_ams_series_list_macros" name="series_simple"
									arg-series="{$seriesItem}" />
							</li>
						</xf:foreach>
					</ul>
				</xf:if>
			</div>
		</xf:if>
	</div>
</xf:if>]]></template>
  <template type="public" title="xa_ams_widget_latest_articles" version_id="2022470" version_string="2.2.24"><![CDATA[<xf:if is="$articles is not empty">
	<div class="block"{{ widget_data($widget) }} data-type="ams_article">
		<xf:if is="$style == 'grid' && $articlesCount > 1 && $xf.visitor.hasAmsArticlePermission('viewArticleAttach')">
			<xf:css src="xa_ams.less" />
			<h3 class="block-header">
				<a href="{$link}" rel="nofollow">{{ $title ?: phrase('xa_ams_latest_articles') }}</a>
			</h3>
			<xf:macro template="xa_ams_widget_articles_macros" name="articles_grid"
				arg-articles="{$articles}"
				arg-articlesCount="{$articlesCount}"
				arg-viewAllLink="{$link}" />
		<xf:elseif is="$style == 'carousel' || $style == 'simple_carousel' || ($style == 'grid' && ($articlesCount < 2 || !$xf.visitor.hasAmsArticlePermission('viewArticleAttach')))" />
			<xf:css src="xa_ams.less" />
			<h3 class="block-header">
				<a href="{$link}" rel="nofollow">{{ $title ?: phrase('xa_ams_latest_articles') }}</a>
			</h3>
			<xf:if is="$style == 'simple_carousel'">
				<xf:macro template="xa_ams_widget_articles_macros" name="articles_carousel_simple"
					arg-articles="{$articles}"
					arg-viewAllLink="{$link}" />	
			<xf:else />
				<xf:macro template="xa_ams_widget_articles_macros" name="articles_carousel"
					arg-articles="{$articles}"
					arg-viewAllLink="{$link}" />
			</xf:if>
		<xf:else />
			<div class="block-container">
				<xf:if is="$style == 'simple'">
					<h3 class="block-minorHeader">
						<a href="{$link}" rel="nofollow">{{ $title ?: phrase('xa_ams_latest_articles') }}</a>
					</h3>
					<ul class="block-body">
						<xf:foreach loop="$articles" value="$article">
							<li class="block-row">
								<xf:macro template="xa_ams_article_list_macros" name="article_simple"
									arg-article="{$article}" />
							</li>
						</xf:foreach>
					</ul>
				<xf:elseif is="$style == 'article_view' && $xf.visitor.hasAmsArticlePermission('viewArticleAttach')" />
					<h3 class="block-header">
						<a href="{$link}" rel="nofollow">{{ $title ?: phrase('xa_ams_latest_articles') }}</a>
					</h3>
					<div class="block-body">
						<xf:foreach loop="$articles" value="$article">
							<xf:macro template="xa_ams_article_list_macros" name="article_view_layout"
								arg-allowInlineMod="{{ false }}"
								arg-article="{$article}" />
						</xf:foreach>
					</div>
				<xf:elseif is="$style == 'grid_view' && $xf.visitor.hasAmsArticlePermission('viewArticleAttach')" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_grid_view_layout.less" />
					<h3 class="block-header">
						<a href="{$link}" rel="nofollow">{{ $title ?: phrase('xa_ams_latest_articles') }}</a>
					</h3>
					<div class="block-body">
						<div class="gridContainerAmsGridView">		
							<ul class="ams-grid-view">
								<xf:foreach loop="$articles" value="$article">
									<xf:macro template="xa_ams_article_list_macros" name="grid_view_layout"
										arg-allowInlineMod="{{ false }}"									  
										arg-article="{$article}" />
								</xf:foreach>
							</ul>
						</div>
					</div>
				<xf:elseif is="$style == 'tile_view' && $xf.visitor.hasAmsArticlePermission('viewArticleAttach')" />
					<xf:css src="xa_ams.less" />
					<xf:css src="xa_ams_tile_view_layout.less" />

					<h3 class="block-header">
						<a href="{$link}" rel="nofollow">{{ $title ?: phrase('xa_ams_latest_articles') }}</a>
					</h3>
					<div class="block-body">
						<div class="gridContainerAmsTileView">		
							<ul class="ams-tile-view">
								<xf:foreach loop="$articles" value="$article">
									<xf:macro template="xa_ams_article_list_macros" name="tile_view_layout"
										arg-allowInlineMod="{{ false }}"									  
										arg-article="{$article}" />
								</xf:foreach>
							</ul>
						</div>
					</div>	
				<xf:else />
					<h3 class="block-header">
						<a href="{$link}" rel="nofollow">{{ $title ?: phrase('xa_ams_latest_articles') }}</a>
					</h3>
					<div class="block-body">
						<div class="structItemContainer structItemContainerAmsListView">
							<xf:foreach loop="$articles" value="$article">
								<xf:macro template="xa_ams_article_list_macros" name="list_view_layout"
									arg-allowInlineMod="{{ false }}"
									arg-article="{$article}" />
							</xf:foreach>
						</div>
					</div>
				</xf:if>
			</div>
		</xf:if>
	</div>
</xf:if>]]></template>
  <template type="public" title="xa_ams_widget_latest_comments" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:if is="$comments is not empty">
	<div class="block"{{ widget_data($widget) }}>
		<div class="block-container">
			<h3 class="block-minorHeader">
				<a href="{$link}" rel="nofollow">{{ $title ?: phrase('xa_ams_latest_comments') }}</a>
			</h3>
			<ul class="block-body">
				<xf:foreach loop="$comments" value="$comment">
					<li class="block-row">
						<xf:macro template="xa_ams_comment_macros" name="comment_simple"
							arg-comment="{$comment}"
							arg-content="{$comment.Content}" />
					</li>
				</xf:foreach>
			</ul>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="xa_ams_widget_latest_reviews" version_id="2000011" version_string="2.0.0 Alpha 1"><![CDATA[<xf:if is="$reviews is not empty">
	<div class="block"{{ widget_data($widget) }}>
		<div class="block-container">
			<h3 class="block-minorHeader">
				<a href="{{ link('ams/latest-reviews') }}" rel="nofollow">{{ $title ?: phrase('xa_ams_latest_reviews') }}</a>
			</h3>
			<ul class="block-body">
				<xf:foreach loop="$reviews" value="$review">
					<li class="block-row">
						<xf:macro template="xa_ams_review_macros" name="review_simple"
							arg-review="{$review}" />
					</li>
				</xf:foreach>
			</ul>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="xa_ams_widget_latest_series" version_id="2011170" version_string="2.1.11"><![CDATA[<xf:if is="$series is not empty">
	<xf:css src="xa_ams.less" />

	<div class="block"{{ widget_data($widget) }} data-type="ams_series">
		<xf:if is="$style == 'carousel'">
			<h3 class="block-header">
				<a href="{$link}" rel="nofollow">{{ $title ?: phrase('xa_ams_latest_series') }}</a>
			</h3>
			<xf:macro template="xa_ams_series_index_macros" name="series_carousel"
				arg-series="{$series}"
				arg-viewAllLink="{$link}" 
				arg-isWidget="{{ true }}" />
		<xf:else />
			<div class="block-container">
				<xf:if is="$style == 'list_view'">
					<h3 class="block-header">
						<a href="{$link}" rel="nofollow">{{ $title ?: phrase('xa_ams_latest_series') }}</a>
					</h3>
					<div class="block-body">
						<div class="structItemContainer">
							<xf:foreach loop="$series" value="$seriesItem">
								<xf:macro template="xa_ams_series_list_macros" name="series_list"
									arg-allowInlineMod="{{ false }}"
									arg-series="{$seriesItem}" />
							</xf:foreach>
						</div>
					</div>
				<xf:else />
					<h3 class="block-minorHeader">
						<a href="{$link}" rel="nofollow">{{ $title ?: phrase('xa_ams_latest_series') }}</a>
					</h3>
					<ul class="block-body">
						<xf:foreach loop="$series" value="$seriesItem">
							<li class="block-row">
								<xf:macro template="xa_ams_series_list_macros" name="series_simple"
									arg-series="{$seriesItem}" />
							</li>
						</xf:foreach>
					</ul>
				</xf:if>
			</div>
		</xf:if>
	</div>
</xf:if>]]></template>
  <template type="public" title="xa_ams_widget_series_poll" version_id="2011370" version_string="2.1.13"><![CDATA[<xf:macro template="poll_macros" name="poll_block" arg-poll="{$poll}" arg-simpleDisplay="{{ true }}" arg-forceTitle="{$title}" />]]></template>
</templates>
